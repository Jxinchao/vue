/*!
 * Bootstrap v3.3.5 (http://getbootstrap.com)
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under the MIT license
 */if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(e){"use strict";var t=e.fn.jquery.split(" ")[0].split(".");if(t[0]<2&&t[1]<9||1==t[0]&&9==t[1]&&t[2]<1)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher")}(jQuery),+function(e){"use strict";function t(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in t)if(void 0!==e.style[n])return{end:t[n]};return!1}e.fn.emulateTransitionEnd=function(t){var n=!1,r=this;e(this).one("bsTransitionEnd",function(){n=!0});var i=function(){n||e(r).trigger(e.support.transition.end)};return setTimeout(i,t),this},e(function(){e.support.transition=t(),e.support.transition&&(e.event.special.bsTransitionEnd={bindType:e.support.transition.end,delegateType:e.support.transition.end,handle:function(t){return e(t.target).is(this)?t.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var n=e(this),i=n.data("bs.alert");i||n.data("bs.alert",i=new r(this)),"string"==typeof t&&i[t].call(n)})}var n='[data-dismiss="alert"]',r=function(t){e(t).on("click",n,this.close)};r.VERSION="3.3.5",r.TRANSITION_DURATION=150,r.prototype.close=function(t){function n(){o.detach().trigger("closed.bs.alert").remove()}var i=e(this),s=i.attr("data-target");s||(s=i.attr("href"),s=s&&s.replace(/.*(?=#[^\s]*$)/,""));var o=e(s);t&&t.preventDefault(),o.length||(o=i.closest(".alert")),o.trigger(t=e.Event("close.bs.alert")),t.isDefaultPrevented()||(o.removeClass("in"),e.support.transition&&o.hasClass("fade")?o.one("bsTransitionEnd",n).emulateTransitionEnd(r.TRANSITION_DURATION):n())};var i=e.fn.alert;e.fn.alert=t,e.fn.alert.Constructor=r,e.fn.alert.noConflict=function(){return e.fn.alert=i,this},e(document).on("click.bs.alert.data-api",n,r.prototype.close)}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var r=e(this),i=r.data("bs.button"),s="object"==typeof t&&t;i||r.data("bs.button",i=new n(this,s)),"toggle"==t?i.toggle():t&&i.setState(t)})}var n=function(t,r){this.$element=e(t),this.options=e.extend({},n.DEFAULTS,r),this.isLoading=!1};n.VERSION="3.3.5",n.DEFAULTS={loadingText:"loading..."},n.prototype.setState=function(t){var n="disabled",r=this.$element,i=r.is("input")?"val":"html",s=r.data();t+="Text",null==s.resetText&&r.data("resetText",r[i]()),setTimeout(e.proxy(function(){r[i](null==s[t]?this.options[t]:s[t]),"loadingText"==t?(this.isLoading=!0,r.addClass(n).attr(n,n)):this.isLoading&&(this.isLoading=!1,r.removeClass(n).removeAttr(n))},this),0)},n.prototype.toggle=function(){var e=!0,t=this.$element.closest('[data-toggle="buttons"]');if(t.length){var n=this.$element.find("input");"radio"==n.prop("type")?(n.prop("checked")&&(e=!1),t.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==n.prop("type")&&(n.prop("checked")!==this.$element.hasClass("active")&&(e=!1),this.$element.toggleClass("active")),n.prop("checked",this.$element.hasClass("active")),e&&n.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var r=e.fn.button;e.fn.button=t,e.fn.button.Constructor=n,e.fn.button.noConflict=function(){return e.fn.button=r,this},e(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(n){var r=e(n.target);r.hasClass("btn")||(r=r.closest(".btn")),t.call(r,"toggle"),e(n.target).is('input[type="radio"]')||e(n.target).is('input[type="checkbox"]')||n.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(t){e(t.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(t.type))})}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var r=e(this),i=r.data("bs.carousel"),s=e.extend({},n.DEFAULTS,r.data(),"object"==typeof t&&t),o="string"==typeof t?t:s.slide;i||r.data("bs.carousel",i=new n(this,s)),"number"==typeof t?i.to(t):o?i[o]():s.interval&&i.pause().cycle()})}var n=function(t,n){this.$element=e(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",e.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",e.proxy(this.pause,this)).on("mouseleave.bs.carousel",e.proxy(this.cycle,this))};n.VERSION="3.3.5",n.TRANSITION_DURATION=600,n.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},n.prototype.keydown=function(e){if(!/input|textarea/i.test(e.target.tagName)){switch(e.which){case 37:this.prev();break;case 39:this.next();break;default:return}e.preventDefault()}},n.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},n.prototype.getItemIndex=function(e){return this.$items=e.parent().children(".item"),this.$items.index(e||this.$active)},n.prototype.getItemForDirection=function(e,t){var n=this.getItemIndex(t),r="prev"==e&&0===n||"next"==e&&n==this.$items.length-1;if(r&&!this.options.wrap)return t;var i="prev"==e?-1:1,s=(n+i)%this.$items.length;return this.$items.eq(s)},n.prototype.to=function(e){var t=this,n=this.getItemIndex(this.$active=this.$element.find(".item.active"));return e>this.$items.length-1||0>e?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){t.to(e)}):n==e?this.pause().cycle():this.slide(e>n?"next":"prev",this.$items.eq(e))},n.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition&&(this.$element.trigger(e.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},n.prototype.next=function(){return this.sliding?void 0:this.slide("next")},n.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},n.prototype.slide=function(t,r){var i=this.$element.find(".item.active"),s=r||this.getItemForDirection(t,i),o=this.interval,u="next"==t?"left":"right",f=this;if(s.hasClass("active"))return this.sliding=!1;var l=s[0],h=e.Event("slide.bs.carousel",{relatedTarget:l,direction:u});if(this.$element.trigger(h),!h.isDefaultPrevented()){if(this.sliding=!0,o&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var p=e(this.$indicators.children()[this.getItemIndex(s)]);p&&p.addClass("active")}var d=e.Event("slid.bs.carousel",{relatedTarget:l,direction:u});return e.support.transition&&this.$element.hasClass("slide")?(s.addClass(t),s[0].offsetWidth,i.addClass(u),s.addClass(u),i.one("bsTransitionEnd",function(){s.removeClass([t,u].join(" ")).addClass("active"),i.removeClass(["active",u].join(" ")),f.sliding=!1,setTimeout(function(){f.$element.trigger(d)},0)}).emulateTransitionEnd(n.TRANSITION_DURATION)):(i.removeClass("active"),s.addClass("active"),this.sliding=!1,this.$element.trigger(d)),o&&this.cycle(),this}};var r=e.fn.carousel;e.fn.carousel=t,e.fn.carousel.Constructor=n,e.fn.carousel.noConflict=function(){return e.fn.carousel=r,this};var i=function(n){var r,i=e(this),s=e(i.attr("data-target")||(r=i.attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,""));if(s.hasClass("carousel")){var o=e.extend({},s.data(),i.data()),u=i.attr("data-slide-to");u&&(o.interval=!1),t.call(s,o),u&&s.data("bs.carousel").to(u),n.preventDefault()}};e(document).on("click.bs.carousel.data-api","[data-slide]",i).on("click.bs.carousel.data-api","[data-slide-to]",i),e(window).on("load",function(){e('[data-ride="carousel"]').each(function(){var n=e(this);t.call(n,n.data())})})}(jQuery),+function(e){"use strict";function t(t){var n,r=t.attr("data-target")||(n=t.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"");return e(r)}function n(t){return this.each(function(){var n=e(this),i=n.data("bs.collapse"),s=e.extend({},r.DEFAULTS,n.data(),"object"==typeof t&&t);!i&&s.toggle&&/show|hide/.test(t)&&(s.toggle=!1),i||n.data("bs.collapse",i=new r(this,s)),"string"==typeof t&&i[t]()})}var r=function(t,n){this.$element=e(t),this.options=e.extend({},r.DEFAULTS,n),this.$trigger=e('[data-toggle="collapse"][href="#'+t.id+'"],[data-toggle="collapse"][data-target="#'+t.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};r.VERSION="3.3.5",r.TRANSITION_DURATION=350,r.DEFAULTS={toggle:!0},r.prototype.dimension=function(){var e=this.$element.hasClass("width");return e?"width":"height"},r.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var t,i=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(i&&i.length&&(t=i.data("bs.collapse"),t&&t.transitioning))){var s=e.Event("show.bs.collapse");if(this.$element.trigger(s),!s.isDefaultPrevented()){i&&i.length&&(n.call(i,"hide"),t||i.data("bs.collapse",null));var o=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[o](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var u=function(){this.$element.removeClass("collapsing").addClass("collapse in")[o](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!e.support.transition)return u.call(this);var f=e.camelCase(["scroll",o].join("-"));this.$element.one("bsTransitionEnd",e.proxy(u,this)).emulateTransitionEnd(r.TRANSITION_DURATION)[o](this.$element[0][f])}}}},r.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var t=e.Event("hide.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var n=this.dimension();this.$element[n](this.$element[n]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var i=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return e.support.transition?void this.$element[n](0).one("bsTransitionEnd",e.proxy(i,this)).emulateTransitionEnd(r.TRANSITION_DURATION):i.call(this)}}},r.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},r.prototype.getParent=function(){return e(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(e.proxy(function(n,r){var i=e(r);this.addAriaAndCollapsedClass(t(i),i)},this)).end()},r.prototype.addAriaAndCollapsedClass=function(e,t){var n=e.hasClass("in");e.attr("aria-expanded",n),t.toggleClass("collapsed",!n).attr("aria-expanded",n)};var i=e.fn.collapse;e.fn.collapse=n,e.fn.collapse.Constructor=r,e.fn.collapse.noConflict=function(){return e.fn.collapse=i,this},e(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(r){var i=e(this);i.attr("data-target")||r.preventDefault();var s=t(i),o=s.data("bs.collapse"),u=o?"toggle":i.data();n.call(s,u)})}(jQuery),+function(e){"use strict";function t(t){var n=t.attr("data-target");n||(n=t.attr("href"),n=n&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var r=n&&e(n);return r&&r.length?r:t.parent()}function n(n){n&&3===n.which||(e(i).remove(),e(s).each(function(){var r=e(this),i=t(r),s={relatedTarget:this};i.hasClass("open")&&(n&&"click"==n.type&&/input|textarea/i.test(n.target.tagName)&&e.contains(i[0],n.target)||(i.trigger(n=e.Event("hide.bs.dropdown",s)),n.isDefaultPrevented()||(r.attr("aria-expanded","false"),i.removeClass("open").trigger("hidden.bs.dropdown",s))))}))}function r(t){return this.each(function(){var n=e(this),r=n.data("bs.dropdown");r||n.data("bs.dropdown",r=new o(this)),"string"==typeof t&&r[t].call(n)})}var i=".dropdown-backdrop",s='[data-toggle="dropdown"]',o=function(t){e(t).on("click.bs.dropdown",this.toggle)};o.VERSION="3.3.5",o.prototype.toggle=function(r){var i=e(this);if(!i.is(".disabled, :disabled")){var s=t(i),o=s.hasClass("open");if(n(),!o){"ontouchstart"in document.documentElement&&!s.closest(".navbar-nav").length&&e(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(e(this)).on("click",n);var u={relatedTarget:this};if(s.trigger(r=e.Event("show.bs.dropdown",u)),r.isDefaultPrevented())return;i.trigger("focus").attr("aria-expanded","true"),s.toggleClass("open").trigger("shown.bs.dropdown",u)}return!1}},o.prototype.keydown=function(n){if(/(38|40|27|32)/.test(n.which)&&!/input|textarea/i.test(n.target.tagName)){var r=e(this);if(n.preventDefault(),n.stopPropagation(),!r.is(".disabled, :disabled")){var i=t(r),o=i.hasClass("open");if(!o&&27!=n.which||o&&27==n.which)return 27==n.which&&i.find(s).trigger("focus"),r.trigger("click");var u=" li:not(.disabled):visible a",l=i.find(".dropdown-menu"+u);if(l.length){var c=l.index(n.target);38==n.which&&c>0&&c--,40==n.which&&c<l.length-1&&c++,~c||(c=0),l.eq(c).trigger("focus")}}}};var u=e.fn.dropdown;e.fn.dropdown=r,e.fn.dropdown.Constructor=o,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=u,this},e(document).on("click.bs.dropdown.data-api",n).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",s,o.prototype.toggle).on("keydown.bs.dropdown.data-api",s,o.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",o.prototype.keydown)}(jQuery),+function(e){"use strict";function t(t,r){return this.each(function(){var i=e(this),s=i.data("bs.modal"),o=e.extend({},n.DEFAULTS,i.data(),"object"==typeof t&&t);s||i.data("bs.modal",s=new n(this,o)),"string"==typeof t?s[t](r):o.show&&s.show(r)})}var n=function(t,n){this.options=n,this.$body=e(document.body),this.$element=e(t),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,e.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};n.VERSION="3.3.5",n.TRANSITION_DURATION=300,n.BACKDROP_TRANSITION_DURATION=150,n.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},n.prototype.toggle=function(e){return this.isShown?this.hide():this.show(e)},n.prototype.show=function(t){var r=this,i=e.Event("show.bs.modal",{relatedTarget:t});this.$element.trigger(i),this.isShown||i.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){r.$element.one("mouseup.dismiss.bs.modal",function(t){e(t.target).is(r.$element)&&(r.ignoreBackdropClick=!0)})}),this.backdrop(function(){var i=e.support.transition&&r.$element.hasClass("fade");r.$element.parent().length||r.$element.appendTo(r.$body),r.$element.show().scrollTop(0),r.adjustDialog(),i&&r.$element[0].offsetWidth,r.$element.addClass("in"),r.enforceFocus();var s=e.Event("shown.bs.modal",{relatedTarget:t});i?r.$dialog.one("bsTransitionEnd",function(){r.$element.trigger("focus").trigger(s)}).emulateTransitionEnd(n.TRANSITION_DURATION):r.$element.trigger("focus").trigger(s)}))},n.prototype.hide=function(t){t&&t.preventDefault(),t=e.Event("hide.bs.modal"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),e(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),e.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",e.proxy(this.hideModal,this)).emulateTransitionEnd(n.TRANSITION_DURATION):this.hideModal())},n.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy(function(e){this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.trigger("focus")},this))},n.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",e.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},n.prototype.resize=function(){this.isShown?e(window).on("resize.bs.modal",e.proxy(this.handleUpdate,this)):e(window).off("resize.bs.modal")},n.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.$body.removeClass("modal-open"),e.resetAdjustments(),e.resetScrollbar(),e.$element.trigger("hidden.bs.modal")})},n.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},n.prototype.backdrop=function(t){var r=this,i=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var s=e.support.transition&&i;if(this.$backdrop=e(document.createElement("div")).addClass("modal-backdrop "+i).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",e.proxy(function(e){return this.ignoreBackdropClick?void (this.ignoreBackdropClick=!1):void (e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),s&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;s?this.$backdrop.one("bsTransitionEnd",t).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):t()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var o=function(){r.removeBackdrop(),t&&t()};e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",o).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):o()}else t&&t()},n.prototype.handleUpdate=function(){this.adjustDialog()},n.prototype.adjustDialog=function(){var e=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&e?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!e?this.scrollbarWidth:""})},n.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},n.prototype.checkScrollbar=function(){var e=window.innerWidth;if(!e){var t=document.documentElement.getBoundingClientRect();e=t.right-Math.abs(t.left)}this.bodyIsOverflowing=document.body.clientWidth<e,this.scrollbarWidth=this.measureScrollbar()},n.prototype.setScrollbar=function(){var e=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",e+this.scrollbarWidth)},n.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},n.prototype.measureScrollbar=function(){var e=document.createElement("div");e.className="modal-scrollbar-measure",this.$body.append(e);var t=e.offsetWidth-e.clientWidth;return this.$body[0].removeChild(e),t};var r=e.fn.modal;e.fn.modal=t,e.fn.modal.Constructor=n,e.fn.modal.noConflict=function(){return e.fn.modal=r,this},e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(n){var r=e(this),i=r.attr("href"),s=e(r.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,"")),o=s.data("bs.modal")?"toggle":e.extend({remote:!/#/.test(i)&&i},s.data(),r.data());r.is("a")&&n.preventDefault(),s.one("show.bs.modal",function(e){e.isDefaultPrevented()||s.one("hidden.bs.modal",function(){r.is(":visible")&&r.trigger("focus")})}),t.call(s,o,this)})}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var r=e(this),i=r.data("bs.tooltip"),s="object"==typeof t&&t;(i||!/destroy|hide/.test(t))&&(i||r.data("bs.tooltip",i=new n(this,s)),"string"==typeof t&&i[t]())})}var n=function(e,t){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",e,t)};n.VERSION="3.3.5",n.TRANSITION_DURATION=150,n.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},n.prototype.init=function(t,n,r){if(this.enabled=!0,this.type=t,this.$element=e(n),this.options=this.getOptions(r),this.$viewport=this.options.viewport&&e(e.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var i=this.options.trigger.split(" "),s=i.length;s--;){var o=i[s];if("click"==o)this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this));else if("manual"!=o){var u="hover"==o?"mouseenter":"focusin",f="hover"==o?"mouseleave":"focusout";this.$element.on(u+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(f+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.getOptions=function(t){return t=e.extend({},this.getDefaults(),this.$element.data(),t),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},n.prototype.getDelegateOptions=function(){var t={},n=this.getDefaults();return this._options&&e.each(this._options,function(e,r){n[e]!=r&&(t[e]=r)}),t},n.prototype.enter=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);return n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),t instanceof e.Event&&(n.inState["focusin"==t.type?"focus":"hover"]=!0),n.tip().hasClass("in")||"in"==n.hoverState?void (n.hoverState="in"):(clearTimeout(n.timeout),n.hoverState="in",n.options.delay&&n.options.delay.show?void (n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)):n.show())},n.prototype.isInStateTrue=function(){for(var e in this.inState)if(this.inState[e])return!0;return!1},n.prototype.leave=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);return n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),t instanceof e.Event&&(n.inState["focusout"==t.type?"focus":"hover"]=!1),n.isInStateTrue()?void 0:(clearTimeout(n.timeout),n.hoverState="out",n.options.delay&&n.options.delay.hide?void (n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)):n.hide())},n.prototype.show=function(){var t=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(t);var r=e.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(t.isDefaultPrevented()||!r)return;var i=this,s=this.tip(),o=this.getUID(this.type);this.setContent(),s.attr("id",o),this.$element.attr("aria-describedby",o),this.options.animation&&s.addClass("fade");var u="function"==typeof this.options.placement?this.options.placement.call(this,s[0],this.$element[0]):this.options.placement,f=/\s?auto?\s?/i,l=f.test(u);l&&(u=u.replace(f,"")||"top"),s.detach().css({top:0,left:0,display:"block"}).addClass(u).data("bs."+this.type,this),this.options.container?s.appendTo(this.options.container):s.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var h=this.getPosition(),p=s[0].offsetWidth,d=s[0].offsetHeight;if(l){var v=u,m=this.getPosition(this.$viewport);u="bottom"==u&&h.bottom+d>m.bottom?"top":"top"==u&&h.top-d<m.top?"bottom":"right"==u&&h.right+p>m.width?"left":"left"==u&&h.left-p<m.left?"right":u,s.removeClass(v).addClass(u)}var g=this.getCalculatedOffset(u,h,p,d);this.applyPlacement(g,u);var y=function(){var e=i.hoverState;i.$element.trigger("shown.bs."+i.type),i.hoverState=null,"out"==e&&i.leave(i)};e.support.transition&&this.$tip.hasClass("fade")?s.one("bsTransitionEnd",y).emulateTransitionEnd(n.TRANSITION_DURATION):y()}},n.prototype.applyPlacement=function(t,n){var r=this.tip(),i=r[0].offsetWidth,s=r[0].offsetHeight,o=parseInt(r.css("margin-top"),10),u=parseInt(r.css("margin-left"),10);isNaN(o)&&(o=0),isNaN(u)&&(u=0),t.top+=o,t.left+=u,e.offset.setOffset(r[0],e.extend({using:function(e){r.css({top:Math.round(e.top),left:Math.round(e.left)})}},t),0),r.addClass("in");var f=r[0].offsetWidth,l=r[0].offsetHeight;"top"==n&&l!=s&&(t.top=t.top+s-l);var c=this.getViewportAdjustedDelta(n,t,f,l);c.left?t.left+=c.left:t.top+=c.top;var h=/top|bottom/.test(n),p=h?2*c.left-i+f:2*c.top-s+l,d=h?"offsetWidth":"offsetHeight";r.offset(t),this.replaceArrow(p,r[0][d],h)},n.prototype.replaceArrow=function(e,t,n){this.arrow().css(n?"left":"top",50*(1-e/t)+"%").css(n?"top":"left","")},n.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},n.prototype.hide=function(t){function r(){"in"!=i.hoverState&&s.detach(),i.$element.removeAttr("aria-describedby").trigger("hidden.bs."+i.type),t&&t()}var i=this,s=e(this.$tip),o=e.Event("hide.bs."+this.type);return this.$element.trigger(o),o.isDefaultPrevented()?void 0:(s.removeClass("in"),e.support.transition&&s.hasClass("fade")?s.one("bsTransitionEnd",r).emulateTransitionEnd(n.TRANSITION_DURATION):r(),this.hoverState=null,this)},n.prototype.fixTitle=function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},n.prototype.hasContent=function(){return this.getTitle()},n.prototype.getPosition=function(t){t=t||this.$element;var n=t[0],r="BODY"==n.tagName,i=n.getBoundingClientRect();null==i.width&&(i=e.extend({},i,{width:i.right-i.left,height:i.bottom-i.top}));var s=r?{top:0,left:0}:t.offset(),o={scroll:r?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop()},u=r?{width:e(window).width(),height:e(window).height()}:null;return e.extend({},i,o,u,s)},n.prototype.getCalculatedOffset=function(e,t,n,r){return"bottom"==e?{top:t.top+t.height,left:t.left+t.width/2-n/2}:"top"==e?{top:t.top-r,left:t.left+t.width/2-n/2}:"left"==e?{top:t.top+t.height/2-r/2,left:t.left-n}:{top:t.top+t.height/2-r/2,left:t.left+t.width}},n.prototype.getViewportAdjustedDelta=function(e,t,n,r){var i={top:0,left:0};if(!this.$viewport)return i;var s=this.options.viewport&&this.options.viewport.padding||0,o=this.getPosition(this.$viewport);if(/right|left/.test(e)){var u=t.top-s-o.scroll,a=t.top+s-o.scroll+r;u<o.top?i.top=o.top-u:a>o.top+o.height&&(i.top=o.top+o.height-a)}else{var f=t.left-s,l=t.left+s+n;f<o.left?i.left=o.left-f:l>o.right&&(i.left=o.left+o.width-l)}return i},n.prototype.getTitle=function(){var e,t=this.$element,n=this.options;return e=t.attr("data-original-title")||("function"==typeof n.title?n.title.call(t[0]):n.title)},n.prototype.getUID=function(e){do e+=~~(1e6*Math.random());while(document.getElementById(e));return e},n.prototype.tip=function(){if(!this.$tip&&(this.$tip=e(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},n.prototype.enable=function(){this.enabled=!0},n.prototype.disable=function(){this.enabled=!1},n.prototype.toggleEnabled=function(){this.enabled=!this.enabled},n.prototype.toggle=function(t){var n=this;t&&(n=e(t.currentTarget).data("bs."+this.type),n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n))),t?(n.inState.click=!n.inState.click,n.isInStateTrue()?n.enter(n):n.leave(n)):n.tip().hasClass("in")?n.leave(n):n.enter(n)},n.prototype.destroy=function(){var e=this;clearTimeout(this.timeout),this.hide(function(){e.$element.off("."+e.type).removeData("bs."+e.type),e.$tip&&e.$tip.detach(),e.$tip=null,e.$arrow=null,e.$viewport=null})};var r=e.fn.tooltip;e.fn.tooltip=t,e.fn.tooltip.Constructor=n,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=r,this}}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var r=e(this),i=r.data("bs.popover"),s="object"==typeof t&&t;(i||!/destroy|hide/.test(t))&&(i||r.data("bs.popover",i=new n(this,s)),"string"==typeof t&&i[t]())})}var n=function(e,t){this.init("popover",e,t)};if(!e.fn.tooltip)throw new Error("Popover requires tooltip.js");n.VERSION="3.3.5",n.DEFAULTS=e.extend({},e.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),n.prototype=e.extend({},e.fn.tooltip.Constructor.prototype),n.prototype.constructor=n,n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.setContent=function(){var e=this.tip(),t=this.getTitle(),n=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof n?"html":"append":"text"](n),e.removeClass("fade top bottom left right in"),e.find(".popover-title").html()||e.find(".popover-title").hide()},n.prototype.hasContent=function(){return this.getTitle()||this.getContent()},n.prototype.getContent=function(){var e=this.$element,t=this.options;return e.attr("data-content")||("function"==typeof t.content?t.content.call(e[0]):t.content)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var r=e.fn.popover;e.fn.popover=t,e.fn.popover.Constructor=n,e.fn.popover.noConflict=function(){return e.fn.popover=r,this}}(jQuery),+function(e){"use strict";function t(n,r){this.$body=e(document.body),this.$scrollElement=e(e(n).is(document.body)?window:n),this.options=e.extend({},t.DEFAULTS,r),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",e.proxy(this.process,this)),this.refresh(),this.process()}function n(n){return this.each(function(){var r=e(this),i=r.data("bs.scrollspy"),s="object"==typeof n&&n;i||r.data("bs.scrollspy",i=new t(this,s)),"string"==typeof n&&i[n]()})}t.VERSION="3.3.5",t.DEFAULTS={offset:10},t.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},t.prototype.refresh=function(){var t=this,n="offset",r=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),e.isWindow(this.$scrollElement[0])||(n="position",r=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var t=e(this),i=t.data("target")||t.attr("href"),s=/^#./.test(i)&&e(i);return s&&s.length&&s.is(":visible")&&[[s[n]().top+r,i]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){t.offsets.push(this[0]),t.targets.push(this[1])})},t.prototype.process=function(){var e,t=this.$scrollElement.scrollTop()+this.options.offset,n=this.getScrollHeight(),r=this.options.offset+n-this.$scrollElement.height(),i=this.offsets,s=this.targets,o=this.activeTarget;if(this.scrollHeight!=n&&this.refresh(),t>=r)return o!=(e=s[s.length-1])&&this.activate(e);if(o&&t<i[0])return this.activeTarget=null,this.clear();for(e=i.length;e--;)o!=s[e]&&t>=i[e]&&(void 0===i[e+1]||t<i[e+1])&&this.activate(s[e])},t.prototype.activate=function(t){this.activeTarget=t,this.clear();var n=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',r=e(n).parents("li").addClass("active");r.parent(".dropdown-menu").length&&(r=r.closest("li.dropdown").addClass("active")),r.trigger("activate.bs.scrollspy")},t.prototype.clear=function(){e(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var r=e.fn.scrollspy;e.fn.scrollspy=n,e.fn.scrollspy.Constructor=t,e.fn.scrollspy.noConflict=function(){return e.fn.scrollspy=r,this},e(window).on("load.bs.scrollspy.data-api",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);n.call(t,t.data())})})}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var r=e(this),i=r.data("bs.tab");i||r.data("bs.tab",i=new n(this)),"string"==typeof t&&i[t]()})}var n=function(t){this
.element=e(t)};n.VERSION="3.3.5",n.TRANSITION_DURATION=150,n.prototype.show=function(){var t=this.element,n=t.closest("ul:not(.dropdown-menu)"),r=t.data("target");if(r||(r=t.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,"")),!t.parent("li").hasClass("active")){var i=n.find(".active:last a"),s=e.Event("hide.bs.tab",{relatedTarget:t[0]}),o=e.Event("show.bs.tab",{relatedTarget:i[0]});if(i.trigger(s),t.trigger(o),!o.isDefaultPrevented()&&!s.isDefaultPrevented()){var u=e(r);this.activate(t.closest("li"),n),this.activate(u,u.parent(),function(){i.trigger({type:"hidden.bs.tab",relatedTarget:t[0]}),t.trigger({type:"shown.bs.tab",relatedTarget:i[0]})})}}},n.prototype.activate=function(t,r,i){function s(){o.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),t.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),u?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu").length&&t.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),i&&i()}var o=r.find("> .active"),u=i&&e.support.transition&&(o.length&&o.hasClass("fade")||!!r.find("> .fade").length);o.length&&u?o.one("bsTransitionEnd",s).emulateTransitionEnd(n.TRANSITION_DURATION):s(),o.removeClass("in")};var r=e.fn.tab;e.fn.tab=t,e.fn.tab.Constructor=n,e.fn.tab.noConflict=function(){return e.fn.tab=r,this};var i=function(n){n.preventDefault(),t.call(e(this),"show")};e(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',i).on("click.bs.tab.data-api",'[data-toggle="pill"]',i)}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var r=e(this),i=r.data("bs.affix"),s="object"==typeof t&&t;i||r.data("bs.affix",i=new n(this,s)),"string"==typeof t&&i[t]()})}var n=function(t,r){this.options=e.extend({},n.DEFAULTS,r),this.$target=e(this.options.target).on("scroll.bs.affix.data-api",e.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",e.proxy(this.checkPositionWithEventLoop,this)),this.$element=e(t),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};n.VERSION="3.3.5",n.RESET="affix affix-top affix-bottom",n.DEFAULTS={offset:0,target:window},n.prototype.getState=function(e,t,n,r){var i=this.$target.scrollTop(),s=this.$element.offset(),o=this.$target.height();if(null!=n&&"top"==this.affixed)return n>i?"top":!1;if("bottom"==this.affixed)return null!=n?i+this.unpin<=s.top?!1:"bottom":e-r>=i+o?!1:"bottom";var u=null==this.affixed,a=u?i:s.top,f=u?o:t;return null!=n&&n>=i?"top":null!=r&&a+f>=e-r?"bottom":!1},n.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(n.RESET).addClass("affix");var e=this.$target.scrollTop(),t=this.$element.offset();return this.pinnedOffset=t.top-e},n.prototype.checkPositionWithEventLoop=function(){setTimeout(e.proxy(this.checkPosition,this),1)},n.prototype.checkPosition=function(){if(this.$element.is(":visible")){var t=this.$element.height(),r=this.options.offset,i=r.top,s=r.bottom,o=Math.max(e(document).height(),e(document.body).height());"object"!=typeof r&&(s=i=r),"function"==typeof i&&(i=r.top(this.$element)),"function"==typeof s&&(s=r.bottom(this.$element));var u=this.getState(o,t,i,s);if(this.affixed!=u){null!=this.unpin&&this.$element.css("top","");var f="affix"+(u?"-"+u:""),l=e.Event(f+".bs.affix");if(this.$element.trigger(l),l.isDefaultPrevented())return;this.affixed=u,this.unpin="bottom"==u?this.getPinnedOffset():null,this.$element.removeClass(n.RESET).addClass(f).trigger(f.replace("affix","affixed")+".bs.affix")}"bottom"==u&&this.$element.offset({top:o-t-s})}};var r=e.fn.affix;e.fn.affix=t,e.fn.affix.Constructor=n,e.fn.affix.noConflict=function(){return e.fn.affix=r,this},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var n=e(this),r=n.data();r.offset=r.offset||{},null!=r.offsetBottom&&(r.offset.bottom=r.offsetBottom),null!=r.offsetTop&&(r.offset.top=r.offsetTop),t.call(n,r)})})}(jQuery),function(e,t){typeof exports=="object"&&typeof module!="undefined"?t(require("jquery")):typeof define=="function"&&define.amd?define(["jquery"],t):t(e.jQuery)}(this,function(e){"use strict";function E(e){return function(t){return e===t}}function S(e,t){return e===t}function x(e){return function(t,n){return t[e]===n[e]}}function T(){return!0}function N(){return!1}function C(e){return function(){return!e.apply(e,arguments)}}function k(e,t){return function(n){return e(n)&&t(n)}}function L(e){return e}function A(e,t){return function(){return e[t].apply(e,arguments)}}function M(e){var t=++O+"";return e?e+t:t}function _(e){var t=$(document);return{top:e.top+t.scrollTop(),left:e.left+t.scrollLeft(),width:e.right-e.left,height:e.bottom-e.top}}function D(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}function P(e,t){return t=t||"",t+e.split(".").map(function(e){return e.substring(0,1).toUpperCase()+e.substring(1)}).join("")}function H(e,t,n){var r=this,i;return function(){var s=r,o=arguments,u=function(){i=null,n||e.apply(s,o)},a=n&&!i;clearTimeout(i),i=setTimeout(u,t),a&&e.apply(s,o)}}function j(e){return e[0]}function F(e){return e[e.length-1]}function I(e){return e.slice(0,e.length-1)}function q(e){return e.slice(1)}function R(e,t){for(var n=0,r=e.length;n<r;n++){var i=e[n];if(t(i))return i}}function U(e,t){for(var n=0,r=e.length;n<r;n++)if(!t(e[n]))return!1;return!0}function z(t,n){return e.inArray(n,t)}function W(e,t){return z(e,t)!==-1}function X(e,t){return t=t||B.self,e.reduce(function(e,n){return e+t(n)},0)}function V(e){var t=[],n=e.length,r=-1;while(++r<n)t[r]=e[r];return t}function J(e){return!e||!e.length}function K(e,t){if(!e.length)return[];var n=q(e);return n.reduce(function(e,n){var r=F(e);return t(F(r),n)?r[r.length]=n:e[e.length]=[n],e},[[j(e)]])}function Q(e){var t=[];for(var n=0,r=e.length;n<r;n++)e[n]&&t.push(e[n]);return t}function G(e){var t=[];for(var n=0,r=e.length;n<r;n++)W(t,e[n])||t.push(e[n]);return t}function Y(e,t){var n=z(e,t);return n===-1?null:e[n+1]}function Z(e,t){var n=z(e,t);return n===-1?null:e[n-1]}function nt(t){var n=t==="Comic Sans MS"?"Courier New":"Comic Sans MS",r=e("<div>").css({position:"absolute",left:"-9999px",top:"-9999px",fontSize:"200px"}).text("mmmmmmmmmwwwwwww").appendTo(document.body),i=r.css("fontFamily",n).width(),s=r.css("fontFamily",t+","+n).width();return r.remove(),i!==s}function vt(t){return t&&e(t).hasClass("note-editable")}function mt(t){return t&&e(t).hasClass("note-control-sizing")}function gt(e){return e=e.toUpperCase(),function(t){return t&&t.nodeName.toUpperCase()===e}}function yt(e){return e&&e.nodeType===3}function bt(e){return e&&e.nodeType===1}function wt(e){return e&&/^BR|^IMG|^HR|^IFRAME|^BUTTON|^INPUT/.test(e.nodeName.toUpperCase())}function Et(e){return vt(e)?!1:e&&/^DIV|^P|^LI|^H[1-7]/.test(e.nodeName.toUpperCase())}function St(e){return e&&/^H[1-7]/.test(e.nodeName.toUpperCase())}function Nt(e){return Et(e)&&!Tt(e)}function Lt(e){return!Dt(e)&&!At(e)&&!Ot(e)&&!Et(e)&&!Ct(e)&&!_t(e)&&!kt(e)}function At(e){return e&&/^UL|^OL/.test(e.nodeName.toUpperCase())}function Mt(e){return e&&/^TD|^TH/.test(e.nodeName.toUpperCase())}function Dt(e){return Mt(e)||_t(e)||vt(e)}function Ht(e){return Lt(e)&&!!Wt(e,Et)}function Bt(e){return Lt(e)&&!Wt(e,Et)}function Ft(e,t){return e.nextSibling===t||e.previousSibling===t}function It(e,t){t=t||B.ok;var n=[];return e.previousSibling&&t(e.previousSibling)&&n.push(e.previousSibling),n.push(e),e.nextSibling&&t(e.nextSibling)&&n.push(e.nextSibling),n}function Rt(e){return yt(e)?e.nodeValue.length:e?e.childNodes.length:0}function Ut(e){var t=Rt(e);return t===0?!0:!yt(e)&&t===1&&e.innerHTML===qt?!0:et.all(e.childNodes,yt)&&e.innerHTML===""?!0:!1}function zt(e){!wt(e)&&!Rt(e)&&(e.innerHTML=qt)}function Wt(e,t){while(e){if(t(e))return e;if(vt(e))break;e=e.parentNode}return null}function Xt(e,t){e=e.parentNode;while(e){if(Rt(e)!==1)break;if(t(e))return e;if(vt(e))break;e=e.parentNode}return null}function Vt(e,t){t=t||B.fail;var n=[];return Wt(e,function(e){return vt(e)||n.push(e),t(e)}),n}function $t(e,t){var n=Vt(e);return et.last(n.filter(t))}function Jt(t,n){var r=Vt(t);for(var i=n;i;i=i.parentNode)if(e.inArray(i,r)>-1)return i;return null}function Kt(e,t){t=t||B.fail;var n=[];while(e){if(t(e))break;n.push(e),e=e.previousSibling}return n}function Qt(e,t){t=t||B.fail;var n=[];while(e){if(t(e))break;n.push(e),e=e.nextSibling}return n}function Gt(e,t){var n=[];return t=t||B.ok,function r(i){e!==i&&t(i)&&n.push(i);for(var s=0,o=i.childNodes.length;s<o;s++)r(i.childNodes[s])}(e),n}function Yt(t,n){var r=t.parentNode,i=e("<"+n+">")[0];return r.insertBefore(i,t),i.appendChild(t),i}function Zt(e,t){var n=t.nextSibling,r=t.parentNode;return n?r.insertBefore(e,n):r.appendChild(e),e}function en(t,n){return e.each(n,function(e,n){t.appendChild(n)}),t}function tn(e){return e.offset===0}function nn(e){return e.offset===Rt(e.node)}function rn(e){return tn(e)||nn(e)}function sn(e,t){while(e&&e!==t){if(fn(e)!==0)return!1;e=e.parentNode}return!0}function on(e,t){if(!t)return!1;while(e&&e!==t){if(fn(e)!==Rt(e.parentNode)-1)return!1;e=e.parentNode}return!0}function un(e,t){return tn(e)&&sn(e.node,t)}function an(e,t){return nn(e)&&on(e.node,t)}function fn(e){var t=0;while(e=e.previousSibling)t+=1;return t}function ln(e){return!!(e&&e.childNodes&&e.childNodes.length)}function cn(e,t){var n,r;if(e.offset===0){if(vt(e.node))return null;n=e.node.parentNode,r=fn(e.node)}else ln(e.node)?(n=e.node.childNodes[e.offset-1],r=Rt(n)):(n=e.node,r=t?0:e.offset-1);return{node:n,offset:r}}function hn(e,t){var n,r;if(Rt(e.node)===e.offset){if(vt(e.node))return null;n=e.node.parentNode,r=fn(e.node)+1}else ln(e.node)?(n=e.node.childNodes[e.offset],r=0):(n=e.node,r=t?Rt(e.node):e.offset+1);return{node:n,offset:r}}function pn(e,t){return e.node===t.node&&e.offset===t.offset}function dn(e){if(yt(e.node)||!ln(e.node)||Ut(e.node))return!0;var t=e.node.childNodes[e.offset-1],n=e.node.childNodes[e.offset];return(!t||wt(t))&&(!n||wt(n))?!0:!1}function vn(e,t){while(e){if(t(e))return e;e=cn(e)}return null}function mn(e,t){while(e){if(t(e))return e;e=hn(e)}return null}function gn(e){if(!yt(e.node))return!1;var t=e.node.nodeValue.charAt(e.offset-1);return t&&t!==" "&&t!==pt}function yn(e,t,n,r){var i=e;while(i){n(i);if(pn(i,t))break;var s=r&&e.node!==i.node&&t.node!==i.node;i=hn(i,s)}}function bn(e,t){var n=Vt(t,B.eq(e));return n.map(fn).reverse()}function wn(e,t){var n=e;for(var r=0,i=t.length;r<i;r++)n.childNodes.length<=t[r]?n=n.childNodes[n.childNodes.length-1]:n=n.childNodes[t[r]];return n}function En(e,t){var n=t&&t.isSkipPaddingBlankHTML,r=t&&t.isNotSplitEdgePoint;if(rn(e)&&(yt(e.node)||r)){if(tn(e))return e.node;if(nn(e))return e.node.nextSibling}if(yt(e.node))return e.node.splitText(e.offset);var i=e.node.childNodes[e.offset],s=Zt(e.node.cloneNode(!1),e.node);return en(s,Qt(i)),n||(zt(e.node),zt(s)),s}function Sn(e,t,n){var r=Vt(t.node,B.eq(e));return r.length?r.length===1?En(t,n):r.reduce(function(e,r){return e===t.node&&(e=En(t,n)),En({node:r,offset:e?fn(e):Rt(r)},n)}):null}function xn(e,t){var n=t?Et:Dt,r=Vt(e.node,n),i=et.last(r)||e.node,s,o;n(i)?(s=r[r.length-2],o=i):(s=i,o=s.parentNode);var u=s&&Sn(s,e,{isSkipPaddingBlankHTML:t,isNotSplitEdgePoint:t});return!u&&o===e.node&&(u=e.node.childNodes[e.offset]),{rightNode:u,container:o}}function Tn(e){return document.createElement(e)}function Nn(e){return document.createTextNode(e)}function Cn(e,t){if(!e||!e.parentNode)return;if(e.removeNode)return e.removeNode(t);var n=e.parentNode;if(!t){var r=[];for(var i=0,s=e.childNodes.length;i<s;i++)r.push(e.childNodes[i]);for(var i=0,s=r.length;i<s;i++)n.insertBefore(r[i],e)}n.removeChild(e)}function kn(e,t){while(e){if(vt(e)||!t(e))break;var n=e.parentNode;Cn(e),e=n}}function Ln(e,t){if(e.nodeName.toUpperCase()===t.toUpperCase())return e;var n=Tn(t);return e.style.cssText&&(n.style.cssText=e.style.cssText),en(n,et.from(e.childNodes)),Zt(n,e),Cn(e),n}function On(e,t){var n=An(e[0])?e.val():e.html();return t?n.replace(/[\n\r]/g,""):n}function Mn(t,n){var r=On(t);if(n){var i=/<(\/?)(\b(?!!)[^>\s]*)(.*?)(\s*\/?>)/g;r=r.replace(i,function(e,t,n){n=n.toUpperCase();var r=/^DIV|^TD|^TH|^P|^LI|^H[1-7]/.test(n)&&!!t,i=/^BLOCKQUOTE|^TABLE|^TBODY|^TR|^HR|^UL|^OL/.test(n);return e+(r||i?"\n":"")}),r=e.trim(r)}return r}function _n(t){var n=e(t),r=n.offset(),i=n.outerHeight(!0);return{left:r.left,top:r.top+i}}function Dn(e,t){Object.keys(t).forEach(function(n){e.on(n,t[n])})}function Pn(e,t){Object.keys(t).forEach(function(n){e.off(n,t[n])})}function Hn(e){return e&&!yt(e)&&et.contains(e.classList,"note-styletag")}function In(e,t){var n=e.parentElement(),r,i=document.body.createTextRange(),s,o=et.from(n.childNodes);for(r=0;r<o.length;r++){if(Bn.isText(o[r]))continue;i.moveToElementText(o[r]);if(i.compareEndPoints("StartToStart",e)>=0)break;s=o[r]}if(r!==0&&Bn.isText(o[r-1])){var u=document.body.createTextRange(),a=null;u.moveToElementText(s||n),u.collapse(!s),a=s?s.nextSibling:n.firstChild;var f=e.duplicate();f.setEndPoint("StartToStart",u);var l=f.text.replace(/[\r\n]/g,"").length;while(l>a.nodeValue.length&&a.nextSibling)l-=a.nodeValue.length,a=a.nextSibling;var c=a.nodeValue;t&&a.nextSibling&&Bn.isText(a.nextSibling)&&l===a.nodeValue.length&&(l-=a.nodeValue.length,a=a.nextSibling),n=a,r=l}return{cont:n,offset:r}}function qn(e){var t=function(e,n){var r,i;if(Bn.isText(e)){var s=Bn.listPrev(e,B.not(Bn.isText)),o=et.last(s).previousSibling;r=o||e.parentNode,n+=et.sum(et.tail(s),Bn.nodeLength),i=!o}else{r=e.childNodes[n]||e;if(Bn.isText(r))return t(r,0);n=0,i=!1}return{node:r,collapseToStart:i,offset:n}},n=document.body.createTextRange(),r=t(e.node,e.offset);return n.moveToElementText(r.node),n.collapse(r.collapseToStart),n.moveStart("character",r.offset),n}function zn(t){return e.Deferred(function(n){e.extend(new FileReader,{onload:function(e){var t=e.target.result;n.resolve(t)},onerror:function(e){n.reject(e)}}).readAsDataURL(t)}).promise()}function Wn(t){return e.Deferred(function(n){var r=e("<img>");r.one("load",function(){r.off("error abort"),n.resolve(r)}).one("error abort",function(){r.off("load").detach(),n.reject(r)}).css({display:"none"}).appendTo(document.body).attr("src",t)}).promise()}e=e&&e.hasOwnProperty("default")?e["default"]:e;var t=function(){function t(e,t,n,r){this.markup=e,this.children=t,this.options=n,this.callback=r}return t.prototype.render=function(t){var n=e(this.markup);this.options&&this.options.contents&&n.html(this.options.contents),this.options&&this.options.className&&n.addClass(this.options.className),this.options&&this.options.data&&e.each(this.options.data,function(e,t){n.attr("data-"+e,t)}),this.options&&this.options.click&&n.on("click",this.options.click);if(this.children){var r=n.find(".note-children-container");this.children.forEach(function(e){e.render(r.length?r:n)})}return this.callback&&this.callback(n,this.options),this.options&&this.options.callback&&this.options.callback(n),t&&t.append(n),n},t}(),n={create:function(n,r){return function(){var i=typeof arguments[1]=="object"?arguments[1]:arguments[0],s=e.isArray(arguments[0])?arguments[0]:[];return i&&i.children&&(s=i.children),new t(n,s,i,r)}}},r=n.create('<div class="note-editor note-frame panel"/>'),i=n.create('<div class="note-toolbar-wrapper panel-default" style="height: 40px"><div class="note-toolbar panel-heading" role="toolbar"></div></div>'),s=n.create('<div class="note-editing-area"/>'),o=n.create('<textarea class="note-codable" role="textbox" aria-multiline="true"/>'),u=n.create('<div class="note-editable" contentEditable="true" role="textbox" aria-multiline="true"/>'),a=n.create(['<output class="note-status-output" aria-live="polite"/>','<div class="note-statusbar" role="status">','  <div class="note-resizebar" role="seperator" aria-orientation="horizontal" aria-label="Resize">','    <div class="note-icon-bar"/>','    <div class="note-icon-bar"/>','    <div class="note-icon-bar"/>',"  </div>","</div>"].join("")),f=n.create('<div class="note-editor"/>'),l=n.create(['  <output class="note-status-output" aria-live="polite"/>','<div class="note-editable" contentEditable="true" role="textbox" aria-multiline="true"/>'].join("")),c=n.create('<div class="note-btn-group btn-group">'),h=n.create('<ul class="dropdown-menu" role="list">',function(t,n){var r=e.isArray(n.items)?n.items.map(function(e){var t=typeof e=="string"?e:e.value||"",r=n.template?n.template(e):e,i=typeof e=="object"?e.option:undefined,s='data-value="'+t+'"',o=i!==undefined?' data-option="'+i+'"':"";return'<li role="listitem" aria-label="'+e+'"><a href="#" '+(s+o)+">"+r+"</a></li>"}).join(""):n.items;t.html(r).attr({"aria-label":n.title})}),p=function(e,t){return e+" "+b(t.icons.caret,"span")},d=n.create('<ul class="dropdown-menu note-check" role="list">',function(t,n){var r=e.isArray(n.items)?n.items.map(function(e){var t=typeof e=="string"?e:e.value||"",r=n.template?n.template(e):e;return'<li role="listitem" aria-label="'+e+'"><a href="#" data-value="'+t+'">'+b(n.checkClassName)+" "+r+"</a></li>"}).join(""):n.items;t.html(r).attr({"aria-label":n.title})}),v=n.create('<div class="note-color-palette"/>',function(e,t){var n=[];for(var r=0,i=t.colors.length;r<i;r++){var s=t.eventName,o=t.colors[r],u=t.colorsName[r],a=[];for(var f=0,l=o.length;f<l;f++){var c=o[f],h=u[f];a.push(['<button type="button" class="note-color-btn"','style="background-color:',c,'" ','data-event="',s,'" ','data-value="',c,'" ','title="',h,'" ','aria-label="',h,'" ','data-toggle="button" tabindex="-1"></button>'].join(""))}n.push('<div class="note-color-row">'+a.join("")+"</div>")}e.html(n.join("")),t.tooltip&&e.find(".note-color-btn").tooltip({container:t.container,trigger:"hover",placement:"bottom"})}),m=n.create('<div class="modal" aria-hidden="false" tabindex="-1" role="dialog"/>',function(e,t){t.fade&&e.addClass("fade"),e.attr({"aria-label":t.title}),e.html(['<div class="modal-dialog">','  <div class="modal-content">',t.title?'    <div class="modal-header">      <button type="button" class="close" data-dismiss="modal" aria-label="Close" aria-hidden="true">&times;</button>      <h4 class="modal-title">'+t.title+"</h4>"+"    </div>":"",'    <div class="modal-body">'+t.body+"</div>",t.footer?'    <div class="modal-footer">'+t.footer+"</div>":"","  </div>","</div>"].join(""))}),g=n.create(['<div class="note-popover popover in">','  <div class="arrow"/>','  <div class="popover-content note-children-container"/>',"</div>"].join(""),function(e,t){var n=typeof t.direction!="undefined"?t.direction:"bottom";e.addClass(n),t.hideArrow&&e.find(".arrow").hide()}),y=n.create('<div class="checkbox"></div>',function(e,t){e.html([" <label"+(t.id?' for="'+t.id+'"':"")+">",' <input role="checkbox" type="checkbox"'+(t.id?' id="'+t.id+'"':""),t.checked?" checked":"",' aria-checked="'+(t.checked?"true":"false")+'"/>',t.text?t.text:"","</label>"].join(""))}),b=function(e,t){return t=t||"i","<"+t+' class="'+e+'"/>'},w={editor:r,toolbar:i,editingArea:s,codable:o,editable:u,statusbar:a,airEditor:f,airEditable:l,buttonGroup:c,dropdown:h,dropdownButtonContents:p,dropdownCheck:d,palette:v,dialog:m,popover:g,checkbox:y,icon:b,options:{},button:function(e,t){return n.create('<button type="button" class="note-btn btn btn-default btn-sm" role="button" tabindex="-1">',function(e,t){t&&t.tooltip&&e.attr({title:t.tooltip,"aria-label":t.tooltip}).tooltip({container:t.container,trigger:"hover",placement:"bottom"})})(e,t)},toggleBtn:function(e,t){e.toggleClass("disabled",!t),e.attr("disabled",!t)},toggleBtnActive:function(e,t){e.toggleClass("active",t)},onDialogShown:function(e,t){e.one("shown.bs.modal",t)},onDialogHidden:function(e,t){e.one("hidden.bs.modal",t)},showDialog:function(e){e.modal("show")},hideDialog:function(e){e.modal("hide")},createLayout:function(e,t){var n=(t.airMode?w.airEditor([w.editingArea([w.airEditable()])]):w.editor([w.toolbar(),w.editingArea([w.codable(),w.editable()]),w.statusbar()])).render();return n.insertAfter(e),{note:e,editor:n,toolbar:n.find(".note-toolbar"),editingArea:n.find(".note-editing-area"),editable:n.find(".note-editable"),codable:n.find(".note-codable"),statusbar:n.find(".note-statusbar")}},removeLayout:function(e,t){e.html(t.editable.html()),t.editor.remove(),e.show()}},O=0,B={eq:E,eq2:S,peq2:x,ok:T,fail:N,self:L,not:C,and:k,invoke:A,uniqueId:M,rect2bnd:_,invertObject:D,namespaceToCamel:P,debounce:H},et={head:j,last:F,initial:I,tail:q,prev:Z,next:Y,find:R,contains:W,all:U,sum:X,from:V,isEmpty:J,clusterBy:K,compact:Q,unique:G},tt=typeof define=="function"&&define.amd,rt=navigator.userAgent,it=/MSIE|Trident/i.test(rt),st;if(it){var ot=/MSIE (\d+[.]\d+)/.exec(rt);ot&&(st=parseFloat(ot[1])),ot=/Trident\/.*rv:([0-9]{1,}[.0-9]{0,})/.exec(rt),ot&&(st=parseFloat(ot[1]))}var ut=/Edge\/\d+/.test(rt),at=!!window.CodeMirror;if(!at&&tt)if(typeof __webpack_require__=="function")try{require.resolve("codemirror"),at=!0}catch(ft){}else if(typeof require!="undefined")if(typeof require.resolve!="undefined")try{require.resolve("codemirror"),at=!0}catch(ft){}else typeof require.specified!="undefined"&&(at=require.specified("codemirror"));var lt="ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0,ct=it||ut?"DOMCharacterDataModified DOMSubtreeModified DOMNodeInserted":"input",ht={isMac:navigator.appVersion.indexOf("Mac")>-1,isMSIE:it,isEdge:ut,isFF:!ut&&/firefox/i.test(rt),isPhantom:/PhantomJS/i.test(rt),isWebkit:!ut&&/webkit/i.test(rt),isChrome:!ut&&/chrome/i.test(rt),isSafari:!ut&&/safari/i.test(rt),browserVersion:st,jqueryVersion:parseFloat(e.fn.jquery),isSupportAmd:tt,isSupportTouch:lt,hasCodeMirror:at,isFontInstalled:nt,isW3CRangeSupport:!!document.createRange,inputEventName:ct},pt=String.fromCharCode(160),dt="\ufeff",xt=gt("PRE"),Tt=gt("LI"),Ct=gt("TABLE"),kt=gt("DATA"),Ot=gt("HR"),_t=gt("BLOCKQUOTE"),Pt=gt("A"),jt=gt("BODY"),qt=ht.isMSIE&&ht.browserVersion<11?"&nbsp;":"<br>",An=gt("TEXTAREA"),Bn={NBSP_CHAR:pt,ZERO_WIDTH_NBSP_CHAR:dt,blank:qt,emptyPara:"<p>"+qt+"</p>",makePredByNodeName:gt,isEditable:vt,isControlSizing:mt,isText:yt,isElement:bt,isVoid:wt,isPara:Et,isPurePara:Nt,isHeading:St,isInline:Lt,isBlock:B.not(Lt),isBodyInline:Bt,isBody:jt,isParaInline:Ht,isPre:xt,isList:At,isTable:Ct,isData:kt,isCell:Mt,isBlockquote:_t,isBodyContainer:Dt,isAnchor:Pt,isDiv:gt("DIV"),isLi:Tt,isBR:gt("BR"),isSpan:gt("SPAN"),isB:gt("B"),isU:gt("U"),isS:gt("S"),isI:gt("I"),isImg:gt("IMG"),isTextarea:An,isEmpty:Ut,isEmptyAnchor:B.and(Pt,Ut),isClosestSibling:Ft,withClosestSiblings:It,nodeLength:Rt,isLeftEdgePoint:tn,isRightEdgePoint:nn,isEdgePoint:rn,isLeftEdgeOf:sn,isRightEdgeOf:on,isLeftEdgePointOf:un,isRightEdgePointOf:an,prevPoint:cn,nextPoint:hn,isSamePoint:pn,isVisiblePoint:dn,prevPointUntil:vn,nextPointUntil:mn,isCharPoint:gn,walkPoint:yn,ancestor:Wt,singleChildAncestor:Xt,listAncestor:Vt,lastAncestor:$t,listNext:Qt,listPrev:Kt,listDescendant:Gt,commonAncestor:Jt,wrap:Yt,insertAfter:Zt,appendChildNodes:en,position:fn,hasChildren:ln,makeOffsetPath:bn,fromOffsetPath:wn,splitTree:Sn,splitPoint:xn,create:Tn,createText:Nn,remove:Cn,removeWhile:kn,replace:Ln,html:Mn,value:On,posFromPlaceholder:_n,attachEvents:Dn,detachEvents:Pn,isCustomStyleTag:Hn};e.summernote=e.summernote||{lang:{}},e.extend(e.summernote.lang,{"zh-CN":{font:{bold:"\u7c97\u4f53",italic:"\u659c\u4f53",underline:"\u4e0b\u5212\u7ebf",clear:"\u6e05\u9664\u683c\u5f0f",height:"\u884c\u9ad8",name:"\u5b57\u4f53",strikethrough:"\u5220\u9664\u7ebf",subscript:"\u4e0b\u6807",superscript:"\u4e0a\u6807",size:"\u5b57\u53f7"},image:{image:"\u56fe\u7247",insert:"\u63d2\u5165\u56fe\u7247",resizeFull:"\u7f29\u653e\u81f3 100%",resizeHalf:"\u7f29\u653e\u81f3 50%",resizeQuarter:"\u7f29\u653e\u81f3 25%",floatLeft:"\u9760\u5de6\u6d6e\u52a8",floatRight:"\u9760\u53f3\u6d6e\u52a8",floatNone:"\u53d6\u6d88\u6d6e\u52a8",shapeRounded:"\u5f62\u72b6: \u5706\u89d2",shapeCircle:"\u5f62\u72b6: \u5706",shapeThumbnail:"\u5f62\u72b6: \u7f29\u7565\u56fe",shapeNone:"\u5f62\u72b6: \u65e0",dragImageHere:"\u5c06\u56fe\u7247\u62d6\u62fd\u81f3\u6b64\u5904",dropImage:"\u62d6\u62fd\u56fe\u7247\u6216\u6587\u672c",selectFromFiles:"\u4ece\u672c\u5730\u4e0a\u4f20",maximumFileSize:"\u6587\u4ef6\u5927\u5c0f\u6700\u5927\u503c",maximumFileSizeError:"\u6587\u4ef6\u5927\u5c0f\u8d85\u51fa\u6700\u5927\u503c\u3002",url:"\u56fe\u7247\u5730\u5740",remove:"\u79fb\u9664\u56fe\u7247",original:"\u539f\u59cb\u56fe\u7247"},video:{video:"\u89c6\u9891",videoLink:"\u89c6\u9891\u94fe\u63a5",insert:"\u63d2\u5165\u89c6\u9891",url:"\u89c6\u9891\u5730\u5740",providers:"(\u4f18\u9177, \u817e\u8baf, Instagram, DailyMotion, Youtube\u7b49)"},link:{link:"\u94fe\u63a5",insert:"\u63d2\u5165\u94fe\u63a5",unlink:"\u53bb\u9664\u94fe\u63a5",edit:"\u7f16\u8f91\u94fe\u63a5",textToDisplay:"\u663e\u793a\u6587\u672c",url:"\u94fe\u63a5\u5730\u5740",openInNewWindow:"\u5728\u65b0\u7a97\u53e3\u6253\u5f00"},table:{table:"\u8868\u683c",addRowAbove:"\u5728\u4e0a\u65b9\u63d2\u5165\u884c",addRowBelow:"\u5728\u4e0b\u65b9\u63d2\u5165\u884c",addColLeft:"\u5728\u5de6\u4fa7\u63d2\u5165\u5217",addColRight:"\u5728\u53f3\u4fa7\u63d2\u5165\u5217",delRow:"\u5220\u9664\u884c",delCol:"\u5220\u9664\u5217",delTable:"\u5220\u9664\u8868\u683c"},hr:{insert:"\u6c34\u5e73\u7ebf"},style:{style:"\u6837\u5f0f",p:"\u666e\u901a",blockquote:"\u5f15\u7528",pre:"\u4ee3\u7801",h1:"\u6807\u9898 1",h2:"\u6807\u9898 2",h3:"\u6807\u9898 3",h4:"\u6807\u9898 4",h5:"\u6807\u9898 5",h6:"\u6807\u9898 6"},lists:{unordered:"\u65e0\u5e8f\u5217\u8868",ordered:"\u6709\u5e8f\u5217\u8868"},options:{help:"\u5e2e\u52a9",fullscreen:"\u5168\u5c4f",codeview:"\u6e90\u4ee3\u7801"},paragraph:{paragraph:"\u6bb5\u843d",outdent:"\u51cf\u5c11\u7f29\u8fdb",indent:"\u589e\u52a0\u7f29\u8fdb",left:"\u5de6\u5bf9\u9f50",center:"\u5c45\u4e2d\u5bf9\u9f50",right:"\u53f3\u5bf9\u9f50",justify:"\u4e24\u7aef\u5bf9\u9f50"},color:{recent:"\u6700\u8fd1\u4f7f\u7528",more:"\u66f4\u591a",background:"\u80cc\u666f",foreground:"\u524d\u666f",transparent:"\u900f\u660e",setTransparent:"\u900f\u660e",reset:"\u91cd\u7f6e",resetToDefault:"\u9ed8\u8ba4"},shortcut:{shortcuts:"\u5feb\u6377\u952e",close:"\u5173\u95ed",textFormatting:"\u6587\u672c\u683c\u5f0f",action:"\u52a8\u4f5c",paragraphFormatting:"\u6bb5\u843d\u683c\u5f0f",documentStyle:"\u6587\u6863\u6837\u5f0f",extraKeys:"\u989d\u5916\u6309\u952e"},help:{insertParagraph:"\u63d2\u5165\u6bb5\u843d",undo:"\u64a4\u9500",redo:"\u91cd\u505a",tab:"\u589e\u52a0\u7f29\u8fdb",untab:"\u51cf\u5c11\u7f29\u8fdb",bold:"\u7c97\u4f53",italic:"\u659c\u4f53",underline:"\u4e0b\u5212\u7ebf",strikethrough:"\u5220\u9664\u7ebf",removeFormat:"\u6e05\u9664\u683c\u5f0f",justifyLeft:"\u5de6\u5bf9\u9f50",justifyCenter:"\u5c45\u4e2d\u5bf9\u9f50",justifyRight:"\u53f3\u5bf9\u9f50",justifyFull:"\u4e24\u7aef\u5bf9\u9f50",insertUnorderedList:"\u65e0\u5e8f\u5217\u8868",insertOrderedList:"\u6709\u5e8f\u5217\u8868",outdent:"\u51cf\u5c11\u7f29\u8fdb",indent:"\u589e\u52a0\u7f29\u8fdb",formatPara:"\u8bbe\u7f6e\u9009\u4e2d\u5185\u5bb9\u6837\u5f0f\u4e3a \u666e\u901a",formatH1:"\u8bbe\u7f6e\u9009\u4e2d\u5185\u5bb9\u6837\u5f0f\u4e3a \u6807\u98981",formatH2:"\u8bbe\u7f6e\u9009\u4e2d\u5185\u5bb9\u6837\u5f0f\u4e3a \u6807\u98982",formatH3:"\u8bbe\u7f6e\u9009\u4e2d\u5185\u5bb9\u6837\u5f0f\u4e3a \u6807\u98983",formatH4:"\u8bbe\u7f6e\u9009\u4e2d\u5185\u5bb9\u6837\u5f0f\u4e3a \u6807\u98984",formatH5:"\u8bbe\u7f6e\u9009\u4e2d\u5185\u5bb9\u6837\u5f0f\u4e3a \u6807\u98985",formatH6:"\u8bbe\u7f6e\u9009\u4e2d\u5185\u5bb9\u6837\u5f0f\u4e3a \u6807\u98986",insertHorizontalRule:"\u63d2\u5165\u6c34\u5e73\u7ebf","linkDialog.show":"\u663e\u793a\u94fe\u63a5\u5bf9\u8bdd\u6846"},history:{undo:"\u64a4\u9500",redo:"\u91cd\u505a"},specialChar:{specialChar:"\u7279\u6b8a\u5b57\u7b26",select:"\u9009\u53d6\u7279\u6b8a\u5b57\u7b26"}}});var jn={BACKSPACE:8,TAB:9,ENTER:13,SPACE:32,DELETE:46,LEFT:37,UP:38,RIGHT:39,DOWN:40,NUM0:48,NUM1:49,NUM2:50,NUM3:51,NUM4:52,NUM5:53,NUM6:54,NUM7:55,NUM8:56,B:66,E:69,I:73,J:74,K:75,L:76,R:82,S:83,U:85,V:86,Y:89,Z:90,SLASH:191,LEFTBRACKET:219,BACKSLASH:220,RIGHTBRACKET:221},Fn={isEdit:function(e){return et.contains([jn.BACKSPACE,jn.TAB,jn.ENTER,jn.SPACE,jn.DELETE],e)},isMove:function(e){return et.contains([jn.LEFT,jn.UP,jn.RIGHT,jn.DOWN],e)},nameFromCode:B.invertObject(jn),code:jn},Rn=function(){function t(e,t,n,r){this.sc=e,this.so=t,this.ec=n,this.eo=r,this.isOnEditable=this.makeIsOn(Bn.isEditable),this.isOnList=this.makeIsOn(Bn.isList),this.isOnAnchor=this.makeIsOn(Bn.isAnchor),this.isOnCell=this.makeIsOn(Bn.isCell),this.isOnData=this.makeIsOn(Bn.isData)}return t.prototype.nativeRange=function(){if(ht.isW3CRangeSupport){var e=document.createRange();return e.setStart(this.sc,this.so),e.setEnd(this.ec,this.eo),e}var t=qn({node:this.sc,offset:this.so});return t.setEndPoint("EndToEnd",qn({node:this.ec,offset:this.eo})),t},t.prototype.getPoints=function(){return{sc:this.sc,so:this.so,ec:this.ec,eo:this.eo}},t.prototype.getStartPoint=function(){return{node:this.sc,offset:this.so}},t.prototype.getEndPoint=function(){return{node:this.ec,offset:this.eo}},t.prototype.select=function(){var e=this.nativeRange();if(ht.isW3CRangeSupport){var t=document.getSelection();t.rangeCount>0&&t.removeAllRanges(),t.addRange(e)}else e.select();return this},t.prototype.scrollIntoView=function(t){var n=e(t).height();return t.scrollTop+n<this.sc.offsetTop&&(t.scrollTop+=Math.abs(t.scrollTop+n-this.sc.offsetTop)),this},t.prototype.normalize=function(){var e=function(e,t){if(Bn.isVisiblePoint(e)&&!Bn.isEdgePoint(e)||Bn.isVisiblePoint(e)&&Bn.isRightEdgePoint(e)&&!t||Bn.isVisiblePoint(e)&&Bn.isLeftEdgePoint(e)&&t||Bn.isVisiblePoint(e)&&Bn.isBlock(e.node)&&Bn.isEmpty(e.node))return e;var n=Bn.ancestor(e.node,Bn.isBlock);if((Bn.isLeftEdgePointOf(e,n)||Bn.isVoid(Bn.prevPoint(e).node))&&!t||(Bn.isRightEdgePointOf(e,n)||Bn.isVoid(Bn.nextPoint(e).node))&&t){if(Bn.isVisiblePoint(e))return e;t=!t}var r=t?Bn.nextPointUntil(Bn.nextPoint(e),Bn.isVisiblePoint):Bn.prevPointUntil(Bn.prevPoint(e),Bn.isVisiblePoint);return r||e},n=e(this.getEndPoint(),!1),r=this.isCollapsed()?n:e(this.getStartPoint(),!0);return new t(r.node,r.offset,n.node,n.offset)},t.prototype.nodes=function(e,t){e=e||B.ok;var n=t&&t.includeAncestor,r=t&&t.fullyContains,i=this.getStartPoint(),s=this.getEndPoint(),o=[],u=[];return Bn.walkPoint(i,s,function(t){if(Bn.isEditable(t.node))return;var i;r?(Bn.isLeftEdgePoint(t)&&u.push(t.node),Bn.isRightEdgePoint(t)&&et.contains(u,t.node)&&(i=t.node)):n?i=Bn.ancestor(t.node,e):i=t.node,i&&e(i)&&o.push(i)},!0),et.unique(o)},t.prototype.commonAncestor=function(){return Bn.commonAncestor(this.sc,this.ec)},t.prototype.expand=function(e){var n=Bn.ancestor(this.sc,e),r=Bn.ancestor(this.ec,e);if(!n&&!r)return new t(this.sc,this.so,this.ec,this.eo);var i=this.getPoints();return n&&(i.sc=n,i.so=0),r&&(i.ec=r,i.eo=Bn.nodeLength(r)),new t(i.sc,i.so,i.ec,i.eo)},t.prototype.collapse=function(e){return e?new t(this.sc,this.so,this.sc,this.so):new t(this.ec,this.eo,this.ec,this.eo)},t.prototype.splitText=function(){var e=this.sc===this.ec,n=this.getPoints();return Bn.isText(this.ec)&&!Bn.isEdgePoint(this.getEndPoint())&&this.ec.splitText(this.eo),Bn.isText(this.sc)&&!Bn.isEdgePoint(this.getStartPoint())&&(n.sc=this.sc.splitText(this.so),n.so=0,e&&(n.ec=n.sc,n.eo=this.eo-this.so)),new t(n.sc,n.so,n.ec,n.eo)},t.prototype.deleteContents=function(){if(this.isCollapsed())return this;var n=this.splitText(),r=n.nodes(null,{fullyContains:!0}),i=Bn.prevPointUntil(n.getStartPoint(),function(e){return!et.contains(r,e.node)}),s=[];return e.each(r,function(e,t){var n=t.parentNode;i.node!==n&&Bn.nodeLength(n)===1&&s.push(n),Bn.remove(t,!1)}),e.each(s,function(e,t){Bn.remove(t,!1)}),(new t(i.node,i.offset,i.node,i.offset)).normalize()},t.prototype.makeIsOn=function(e){return function(){var t=Bn.ancestor(this.sc,e);return!!t&&t===Bn.ancestor(this.ec,e)}},t.prototype.isLeftEdgeOf=function(e){if(!Bn.isLeftEdgePoint(this.getStartPoint()))return!1;var t=Bn.ancestor(this.sc,e);return t&&Bn.isLeftEdgeOf(this.sc,t)},t.prototype.isCollapsed=function(){return this.sc===this.ec&&this.so===this.eo},t.prototype.wrapBodyInlineWithPara=function(){if(Bn.isBodyContainer(this.sc)&&Bn.isEmpty(this.sc))return this.sc.innerHTML=Bn.emptyPara,new t(this.sc.firstChild,0,this.sc.firstChild,0);var e=this.normalize();if(Bn.isParaInline(this.sc)||Bn.isPara(this.sc))return e;var n;if(Bn.isInline(e.sc)){var r=Bn.listAncestor(e.sc,B.not(Bn.isInline));n=et.last(r),Bn.isInline(n)||(n=r[r.length-2]||e.sc.childNodes[e.so])}else n=e.sc.childNodes[e.so>0?e.so-1:0];var i=Bn.listPrev(n,Bn.isParaInline).reverse();i=i.concat(Bn.listNext(n.nextSibling,Bn.isParaInline));if(i.length){var s=Bn.wrap(et.head(i),"p");Bn.appendChildNodes(s,et.tail(i))}return this.normalize()},t.prototype.insertNode=
function(e){var t=this.wrapBodyInlineWithPara().deleteContents(),n=Bn.splitPoint(t.getStartPoint(),Bn.isInline(e));return n.rightNode?n.rightNode.parentNode.insertBefore(e,n.rightNode):n.container.appendChild(e),e},t.prototype.pasteHTML=function(t){var n=e("<div></div>").html(t)[0],r=et.from(n.childNodes),i=this.wrapBodyInlineWithPara().deleteContents();return r.reverse().map(function(e){return i.insertNode(e)}).reverse()},t.prototype.toString=function(){var e=this.nativeRange();return ht.isW3CRangeSupport?e.toString():e.text},t.prototype.getWordRange=function(e){var n=this.getEndPoint();if(!Bn.isCharPoint(n))return this;var r=Bn.prevPointUntil(n,function(e){return!Bn.isCharPoint(e)});return e&&(n=Bn.nextPointUntil(n,function(e){return!Bn.isCharPoint(e)})),new t(r.node,r.offset,n.node,n.offset)},t.prototype.bookmark=function(e){return{s:{path:Bn.makeOffsetPath(e,this.sc),offset:this.so},e:{path:Bn.makeOffsetPath(e,this.ec),offset:this.eo}}},t.prototype.paraBookmark=function(e){return{s:{path:et.tail(Bn.makeOffsetPath(et.head(e),this.sc)),offset:this.so},e:{path:et.tail(Bn.makeOffsetPath(et.last(e),this.ec)),offset:this.eo}}},t.prototype.getClientRects=function(){var e=this.nativeRange();return e.getClientRects()},t}(),Un={create:function(e,t,n,r){if(arguments.length===4)return new Rn(e,t,n,r);if(arguments.length===2)return n=e,r=t,new Rn(e,t,n,r);var i=this.createFromSelection();return!i&&arguments.length===1?(i=this.createFromNode(arguments[0]),i.collapse(Bn.emptyPara===arguments[0].innerHTML)):i},createFromSelection:function(){var e,t,n,r;if(ht.isW3CRangeSupport){var i=document.getSelection();if(!i||i.rangeCount===0)return null;if(Bn.isBody(i.anchorNode))return null;var s=i.getRangeAt(0);e=s.startContainer,t=s.startOffset,n=s.endContainer,r=s.endOffset}else{var o=document.selection.createRange(),u=o.duplicate();u.collapse(!1);var a=o;a.collapse(!0);var f=In(a,!0),l=In(u,!1);Bn.isText(f.node)&&Bn.isLeftEdgePoint(f)&&Bn.isTextNode(l.node)&&Bn.isRightEdgePoint(l)&&l.node.nextSibling===f.node&&(f=l),e=f.cont,t=f.offset,n=l.cont,r=l.offset}return new Rn(e,t,n,r)},createFromNode:function(e){var t=e,n=0,r=e,i=Bn.nodeLength(r);return Bn.isVoid(t)&&(n=Bn.listPrev(t).length-1,t=t.parentNode),Bn.isBR(r)?(i=Bn.listPrev(r).length-1,r=r.parentNode):Bn.isVoid(r)&&(i=Bn.listPrev(r).length,r=r.parentNode),this.create(t,n,r,i)},createFromNodeBefore:function(e){return this.createFromNode(e).collapse(!0)},createFromNodeAfter:function(e){return this.createFromNode(e).collapse()},createFromBookmark:function(e,t){var n=Bn.fromOffsetPath(e,t.s.path),r=t.s.offset,i=Bn.fromOffsetPath(e,t.e.path),s=t.e.offset;return new Rn(n,r,i,s)},createFromParaBookmark:function(e,t){var n=e.s.offset,r=e.e.offset,i=Bn.fromOffsetPath(et.head(t),e.s.path),s=Bn.fromOffsetPath(et.last(t),e.e.path);return new Rn(i,n,s,r)}},Xn=function(){function e(e){this.stack=[],this.stackOffset=-1,this.$editable=e,this.editable=e[0]}return e.prototype.makeSnapshot=function(){var e=Un.create(this.editable),t={s:{path:[],offset:0},e:{path:[],offset:0}};return{contents:this.$editable.html(),bookmark:e?e.bookmark(this.editable):t}},e.prototype.applySnapshot=function(e){e.contents!==null&&this.$editable.html(e.contents),e.bookmark!==null&&Un.createFromBookmark(this.editable,e.bookmark).select()},e.prototype.rewind=function(){this.$editable.html()!==this.stack[this.stackOffset].contents&&this.recordUndo(),this.stackOffset=0,this.applySnapshot(this.stack[this.stackOffset])},e.prototype.reset=function(){this.stack=[],this.stackOffset=-1,this.$editable.html(""),this.recordUndo()},e.prototype.undo=function(){this.$editable.html()!==this.stack[this.stackOffset].contents&&this.recordUndo(),this.stackOffset>0&&(this.stackOffset--,this.applySnapshot(this.stack[this.stackOffset]))},e.prototype.redo=function(){this.stack.length-1>this.stackOffset&&(this.stackOffset++,this.applySnapshot(this.stack[this.stackOffset]))},e.prototype.recordUndo=function(){this.stackOffset++,this.stack.length>this.stackOffset&&(this.stack=this.stack.slice(0,this.stackOffset)),this.stack.push(this.makeSnapshot())},e}(),Vn=function(){function t(){}return t.prototype.jQueryCSS=function(t,n){if(ht.jqueryVersion<1.9){var r={};return e.each(n,function(e,n){r[n]=t.css(n)}),r}return t.css(n)},t.prototype.fromNode=function(e){var t=["font-family","font-size","text-align","list-style-type","line-height"],n=this.jQueryCSS(e,t)||{};return n["font-size"]=parseInt(n["font-size"],10),n},t.prototype.stylePara=function(t,n){e.each(t.nodes(Bn.isPara,{includeAncestor:!0}),function(t,r){e(r).css(n)})},t.prototype.styleNodes=function(t,n){t=t.splitText();var r=n&&n.nodeName||"SPAN",i=!!n&&!!n.expandClosestSibling,s=!!n&&!!n.onlyPartialContains;if(t.isCollapsed())return[t.insertNode(Bn.create(r))];var o=Bn.makePredByNodeName(r),u=t.nodes(Bn.isText,{fullyContains:!0}).map(function(e){return Bn.singleChildAncestor(e,o)||Bn.wrap(e,r)});if(i){if(s){var a=t.nodes();o=B.and(o,function(e){return et.contains(a,e)})}return u.map(function(t){var n=Bn.withClosestSiblings(t,o),r=et.head(n),i=et.tail(n);return e.each(i,function(e,t){Bn.appendChildNodes(r,t.childNodes),Bn.remove(t)}),et.head(n)})}return u},t.prototype.current=function(t){var n=e(Bn.isElement(t.sc)?t.sc:t.sc.parentNode),r=this.fromNode(n);try{r=e.extend(r,{"font-bold":document.queryCommandState("bold")?"bold":"normal","font-italic":document.queryCommandState("italic")?"italic":"normal","font-underline":document.queryCommandState("underline")?"underline":"normal","font-subscript":document.queryCommandState("subscript")?"subscript":"normal","font-superscript":document.queryCommandState("superscript")?"superscript":"normal","font-strikethrough":document.queryCommandState("strikethrough")?"strikethrough":"normal","font-family":document.queryCommandValue("fontname")||r["font-family"]})}catch(i){}if(!t.isOnList())r["list-style"]="none";else{var s=["circle","disc","disc-leading-zero","square"],o=e.inArray(r["list-style-type"],s)>-1;r["list-style"]=o?"unordered":"ordered"}var u=Bn.ancestor(t.sc,Bn.isPara);if(u&&u.style["line-height"])r["line-height"]=u.style.lineHeight;else{var a=parseInt(r["line-height"],10)/parseInt(r["font-size"],10);r["line-height"]=a.toFixed(1)}return r.anchor=t.isOnAnchor()&&Bn.ancestor(t.sc,Bn.isAnchor),r.ancestors=Bn.listAncestor(t.sc,Bn.isEditable),r.range=t,r},t}(),$n=function(){function t(){}return t.prototype.insertOrderedList=function(e){this.toggleList("OL",e)},t.prototype.insertUnorderedList=function(e){this.toggleList("UL",e)},t.prototype.indent=function(t){var n=this,r=Un.create(t).wrapBodyInlineWithPara(),i=r.nodes(Bn.isPara,{includeAncestor:!0}),s=et.clusterBy(i,B.peq2("parentNode"));e.each(s,function(t,r){var i=et.head(r);Bn.isLi(i)?n.wrapList(r,i.parentNode.nodeName):e.each(r,function(t,n){e(n).css("marginLeft",function(e,t){return(parseInt(t,10)||0)+25})})}),r.select()},t.prototype.outdent=function(t){var n=this,r=Un.create(t).wrapBodyInlineWithPara(),i=r.nodes(Bn.isPara,{includeAncestor:!0}),s=et.clusterBy(i,B.peq2("parentNode"));e.each(s,function(t,r){var i=et.head(r);Bn.isLi(i)?n.releaseList([r]):e.each(r,function(t,n){e(n).css("marginLeft",function(e,t){return t=parseInt(t,10)||0,t>25?t-25:""})})}),r.select()},t.prototype.toggleList=function(t,n){var r=this,i=Un.create(n).wrapBodyInlineWithPara(),s=i.nodes(Bn.isPara,{includeAncestor:!0}),o=i.paraBookmark(s),u=et.clusterBy(s,B.peq2("parentNode"));if(et.find(s,Bn.isPurePara)){var a=[];e.each(u,function(e,n){a=a.concat(r.wrapList(n,t))}),s=a}else{var f=i.nodes(Bn.isList,{includeAncestor:!0}).filter(function(n){return!e.nodeName(n,t)});f.length?e.each(f,function(e,n){Bn.replace(n,t)}):s=this.releaseList(u,!0)}Un.createFromParaBookmark(o,s).select()},t.prototype.wrapList=function(e,t){var n=et.head(e),r=et.last(e),i=Bn.isList(n.previousSibling)&&n.previousSibling,s=Bn.isList(r.nextSibling)&&r.nextSibling,o=i||Bn.insertAfter(Bn.create(t||"UL"),r);return e=e.map(function(e){return Bn.isPurePara(e)?Bn.replace(e,"LI"):e}),Bn.appendChildNodes(o,e),s&&(Bn.appendChildNodes(o,et.from(s.childNodes)),Bn.remove(s)),e},t.prototype.releaseList=function(t,n){var r=[];return e.each(t,function(t,i){var s=et.head(i),o=et.last(i),u=n?Bn.lastAncestor(s,Bn.isList):s.parentNode,a=u.childNodes.length>1?Bn.splitTree(u,{node:o.parentNode,offset:Bn.position(o)+1},{isSkipPaddingBlankHTML:!0}):null,f=Bn.splitTree(u,{node:s.parentNode,offset:Bn.position(s)},{isSkipPaddingBlankHTML:!0});i=n?Bn.listDescendant(f,Bn.isLi):et.from(f.childNodes).filter(Bn.isLi);if(n||!Bn.isList(u.parentNode))i=i.map(function(e){return Bn.replace(e,"P")});e.each(et.from(i).reverse(),function(e,t){Bn.insertAfter(t,u)});var l=et.compact([u,f,a]);e.each(l,function(t,n){var r=[n].concat(Bn.listDescendant(n,Bn.isList));e.each(r.reverse(),function(e,t){Bn.nodeLength(t)||Bn.remove(t,!0)})}),r=r.concat(i)}),r},t}(),Jn=function(){function t(){this.bullet=new $n}return t.prototype.insertTab=function(e,t){var n=Bn.createText((new Array(t+1)).join(Bn.NBSP_CHAR));e=e.deleteContents(),e.insertNode(n,!0),e=Un.create(n,t),e.select()},t.prototype.insertParagraph=function(t){var n=Un.create(t);n=n.deleteContents(),n=n.wrapBodyInlineWithPara();var r=Bn.ancestor(n.sc,Bn.isPara),i;if(r){if(Bn.isEmpty(r)&&Bn.isLi(r)){this.bullet.toggleList(r.parentNode.nodeName);return}if(Bn.isEmpty(r)&&Bn.isPara(r)&&Bn.isBlockquote(r.parentNode))Bn.insertAfter(r,r.parentNode),i=r;else{i=Bn.splitTree(r,n.getStartPoint());var s=Bn.listDescendant(r,Bn.isEmptyAnchor);s=s.concat(Bn.listDescendant(i,Bn.isEmptyAnchor)),e.each(s,function(e,t){Bn.remove(t)}),(Bn.isHeading(i)||Bn.isPre(i)||Bn.isCustomStyleTag(i))&&Bn.isEmpty(i)&&(i=Bn.replace(i,"p"))}}else{var o=n.sc.childNodes[n.so];i=e(Bn.emptyPara)[0],o?n.sc.insertBefore(i,o):n.sc.appendChild(i)}Un.create(i,0).normalize().select().scrollIntoView(t)},t}(),Kn=function(e,t,n,r){function u(){if(!e||!e.tagName||e.tagName.toLowerCase()!=="td"&&e.tagName.toLowerCase()!=="th"){console.error("Impossible to identify start Cell point.",e);return}i.colPos=e.cellIndex;if(!e.parentElement||!e.parentElement.tagName||e.parentElement.tagName.toLowerCase()!=="tr"){console.error("Impossible to identify start Row point.",e);return}i.rowPos=e.parentElement.rowIndex}function a(e,t,n,r,i,o,u){var a={baseRow:n,baseCell:r,isRowSpan:i,isColSpan:o,isVirtual:u};s[e]||(s[e]=[]),s[e][t]=a}function f(e,t,n,r){return{baseCell:e.baseCell,action:t,virtualTable:{rowIndex:n,cellIndex:r}}}function l(e,t){if(!s[e])return t;if(!s[e][t])return t;var n=t;while(s[e][n]){n++;if(!s[e][n])return n}}function c(e,t){var n=l(e.rowIndex,t.cellIndex),r=t.colSpan>1,s=t.rowSpan>1,o=e.rowIndex===i.rowPos&&t.cellIndex===i.colPos;a(e.rowIndex,n,e,t,s,r,!1);var u=t.attributes.rowSpan?parseInt(t.attributes.rowSpan.value,10):0;if(u>1)for(var f=1;f<u;f++){var c=e.rowIndex+f;h(c,n,t,o),a(c,n,e,t,!0,r,!0)}var p=t.attributes.colSpan?parseInt(t.attributes.colSpan.value,10):0;if(p>1)for(var d=1;d<p;d++){var v=l(e.rowIndex,n+d);h(e.rowIndex,v,t,o),a(e.rowIndex,v,e,t,s,!0,!0)}}function h(e,t,n,r){e===i.rowPos&&i.colPos>=n.cellIndex&&n.cellIndex<=t&&!r&&i.colPos++}function p(){var e=r.rows;for(var t=0;t<e.length;t++){var n=e[t].cells;for(var i=0;i<n.length;i++)c(e[t],n[i])}}function d(e){switch(t){case Kn.where.Column:if(e.isColSpan)return Kn.resultAction.SubtractSpanCount;break;case Kn.where.Row:if(!e.isVirtual&&e.isRowSpan)return Kn.resultAction.AddCell;if(e.isRowSpan)return Kn.resultAction.SubtractSpanCount}return Kn.resultAction.RemoveCell}function v(e){switch(t){case Kn.where.Column:if(e.isColSpan)return Kn.resultAction.SumSpanCount;if(e.isRowSpan&&e.isVirtual)return Kn.resultAction.Ignore;break;case Kn.where.Row:if(e.isRowSpan)return Kn.resultAction.SumSpanCount;if(e.isColSpan&&e.isVirtual)return Kn.resultAction.Ignore}return Kn.resultAction.AddCell}function m(){u(),p()}var i={colPos:0,rowPos:0},s=[],o=[];this.getActionList=function(){var e=t===Kn.where.Row?i.rowPos:-1,r=t===Kn.where.Column?i.colPos:-1,u=0,a=!0;while(a){var l=e>=0?e:u,c=r>=0?r:u,h=s[l];if(!h)return a=!1,o;var p=h[c];if(!p)return a=!1,o;var m=Kn.resultAction.Ignore;switch(n){case Kn.requestAction.Add:m=v(p);break;case Kn.requestAction.Delete:m=d(p)}o.push(f(p,m,l,c)),u++}return o},m()};Kn.where={Row:0,Column:1},Kn.requestAction={Add:0,Delete:1},Kn.resultAction={Ignore:0,SubtractSpanCount:1,RemoveCell:2,AddCell:3,SumSpanCount:4};var Qn=function(){function t(){}return t.prototype.tab=function(e,t){var n=Bn.ancestor(e.commonAncestor(),Bn.isCell),r=Bn.ancestor(n,Bn.isTable),i=Bn.listDescendant(r,Bn.isCell),s=et[t?"prev":"next"](i,n);s&&Un.create(s,0).select()},t.prototype.addRow=function(t,n){var r=Bn.ancestor(t.commonAncestor(),Bn.isCell),i=e(r).closest("tr"),s=this.recoverAttributes(i),o=e("<tr"+s+"></tr>"),u=new Kn(r,Kn.where.Row,Kn.requestAction.Add,e(i).closest("table")[0]),a=u.getActionList();for(var f=0;f<a.length;f++){var l=a[f],c=this.recoverAttributes(l.baseCell);switch(l.action){case Kn.resultAction.AddCell:o.append("<td"+c+">"+Bn.blank+"</td>");break;case Kn.resultAction.SumSpanCount:if(n==="top"){var h=l.baseCell.parent,p=(h?l.baseCell.closest("tr").rowIndex:0)<=i[0].rowIndex;if(p){var d=e("<div></div>").append(e("<td"+c+">"+Bn.blank+"</td>").removeAttr("rowspan")).html();o.append(d);break}}var v=parseInt(l.baseCell.rowSpan,10);v++,l.baseCell.setAttribute("rowSpan",v)}}if(n==="top")i.before(o);else{var m=r.rowSpan>1;if(m){var g=i[0].rowIndex+(r.rowSpan-2);e(e(i).parent().find("tr")[g]).after(e(o));return}i.after(o)}},t.prototype.addCol=function(t,n){var r=Bn.ancestor(t.commonAncestor(),Bn.isCell),i=e(r).closest("tr"),s=e(i).siblings();s.push(i);var o=new Kn(r,Kn.where.Column,Kn.requestAction.Add,e(i).closest("table")[0]),u=o.getActionList();for(var a=0;a<u.length;a++){var f=u[a],l=this.recoverAttributes(f.baseCell);switch(f.action){case Kn.resultAction.AddCell:n==="right"?e(f.baseCell).after("<td"+l+">"+Bn.blank+"</td>"):e(f.baseCell).before("<td"+l+">"+Bn.blank+"</td>");break;case Kn.resultAction.SumSpanCount:if(n==="right"){var c=parseInt(f.baseCell.colSpan,10);c++,f.baseCell.setAttribute("colSpan",c)}else e(f.baseCell).before("<td"+l+">"+Bn.blank+"</td>")}}},t.prototype.recoverAttributes=function(e){var t="";if(!e)return t;var n=e.attributes||[];for(var r=0;r<n.length;r++){if(n[r].name.toLowerCase()==="id")continue;n[r].specified&&(t+=" "+n[r].name+"='"+n[r].value+"'")}return t},t.prototype.deleteRow=function(t){var n=Bn.ancestor(t.commonAncestor(),Bn.isCell),r=e(n).closest("tr"),i=r.children("td, th").index(e(n)),s=r[0].rowIndex,o=new Kn(n,Kn.where.Row,Kn.requestAction.Delete,e(r).closest("table")[0]),u=o.getActionList();for(var a=0;a<u.length;a++){if(!u[a])continue;var f=u[a].baseCell,l=u[a].virtualTable,c=f.rowSpan&&f.rowSpan>1,h=c?parseInt(f.rowSpan,10):0;switch(u[a].action){case Kn.resultAction.Ignore:continue;case Kn.resultAction.AddCell:var p=r.next("tr")[0];if(!p)continue;var d=r[0].cells[i];c&&(h>2?(h--,p.insertBefore(d,p.cells[i]),p.cells[i].setAttribute("rowSpan",h),p.cells[i].innerHTML=""):h===2&&(p.insertBefore(d,p.cells[i]),p.cells[i].removeAttribute("rowSpan"),p.cells[i].innerHTML=""));continue;case Kn.resultAction.SubtractSpanCount:c&&(h>2?(h--,f.setAttribute("rowSpan",h),l.rowIndex!==s&&f.cellIndex===i&&(f.innerHTML="")):h===2&&(f.removeAttribute("rowSpan"),l.rowIndex!==s&&f.cellIndex===i&&(f.innerHTML="")));continue;case Kn.resultAction.RemoveCell:continue}}r.remove()},t.prototype.deleteCol=function(t){var n=Bn.ancestor(t.commonAncestor(),Bn.isCell),r=e(n).closest("tr"),i=r.children("td, th").index(e(n)),s=new Kn(n,Kn.where.Column,Kn.requestAction.Delete,e(r).closest("table")[0]),o=s.getActionList();for(var u=0;u<o.length;u++){if(!o[u])continue;switch(o[u].action){case Kn.resultAction.Ignore:continue;case Kn.resultAction.SubtractSpanCount:var a=o[u].baseCell,f=a.colSpan&&a.colSpan>1;if(f){var l=a.colSpan?parseInt(a.colSpan,10):0;l>2?(l--,a.setAttribute("colSpan",l),a.cellIndex===i&&(a.innerHTML="")):l===2&&(a.removeAttribute("colSpan"),a.cellIndex===i&&(a.innerHTML=""))}continue;case Kn.resultAction.RemoveCell:Bn.remove(o[u].baseCell,!0);continue}}},t.prototype.createTable=function(t,n,r){var i=[],s;for(var o=0;o<t;o++)i.push("<td>"+Bn.blank+"</td>");s=i.join("");var u=[],a;for(var f=0;f<n;f++)u.push("<tr>"+s+"</tr>");a=u.join("");var l=e("<table>"+a+"</table>");return r&&r.tableClassName&&l.addClass(r.tableClassName),l[0]},t.prototype.deleteTable=function(t){var n=Bn.ancestor(t.commonAncestor(),Bn.isCell);e(n).closest("table").remove()},t}(),Gn="bogus",Yn=function(){function t(t){var n=this;this.context=t,this.$note=t.layoutInfo.note,this.$editor=t.layoutInfo.editor,this.$editable=t.layoutInfo.editable,this.options=t.options,this.lang=this.options.langInfo,this.editable=this.$editable[0],this.lastRange=null,this.style=new Vn,this.table=new Qn,this.typing=new Jn,this.bullet=new $n,this.history=new Xn(this.$editable),this.context.memo("help.undo",this.lang.help.undo),this.context.memo("help.redo",this.lang.help.redo),this.context.memo("help.tab",this.lang.help.tab),this.context.memo("help.untab",this.lang.help.untab),this.context.memo("help.insertParagraph",this.lang.help.insertParagraph),this.context.memo("help.insertOrderedList",this.lang.help.insertOrderedList),this.context.memo("help.insertUnorderedList",this.lang.help.insertUnorderedList),this.context.memo("help.indent",this.lang.help.indent),this.context.memo("help.outdent",this.lang.help.outdent),this.context.memo("help.formatPara",this.lang.help.formatPara),this.context.memo("help.insertHorizontalRule",this.lang.help.insertHorizontalRule),this.context.memo("help.fontName",this.lang.help.fontName);var r=["bold","italic","underline","strikethrough","superscript","subscript","justifyLeft","justifyCenter","justifyRight","justifyFull","formatBlock","removeFormat","backColor"];for(var i=0,s=r.length;i<s;i++)this[r[i]]=function(e){return function(t){n.beforeCommand(),document.execCommand(e,!1,t),n.afterCommand(!0)}}(r[i]),this.context.memo("help."+r[i],this.lang.help[r[i]]);this.fontName=this.wrapCommand(function(e){return n.fontStyling("font-family","'"+e+"'")}),this.fontSize=this.wrapCommand(function(e){return n.fontStyling("font-size",e+"px")});for(var i=1;i<=6;i++)this["formatH"+i]=function(e){return function(){n.formatBlock("H"+e)}}(i),this.context.memo("help.formatH"+i,this.lang.help["formatH"+i]);this.insertParagraph=this.wrapCommand(function(){n.typing.insertParagraph(n.editable)}),this.insertOrderedList=this.wrapCommand(function(){n.bullet.insertOrderedList(n.editable)}),this.insertUnorderedList=this.wrapCommand(function(){n.bullet.insertUnorderedList(n.editable)}),this.indent=this.wrapCommand(function(){n.bullet.indent(n.editable)}),this.outdent=this.wrapCommand(function(){n.bullet.outdent(n.editable)}),this.insertNode=this.wrapCommand(function(t){if(n.isLimited(e(t).text().length))return;var r=n.createRange();r.insertNode(t),Un.createFromNodeAfter(t).select()}),this.insertText=this.wrapCommand(function(e){if(n.isLimited(e.length))return;var t=n.createRange(),r=t.insertNode(Bn.createText(e));Un.create(r,Bn.nodeLength(r)).select()}),this.pasteHTML=this.wrapCommand(function(e){if(n.isLimited(e.length))return;var t=n.createRange().pasteHTML(e);Un.createFromNodeAfter(et.last(t)).select()}),this.formatBlock=this.wrapCommand(function(e,t){var r=n.options.callbacks.onApplyCustomStyle;r?r.call(n,t,n.context,n.onFormatBlock):n.onFormatBlock(e,t)}),this.insertHorizontalRule=this.wrapCommand(function(){var e=n.createRange().insertNode(Bn.create("HR"));e.nextSibling&&Un.create(e.nextSibling,0).normalize().select()}),this.lineHeight=this.wrapCommand(function(e){n.style.stylePara(n.createRange(),{lineHeight:e})}),this.createLink=this.wrapCommand(function(t){var r=t.url,i=t.text,s=t.isNewWindow,o=t.range||n.createRange(),u=o.toString()!==i;typeof r=="string"&&(r=r.trim()),n.options.onCreateLink?r=n.options.onCreateLink(r):r=/^[A-Za-z][A-Za-z0-9+-.]*\:[\/\/]?/.test(r)?r:"http://"+r;var a=[];if(u){o=o.deleteContents();var f=o.insertNode(e("<A>"+i+"</A>")[0]);a.push(f)}else a=n.style.styleNodes(o,{nodeName:"A",expandClosestSibling:!0,onlyPartialContains:!0});e.each(a,function(t,n){e(n).attr("href",r),s?e(n).attr("target","_blank"):e(n).removeAttr("target")});var l=Un.createFromNodeBefore(et.head(a)),c=l.getStartPoint(),h=Un.createFromNodeAfter(et.last(a)),p=h.getEndPoint();Un.create(c.node,c.offset,p.node,p.offset).select()}),this.color=this.wrapCommand(function(e){var t=e.foreColor,n=e.backColor;t&&document.execCommand("foreColor",!1,t),n&&document.execCommand("backColor",!1,n)}),this.foreColor=this.wrapCommand(function(e){document.execCommand("styleWithCSS",!1,!0),document.execCommand("foreColor",!1,e)}),this.insertTable=this.wrapCommand(function(e){var t=e.split("x"),r=n.createRange().deleteContents();r.insertNode(n.table.createTable(t[0],t[1],n.options))}),this.removeMedia=this.wrapCommand(function(){var t=e(n.restoreTarget()).parent();t.parent("figure").length?t.parent("figure").remove():t=e(n.restoreTarget()).detach(),n.context.triggerEvent("media.delete",t,n.$editable)}),this.floatMe=this.wrapCommand(function(t){var r=e(n.restoreTarget());r.toggleClass("note-float-left",t==="left"),r.toggleClass("note-float-right",t==="right"),r.css("float",t)}),this.resize=this.wrapCommand(function(t){var r=e(n.restoreTarget());r.css({width:t*100+"%",height:""})})}return t.prototype.initialize=function(){var e=this;this.$editable.on("keydown",function(t){t.keyCode===Fn.code.ENTER&&e.context.triggerEvent("enter",t),e.context.triggerEvent("keydown",t),t.isDefaultPrevented()||(e.options.shortcuts?e.handleKeyMap(t):e.preventDefaultEditableShortCuts(t));if(e.isLimited(1,t))return!1}).on("keyup",function(t){e.context.triggerEvent("keyup",t)}).on("focus",function(t){e.context.triggerEvent("focus",t)}).on("blur",function(t){e.context.triggerEvent("blur",t)}).on("mousedown",function(t){e.context.triggerEvent("mousedown",t)}).on("mouseup",function(t){e.context.triggerEvent("mouseup",t)}).on("scroll",function(t){e.context.triggerEvent("scroll",t)}).on("paste",function(t){e.context.triggerEvent("paste",t)}),this.$editable.html(Bn.html(this.$note)||Bn.emptyPara),this.$editable.on(ht.inputEventName,B.debounce(function(){e.context.triggerEvent("change",e.$editable.html())},100)),this.$editor.on("focusin",function(t){e.context.triggerEvent("focusin",t)}).on("focusout",function(t){e.context.triggerEvent("focusout",t)}),this.options.airMode||(this.options.width&&this.$editor.outerWidth(this.options.width),this.options.height&&this.$editable.outerHeight(this.options.height),this.options.maxHeight&&this.$editable.css("max-height",this.options.maxHeight),this.options.minHeight&&this.$editable.css("min-height",this.options.minHeight)),this.history.recordUndo()},t.prototype.destroy=function(){this.$editable.off()},t.prototype.handleKeyMap=function(e){var t=this.options.keyMap[ht.isMac?"mac":"pc"],n=[];e.metaKey&&n.push("CMD"),e.ctrlKey&&!e.altKey&&n.push("CTRL"),e.shiftKey&&n.push("SHIFT");var r=Fn.nameFromCode[e.keyCode];r&&n.push(r);var i=t[n.join("+")];i?this.context.invoke(i)!==!1&&e.preventDefault():Fn.isEdit(e.keyCode)&&this.afterCommand()},t.prototype.preventDefaultEditableShortCuts=function(e){(e.ctrlKey||e.metaKey)&&et.contains([66,73,85],e.keyCode)&&e.preventDefault()},t.prototype.isLimited=function(e,t){e=e||0;if(typeof t!="undefined")if(Fn.isMove(t.keyCode)||t.ctrlKey||t.metaKey||et.contains([Fn.code.BACKSPACE,Fn.code.DELETE],t.keyCode))return!1;return this.options.maxTextLength>0&&this.$editable.text().length+e>=this.options.maxTextLength?!0:!1},t.prototype.createRange=function(){return this.focus(),Un.create(this.editable)},t.prototype.saveRange=function(e){this.lastRange=this.createRange(),e&&this.lastRange.collapse().select()},t.prototype.restoreRange=function(){this.lastRange&&(this.lastRange.select(),this.focus())},t.prototype.saveTarget=function(e){this.$editable.data("target",e)},t.prototype.clearTarget=function(){this.$editable.removeData("target")},t.prototype.restoreTarget=function(){return this.$editable.data("target")},t.prototype.currentStyle=function(){var e=Un.create();return e&&(e=e.normalize()),e?this.style.current(e):this.style.fromNode(this.$editable)},t.prototype.styleFromNode=function(e){return this.style.fromNode(e)},t.prototype.undo=function(){this.context.triggerEvent("before.command",this.$editable.html()),this.history.undo(),this.context.triggerEvent("change",this.$editable.html())},t.prototype.redo=function(){this.context.triggerEvent("before.command",this.$editable.html()),this.history.redo(),this.context.triggerEvent("change",this.$editable.html())},t.prototype.beforeCommand=function(){this.context.triggerEvent("before.command",this.$editable.html()),this.focus()},t.prototype.afterCommand=function(e){this.normalizeContent(),this.history.recordUndo(),e||this.context.triggerEvent("change",this.$editable.html())},t.prototype.tab=function(){var e=this.createRange();if(e.isCollapsed()&&e.isOnCell())this.table.tab(e);else{if(this.options.tabSize===0)return!1;this.isLimited(this.options.tabSize)||(this.beforeCommand(),this.typing.insertTab(e,this.options.tabSize),this.afterCommand())}},t.prototype.untab=function(){var e=this.createRange();if(e.isCollapsed()&&e.isOnCell())this.table.tab(e,!0);else if(this.options.tabSize===0)return!1},t.prototype.wrapCommand=function(e){var t=this;return function(){t.beforeCommand(),e.apply(t,arguments),t.afterCommand()}},t.prototype.insertImage=function(e,t){var n=this;return Wn(e,t).then(function(e){n.beforeCommand(),typeof t=="function"?t(e):(typeof t=="string"&&e.attr("data-filename",t),e.css("width",Math.min(n.$editable.width(),e.width()))),e.show(),Un.create(n.editable).insertNode(e[0]),Un.createFromNodeAfter(e[0]).select(),n.afterCommand()}).fail(function(e){n.context.triggerEvent("image.upload.error",e)})},t.prototype.insertImages=function(t){var n=this;e.each(t,function(e,t){var r=t.name;n.options.maximumImageFileSize&&n.options.maximumImageFileSize<t.size?n.context.triggerEvent("image.upload.error",n.lang.image.maximumFileSizeError):zn(t).then(function(e){return n.insertImage(e,r)}).fail(function(){n.context.triggerEvent("image.upload.error")})})},t.prototype.insertImagesOrCallback=function(e){var t=this.options.callbacks;t.onImageUpload?this.context.triggerEvent("image.upload",e):this.insertImages(e)},t.prototype.getSelectedText=function(){var e=this.createRange();return e.isOnAnchor()&&(e=Un.createFromNode(Bn.ancestor(e.sc,Bn.isAnchor))),e.toString()},t.prototype.onFormatBlock=function(t,n){t=ht.isMSIE?"<"+t+">":t,document.execCommand("FormatBlock",!1,t);if(n&&n.length){var r=n[0].className||"";if(r){var i=this.createRange(),s=e([i.sc,i.ec]).closest(t);s.addClass(r)}}},t.prototype.formatPara=function(){this.formatBlock("P")},t.prototype.fontStyling=function(t,n){var r=this.createRange();if(r){var i=this.style.styleNodes(r);e(i).css(t,n);if(r.isCollapsed()){var s=et.head(i);s&&!Bn.nodeLength(s)&&(s.innerHTML=Bn.ZERO_WIDTH_NBSP_CHAR,Un.createFromNodeAfter(s.firstChild).select(),this.$editable.data(Gn,s))}}},t.prototype.unlink=function(){var e=this.createRange();if(e.isOnAnchor()){var t=Bn.ancestor(e.sc,Bn.isAnchor);e=Un.createFromNode(t),e.select(),this.beforeCommand(),document.execCommand("unlink"),this.afterCommand()}},t.prototype.getLinkInfo=function(){var t=this.createRange().expand(Bn.isAnchor),n=e(et.head(t.nodes(Bn.isAnchor))),r={range:t,text:t.toString(),url:n.length?n.attr("href"):""};return n.length&&(r.isNewWindow=n.attr("target")==="_blank"),r},t.prototype.addRow=function(e){var t=this.createRange(this.$editable);t.isCollapsed()&&t.isOnCell()&&(this.beforeCommand(),this.table.addRow(t,e),this.afterCommand())},t.prototype.addCol=function(e){var t=this.createRange(this.$editable);t.isCollapsed()&&t.isOnCell()&&(this.beforeCommand(),this.table.addCol(t,e),this.afterCommand())},t.prototype.deleteRow=function(){var e=this.createRange(this.$editable);e.isCollapsed()&&e.isOnCell()&&(this.beforeCommand(),this.table.deleteRow(e),this.afterCommand())},t.prototype.deleteCol=function(){var e=this.createRange(this.$editable);e.isCollapsed()&&e.isOnCell()&&(this.beforeCommand(),this.table.deleteCol(e),this.afterCommand())},t.prototype.deleteTable=function(){var e=this.createRange(this.$editable);e.isCollapsed()&&e.isOnCell()&&(this.beforeCommand(),this.table.deleteTable(e),this.afterCommand())},t.prototype.resizeTo=function(e,t,n){var r;if(n){var i=e.y/e.x,s=t.data("ratio");r={width:s>i?e.x:e.y/s,height:s>i?e.x*s:e.y}}else r={width:e.x,height:e.y};t.css(r)},t.prototype.hasFocus=function(){return this.$editable.is(":focus")},t.prototype.focus=function(){this.hasFocus()||this.$editable.focus()},t.prototype.isEmpty=function(){return Bn.isEmpty(this.$editable[0])||Bn.emptyPara===this.$editable.html()},t.prototype.empty=function(){this.context.invoke("code",Bn.emptyPara)},t.prototype.normalizeContent=function(){this.$editable[0].normalize()},t}(),Zn=function(){function e(e){this.context=e,this.$editable=e.layoutInfo.editable}return e.prototype.initialize=function(){this.$editable.on("paste",this.pasteByEvent.bind(this))},e.prototype.pasteByEvent=function(e){var t=e.originalEvent.clipboardData;if(t&&t.items&&t.items.length){var n=et.head(t.items);n.kind==="file"&&n.type.indexOf("image/")!==-1&&this.context.invoke("editor.insertImagesOrCallback",[n.getAsFile()]),this.context.invoke("editor.afterCommand")}},e}(),er=function(){function t(t){this.context=t,this.$eventListener=e(document),this.$editor=t.layoutInfo.editor,this.$editable=t.layoutInfo.editable,this.options=t.options,this.lang=this.options.langInfo,this.documentEventHandlers={},this.$dropzone=e(['<div class="note-dropzone">','  <div class="note-dropzone-message"/>',"</div>"].join("")).prependTo(this.$editor)}return t.prototype.initialize=function(){this.options.disableDragAndDrop?(this.documentEventHandlers.onDrop=function(e){e.preventDefault()},this.$eventListener=this.$dropzone,this.$eventListener.on("drop",this.documentEventHandlers.onDrop)):this.attachDragAndDropEvent()},t.prototype.attachDragAndDropEvent=function(){var t=this,n=e(),r=this.$dropzone.find(".note-dropzone-message");this.documentEventHandlers.onDragenter=function(e){var i=t.context.invoke("codeview.isActivated"),s=t.$editor.width()>0&&t.$editor.height()>0;!i&&!n.length&&s&&(t.$editor.addClass("dragover"),t.$dropzone.width(t.$editor.width()),t.$dropzone.height(t.$editor.height()),r.text(t.lang.image.dragImageHere)),n=n.add(e.target)},this.documentEventHandlers.onDragleave=function(e){n=n.not(e.target),n.length||t.$editor.removeClass("dragover")},this.documentEventHandlers.onDrop=function(){n=e(),t.$editor.removeClass("dragover")},this.$eventListener.on("dragenter",this.documentEventHandlers.onDragenter).on("dragleave",this.documentEventHandlers.onDragleave).on("drop",this.documentEventHandlers.onDrop),this.$dropzone.on("dragenter",function(){t.$dropzone.addClass("hover"),r.text(t.lang.image.dropImage)}).on("dragleave",function(){t.$dropzone.removeClass("hover"),r.text(t.lang.image.dragImageHere)}),this.$dropzone.on("drop",function(n){var r=n.originalEvent.dataTransfer;n.preventDefault(),r&&r.files&&r.files.length?(t.$editable.focus(),t.context.invoke("editor.insertImagesOrCallback",r.files)):e.each(r.types,function(n,i){var s=r.getData(i);i.toLowerCase().indexOf("text")>-1?t.context.invoke("editor.pasteHTML",s):e(s).each(function(e,n){t.context.invoke("editor.insertNode",n)})})}).on("dragover",!1)},t.prototype.destroy=function(){var e=this;Object.keys(this.documentEventHandlers).forEach(function(t){e.$eventListener.off(t.substr(2).toLowerCase(),e.documentEventHandlers[t])}),this.documentEventHandlers={}},t}(),tr;ht.hasCodeMirror&&(ht.isSupportAmd?require(["codemirror"],function(e){tr=e}):tr=window.CodeMirror);var nr=function(){function e(e){this.context=e,this.$editor=e.layoutInfo.editor,this.$editable=e.layoutInfo.editable,this.$codable=e.layoutInfo.codable,this.options=e.options}return e.prototype.sync=function(){var e=this.isActivated();e&&ht.hasCodeMirror&&this.$codable.data("cmEditor").save()},e.prototype.isActivated=function(){return this.$editor.hasClass("codeview")},e.prototype.toggle=function(){this.isActivated()?this.deactivate():this.activate(),this.context.triggerEvent("codeview.toggled")},e.prototype.activate=function(){var e=this;this.$codable.val(Bn.html(this.$editable,this.options.prettifyHtml)),this.$codable.height(this.$editable.height()),this.context.invoke("toolbar.updateCodeview",!0),this.$editor.addClass("codeview"),this.$codable.focus();if(ht.hasCodeMirror){var t=tr.fromTextArea(this.$codable[0],this.options.codemirror);if(this.options.codemirror.tern){var n=new tr.TernServer(this.options.codemirror.tern);t.ternServer=n,t.on("cursorActivity",function(e){n.updateArgHints(e)})}t.on("blur",function(n){e.
context.triggerEvent("blur.codeview",t.getValue(),n)}),t.setSize(null,this.$editable.outerHeight()),this.$codable.data("cmEditor",t)}else this.$codable.on("blur",function(t){e.context.triggerEvent("blur.codeview",e.$codable.val(),t)})},e.prototype.deactivate=function(){if(ht.hasCodeMirror){var e=this.$codable.data("cmEditor");this.$codable.val(e.getValue()),e.toTextArea()}var t=Bn.value(this.$codable,this.options.prettifyHtml)||Bn.emptyPara,n=this.$editable.html()!==t;this.$editable.html(t),this.$editable.height(this.options.height?this.$codable.height():"auto"),this.$editor.removeClass("codeview"),n&&this.context.triggerEvent("change",this.$editable.html(),this.$editable),this.$editable.focus(),this.context.invoke("toolbar.updateCodeview",!1)},e.prototype.destroy=function(){this.isActivated()&&this.deactivate()},e}(),rr=24,ir=function(){function t(t){this.$document=e(document),this.$statusbar=t.layoutInfo.statusbar,this.$editable=t.layoutInfo.editable,this.options=t.options}return t.prototype.initialize=function(){var e=this;if(this.options.airMode||this.options.disableResizeEditor){this.destroy();return}this.$statusbar.on("mousedown",function(t){t.preventDefault(),t.stopPropagation();var n=e.$editable.offset().top-e.$document.scrollTop(),r=function(t){var r=t.clientY-(n+rr);r=e.options.minheight>0?Math.max(r,e.options.minheight):r,r=e.options.maxHeight>0?Math.min(r,e.options.maxHeight):r,e.$editable.height(r)};e.$document.on("mousemove",r).one("mouseup",function(){e.$document.off("mousemove",r)})})},t.prototype.destroy=function(){this.$statusbar.off(),this.$statusbar.addClass("locked")},t}(),sr=function(){function t(t){var n=this;this.context=t,this.$editor=t.layoutInfo.editor,this.$toolbar=t.layoutInfo.toolbar,this.$editable=t.layoutInfo.editable,this.$codable=t.layoutInfo.codable,this.$window=e(window),this.$scrollbar=e("html, body"),this.onResize=function(){n.resizeTo({h:n.$window.height()-n.$toolbar.outerHeight()})}}return t.prototype.resizeTo=function(e){this.$editable.css("height",e.h),this.$codable.css("height",e.h),this.$codable.data("cmeditor")&&this.$codable.data("cmeditor").setsize(null,e.h)},t.prototype.toggle=function(){this.$editor.toggleClass("fullscreen"),this.isFullscreen()?(this.$editable.data("orgHeight",this.$editable.css("height")),this.$window.on("resize",this.onResize).trigger("resize"),this.$scrollbar.css("overflow","hidden")):(this.$window.off("resize",this.onResize),this.resizeTo({h:this.$editable.data("orgHeight")}),this.$scrollbar.css("overflow","visible")),this.context.invoke("toolbar.updateFullscreen",this.isFullscreen())},t.prototype.isFullscreen=function(){return this.$editor.hasClass("fullscreen")},t}(),or=function(){function t(t){var n=this;this.context=t,this.$document=e(document),this.$editingArea=t.layoutInfo.editingArea,this.options=t.options,this.lang=this.options.langInfo,this.events={"summernote.mousedown":function(e,t){n.update(t.target)&&t.preventDefault()},"summernote.keyup summernote.scroll summernote.change summernote.dialog.shown":function(){n.update()},"summernote.disable":function(){n.hide()},"summernote.codeview.toggled":function(){n.update()}}}return t.prototype.initialize=function(){var t=this;this.$handle=e(['<div class="note-handle">','<div class="note-control-selection">','<div class="note-control-selection-bg"></div>','<div class="note-control-holder note-control-nw"></div>','<div class="note-control-holder note-control-ne"></div>','<div class="note-control-holder note-control-sw"></div>','<div class="',this.options.disableResizeImage?"note-control-holder":"note-control-sizing",' note-control-se"></div>',this.options.disableResizeImage?"":'<div class="note-control-selection-info"></div>',"</div>","</div>"].join("")).prependTo(this.$editingArea),this.$handle.on("mousedown",function(e){if(Bn.isControlSizing(e.target)){e.preventDefault(),e.stopPropagation();var n=t.$handle.find(".note-control-selection").data("target"),r=n.offset(),i=t.$document.scrollTop(),s=function(e){t.context.invoke("editor.resizeTo",{x:e.clientX-r.left,y:e.clientY-(r.top-i)},n,!e.shiftKey),t.update(n[0])};t.$document.on("mousemove",s).one("mouseup",function(e){e.preventDefault(),t.$document.off("mousemove",s),t.context.invoke("editor.afterCommand")}),n.data("ratio")||n.data("ratio",n.height()/n.width())}}),this.$handle.on("wheel",function(e){e.preventDefault(),t.update()})},t.prototype.destroy=function(){this.$handle.remove()},t.prototype.update=function(t){if(this.context.isDisabled())return!1;var n=Bn.isImg(t),r=this.$handle.find(".note-control-selection");this.context.invoke("imagePopover.update",t);if(n){var i=e(t),s=i.position(),o={left:s.left+parseInt(i.css("marginLeft"),10),top:s.top+parseInt(i.css("marginTop"),10)},u={w:i.outerWidth(!1),h:i.outerHeight(!1)};r.css({display:"block",left:o.left,top:o.top,width:u.w,height:u.h}).data("target",i);var a=new Image;a.src=i.attr("src");var f=u.w+"x"+u.h+" ("+this.lang.image.original+": "+a.width+"x"+a.height+")";r.find(".note-control-selection-info").text(f),this.context.invoke("editor.saveTarget",t)}else this.hide();return n},t.prototype.hide=function(){this.context.invoke("editor.clearTarget"),this.$handle.children().hide()},t}(),ur="http://",ar=/^([A-Za-z][A-Za-z0-9+-.]*\:[\/\/]?|mailto:[A-Z0-9._%+-]+@)?(www\.)?(.+)$/i,fr=function(){function t(e){var t=this;this.context=e,this.events={"summernote.keyup":function(e,n){n.isDefaultPrevented()||t.handleKeyup(n)},"summernote.keydown":function(e,n){t.handleKeydown(n)}}}return t.prototype.initialize=function(){this.lastWordRange=null},t.prototype.destroy=function(){this.lastWordRange=null},t.prototype.replace=function(){if(!this.lastWordRange)return;var t=this.lastWordRange.toString(),n=t.match(ar);if(n&&(n[1]||n[2])){var r=n[1]?t:ur+t,i=e("<a />").html(t).attr("href",r)[0];this.lastWordRange.insertNode(i),this.lastWordRange=null,this.context.invoke("editor.focus")}},t.prototype.handleKeydown=function(e){if(et.contains([Fn.code.ENTER,Fn.code.SPACE],e.keyCode)){var t=this.context.invoke("editor.createRange").getWordRange();this.lastWordRange=t}},t.prototype.handleKeyup=function(e){et.contains([Fn.code.ENTER,Fn.code.SPACE],e.keyCode)&&this.replace()},t}(),lr=function(){function e(e){var t=this;this.$note=e.layoutInfo.note,this.events={"summernote.change":function(){t.$note.val(e.invoke("code"))}}}return e.prototype.shouldInitialize=function(){return Bn.isTextarea(this.$note[0])},e}(),cr=function(){function t(e){var t=this;this.context=e,this.$editingArea=e.layoutInfo.editingArea,this.options=e.options,this.events={"summernote.init summernote.change":function(){t.update()},"summernote.codeview.toggled":function(){t.update()}}}return t.prototype.shouldInitialize=function(){return!!this.options.placeholder},t.prototype.initialize=function(){var t=this;this.$placeholder=e('<div class="note-placeholder">'),this.$placeholder.on("click",function(){t.context.invoke("focus")}).text(this.options.placeholder).prependTo(this.$editingArea),this.update()},t.prototype.destroy=function(){this.$placeholder.remove()},t.prototype.update=function(){var e=!this.context.invoke("codeview.isActivated")&&this.context.invoke("editor.isEmpty");this.$placeholder.toggle(e)},t}(),hr=function(){function t(t){this.ui=e.summernote.ui,this.context=t,this.$toolbar=t.layoutInfo.toolbar,this.options=t.options,this.lang=this.options.langInfo,this.invertedKeyMap=B.invertObject(this.options.keyMap[ht.isMac?"mac":"pc"])}return t.prototype.representShortcut=function(e){var t=this.invertedKeyMap[e];return!this.options.shortcuts||!t?"":(ht.isMac&&(t=t.replace("CMD","\u2318").replace("SHIFT","\u21e7")),t=t.replace("BACKSLASH","\\").replace("SLASH","/").replace("LEFTBRACKET","[").replace("RIGHTBRACKET","]")," ("+t+")")},t.prototype.button=function(e){return!this.options.tooltip&&e.tooltip&&delete e.tooltip,e.container=this.options.container,this.ui.button(e)},t.prototype.initialize=function(){this.addToolbarButtons(),this.addImagePopoverButtons(),this.addLinkPopoverButtons(),this.addTablePopoverButtons(),this.fontInstalledMap={}},t.prototype.destroy=function(){delete this.fontInstalledMap},t.prototype.isFontInstalled=function(e){return this.fontInstalledMap.hasOwnProperty(e)||(this.fontInstalledMap[e]=ht.isFontInstalled(e)||et.contains(this.options.fontNamesIgnoreCheck,e)),this.fontInstalledMap[e]},t.prototype.isFontDeservedToAdd=function(t){var n=["sans-serif","serif","monospace","cursive","fantasy"];return t=t.toLowerCase(),t!==""&&this.isFontInstalled(t)&&e.inArray(t,n)===-1},t.prototype.addToolbarButtons=function(){var t=this;this.context.memo("button.style",function(){return t.ui.buttonGroup([t.button({className:"dropdown-toggle",contents:t.ui.dropdownButtonContents(t.ui.icon(t.options.icons.magic),t.options),tooltip:t.lang.style.style,data:{toggle:"dropdown"}}),t.ui.dropdown({className:"dropdown-style",items:t.options.styleTags,title:t.lang.style.style,template:function(e){typeof e=="string"&&(e={tag:e,title:t.lang.style.hasOwnProperty(e)?t.lang.style[e]:e});var n=e.tag,r=e.title,i=e.style?' style="'+e.style+'" ':"",s=e.className?' class="'+e.className+'"':"";return"<"+n+i+s+">"+r+"</"+n+">"},click:t.context.createInvokeHandler("editor.formatBlock")})]).render()});var n=function(e,n){var i=r.options.styleTags[e];r.context.memo("button.style."+i,function(){return t.button({className:"note-btn-style-"+i,contents:'<div data-value="'+i+'">'+i.toUpperCase()+"</div>",tooltip:t.lang.style[i],click:t.context.createInvokeHandler("editor.formatBlock")}).render()})},r=this;for(var i=0,s=this.options.styleTags.length;i<s;i++)n(i,s);this.context.memo("button.bold",function(){return t.button({className:"note-btn-bold",contents:t.ui.icon(t.options.icons.bold),tooltip:t.lang.font.bold+t.representShortcut("bold"),click:t.context.createInvokeHandlerAndUpdateState("editor.bold")}).render()}),this.context.memo("button.italic",function(){return t.button({className:"note-btn-italic",contents:t.ui.icon(t.options.icons.italic),tooltip:t.lang.font.italic+t.representShortcut("italic"),click:t.context.createInvokeHandlerAndUpdateState("editor.italic")}).render()}),this.context.memo("button.underline",function(){return t.button({className:"note-btn-underline",contents:t.ui.icon(t.options.icons.underline),tooltip:t.lang.font.underline+t.representShortcut("underline"),click:t.context.createInvokeHandlerAndUpdateState("editor.underline")}).render()}),this.context.memo("button.clear",function(){return t.button({contents:t.ui.icon(t.options.icons.eraser),tooltip:t.lang.font.clear+t.representShortcut("removeFormat"),click:t.context.createInvokeHandler("editor.removeFormat")}).render()}),this.context.memo("button.strikethrough",function(){return t.button({className:"note-btn-strikethrough",contents:t.ui.icon(t.options.icons.strikethrough),tooltip:t.lang.font.strikethrough+t.representShortcut("strikethrough"),click:t.context.createInvokeHandlerAndUpdateState("editor.strikethrough")}).render()}),this.context.memo("button.superscript",function(){return t.button({className:"note-btn-superscript",contents:t.ui.icon(t.options.icons.superscript),tooltip:t.lang.font.superscript,click:t.context.createInvokeHandlerAndUpdateState("editor.superscript")}).render()}),this.context.memo("button.subscript",function(){return t.button({className:"note-btn-subscript",contents:t.ui.icon(t.options.icons.subscript),tooltip:t.lang.font.subscript,click:t.context.createInvokeHandlerAndUpdateState("editor.subscript")}).render()}),this.context.memo("button.fontname",function(){var n=t.context.invoke("editor.currentStyle");return e.each(n["font-family"].split(","),function(n,r){r=r.trim().replace(/['"]+/g,""),t.isFontDeservedToAdd(r)&&e.inArray(r,t.options.fontNames)===-1&&t.options.fontNames.push(r)}),t.ui.buttonGroup([t.button({className:"dropdown-toggle",contents:t.ui.dropdownButtonContents('<span class="note-current-fontname"/>',t.options),tooltip:t.lang.font.name,data:{toggle:"dropdown"}}),t.ui.dropdownCheck({className:"dropdown-fontname",checkClassName:t.options.icons.menuCheck,items:t.options.fontNames.filter(t.isFontInstalled.bind(t)),title:t.lang.font.name,template:function(e){return"<span style=\"font-family: '"+e+"'\">"+e+"</span>"},click:t.context.createInvokeHandlerAndUpdateState("editor.fontName")})]).render()}),this.context.memo("button.fontsize",function(){return t.ui.buttonGroup([t.button({className:"dropdown-toggle",contents:t.ui.dropdownButtonContents('<span class="note-current-fontsize"/>',t.options),tooltip:t.lang.font.size,data:{toggle:"dropdown"}}),t.ui.dropdownCheck({className:"dropdown-fontsize",checkClassName:t.options.icons.menuCheck,items:t.options.fontSizes,title:t.lang.font.size,click:t.context.createInvokeHandlerAndUpdateState("editor.fontSize")})]).render()}),this.context.memo("button.color",function(){return t.ui.buttonGroup({className:"note-color",children:[t.button({className:"note-current-color-button",contents:t.ui.icon(t.options.icons.font+" note-recent-color"),tooltip:t.lang.color.recent,click:function(n){var r=e(n.currentTarget);t.context.invoke("editor.color",{backColor:r.attr("data-backColor"),foreColor:r.attr("data-foreColor")})},callback:function(e){var t=e.find(".note-recent-color");t.css("background-color","#FFFF00"),e.attr("data-backColor","#FFFF00")}}),t.button({className:"dropdown-toggle",contents:t.ui.dropdownButtonContents("",t.options),tooltip:t.lang.color.more,data:{toggle:"dropdown"}}),t.ui.dropdown({items:['<div class="note-palette">','  <div class="note-palette-title">'+t.lang.color.background+"</div>","  <div>",'    <button type="button" class="note-color-reset btn btn-light" data-event="backColor" data-value="inherit">',t.lang.color.transparent,"    </button>","  </div>",'  <div class="note-holder" data-event="backColor"/>',"</div>",'<div class="note-palette">','  <div class="note-palette-title">'+t.lang.color.foreground+"</div>","  <div>",'    <button type="button" class="note-color-reset btn btn-light" data-event="removeFormat" data-value="foreColor">',t.lang.color.resetToDefault,"    </button>","  </div>",'  <div class="note-holder" data-event="foreColor"/>',"</div>"].join(""),callback:function(n){n.find(".note-holder").each(function(n,r){var i=e(r);i.append(t.ui.palette({colors:t.options.colors,colorsName:t.options.colorsName,eventName:i.data("event"),container:t.options.container,tooltip:t.options.tooltip}).render())})},click:function(n){var r=e(n.target),i=r.data("event"),s=r.data("value");if(i&&s){var o=i==="backColor"?"background-color":"color",u=r.closest(".note-color").find(".note-recent-color"),a=r.closest(".note-color").find(".note-current-color-button");u.css(o,s),a.attr("data-"+i,s),t.context.invoke("editor."+i,s)}}})]}).render()}),this.context.memo("button.ul",function(){return t.button({contents:t.ui.icon(t.options.icons.unorderedlist),tooltip:t.lang.lists.unordered+t.representShortcut("insertUnorderedList"),click:t.context.createInvokeHandler("editor.insertUnorderedList")}).render()}),this.context.memo("button.ol",function(){return t.button({contents:t.ui.icon(t.options.icons.orderedlist),tooltip:t.lang.lists.ordered+t.representShortcut("insertOrderedList"),click:t.context.createInvokeHandler("editor.insertOrderedList")}).render()});var o=this.button({contents:this.ui.icon(this.options.icons.alignLeft),tooltip:this.lang.paragraph.left+this.representShortcut("justifyLeft"),click:this.context.createInvokeHandler("editor.justifyLeft")}),u=this.button({contents:this.ui.icon(this.options.icons.alignCenter),tooltip:this.lang.paragraph.center+this.representShortcut("justifyCenter"),click:this.context.createInvokeHandler("editor.justifyCenter")}),a=this.button({contents:this.ui.icon(this.options.icons.alignRight),tooltip:this.lang.paragraph.right+this.representShortcut("justifyRight"),click:this.context.createInvokeHandler("editor.justifyRight")}),f=this.button({contents:this.ui.icon(this.options.icons.alignJustify),tooltip:this.lang.paragraph.justify+this.representShortcut("justifyFull"),click:this.context.createInvokeHandler("editor.justifyFull")}),l=this.button({contents:this.ui.icon(this.options.icons.outdent),tooltip:this.lang.paragraph.outdent+this.representShortcut("outdent"),click:this.context.createInvokeHandler("editor.outdent")}),c=this.button({contents:this.ui.icon(this.options.icons.indent),tooltip:this.lang.paragraph.indent+this.representShortcut("indent"),click:this.context.createInvokeHandler("editor.indent")});this.context.memo("button.justifyLeft",B.invoke(o,"render")),this.context.memo("button.justifyCenter",B.invoke(u,"render")),this.context.memo("button.justifyRight",B.invoke(a,"render")),this.context.memo("button.justifyFull",B.invoke(f,"render")),this.context.memo("button.outdent",B.invoke(l,"render")),this.context.memo("button.indent",B.invoke(c,"render")),this.context.memo("button.paragraph",function(){return t.ui.buttonGroup([t.button({className:"dropdown-toggle",contents:t.ui.dropdownButtonContents(t.ui.icon(t.options.icons.alignLeft),t.options),tooltip:t.lang.paragraph.paragraph,data:{toggle:"dropdown"}}),t.ui.dropdown([t.ui.buttonGroup({className:"note-align",children:[o,u,a,f]}),t.ui.buttonGroup({className:"note-list",children:[l,c]})])]).render()}),this.context.memo("button.height",function(){return t.ui.buttonGroup([t.button({className:"dropdown-toggle",contents:t.ui.dropdownButtonContents(t.ui.icon(t.options.icons.textHeight),t.options),tooltip:t.lang.font.height,data:{toggle:"dropdown"}}),t.ui.dropdownCheck({items:t.options.lineHeights,checkClassName:t.options.icons.menuCheck,className:"dropdown-line-height",title:t.lang.font.height,click:t.context.createInvokeHandler("editor.lineHeight")})]).render()}),this.context.memo("button.table",function(){return t.ui.buttonGroup([t.button({className:"dropdown-toggle",contents:t.ui.dropdownButtonContents(t.ui.icon(t.options.icons.table),t.options),tooltip:t.lang.table.table,data:{toggle:"dropdown"}}),t.ui.dropdown({title:t.lang.table.table,className:"note-table",items:['<div class="note-dimension-picker">','  <div class="note-dimension-picker-mousecatcher" data-event="insertTable" data-value="1x1"/>','  <div class="note-dimension-picker-highlighted"/>','  <div class="note-dimension-picker-unhighlighted"/>',"</div>",'<div class="note-dimension-display">1 x 1</div>'].join("")})],{callback:function(e){var n=e.find(".note-dimension-picker-mousecatcher");n.css({width:t.options.insertTableMaxSize.col+"em",height:t.options.insertTableMaxSize.row+"em"}).mousedown(t.context.createInvokeHandler("editor.insertTable")).on("mousemove",t.tableMoveHandler.bind(t))}}).render()}),this.context.memo("button.link",function(){return t.button({contents:t.ui.icon(t.options.icons.link),tooltip:t.lang.link.link+t.representShortcut("linkDialog.show"),click:t.context.createInvokeHandler("linkDialog.show")}).render()}),this.context.memo("button.picture",function(){return t.button({contents:t.ui.icon(t.options.icons.picture),tooltip:t.lang.image.image,click:t.context.createInvokeHandler("imageDialog.show")}).render()}),this.context.memo("button.video",function(){return t.button({contents:t.ui.icon(t.options.icons.video),tooltip:t.lang.video.video,click:t.context.createInvokeHandler("videoDialog.show")}).render()}),this.context.memo("button.hr",function(){return t.button({contents:t.ui.icon(t.options.icons.minus),tooltip:t.lang.hr.insert+t.representShortcut("insertHorizontalRule"),click:t.context.createInvokeHandler("editor.insertHorizontalRule")}).render()}),this.context.memo("button.fullscreen",function(){return t.button({className:"btn-fullscreen",contents:t.ui.icon(t.options.icons.arrowsAlt),tooltip:t.lang.options.fullscreen,click:t.context.createInvokeHandler("fullscreen.toggle")}).render()}),this.context.memo("button.codeview",function(){return t.button({className:"btn-codeview",contents:t.ui.icon(t.options.icons.code),tooltip:t.lang.options.codeview,click:t.context.createInvokeHandler("codeview.toggle")}).render()}),this.context.memo("button.redo",function(){return t.button({contents:t.ui.icon(t.options.icons.redo),tooltip:t.lang.history.redo+t.representShortcut("redo"),click:t.context.createInvokeHandler("editor.redo")}).render()}),this.context.memo("button.undo",function(){return t.button({contents:t.ui.icon(t.options.icons.undo),tooltip:t.lang.history.undo+t.representShortcut("undo"),click:t.context.createInvokeHandler("editor.undo")}).render()}),this.context.memo("button.help",function(){return t.button({contents:t.ui.icon(t.options.icons.question),tooltip:t.lang.options.help,click:t.context.createInvokeHandler("helpDialog.show")}).render()})},t.prototype.addImagePopoverButtons=function(){var e=this;this.context.memo("button.imageSize100",function(){return e.button({contents:'<span class="note-fontsize-10">100%</span>',tooltip:e.lang.image.resizeFull,click:e.context.createInvokeHandler("editor.resize","1")}).render()}),this.context.memo("button.imageSize50",function(){return e.button({contents:'<span class="note-fontsize-10">50%</span>',tooltip:e.lang.image.resizeHalf,click:e.context.createInvokeHandler("editor.resize","0.5")}).render()}),this.context.memo("button.imageSize25",function(){return e.button({contents:'<span class="note-fontsize-10">25%</span>',tooltip:e.lang.image.resizeQuarter,click:e.context.createInvokeHandler("editor.resize","0.25")}).render()}),this.context.memo("button.floatLeft",function(){return e.button({contents:e.ui.icon(e.options.icons.alignLeft),tooltip:e.lang.image.floatLeft,click:e.context.createInvokeHandler("editor.floatMe","left")}).render()}),this.context.memo("button.floatRight",function(){return e.button({contents:e.ui.icon(e.options.icons.alignRight),tooltip:e.lang.image.floatRight,click:e.context.createInvokeHandler("editor.floatMe","right")}).render()}),this.context.memo("button.floatNone",function(){return e.button({contents:e.ui.icon(e.options.icons.alignJustify),tooltip:e.lang.image.floatNone,click:e.context.createInvokeHandler("editor.floatMe","none")}).render()}),this.context.memo("button.removeMedia",function(){return e.button({contents:e.ui.icon(e.options.icons.trash),tooltip:e.lang.image.remove,click:e.context.createInvokeHandler("editor.removeMedia")}).render()})},t.prototype.addLinkPopoverButtons=function(){var e=this;this.context.memo("button.linkDialogShow",function(){return e.button({contents:e.ui.icon(e.options.icons.link),tooltip:e.lang.link.edit,click:e.context.createInvokeHandler("linkDialog.show")}).render()}),this.context.memo("button.unlink",function(){return e.button({contents:e.ui.icon(e.options.icons.unlink),tooltip:e.lang.link.unlink,click:e.context.createInvokeHandler("editor.unlink")}).render()})},t.prototype.addTablePopoverButtons=function(){var e=this;this.context.memo("button.addRowUp",function(){return e.button({className:"btn-md",contents:e.ui.icon(e.options.icons.rowAbove),tooltip:e.lang.table.addRowAbove,click:e.context.createInvokeHandler("editor.addRow","top")}).render()}),this.context.memo("button.addRowDown",function(){return e.button({className:"btn-md",contents:e.ui.icon(e.options.icons.rowBelow),tooltip:e.lang.table.addRowBelow,click:e.context.createInvokeHandler("editor.addRow","bottom")}).render()}),this.context.memo("button.addColLeft",function(){return e.button({className:"btn-md",contents:e.ui.icon(e.options.icons.colBefore),tooltip:e.lang.table.addColLeft,click:e.context.createInvokeHandler("editor.addCol","left")}).render()}),this.context.memo("button.addColRight",function(){return e.button({className:"btn-md",contents:e.ui.icon(e.options.icons.colAfter),tooltip:e.lang.table.addColRight,click:e.context.createInvokeHandler("editor.addCol","right")}).render()}),this.context.memo("button.deleteRow",function(){return e.button({className:"btn-md",contents:e.ui.icon(e.options.icons.rowRemove),tooltip:e.lang.table.delRow,click:e.context.createInvokeHandler("editor.deleteRow")}).render()}),this.context.memo("button.deleteCol",function(){return e.button({className:"btn-md",contents:e.ui.icon(e.options.icons.colRemove),tooltip:e.lang.table.delCol,click:e.context.createInvokeHandler("editor.deleteCol")}).render()}),this.context.memo("button.deleteTable",function(){return e.button({className:"btn-md",contents:e.ui.icon(e.options.icons.trash),tooltip:e.lang.table.delTable,click:e.context.createInvokeHandler("editor.deleteTable")}).render()})},t.prototype.build=function(t,n){for(var r=0,i=n.length;r<i;r++){var s=n[r],o=e.isArray(s)?s[0]:s,u=e.isArray(s)?s.length===1?[s[0]]:s[1]:[s],a=this.ui.buttonGroup({className:"note-"+o}).render();for(var f=0,l=u.length;f<l;f++){var c=this.context.memo("button."+u[f]);c&&a.append(typeof c=="function"?c(this.context):c)}a.appendTo(t)}},t.prototype.updateCurrentStyle=function(t){var n=this,r=t||this.$toolbar,i=this.context.invoke("editor.currentStyle");this.updateBtnStates(r,{".note-btn-bold":function(){return i["font-bold"]==="bold"},".note-btn-italic":function(){return i["font-italic"]==="italic"},".note-btn-underline":function(){return i["font-underline"]==="underline"},".note-btn-subscript":function(){return i["font-subscript"]==="subscript"},".note-btn-superscript":function(){return i["font-superscript"]==="superscript"},".note-btn-strikethrough":function(){return i["font-strikethrough"]==="strikethrough"}});if(i["font-family"]){var s=i["font-family"].split(",").map(function(e){return e.replace(/[\'\"]/g,"").replace(/\s+$/,"").replace(/^\s+/,"")}),o=et.find(s,this.isFontInstalled.bind(this));r.find(".dropdown-fontname a").each(function(t,n){var r=e(n),i=r.data("value")+""==o+"";r.toggleClass("checked",i)}),r.find(".note-current-fontname").text(o).css("font-family",o)}if(i["font-size"]){var u=i["font-size"];r.find(".dropdown-fontsize a").each(function(t,n){var r=e(n),i=r.data("value")+""==u+"";r.toggleClass("checked",i)}),r.find(".note-current-fontsize").text(u)}if(i["line-height"]){var a=i["line-height"];r.find(".dropdown-line-height li a").each(function(t,r){var i=e(r).data("value")+""==a+"";n.className=i?"checked":""})}},t.prototype.updateBtnStates=function(t,n){var r=this;e.each(n,function(e,n){r.ui.toggleBtnActive(t.find(e),n())})},t.prototype.tableMoveHandler=function(t){var n=18,r=e(t.target.parentNode),i=r.next(),s=r.find(".note-dimension-picker-mousecatcher"),o=r.find(".note-dimension-picker-highlighted"),u=r.find(".note-dimension-picker-unhighlighted"),a;if(t.offsetX===undefined){var f=e(t.target).offset();a={x:t.pageX-f.left,y:t.pageY-f.top}}else a={x:t.offsetX,y:t.offsetY};var l={c:Math.ceil(a.x/n)||1,r:Math.ceil(a.y/n)||1};o.css({width:l.c+"em",height:l.r+"em"}),s.data("value",l.c+"x"+l.r),l.c>3&&l.c<this.options.insertTableMaxSize.col&&u.css({width:l.c+1+"em"}),l.r>3&&l.r<this.options.insertTableMaxSize.row&&u.css({height:l.r+1+"em"}),i.html(l.c+" x "+l.r)},t}(),pr=function(){function t(t){this.context=t,this.$window=e(window),this.$document=e(document),this.ui=e.summernote.ui,this.$note=t.layoutInfo.note,this.$editor=t.layoutInfo.editor,this.$toolbar=t.layoutInfo.toolbar,this.options=t.options,this.followScroll=this.followScroll.bind(this)}return t.prototype.shouldInitialize=function(){return!this.options.airMode},t.prototype.initialize=function(){var e=this;this.options.toolbar=this.options.toolbar||[],this.options.toolbar.length?this.context.invoke("buttons.build",this.$toolbar,this.options.toolbar):this.$toolbar.hide(),this.options.toolbarContainer&&this.$toolbar.appendTo(this.options.toolbarContainer),this.changeContainer(!1),this.$note.on("summernote.keyup summernote.mouseup summernote.change",function(){e.context.invoke("buttons.updateCurrentStyle")}),this.context.invoke("buttons.updateCurrentStyle"),this.options.followingToolbar&&this.$window.on("scroll resize",this.followScroll)},t.prototype.destroy=function(){this.$toolbar.children().remove(),this.options.followingToolbar&&this.$window.off("scroll resize",this.followScroll)},t.prototype.followScroll=function(){if(this.$editor.hasClass("fullscreen"))return!1;var t=this.$toolbar.parent(".note-toolbar-wrapper"),n=this.$editor.outerHeight(),r=this.$editor.width(),i=this.$toolbar.height(),s=0;this.options.otherStaticBar&&(s=e(this.options.otherStaticBar).outerHeight());var o=this.$document.scrollTop(),u=this.$editor.offset().top,a=u+n,f=u-s,l=a-s-i;o>f&&o<l?this.$toolbar.css({position:"fixed",top:s,width:r}):this.$toolbar.css({position:"relative",top:0,width:"100%"})},t.prototype.changeContainer=function(e){e?this.$toolbar.prependTo(this.$editor):this.options.toolbarContainer&&this.$toolbar.appendTo(this.options.toolbarContainer)},t.prototype.updateFullscreen=function(e){this.ui.toggleBtnActive(this.$toolbar.find(".btn-fullscreen"),e),this.changeContainer(e)},t.prototype.updateCodeview=function(e){this.ui.toggleBtnActive(this.$toolbar.find(".btn-codeview"),e),e?this.deactivate():this.activate()},t.prototype.activate=function(e){var t=this.$toolbar.find("button");e||(t=t.not(".btn-codeview")),this.ui.toggleBtn(t,!0)},t.prototype.deactivate=function(e){var t=this.$toolbar.find("button");e||(t=t.not(".btn-codeview")),this.ui.toggleBtn(t,!1)},t}(),dr=function(){function t(t){this.context=t,this.ui=e.summernote.ui,this.$body=e(document.body),this.$editor=t.layoutInfo.editor,this.options=t.options,this.lang=this.options.langInfo,t.memo("help.linkDialog.show",this.options.langInfo.help["linkDialog.show"])}return t.prototype.initialize=function(){var t=this.options.dialogsInBody?this.$body:this.$editor,n=['<div class="form-group note-form-group">','<label class="note-form-label">'+this.lang.link.textToDisplay+"</label>",'<input class="note-link-text form-control note-form-control  note-input" type="text" />',"</div>",'<div class="form-group note-form-group">','<label class="note-form-label">'+this.lang.link.url+"</label>",'<input class="note-link-url form-control note-form-control note-input" type="text" value="http://" />',"</div>",this.options.disableLinkTarget?"":e("<div/>").append(this.ui.checkbox({id:"sn-checkbox-open-in-new-window",text:this.lang.link.openInNewWindow,checked:!0}).render()).html()].join(""),r="btn btn-primary note-btn note-btn-primary note-link-btn",i='<button type="submit" href="#" class="'+r+'" disabled>'+this.lang.link.insert+"</button>";this.$dialog=this.ui.dialog({className:"link-dialog",title:this.lang.link.insert,fade:this.options.dialogsFade,body:n,footer:i}).render().appendTo(t)},t.prototype.destroy=function(){this.ui.hideDialog(this.$dialog),this.$dialog.remove()},t.prototype.bindEnterKey=function(e,t){e.on("keypress",function(e){e.keyCode===Fn.code.ENTER&&(e.preventDefault(),t.trigger("click"))})},t.prototype.toggleLinkBtn=function(e,t,n){this.ui.toggleBtn(e,t.val()&&n.val())},t.prototype.showLinkDialog=function(t){var n=this;return e.Deferred(function(e){var r=n.$dialog.find(".note-link-text"),i=n.$dialog.find(".note-link-url"),s=n.$dialog.find(".note-link-btn"),o=n.$dialog.find("input[type=checkbox]");n.ui.onDialogShown(n.$dialog,function(){n.context.triggerEvent("dialog.shown"),t.url||(t.url=t.text),r.val(t.text);var u=function(){n.toggleLinkBtn(s,r,i),t.text=r.val()};r.on("input",u).on("paste",function(){setTimeout(u,0)});var a=function(){n.toggleLinkBtn(s,r,i),t.text||r.val(i.val())};i.on("input",a).on("paste",function(){setTimeout(a,0)}).val(t.url),ht.isSupportTouch||i.trigger("focus"),n.toggleLinkBtn(s,r,i),n.bindEnterKey(i,s),n.bindEnterKey(r,s);var f=t.isNewWindow!==undefined?t.isNewWindow:n.context.options.linkTargetBlank;o.prop("checked",f),s.one("click",function(s){s.preventDefault(),e.resolve({range:t.range,url:i.val(),text:r.val(),isNewWindow:o.is(":checked")}),n.ui.hideDialog(n.$dialog)})}),n.ui.onDialogHidden(n.$dialog,function(){r.off("input paste keypress"),i.off("input paste keypress"),s.off("click"),e.state()==="pending"&&e.reject()}),n.ui.showDialog(n.$dialog)}).promise()},t.prototype.show=function(){var e=this,t=this.context.invoke("editor.getLinkInfo");this.context.invoke("editor.saveRange"),this.showLinkDialog(t).then(function(t){e.context.invoke("editor.restoreRange"),e.context.invoke("editor.createLink",t)}).fail(function(){e.context.invoke("editor.restoreRange")})},t}(),vr=function(){function t(t){var n=this;this.context=t,this.ui=e.summernote.ui,this.options=t.options,this.events={"summernote.keyup summernote.mouseup summernote.change summernote.scroll":function(){n.update()},"summernote.disable summernote.dialog.shown":function(){n.hide()}}}return t.prototype.shouldInitialize=function(){return!et.isEmpty(this.options.popover.link)},t.prototype.initialize=function(){this.$popover=this.ui.popover({className:"note-link-popover",callback:function(e){var t=e.find(".popover-content,.note-popover-content");t.prepend('<span><a target="_blank"></a>&nbsp;</span>')}}).render().appendTo(this.options.container);var e=this.$popover.find(".popover-content,.note-popover-content");
this.context.invoke("buttons.build",e,this.options.popover.link)},t.prototype.destroy=function(){this.$popover.remove()},t.prototype.update=function(){if(!this.context.invoke("editor.hasFocus")){this.hide();return}var t=this.context.invoke("editor.createRange");if(t.isCollapsed()&&t.isOnAnchor()){var n=Bn.ancestor(t.sc,Bn.isAnchor),r=e(n).attr("href");this.$popover.find("a").attr("href",r).html(r);var i=Bn.posFromPlaceholder(n);this.$popover.css({display:"block",left:i.left,top:i.top})}else this.hide()},t.prototype.hide=function(){this.$popover.hide()},t}(),mr=function(){function t(t){this.context=t,this.ui=e.summernote.ui,this.$body=e(document.body),this.$editor=t.layoutInfo.editor,this.options=t.options,this.lang=this.options.langInfo}return t.prototype.initialize=function(){var e=this.options.dialogsInBody?this.$body:this.$editor,t="";if(this.options.maximumImageFileSize){var n=Math.floor(Math.log(this.options.maximumImageFileSize)/Math.log(1024)),r=(this.options.maximumImageFileSize/Math.pow(1024,n)).toFixed(2)*1+" "+" KMGTP"[n]+"B";t="<small>"+(this.lang.image.maximumFileSize+" : "+r)+"</small>"}var i=['<div class="form-group note-form-group note-group-select-from-files">','<label class="note-form-label">'+this.lang.image.selectFromFiles+"</label>",'<input class="note-image-input note-form-control note-input" ',' type="file" name="files" accept="image/*" multiple="multiple" />',t,"</div>",'<div class="form-group note-group-image-url" style="overflow:auto;">','<label class="note-form-label">'+this.lang.image.url+"</label>",'<input class="note-image-url form-control note-form-control note-input ',' col-md-12" type="text" />',"</div>"].join(""),s="btn btn-primary note-btn note-btn-primary note-image-btn",o='<button type="submit" href="#" class="'+s+'" disabled>'+this.lang.image.insert+"</button>";this.$dialog=this.ui.dialog({title:this.lang.image.insert,fade:this.options.dialogsFade,body:i,footer:o}).render().appendTo(e)},t.prototype.destroy=function(){this.ui.hideDialog(this.$dialog),this.$dialog.remove()},t.prototype.bindEnterKey=function(e,t){e.on("keypress",function(e){e.keyCode===Fn.code.ENTER&&(e.preventDefault(),t.trigger("click"))})},t.prototype.show=function(){var e=this;this.context.invoke("editor.saveRange"),this.showImageDialog().then(function(t){e.ui.hideDialog(e.$dialog),e.context.invoke("editor.restoreRange"),typeof t=="string"?e.context.invoke("editor.insertImage",t):e.context.invoke("editor.insertImagesOrCallback",t)}).fail(function(){e.context.invoke("editor.restoreRange")})},t.prototype.showImageDialog=function(){var t=this;return e.Deferred(function(e){var n=t.$dialog.find(".note-image-input"),r=t.$dialog.find(".note-image-url"),i=t.$dialog.find(".note-image-btn");t.ui.onDialogShown(t.$dialog,function(){t.context.triggerEvent("dialog.shown"),n.replaceWith(n.clone().on("change",function(t){e.resolve(t.target.files||t.target.value)}).val("")),i.click(function(t){t.preventDefault(),e.resolve(r.val())}),r.on("keyup paste",function(){var e=r.val();t.ui.toggleBtn(i,e)}).val(""),ht.isSupportTouch||r.trigger("focus"),t.bindEnterKey(r,i)}),t.ui.onDialogHidden(t.$dialog,function(){n.off("change"),r.off("keyup paste keypress"),i.off("click"),e.state()==="pending"&&e.reject()}),t.ui.showDialog(t.$dialog)})},t}(),gr=function(){function t(t){var n=this;this.context=t,this.ui=e.summernote.ui,this.editable=t.layoutInfo.editable[0],this.options=t.options,this.events={"summernote.disable":function(){n.hide()}}}return t.prototype.shouldInitialize=function(){return!et.isEmpty(this.options.popover.image)},t.prototype.initialize=function(){this.$popover=this.ui.popover({className:"note-image-popover"}).render().appendTo(this.options.container);var e=this.$popover.find(".popover-content,.note-popover-content");this.context.invoke("buttons.build",e,this.options.popover.image)},t.prototype.destroy=function(){this.$popover.remove()},t.prototype.update=function(e){if(Bn.isImg(e)){var t=Bn.posFromPlaceholder(e),n=Bn.posFromPlaceholder(this.editable);this.$popover.css({display:"block",left:this.options.popatmouse?event.pageX-20:t.left,top:this.options.popatmouse?event.pageY:Math.min(t.top,n.top)})}else this.hide()},t.prototype.hide=function(){this.$popover.hide()},t}(),yr=function(){function t(t){var n=this;this.context=t,this.ui=e.summernote.ui,this.options=t.options,this.events={"summernote.mousedown":function(e,t){n.update(t.target)},"summernote.keyup summernote.scroll summernote.change":function(){n.update()},"summernote.disable":function(){n.hide()}}}return t.prototype.shouldInitialize=function(){return!et.isEmpty(this.options.popover.table)},t.prototype.initialize=function(){this.$popover=this.ui.popover({className:"note-table-popover"}).render().appendTo(this.options.container);var e=this.$popover.find(".popover-content,.note-popover-content");this.context.invoke("buttons.build",e,this.options.popover.table),ht.isFF&&document.execCommand("enableInlineTableEditing",!1,!1)},t.prototype.destroy=function(){this.$popover.remove()},t.prototype.update=function(e){if(this.context.isDisabled())return!1;var t=Bn.isCell(e);if(t){var n=Bn.posFromPlaceholder(e);this.$popover.css({display:"block",left:n.left,top:n.top})}else this.hide();return t},t.prototype.hide=function(){this.$popover.hide()},t}(),br=function(){function t(t){this.context=t,this.ui=e.summernote.ui,this.$body=e(document.body),this.$editor=t.layoutInfo.editor,this.options=t.options,this.lang=this.options.langInfo}return t.prototype.initialize=function(){var e=this.options.dialogsInBody?this.$body:this.$editor,t=['<div class="form-group note-form-group row-fluid">','<label class="note-form-label">'+this.lang.video.url+' <small class="text-muted">'+this.lang.video.providers+"</small></label>",'<input class="note-video-url form-control note-form-control note-input" type="text" />',"</div>"].join(""),n="btn btn-primary note-btn note-btn-primary note-video-btn",r='<button type="submit" href="#" class="'+n+'" disabled>'+this.lang.video.insert+"</button>";this.$dialog=this.ui.dialog({title:this.lang.video.insert,fade:this.options.dialogsFade,body:t,footer:r}).render().appendTo(e)},t.prototype.destroy=function(){this.ui.hideDialog(this.$dialog),this.$dialog.remove()},t.prototype.bindEnterKey=function(e,t){e.on("keypress",function(e){e.keyCode===Fn.code.ENTER&&(e.preventDefault(),t.trigger("click"))})},t.prototype.createVideoNode=function(t){var n=/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/,r=t.match(n),i=/(?:www\.|\/\/)instagram\.com\/p\/(.[a-zA-Z0-9_-]*)/,s=t.match(i),o=/\/\/vine\.co\/v\/([a-zA-Z0-9]+)/,u=t.match(o),a=/\/\/(player\.)?vimeo\.com\/([a-z]*\/)*(\d+)[?]?.*/,f=t.match(a),l=/.+dailymotion.com\/(video|hub)\/([^_]+)[^#]*(#video=([^_&]+))?/,c=t.match(l),h=/\/\/v\.youku\.com\/v_show\/id_(\w+)=*\.html/,p=t.match(h),d=/\/\/v\.qq\.com.*?vid=(.+)/,v=t.match(d),m=/\/\/v\.qq\.com\/x?\/?(page|cover).*?\/([^\/]+)\.html\??.*/,g=t.match(m),y=/^.+.(mp4|m4v)$/,b=t.match(y),w=/^.+.(ogg|ogv)$/,E=t.match(w),S=/^.+.(webm)$/,x=t.match(S),T;if(r&&r[1].length===11){var N=r[1];T=e("<iframe>").attr("frameborder",0).attr("src","//www.youtube.com/embed/"+N).attr("width","640").attr("height","360")}else if(s&&s[0].length)T=e("<iframe>").attr("frameborder",0).attr("src","https://instagram.com/p/"+s[1]+"/embed/").attr("width","612").attr("height","710").attr("scrolling","no").attr("allowtransparency","true");else if(u&&u[0].length)T=e("<iframe>").attr("frameborder",0).attr("src",u[0]+"/embed/simple").attr("width","600").attr("height","600").attr("class","vine-embed");else if(f&&f[3].length)T=e("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("src","//player.vimeo.com/video/"+f[3]).attr("width","640").attr("height","360");else if(c&&c[2].length)T=e("<iframe>").attr("frameborder",0).attr("src","//www.dailymotion.com/embed/video/"+c[2]).attr("width","640").attr("height","360");else if(p&&p[1].length)T=e("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("height","498").attr("width","510").attr("src","//player.youku.com/embed/"+p[1]);else if(v&&v[1].length||g&&g[2].length){var C=v&&v[1].length?v[1]:g[2];T=e("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("height","310").attr("width","500").attr("src","http://v.qq.com/iframe/player.html?vid="+C+"&amp;auto=0")}else{if(!(b||E||x))return!1;T=e("<video controls>").attr("src",t).attr("width","640").attr("height","360")}return T.addClass("note-video-clip"),T[0]},t.prototype.show=function(){var e=this,t=this.context.invoke("editor.getSelectedText");this.context.invoke("editor.saveRange"),this.showVideoDialog(t).then(function(t){e.ui.hideDialog(e.$dialog),e.context.invoke("editor.restoreRange");var n=e.createVideoNode(t);n&&e.context.invoke("editor.insertNode",n)}).fail(function(){e.context.invoke("editor.restoreRange")})},t.prototype.showVideoDialog=function(t){var n=this;return e.Deferred(function(e){var r=n.$dialog.find(".note-video-url"),i=n.$dialog.find(".note-video-btn");n.ui.onDialogShown(n.$dialog,function(){n.context.triggerEvent("dialog.shown"),r.val(t).on("input",function(){n.ui.toggleBtn(i,r.val())}),ht.isSupportTouch||r.trigger("focus"),i.click(function(t){t.preventDefault(),e.resolve(r.val())}),n.bindEnterKey(r,i)}),n.ui.onDialogHidden(n.$dialog,function(){r.off("input"),i.off("click"),e.state()==="pending"&&e.reject()}),n.ui.showDialog(n.$dialog)})},t}(),wr=function(){function t(t){this.context=t,this.ui=e.summernote.ui,this.$body=e(document.body),this.$editor=t.layoutInfo.editor,this.options=t.options,this.lang=this.options.langInfo}return t.prototype.initialize=function(){var e=this.options.dialogsInBody?this.$body:this.$editor,t=['<p class="text-center">','<a href="http://summernote.org/" target="_blank">Summernote 0.8.10</a> \u00b7 ','<a href="https://github.com/summernote/summernote" target="_blank">Project</a> \u00b7 ','<a href="https://github.com/summernote/summernote/issues" target="_blank">Issues</a>',"</p>"].join("");this.$dialog=this.ui.dialog({title:this.lang.options.help,fade:this.options.dialogsFade,body:this.createShortcutList(),footer:t,callback:function(e){e.find(".modal-body,.note-modal-body").css({"max-height":300,overflow:"scroll"})}}).render().appendTo(e)},t.prototype.destroy=function(){this.ui.hideDialog(this.$dialog),this.$dialog.remove()},t.prototype.createShortcutList=function(){var t=this,n=this.options.keyMap[ht.isMac?"mac":"pc"];return Object.keys(n).map(function(r){var i=n[r],s=e('<div><div class="help-list-item"/></div>');return s.append(e("<label><kbd>"+r+"</kdb></label>").css({width:180,"margin-right":10})).append(e("<span/>").html(t.context.memo("help."+i)||i)),s.html()}).join("")},t.prototype.showHelpDialog=function(){var t=this;return e.Deferred(function(e){t.ui.onDialogShown(t.$dialog,function(){t.context.triggerEvent("dialog.shown"),e.resolve()}),t.ui.showDialog(t.$dialog)}).promise()},t.prototype.show=function(){var e=this;this.context.invoke("editor.saveRange"),this.showHelpDialog().then(function(){e.context.invoke("editor.restoreRange")})},t}(),Er=20,Sr=function(){function t(t){var n=this;this.context=t,this.ui=e.summernote.ui,this.options=t.options,this.events={"summernote.keyup summernote.mouseup summernote.scroll":function(){n.update()},"summernote.disable summernote.change summernote.dialog.shown":function(){n.hide()},"summernote.focusout":function(e,t){if(ht.isFF)return;(!t.relatedTarget||!Bn.ancestor(t.relatedTarget,B.eq(n.$popover[0])))&&n.hide()}}}return t.prototype.shouldInitialize=function(){return this.options.airMode&&!et.isEmpty(this.options.popover.air)},t.prototype.initialize=function(){this.$popover=this.ui.popover({className:"note-air-popover"}).render().appendTo(this.options.container);var e=this.$popover.find(".popover-content");this.context.invoke("buttons.build",e,this.options.popover.air)},t.prototype.destroy=function(){this.$popover.remove()},t.prototype.update=function(){var e=this.context.invoke("editor.currentStyle");if(e.range&&!e.range.isCollapsed()){var t=et.last(e.range.getClientRects());if(t){var n=B.rect2bnd(t);this.$popover.css({display:"block",left:Math.max(n.left+n.width/2,0)-Er,top:n.top+n.height}),this.context.invoke("buttons.updateCurrentStyle",this.$popover)}}else this.hide()},t.prototype.hide=function(){this.$popover.hide()},t}(),xr=5,Tr=function(){function t(t){var n=this;this.context=t,this.ui=e.summernote.ui,this.$editable=t.layoutInfo.editable,this.options=t.options,this.hint=this.options.hint||[],this.direction=this.options.hintDirection||"bottom",this.hints=e.isArray(this.hint)?this.hint:[this.hint],this.events={"summernote.keyup":function(e,t){t.isDefaultPrevented()||n.handleKeyup(t)},"summernote.keydown":function(e,t){n.handleKeydown(t)},"summernote.disable summernote.dialog.shown":function(){n.hide()}}}return t.prototype.shouldInitialize=function(){return this.hints.length>0},t.prototype.initialize=function(){var t=this;this.lastWordRange=null,this.$popover=this.ui.popover({className:"note-hint-popover",hideArrow:!0,direction:""}).render().appendTo(this.options.container),this.$popover.hide(),this.$content=this.$popover.find(".popover-content,.note-popover-content"),this.$content.on("click",".note-hint-item",function(){t.$content.find(".active").removeClass("active"),e(t).addClass("active"),t.replace()})},t.prototype.destroy=function(){this.$popover.remove()},t.prototype.selectItem=function(e){this.$content.find(".active").removeClass("active"),e.addClass("active"),this.$content[0].scrollTop=e[0].offsetTop-this.$content.innerHeight()/2},t.prototype.moveDown=function(){var e=this.$content.find(".note-hint-item.active"),t=e.next();if(t.length)this.selectItem(t);else{var n=e.parent().next();n.length||(n=this.$content.find(".note-hint-group").first()),this.selectItem(n.find(".note-hint-item").first())}},t.prototype.moveUp=function(){var e=this.$content.find(".note-hint-item.active"),t=e.prev();if(t.length)this.selectItem(t);else{var n=e.parent().prev();n.length||(n=this.$content.find(".note-hint-group").last()),this.selectItem(n.find(".note-hint-item").last())}},t.prototype.replace=function(){var e=this.$content.find(".note-hint-item.active");if(e.length){var t=this.nodeFromItem(e);this.lastWordRange.insertNode(t),Un.createFromNode(t).collapse().select(),this.lastWordRange=null,this.hide(),this.context.triggerEvent("change",this.$editable.html(),this.$editable[0]),this.context.invoke("editor.focus")}},t.prototype.nodeFromItem=function(e){var t=this.hints[e.data("index")],n=e.data("item"),r=t.content?t.content(n):n;return typeof r=="string"&&(r=Bn.createText(r)),r},t.prototype.createItemTemplates=function(t,n){var r=this.hints[t];return n.map(function(n,i){var s=e('<div class="note-hint-item"/>');return s.append(r.template?r.template(n):n+""),s.data({index:t,item:n}),s})},t.prototype.handleKeydown=function(e){if(!this.$popover.is(":visible"))return;e.keyCode===Fn.code.ENTER?(e.preventDefault(),this.replace()):e.keyCode===Fn.code.UP?(e.preventDefault(),this.moveUp()):e.keyCode===Fn.code.DOWN&&(e.preventDefault(),this.moveDown())},t.prototype.searchKeyword=function(e,t,n){var r=this.hints[e];if(r&&r.match.test(t)&&r.search){var i=r.match.exec(t);r.search(i[1],n)}else n()},t.prototype.createGroup=function(t,n){var r=this,i=e('<div class="note-hint-group note-hint-group-'+t+'"/>');return this.searchKeyword(t,n,function(e){e=e||[],e.length&&(i.html(r.createItemTemplates(t,e)),r.show())}),i},t.prototype.handleKeyup=function(e){var t=this;if(!et.contains([Fn.code.ENTER,Fn.code.UP,Fn.code.DOWN],e.keyCode)){var n=this.context.invoke("editor.createRange").getWordRange(),r=n.toString();if(this.hints.length&&r){this.$content.empty();var i=B.rect2bnd(et.last(n.getClientRects()));i&&(this.$popover.hide(),this.lastWordRange=n,this.hints.forEach(function(e,n){e.match.test(r)&&t.createGroup(n,r).appendTo(t.$content)}),this.$content.find(".note-hint-item:first").addClass("active"),this.direction==="top"?this.$popover.css({left:i.left,top:i.top-this.$popover.outerHeight()-xr}):this.$popover.css({left:i.left,top:i.top+i.height+xr}))}else this.hide()}},t.prototype.show=function(){this.$popover.show()},t.prototype.hide=function(){this.$popover.hide()},t}(),Nr=function(){function t(t,n){this.ui=e.summernote.ui,this.$note=t,this.memos={},this.modules={},this.layoutInfo={},this.options=n,this.initialize()}return t.prototype.initialize=function(){return this.layoutInfo=this.ui.createLayout(this.$note,this.options),this._initialize(),this.$note.hide(),this},t.prototype.destroy=function(){this._destroy(),this.$note.removeData("summernote"),this.ui.removeLayout(this.$note,this.layoutInfo)},t.prototype.reset=function(){var e=this.isDisabled();this.code(Bn.emptyPara),this._destroy(),this._initialize(),e&&this.disable()},t.prototype._initialize=function(){var t=this,n=e.extend({},this.options.buttons);Object.keys(n).forEach(function(e){t.memo("button."+e,n[e])});var r=e.extend({},this.options.modules,e.summernote.plugins||{});Object.keys(r).forEach(function(e){t.module(e,r[e],!0)}),Object.keys(this.modules).forEach(function(e){t.initializeModule(e)})},t.prototype._destroy=function(){var e=this;Object.keys(this.modules).reverse().forEach(function(t){e.removeModule(t)}),Object.keys(this.memos).forEach(function(t){e.removeMemo(t)}),this.triggerEvent("destroy",this)},t.prototype.code=function(e){var t=this.invoke("codeview.isActivated");if(e===undefined)return this.invoke("codeview.sync"),t?this.layoutInfo.codable.val():this.layoutInfo.editable.html();t?this.layoutInfo.codable.val(e):this.layoutInfo.editable.html(e),this.$note.val(e),this.triggerEvent("change",e)},t.prototype.isDisabled=function(){return this.layoutInfo.editable.attr("contenteditable")==="false"},t.prototype.enable=function(){this.layoutInfo.editable.attr("contenteditable",!0),this.invoke("toolbar.activate",!0),this.triggerEvent("disable",!1)},t.prototype.disable=function(){this.invoke("codeview.isActivated")&&this.invoke("codeview.deactivate"),this.layoutInfo.editable.attr("contenteditable",!1),this.invoke("toolbar.deactivate",!0),this.triggerEvent("disable",!0)},t.prototype.triggerEvent=function(){var e=et.head(arguments),t=et.tail(et.from(arguments)),n=this.options.callbacks[B.namespaceToCamel(e,"on")];n&&n.apply(this.$note[0],t),this.$note.trigger("summernote."+e,t)},t.prototype.initializeModule=function(e){var t=this.modules[e];t.shouldInitialize=t.shouldInitialize||B.ok;if(!t.shouldInitialize())return;t.initialize&&t.initialize(),t.events&&Bn.attachEvents(this.$note,t.events)},t.prototype.module=function(e,t,n){if(arguments.length===1)return this.modules[e];this.modules[e]=new t(this),n||this.initializeModule(e)},t.prototype.removeModule=function(e){var t=this.modules[e];t.shouldInitialize()&&(t.events&&Bn.detachEvents(this.$note,t.events),t.destroy&&t.destroy()),delete this.modules[e]},t.prototype.memo=function(e,t){if(arguments.length===1)return this.memos[e];this.memos[e]=t},t.prototype.removeMemo=function(e){this.memos[e]&&this.memos[e].destroy&&this.memos[e].destroy(),delete this.memos[e]},t.prototype.createInvokeHandlerAndUpdateState=function(e,t){var n=this;return function(r){n.createInvokeHandler(e,t)(r),n.invoke("buttons.updateCurrentStyle")}},t.prototype.createInvokeHandler=function(t,n){var r=this;return function(i){i.preventDefault();var s=e(i.target);r.invoke(t,n||s.closest("[data-value]").data("value"),s)}},t.prototype.invoke=function(){var e=et.head(arguments),t=et.tail(et.from(arguments)),n=e.split("."),r=n.length>1,i=r&&et.head(n),s=r?et.last(n):et.head(n),o=this.modules[i||"editor"];if(!i&&this[s])return this[s].apply(this,t);if(o&&o[s]&&o.shouldInitialize())return o[s].apply(o,t)},t}();e.fn.extend({summernote:function(){var t=e.type(et.head(arguments)),n=t==="string",r=t==="object",i=e.extend({},e.summernote.options,r?et.head(arguments):{});i.langInfo=e.extend(!0,{},e.summernote.lang["en-US"],e.summernote.lang[i.lang]),i.icons=e.extend(!0,{},e.summernote.options.icons,i.icons),i.tooltip=i.tooltip==="auto"?!ht.isSupportTouch:i.tooltip,this.each(function(t,n){var r=e(n);if(!r.data("summernote")){var s=new Nr(r,i);r.data("summernote",s),r.data("summernote").triggerEvent("init",s.layoutInfo)}});var s=this.first();if(s.length){var o=s.data("summernote");if(n)return o.invoke.apply(o,et.from(arguments));i.focus&&o.invoke("editor.focus")}return this}}),e.summernote=e.extend(e.summernote,{version:"0.8.10",ui:w,dom:Bn,plugins:{},options:{modules:{editor:Yn,clipboard:Zn,dropzone:er,codeview:nr,statusbar:ir,fullscreen:sr,handle:or,hintPopover:Tr,autoLink:fr,autoSync:lr,placeholder:cr,buttons:hr,toolbar:pr,linkDialog:dr,linkPopover:vr,imageDialog:mr,imagePopover:gr,tablePopover:yr,videoDialog:br,helpDialog:wr,airPopover:Sr},buttons:{},lang:"zh-CN",followingToolbar:!0,otherStaticBar:"",toolbar:[["style",["style"]],["font",["bold","underline","clear"]],["fontname",["fontname"]],["color",["color"]],["para",["ul","ol","paragraph"]],["table",["table"]],["insert",["link","picture","video"]],["view",["fullscreen","codeview","help"]]],popatmouse:!0,popover:{image:[["imagesize",["imageSize100","imageSize50","imageSize25"]],["float",["floatLeft","floatRight","floatNone"]],["remove",["removeMedia"]]],link:[["link",["linkDialogShow","unlink"]]],table:[["add",["addRowDown","addRowUp","addColLeft","addColRight"]],["delete",["deleteRow","deleteCol","deleteTable"]]],air:[["color",["color"]],["font",["bold","underline","clear"]],["para",["ul","paragraph"]],["table",["table"]],["insert",["link","picture"]]]},airMode:!1,width:null,height:null,linkTargetBlank:!0,focus:!1,tabSize:4,styleWithSpan:!0,shortcuts:!0,textareaAutoSync:!0,hintDirection:"bottom",tooltip:"auto",container:"body",maxTextLength:0,styleTags:["p","blockquote","pre","h1","h2","h3","h4","h5","h6"],fontNames:["Arial","Arial Black","Comic Sans MS","Courier New","Helvetica Neue","Helvetica","Impact","Lucida Grande","Tahoma","Times New Roman","Verdana"],fontSizes:["8","9","10","11","12","14","18","24","36"],colors:[["#000000","#424242","#636363","#9C9C94","#CEC6CE","#EFEFEF","#F7F7F7","#FFFFFF"],["#FF0000","#FF9C00","#FFFF00","#00FF00","#00FFFF","#0000FF","#9C00FF","#FF00FF"],["#F7C6CE","#FFE7CE","#FFEFC6","#D6EFD6","#CEDEE7","#CEE7F7","#D6D6E7","#E7D6DE"],["#E79C9C","#FFC69C","#FFE79C","#B5D6A5","#A5C6CE","#9CC6EF","#B5A5D6","#D6A5BD"],["#E76363","#F7AD6B","#FFD663","#94BD7B","#73A5AD","#6BADDE","#8C7BC6","#C67BA5"],["#CE0000","#E79439","#EFC631","#6BA54A","#4A7B8C","#3984C6","#634AA5","#A54A7B"],["#9C0000","#B56308","#BD9400","#397B21","#104A5A","#085294","#311873","#731842"],["#630000","#7B3900","#846300","#295218","#083139","#003163","#21104A","#4A1031"]],colorsName:[["Black","Tundora","Dove Gray","Star Dust","Pale Slate","Gallery","Alabaster","White"],["Red","Orange Peel","Yellow","Green","Cyan","Blue","Electric Violet","Magenta"],["Azalea","Karry","Egg White","Zanah","Botticelli","Tropical Blue","Mischka","Twilight"],["Tonys Pink","Peach Orange","Cream Brulee","Sprout","Casper","Perano","Cold Purple","Careys Pink"],["Mandy","Rajah","Dandelion","Olivine","Gulf Stream","Viking","Blue Marguerite","Puce"],["Guardsman Red","Fire Bush","Golden Dream","Chelsea Cucumber","Smalt Blue","Boston Blue","Butterfly Bush","Cadillac"],["Sangria","Mai Tai","Buddha Gold","Forest Green","Eden","Venice Blue","Meteorite","Claret"],["Rosewood","Cinnamon","Olive","Parsley","Tiber","Midnight Blue","Valentino","Loulou"]],lineHeights:["1.0","1.2","1.4","1.5","1.6","1.8","2.0","3.0"],tableClassName:"table table-bordered",insertTableMaxSize:{col:10,row:10},dialogsInBody:!1,dialogsFade:!1,maximumImageFileSize:null,callbacks:{onInit:null,onFocus:null,onBlur:null,onBlurCodeview:null,onEnter:null,onKeyup:null,onKeydown:null,onImageUpload:null,onImageUploadError:null},codemirror:{mode:"text/html",htmlMode:!0,lineNumbers:!0},keyMap:{pc:{ENTER:"insertParagraph","CTRL+Z":"undo","CTRL+Y":"redo",TAB:"tab","SHIFT+TAB":"untab","CTRL+B":"bold","CTRL+I":"italic","CTRL+U":"underline","CTRL+SHIFT+S":"strikethrough","CTRL+BACKSLASH":"removeFormat","CTRL+SHIFT+L":"justifyLeft","CTRL+SHIFT+E":"justifyCenter","CTRL+SHIFT+R":"justifyRight","CTRL+SHIFT+J":"justifyFull","CTRL+SHIFT+NUM7":"insertUnorderedList","CTRL+SHIFT+NUM8":"insertOrderedList","CTRL+LEFTBRACKET":"outdent","CTRL+RIGHTBRACKET":"indent","CTRL+NUM0":"formatPara","CTRL+NUM1":"formatH1","CTRL+NUM2":"formatH2","CTRL+NUM3":"formatH3","CTRL+NUM4":"formatH4","CTRL+NUM5":"formatH5","CTRL+NUM6":"formatH6","CTRL+ENTER":"insertHorizontalRule","CTRL+K":"linkDialog.show"},mac:{ENTER:"insertParagraph","CMD+Z":"undo","CMD+SHIFT+Z":"redo",TAB:"tab","SHIFT+TAB":"untab","CMD+B":"bold","CMD+I":"italic","CMD+U":"underline","CMD+SHIFT+S":"strikethrough","CMD+BACKSLASH":"removeFormat","CMD+SHIFT+L":"justifyLeft","CMD+SHIFT+E":"justifyCenter","CMD+SHIFT+R":"justifyRight","CMD+SHIFT+J":"justifyFull","CMD+SHIFT+NUM7":"insertUnorderedList","CMD+SHIFT+NUM8":"insertOrderedList","CMD+LEFTBRACKET":"outdent","CMD+RIGHTBRACKET":"indent","CMD+NUM0":"formatPara","CMD+NUM1":"formatH1","CMD+NUM2":"formatH2","CMD+NUM3":"formatH3","CMD+NUM4":"formatH4","CMD+NUM5":"formatH5","CMD+NUM6":"formatH6","CMD+ENTER":"insertHorizontalRule","CMD+K":"linkDialog.show"}},icons:{align:"note-icon-align",alignCenter:"note-icon-align-center",alignJustify:"note-icon-align-justify",alignLeft:"note-icon-align-left",alignRight:"note-icon-align-right",rowBelow:"note-icon-row-below",colBefore:"note-icon-col-before",colAfter:"note-icon-col-after",rowAbove:"note-icon-row-above",rowRemove:"note-icon-row-remove",colRemove:"note-icon-col-remove",indent:"note-icon-align-indent",outdent:"note-icon-align-outdent",arrowsAlt:"note-icon-arrows-alt",bold:"note-icon-bold",caret:"note-icon-caret",circle:"note-icon-circle",close:"note-icon-close",code:"note-icon-code",eraser:"note-icon-eraser",font:"note-icon-font",frame:"note-icon-frame",italic:"note-icon-italic",link:"note-icon-link",unlink:"note-icon-chain-broken",magic:"note-icon-magic",menuCheck:"note-icon-menu-check",minus:"note-icon-minus",orderedlist:"note-icon-orderedlist",pencil:"note-icon-pencil",picture:"note-icon-picture",question:"note-icon-question",redo:"note-icon-redo",square:"note-icon-square",strikethrough:"note-icon-strikethrough",subscript:"note-icon-subscript",superscript:"note-icon-superscript",table:"note-icon-table",textHeight:"note-icon-text-height",trash:"note-icon-trash",underline:"note-icon-underline",undo:"note-icon-undo",unorderedlist:"note-icon-unorderedlist",video:"note-icon-video"}}})}),function(e){typeof define=="function"&&define.amd?define(["jquery"],e):typeof exports=="object"?e(require("jquery")):e(jQuery)}(function(e,t){function n(){var e,t,n,r,i,s,o,u;t=(new Date).toString(),n=((o=t.split("(")[1])!=null?o.slice(0,-1):0)||t.split(" ");if(n instanceof Array){s=[];for(var r=0,i=n.length;r<i;r++)u=n[r],((e=(o=u.match(/\b[A-Z]+\b/))!==null)?o[0]:0)&&s.push(e);n=s.pop()}return n}function r(){return new Date(Date.UTC.apply(Date,arguments))}"indexOf"in Array.prototype||(Array.prototype.indexOf=function(e,n){n===t&&(n=0),n<0&&(n+=this.length),n<0&&(n=0);for(var r=this.length;n<r;n++)if(n in this&&this[n]===e)return n;return-1});var i=function(r,i){var s=this;this.element=e(r),this.container=i.container||"body",this.language=i.language||this.element.data("date-language")||"en",this.language=this.language in o?this.language:this.language.split("-")[0],this.language=this.language in o?this.language:"en",this.isRTL=o[this.language].rtl||!1,this.formatType=i.formatType||this.element.data("format-type")||"standard",this.format=u.parseFormat(i.format||this.element.data("date-format")||o[this.language].format||u.getDefaultFormat(this.formatType,"input"),this.formatType),this.isInline=!1,this.isVisible=!1,this.isInput=this.element.is("input"),this.fontAwesome=i.fontAwesome||this.element.data("font-awesome")||!1,this.bootcssVer=i.bootcssVer||(this.isInput?this.element.is(".form-control")?3:2:this.bootcssVer=this.element.is(".input-group")?3:2),this.component=this.element.is(".date")?this.bootcssVer===3?this.element.find(".input-group-addon .glyphicon-th, .input-group-addon .glyphicon-time, .input-group-addon .glyphicon-remove, .input-group-addon .glyphicon-calendar, .input-group-addon .fa-calendar, .input-group-addon .fa-clock-o").parent():this.element.find(".add-on .icon-th, .add-on .icon-time, .add-on .icon-calendar, .add-on .fa-calendar, .add-on .fa-clock-o").parent():!1,this.componentReset=this.element.is(".date")?this.bootcssVer===3?this.element.find(".input-group-addon .glyphicon-remove, .input-group-addon .fa-times").parent():this.element.find(".add-on .icon-remove, .add-on .fa-times").parent():!1,this.hasInput=this.component&&this.element.find("input").length,this.component&&this.component.length===0&&(this.component=!1),this.linkField=i.linkField||this.element.data("link-field")||!1,this.linkFormat=u.parseFormat(i.linkFormat||this.element.data("link-format")||u.getDefaultFormat(this.formatType,"link"),this.formatType),this.minuteStep=i.minuteStep||this.element.data("minute-step")||5,this.pickerPosition=i.pickerPosition||this.element.data("picker-position")||"bottom-right",this.showMeridian=i.showMeridian||this.element.data("show-meridian")||!1,this.initialDate=i.initialDate||new Date,this.zIndex=i.zIndex||this.element.data("z-index")||t,this.title=typeof i.title=="undefined"?!1:i.title,this.timezone=i.timezone||n(),this.icons={leftArrow:this.fontAwesome?"fa-arrow-left":this.bootcssVer===3?"glyphicon-arrow-left":"icon-arrow-left",rightArrow:this.fontAwesome?"fa-arrow-right":this.bootcssVer===3?"glyphicon-arrow-right":"icon-arrow-right"},this.icontype=this.fontAwesome?"fa":"glyphicon",this._attachEvents(),this.clickedOutside=function(t){e(t.target).closest(".datetimepicker").length===0&&s.hide()},this.formatViewType="datetime","formatViewType"in i?this.formatViewType=i.formatViewType:"formatViewType"in this.element.data()&&(this.formatViewType=this.element.data("formatViewType")),this.minView=0,"minView"in i?this.minView=i.minView:"minView"in this.element.data()&&(this.minView=this.element.data("min-view")),this.minView=u.convertViewMode(this.minView),this.maxView=u.modes.length-1,"maxView"in i?this.maxView=i.maxView:"maxView"in this.element.data()&&(this.maxView=this.element.data("max-view")),this.maxView=u.convertViewMode(this.maxView),this.wheelViewModeNavigation=!1,"wheelViewModeNavigation"in i?this.wheelViewModeNavigation=i.wheelViewModeNavigation:"wheelViewModeNavigation"in this.element.data()&&(this.wheelViewModeNavigation=this.element.data("view-mode-wheel-navigation")),this.wheelViewModeNavigationInverseDirection=!1,"wheelViewModeNavigationInverseDirection"in i?this.wheelViewModeNavigationInverseDirection=i.wheelViewModeNavigationInverseDirection:"wheelViewModeNavigationInverseDirection"in this.element.data()&&(this.wheelViewModeNavigationInverseDirection=this.element.data("view-mode-wheel-navigation-inverse-dir")),this.wheelViewModeNavigationDelay=100,"wheelViewModeNavigationDelay"in i?this.wheelViewModeNavigationDelay=i.wheelViewModeNavigationDelay:"wheelViewModeNavigationDelay"in this.element.data()&&(this.wheelViewModeNavigationDelay=this.element.data("view-mode-wheel-navigation-delay")),this.startViewMode=2,"startView"in i?this.startViewMode=i.startView:"startView"in this.element.data()&&(this.startViewMode=this.element.data("start-view")),this.startViewMode=u.convertViewMode(this.startViewMode),this.viewMode=this.startViewMode,this.viewSelect=this.minView,"viewSelect"in i?this.viewSelect=i.viewSelect:"viewSelect"in this.element.data()&&(this.viewSelect=this.element.data("view-select")),this.viewSelect=u.convertViewMode(this.viewSelect),this.forceParse=!0,"forceParse"in i?this.forceParse=i.forceParse:"dateForceParse"in this.element.data()&&(this.forceParse=this.element.data("date-force-parse"));var a=this.bootcssVer===3?u.templateV3:u.template;while(a.indexOf("{iconType}")!==-1)a=a.replace("{iconType}",this.icontype);while(a.indexOf("{leftArrow}")!==-1)a=a.replace("{leftArrow}",this.icons.leftArrow);while(a.indexOf("{rightArrow}")!==-1)a=a.replace("{rightArrow}",this.icons.rightArrow);this.picker=e(a).appendTo(this.isInline?this.element:this.container).on({click:e.proxy(this.click,this),mousedown:e.proxy(this.mousedown,this)}),this.wheelViewModeNavigation&&(e.fn.mousewheel?this.picker.on({mousewheel:e.proxy(this.mousewheel,this)}):console.log("Mouse Wheel event is not supported. Please include the jQuery Mouse Wheel plugin before enabling this option")),this.isInline?this.picker.addClass("datetimepicker-inline"):this.picker.addClass("datetimepicker-dropdown-"+this.pickerPosition+" dropdown-menu");if(this.isRTL){this.picker.addClass("datetimepicker-rtl"
);var f=this.bootcssVer===3?".prev span, .next span":".prev i, .next i";this.picker.find(f).toggleClass(this.icons.leftArrow+" "+this.icons.rightArrow)}e(document).on("mousedown touchend",this.clickedOutside),this.autoclose=!1,"autoclose"in i?this.autoclose=i.autoclose:"dateAutoclose"in this.element.data()&&(this.autoclose=this.element.data("date-autoclose")),this.keyboardNavigation=!0,"keyboardNavigation"in i?this.keyboardNavigation=i.keyboardNavigation:"dateKeyboardNavigation"in this.element.data()&&(this.keyboardNavigation=this.element.data("date-keyboard-navigation")),this.todayBtn=i.todayBtn||this.element.data("date-today-btn")||!1,this.clearBtn=i.clearBtn||this.element.data("date-clear-btn")||!1,this.todayHighlight=i.todayHighlight||this.element.data("date-today-highlight")||!1,this.weekStart=0,typeof i.weekStart!="undefined"?this.weekStart=i.weekStart:typeof this.element.data("date-weekstart")!="undefined"?this.weekStart=this.element.data("date-weekstart"):typeof o[this.language].weekStart!="undefined"&&(this.weekStart=o[this.language].weekStart),this.weekStart=this.weekStart%7,this.weekEnd=(this.weekStart+6)%7,this.onRenderDay=function(e){var t=(i.onRenderDay||function(){return[]})(e);typeof t=="string"&&(t=[t]);var n=["day"];return n.concat(t?t:[])},this.onRenderHour=function(e){var t=(i.onRenderHour||function(){return[]})(e),n=["hour"];return typeof t=="string"&&(t=[t]),n.concat(t?t:[])},this.onRenderMinute=function(e){var t=(i.onRenderMinute||function(){return[]})(e),n=["minute"];return typeof t=="string"&&(t=[t]),e<this.startDate||e>this.endDate?n.push("disabled"):Math.floor(this.date.getUTCMinutes()/this.minuteStep)===Math.floor(e.getUTCMinutes()/this.minuteStep)&&n.push("active"),n.concat(t?t:[])},this.onRenderYear=function(e){var t=(i.onRenderYear||function(){return[]})(e),n=["year"];typeof t=="string"&&(t=[t]),this.date.getUTCFullYear()===e.getUTCFullYear()&&n.push("active");var r=e.getUTCFullYear(),s=this.endDate.getUTCFullYear();return(e<this.startDate||r>s)&&n.push("disabled"),n.concat(t?t:[])},this.onRenderMonth=function(e){var t=(i.onRenderMonth||function(){return[]})(e),n=["month"];return typeof t=="string"&&(t=[t]),n.concat(t?t:[])},this.startDate=new Date(-8639968443048e3),this.endDate=new Date(8639968443048e3),this.datesDisabled=[],this.daysOfWeekDisabled=[],this.setStartDate(i.startDate||this.element.data("date-startdate")),this.setEndDate(i.endDate||this.element.data("date-enddate")),this.setDatesDisabled(i.datesDisabled||this.element.data("date-dates-disabled")),this.setDaysOfWeekDisabled(i.daysOfWeekDisabled||this.element.data("date-days-of-week-disabled")),this.setMinutesDisabled(i.minutesDisabled||this.element.data("date-minute-disabled")),this.setHoursDisabled(i.hoursDisabled||this.element.data("date-hour-disabled")),this.fillDow(),this.fillMonths(),this.update(),this.showMode(),this.isInline&&this.show()};i.prototype={constructor:i,_events:[],_attachEvents:function(){this._detachEvents(),this.isInput?this._events=[[this.element,{focus:e.proxy(this.show,this),keyup:e.proxy(this.update,this),keydown:e.proxy(this.keydown,this)}]]:this.component&&this.hasInput?(this._events=[[this.element.find("input"),{focus:e.proxy(this.show,this),keyup:e.proxy(this.update,this),keydown:e.proxy(this.keydown,this)}],[this.component,{click:e.proxy(this.show,this)}]],this.componentReset&&this._events.push([this.componentReset,{click:e.proxy(this.reset,this)}])):this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:e.proxy(this.show,this)}]];for(var t=0,n,r;t<this._events.length;t++)n=this._events[t][0],r=this._events[t][1],n.on(r)},_detachEvents:function(){for(var e=0,t,n;e<this._events.length;e++)t=this._events[e][0],n=this._events[e][1],t.off(n);this._events=[]},show:function(t){this.picker.show(),this.height=this.component?this.component.outerHeight():this.element.outerHeight(),this.forceParse&&this.update(),this.place(),e(window).on("resize",e.proxy(this.place,this)),t&&(t.stopPropagation(),t.preventDefault()),this.isVisible=!0,this.element.trigger({type:"show",date:this.date})},hide:function(){if(!this.isVisible)return;if(this.isInline)return;this.picker.hide(),e(window).off("resize",this.place),this.viewMode=this.startViewMode,this.showMode(),this.isInput||e(document).off("mousedown",this.hide),this.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this.isVisible=!1,this.element.trigger({type:"hide",date:this.date})},remove:function(){this._detachEvents(),e(document).off("mousedown",this.clickedOutside),this.picker.remove(),delete this.picker,delete this.element.data().datetimepicker},getDate:function(){var e=this.getUTCDate();return e===null?null:new Date(e.getTime()+e.getTimezoneOffset()*6e4)},getUTCDate:function(){return this.date},getInitialDate:function(){return this.initialDate},setInitialDate:function(e){this.initialDate=e},setDate:function(e){this.setUTCDate(new Date(e.getTime()-e.getTimezoneOffset()*6e4))},setUTCDate:function(e){e>=this.startDate&&e<=this.endDate?(this.date=e,this.setValue(),this.viewDate=this.date,this.fill()):this.element.trigger({type:"outOfRange",date:e,startDate:this.startDate,endDate:this.endDate})},setFormat:function(e){this.format=u.parseFormat(e,this.formatType);var t;this.isInput?t=this.element:this.component&&(t=this.element.find("input")),t&&t.val()&&this.setValue()},setValue:function(){var t=this.getFormattedDate();this.isInput?this.element.val(t):(this.component&&this.element.find("input").val(t),this.element.data("date",t)),this.linkField&&e("#"+this.linkField).val(this.getFormattedDate(this.linkFormat))},getFormattedDate:function(e){return e=e||this.format,u.formatDate(this.date,e,this.language,this.formatType,this.timezone)},setStartDate:function(e){this.startDate=e||this.startDate,this.startDate.valueOf()!==8639968443048e3&&(this.startDate=u.parseDate(this.startDate,this.format,this.language,this.formatType,this.timezone)),this.update(),this.updateNavArrows()},setEndDate:function(e){this.endDate=e||this.endDate,this.endDate.valueOf()!==8639968443048e3&&(this.endDate=u.parseDate(this.endDate,this.format,this.language,this.formatType,this.timezone)),this.update(),this.updateNavArrows()},setDatesDisabled:function(t){this.datesDisabled=t||[],e.isArray(this.datesDisabled)||(this.datesDisabled=this.datesDisabled.split(/,\s*/));var n=this;this.datesDisabled=e.map(this.datesDisabled,function(e){return u.parseDate(e,n.format,n.language,n.formatType,n.timezone).toDateString()}),this.update(),this.updateNavArrows()},setTitle:function(e,t){return this.picker.find(e).find("th:eq(1)").text(this.title===!1?t:this.title)},setDaysOfWeekDisabled:function(t){this.daysOfWeekDisabled=t||[],e.isArray(this.daysOfWeekDisabled)||(this.daysOfWeekDisabled=this.daysOfWeekDisabled.split(/,\s*/)),this.daysOfWeekDisabled=e.map(this.daysOfWeekDisabled,function(e){return parseInt(e,10)}),this.update(),this.updateNavArrows()},setMinutesDisabled:function(t){this.minutesDisabled=t||[],e.isArray(this.minutesDisabled)||(this.minutesDisabled=this.minutesDisabled.split(/,\s*/)),this.minutesDisabled=e.map(this.minutesDisabled,function(e){return parseInt(e,10)}),this.update(),this.updateNavArrows()},setHoursDisabled:function(t){this.hoursDisabled=t||[],e.isArray(this.hoursDisabled)||(this.hoursDisabled=this.hoursDisabled.split(/,\s*/)),this.hoursDisabled=e.map(this.hoursDisabled,function(e){return parseInt(e,10)}),this.update(),this.updateNavArrows()},place:function(){if(this.isInline)return;if(!this.zIndex){var t=0;e("div").each(function(){var n=parseInt(e(this).css("zIndex"),10);n>t&&(t=n)}),this.zIndex=t+10}var n,r,i,s;this.container instanceof e?s=this.container.offset():s=e(this.container).offset();if(this.component){n=this.component.offset(),i=n.left;if(this.pickerPosition==="bottom-left"||this.pickerPosition==="top-left")i+=this.component.outerWidth()-this.picker.outerWidth()}else{n=this.element.offset(),i=n.left;if(this.pickerPosition==="bottom-left"||this.pickerPosition==="top-left")i+=this.element.outerWidth()-this.picker.outerWidth()}var o=document.body.clientWidth||window.innerWidth;i+220>o&&(i=o-220),this.pickerPosition==="top-left"||this.pickerPosition==="top-right"?r=n.top-this.picker.outerHeight():r=n.top+this.height,r-=s.top,i-=s.left,this.picker.css({top:r,left:i,zIndex:this.zIndex})},hour_minute:"^([0-9]|0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]",update:function(){var e,t=!1;arguments&&arguments.length&&(typeof arguments[0]=="string"||arguments[0]instanceof Date)?(e=arguments[0],t=!0):(e=(this.isInput?this.element.val():this.element.find("input").val())||this.element.data("date")||this.initialDate,typeof e=="string"&&(e=e.replace(/^\s+|\s+$/g,""))),e||(e=new Date,t=!1),typeof e=="string"&&((new RegExp(this.hour_minute)).test(e)||(new RegExp(this.hour_minute+":[0-5][0-9]")).test(e))&&(e=this.getDate()),this.date=u.parseDate(e,this.format,this.language,this.formatType,this.timezone),t&&this.setValue(),this.date<this.startDate?this.viewDate=new Date(this.startDate):this.date>this.endDate?this.viewDate=new Date(this.endDate):this.viewDate=new Date(this.date),this.fill()},fillDow:function(){var e=this.weekStart,t="<tr>";while(e<this.weekStart+7)t+='<th class="dow">'+o[this.language].daysMin[e++%7]+"</th>";t+="</tr>",this.picker.find(".datetimepicker-days thead").append(t)},fillMonths:function(){var e="",t=new Date(this.viewDate);for(var n=0;n<12;n++){t.setUTCMonth(n);var r=this.onRenderMonth(t);e+='<span class="'+r.join(" ")+'">'+o[this.language].monthsShort[n]+"</span>"}this.picker.find(".datetimepicker-months td").html(e)},fill:function(){if(!this.date||!this.viewDate)return;var t=new Date(this.viewDate),n=t.getUTCFullYear(),i=t.getUTCMonth(),a=t.getUTCDate(),f=t.getUTCHours(),l=this.startDate.getUTCFullYear(),c=this.startDate.getUTCMonth(),h=this.endDate.getUTCFullYear(),p=this.endDate.getUTCMonth()+1,d=(new r(this.date.getUTCFullYear(),this.date.getUTCMonth(),this.date.getUTCDate())).valueOf(),v=new Date;this.setTitle(".datetimepicker-days",o[this.language].months[i]+" "+n);if(this.formatViewType==="time"){var m=this.getFormattedDate();this.setTitle(".datetimepicker-hours",m),this.setTitle(".datetimepicker-minutes",m)}else this.setTitle(".datetimepicker-hours",a+" "+o[this.language].months[i]+" "+n),this.setTitle(".datetimepicker-minutes",a+" "+o[this.language].months[i]+" "+n);this.picker.find("tfoot th.today").text(o[this.language].today||o.en.today).toggle(this.todayBtn!==!1),this.picker.find("tfoot th.clear").text(o[this.language].clear||o.en.clear).toggle(this.clearBtn!==!1),this.updateNavArrows(),this.fillMonths();var g=r(n,i-1,28,0,0,0,0),y=u.getDaysInMonth(g.getUTCFullYear(),g.getUTCMonth());g.setUTCDate(y),g.setUTCDate(y-(g.getUTCDay()-this.weekStart+7)%7);var b=new Date(g);b.setUTCDate(b.getUTCDate()+42),b=b.valueOf();var w=[],E;while(g.valueOf()<b)g.getUTCDay()===this.weekStart&&w.push("<tr>"),E=this.onRenderDay(g),g.getUTCFullYear()<n||g.getUTCFullYear()===n&&g.getUTCMonth()<i?E.push("old"):(g.getUTCFullYear()>n||g.getUTCFullYear()===n&&g.getUTCMonth()>i)&&E.push("new"),this.todayHighlight&&g.getUTCFullYear()===v.getFullYear()&&g.getUTCMonth()===v.getMonth()&&g.getUTCDate()===v.getDate()&&E.push("today"),g.valueOf()===d&&E.push("active"),(g.valueOf()+864e5<=this.startDate||g.valueOf()>this.endDate||e.inArray(g.getUTCDay(),this.daysOfWeekDisabled)!==-1||e.inArray(g.toDateString(),this.datesDisabled)!==-1)&&E.push("disabled"),w.push('<td class="'+E.join(" ")+'">'+g.getUTCDate()+"</td>"),g.getUTCDay()===this.weekEnd&&w.push("</tr>"),g.setUTCDate(g.getUTCDate()+1);this.picker.find(".datetimepicker-days tbody").empty().append(w.join("")),w=[];var S="",x="",T="",N=this.hoursDisabled||[];t=new Date(this.viewDate);for(var C=0;C<24;C++){t.setUTCHours(C),E=this.onRenderHour(t),N.indexOf(C)!==-1&&E.push("disabled");var k=r(n,i,a,C);k.valueOf()+36e5<=this.startDate||k.valueOf()>this.endDate?E.push("disabled"):f===C&&E.push("active"),this.showMeridian&&o[this.language].meridiem.length===2?(x=C<12?o[this.language].meridiem[0]:o[this.language].meridiem[1],x!==T&&(T!==""&&w.push("</fieldset>"),w.push('<fieldset class="hour"><legend>'+x.toUpperCase()+"</legend>")),T=x,S=C%12?C%12:12,C<12?E.push("hour_am"):E.push("hour_pm"),w.push('<span class="'+E.join(" ")+'">'+S+"</span>"),C===23&&w.push("</fieldset>")):(S=C+":00",w.push('<span class="'+E.join(" ")+'">'+S+"</span>"))}this.picker.find(".datetimepicker-hours td").html(w.join("")),w=[],S="",x="",T="";var L=this.minutesDisabled||[];t=new Date(this.viewDate);for(var C=0;C<60;C+=this.minuteStep){if(L.indexOf(C)!==-1)continue;t.setUTCMinutes(C),t.setUTCSeconds(0),E=this.onRenderMinute(t),this.showMeridian&&o[this.language].meridiem.length===2?(x=f<12?o[this.language].meridiem[0]:o[this.language].meridiem[1],x!==T&&(T!==""&&w.push("</fieldset>"),w.push('<fieldset class="minute"><legend>'+x.toUpperCase()+"</legend>")),T=x,S=f%12?f%12:12,w.push('<span class="'+E.join(" ")+'">'+S+":"+(C<10?"0"+C:C)+"</span>"),C===59&&w.push("</fieldset>")):(S=C+":00",w.push('<span class="'+E.join(" ")+'">'+f+":"+(C<10?"0"+C:C)+"</span>"))}this.picker.find(".datetimepicker-minutes td").html(w.join(""));var A=this.date.getUTCFullYear(),O=this.setTitle(".datetimepicker-months",n).end().find(".month").removeClass("active");A===n&&O.eq(this.date.getUTCMonth()).addClass("active"),(n<l||n>h)&&O.addClass("disabled"),n===l&&O.slice(0,c).addClass("disabled"),n===h&&O.slice(p).addClass("disabled"),w="",n=parseInt(n/10,10)*10;var M=this.setTitle(".datetimepicker-years",n+"-"+(n+9)).end().find("td");n-=1,t=new Date(this.viewDate);for(var C=-1;C<11;C++)t.setUTCFullYear(n),E=this.onRenderYear(t),(C===-1||C===10)&&E.push(s),w+='<span class="'+E.join(" ")+'">'+n+"</span>",n+=1;M.html(w),this.place()},updateNavArrows:function(){var e=new Date(this.viewDate),t=e.getUTCFullYear(),n=e.getUTCMonth(),r=e.getUTCDate(),i=e.getUTCHours();switch(this.viewMode){case 0:t<=this.startDate.getUTCFullYear()&&n<=this.startDate.getUTCMonth()&&r<=this.startDate.getUTCDate()&&i<=this.startDate.getUTCHours()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),t>=this.endDate.getUTCFullYear()&&n>=this.endDate.getUTCMonth()&&r>=this.endDate.getUTCDate()&&i>=this.endDate.getUTCHours()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:t<=this.startDate.getUTCFullYear()&&n<=this.startDate.getUTCMonth()&&r<=this.startDate.getUTCDate()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),t>=this.endDate.getUTCFullYear()&&n>=this.endDate.getUTCMonth()&&r>=this.endDate.getUTCDate()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 2:t<=this.startDate.getUTCFullYear()&&n<=this.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),t>=this.endDate.getUTCFullYear()&&n>=this.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 3:case 4:t<=this.startDate.getUTCFullYear()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),t>=this.endDate.getUTCFullYear()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}},mousewheel:function(t){t.preventDefault(),t.stopPropagation();if(this.wheelPause)return;this.wheelPause=!0;var n=t.originalEvent,r=n.wheelDelta,i=r>0?1:r===0?0:-1;this.wheelViewModeNavigationInverseDirection&&(i=-i),this.showMode(i),setTimeout(e.proxy(function(){this.wheelPause=!1},this),this.wheelViewModeNavigationDelay)},click:function(t){t.stopPropagation(),t.preventDefault();var n=e(t.target).closest("span, td, th, legend");n.is("."+this.icontype)&&(n=e(n).parent().closest("span, td, th, legend"));if(n.length===1){if(n.is(".disabled")){this.element.trigger({type:"outOfRange",date:this.viewDate,startDate:this.startDate,endDate:this.endDate});return}switch(n[0].nodeName.toLowerCase()){case"th":switch(n[0].className){case"switch":this.showMode(1);break;case"prev":case"next":var i=u.modes[this.viewMode].navStep*(n[0].className==="prev"?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveHour(this.viewDate,i);break;case 1:this.viewDate=this.moveDate(this.viewDate,i);break;case 2:this.viewDate=this.moveMonth(this.viewDate,i);break;case 3:case 4:this.viewDate=this.moveYear(this.viewDate,i)}this.fill(),this.element.trigger({type:n[0].className+":"+this.convertViewModeText(this.viewMode),date:this.viewDate,startDate:this.startDate,endDate:this.endDate});break;case"clear":this.reset(),this.autoclose&&this.hide();break;case"today":var s=new Date;s=r(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes(),s.getSeconds(),0),s<this.startDate?s=this.startDate:s>this.endDate&&(s=this.endDate),this.viewMode=this.startViewMode,this.showMode(0),this._setDate(s),this.fill(),this.autoclose&&this.hide()}break;case"span":if(!n.is(".disabled")){var o=this.viewDate.getUTCFullYear(),a=this.viewDate.getUTCMonth(),f=this.viewDate.getUTCDate(),l=this.viewDate.getUTCHours(),c=this.viewDate.getUTCMinutes(),h=this.viewDate.getUTCSeconds();if(n.is(".month"))this.viewDate.setUTCDate(1),a=n.parent().find("span").index(n),f=this.viewDate.getUTCDate(),this.viewDate.setUTCMonth(a),this.element.trigger({type:"changeMonth",date:this.viewDate}),this.viewSelect>=3&&this._setDate(r(o,a,f,l,c,h,0));else if(n.is(".year"))this.viewDate.setUTCDate(1),o=parseInt(n.text(),10)||0,this.viewDate.setUTCFullYear(o),this.element.trigger({type:"changeYear",date:this.viewDate}),this.viewSelect>=4&&this._setDate(r(o,a,f,l,c,h,0));else if(n.is(".hour")){l=parseInt(n.text(),10)||0;if(n.hasClass("hour_am")||n.hasClass("hour_pm"))l===12&&n.hasClass("hour_am")?l=0:l!==12&&n.hasClass("hour_pm")&&(l+=12);this.viewDate.setUTCHours(l),this.element.trigger({type:"changeHour",date:this.viewDate}),this.viewSelect>=1&&this._setDate(r(o,a,f,l,c,h,0))}else n.is(".minute")&&(c=parseInt(n.text().substr(n.text().indexOf(":")+1),10)||0,this.viewDate.setUTCMinutes(c),this.element.trigger({type:"changeMinute",date:this.viewDate}),this.viewSelect>=0&&this._setDate(r(o,a,f,l,c,h,0)));if(this.viewMode!==0){var p=this.viewMode;this.showMode(-1),this.fill(),p===this.viewMode&&this.autoclose&&this.hide()}else this.fill(),this.autoclose&&this.hide()}break;case"td":if(n.is(".day")&&!n.is(".disabled")){var f=parseInt(n.text(),10)||1,o=this.viewDate.getUTCFullYear(),a=this.viewDate.getUTCMonth(),l=this.viewDate.getUTCHours(),c=this.viewDate.getUTCMinutes(),h=this.viewDate.getUTCSeconds();n.is(".old")?a===0?(a=11,o-=1):a-=1:n.is(".new")&&(a===11?(a=0,o+=1):a+=1),this.viewDate.setUTCFullYear(o),this.viewDate.setUTCMonth(a,f),this.element.trigger({type:"changeDay",date:this.viewDate}),this.viewSelect>=2&&this._setDate(r(o,a,f,l,c,h,0))}var p=this.viewMode;this.showMode(-1),this.fill(),p===this.viewMode&&this.autoclose&&this.hide()}}},_setDate:function(e,t){if(!t||t==="date")this.date=e;if(!t||t==="view")this.viewDate=e;this.fill(),this.setValue();var n;this.isInput?n=this.element:this.component&&(n=this.element.find("input")),n&&n.change(),this.element.trigger({type:"changeDate",date:this.getDate()}),e===null&&(this.date=this.viewDate)},moveMinute:function(e,t){if(!t)return e;var n=new Date(e.valueOf());return n.setUTCMinutes(n.getUTCMinutes()+t*this.minuteStep),n},moveHour:function(e,t){if(!t)return e;var n=new Date(e.valueOf());return n.setUTCHours(n.getUTCHours()+t),n},moveDate:function(e,t){if(!t)return e;var n=new Date(e.valueOf());return n.setUTCDate(n.getUTCDate()+t),n},moveMonth:function(e,t){if(!t)return e;var n=new Date(e.valueOf()),r=n.getUTCDate(),i=n.getUTCMonth(),s=Math.abs(t),o,u;t=t>0?1:-1;if(s===1){u=t===-1?function(){return n.getUTCMonth()===i}:function(){return n.getUTCMonth()!==o},o=i+t,n.setUTCMonth(o);if(o<0||o>11)o=(o+12)%12}else{for(var a=0;a<s;a++)n=this.moveMonth(n,t);o=n.getUTCMonth(),n.setUTCDate(r),u=function(){return o!==n.getUTCMonth()}}while(u())n.setUTCDate(--r),n.setUTCMonth(o);return n},moveYear:function(e,t){return this.moveMonth(e,t*12)},dateWithinRange:function(e){return e>=this.startDate&&e<=this.endDate},keydown:function(e){if(this.picker.is(":not(:visible)")){e.keyCode===27&&this.show();return}var t=!1,n,r,i;switch(e.keyCode){case 27:this.hide(),e.preventDefault();break;case 37:case 39:if(!this.keyboardNavigation)break;n=e.keyCode===37?-1:1;var s=this.viewMode;e.ctrlKey?s+=2:e.shiftKey&&(s+=1),s===4?(r=this.moveYear(this.date,n),i=this.moveYear(this.viewDate,n)):s===3?(r=this.moveMonth(this.date,n),i=this.moveMonth(this.viewDate,n)):s===2?(r=this.moveDate(this.date,n),i=this.moveDate(this.viewDate,n)):s===1?(r=this.moveHour(this.date,n),i=this.moveHour(this.viewDate,n)):s===0&&(r=this.moveMinute(this.date,n),i=this.moveMinute(this.viewDate,n)),this.dateWithinRange(r)&&(this.date=r,this.viewDate=i,this.setValue(),this.update(),e.preventDefault(),t=!0);break;case 38:case 40:if(!this.keyboardNavigation)break;n=e.keyCode===38?-1:1,s=this.viewMode,e.ctrlKey?s+=2:e.shiftKey&&(s+=1),s===4?(r=this.moveYear(this.date,n),i=this.moveYear(this.viewDate,n)):s===3?(r=this.moveMonth(this.date,n),i=this.moveMonth(this.viewDate,n)):s===2?(r=this.moveDate(this.date,n*7),i=this.moveDate(this.viewDate,n*7)):s===1?this.showMeridian?(r=this.moveHour(this.date,n*6),i=this.moveHour(this.viewDate,n*6)):(r=this.moveHour(this.date,n*4),i=this.moveHour(this.viewDate,n*4)):s===0&&(r=this.moveMinute(this.date,n*4),i=this.moveMinute(this.viewDate,n*4)),this.dateWithinRange(r)&&(this.date=r,this.viewDate=i,this.setValue(),this.update(),e.preventDefault(),t=!0);break;case 13:if(this.viewMode!==0){var o=this.viewMode;this.showMode(-1),this.fill(),o===this.viewMode&&this.autoclose&&this.hide()}else this.fill(),this.autoclose&&this.hide();e.preventDefault();break;case 9:this.hide()}if(t){var u;this.isInput?u=this.element:this.component&&(u=this.element.find("input")),u&&u.change(),this.element.trigger({type:"changeDate",date:this.getDate()})}},showMode:function(e){if(e){var t=Math.max(0,Math.min(u.modes.length-1,this.viewMode+e));t>=this.minView&&t<=this.maxView&&(this.element.trigger({type:"changeMode",date:this.viewDate,oldViewMode:this.viewMode,newViewMode:t}),this.viewMode=t)}this.picker.find(">div").hide().filter(".datetimepicker-"+u.modes[this.viewMode].clsName).css("display","block"),this.updateNavArrows()},reset:function(){this._setDate(null,"date")},convertViewModeText:function(e){switch(e){case 4:return"decade";case 3:return"year";case 2:return"month";case 1:return"day";case 0:return"hour"}}};var s=e.fn.datetimepicker;e.fn.datetimepicker=function(n){var r=Array.apply(null,arguments);r.shift();var s;return this.each(function(){var o=e(this),u=o.data("datetimepicker"),a=typeof n=="object"&&n;u||o.data("datetimepicker",u=new i(this,e.extend({},e.fn.datetimepicker.defaults,a)));if(typeof n=="string"&&typeof u[n]=="function"){s=u[n].apply(u,r);if(s!==t)return!1}}),s!==t?s:this},e.fn.datetimepicker.defaults={},e.fn.datetimepicker.Constructor=i;var o=e.fn.datetimepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],meridiem:["am","pm"],suffix:["st","nd","rd","th"],today:"Today",clear:"Clear"}},u={modes:[{clsName:"minutes",navFnc:"Hours",navStep:1},{clsName:"hours",navFnc:"Date",navStep:1},{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(e){return e%4===0&&e%100!==0||e%400===0},getDaysInMonth:function(e,t){return[31,u.isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]},getDefaultFormat:function(e,t){if(e==="standard")return t==="input"?"yyyy-mm-dd hh:ii":"yyyy-mm-dd hh:ii:ss";if(e==="php")return t==="input"?"Y-m-d H:i":"Y-m-d H:i:s";throw new Error("Invalid format type.")},validParts:function(e){if(e==="standard")return/t|hh?|HH?|p|P|z|Z|ii?|ss?|dd?|DD?|mm?|MM?|yy(?:yy)?/g;if(e==="php")return/[dDjlNwzFmMnStyYaABgGhHis]/g;throw new Error("Invalid format type.")},nonpunctuation:/[^ -\/:-@\[-`{-~\t\n\rTZ]+/g,parseFormat:function(e,t){var n=e.replace(this.validParts(t),"\0").split("\0"),r=e.match(this.validParts(t));if(!n||!n.length||!r||r.length===0)throw new Error("Invalid date format.");return{separators:n,parts:r}},parseDate:function(t,n,s,u,a){if(t instanceof Date){var f=new Date(t.valueOf()-t.getTimezoneOffset()*6e4);return f.setMilliseconds(0),f}/^\d{4}\-\d{1,2}\-\d{1,2}$/.test(t)&&(n=this.parseFormat("yyyy-mm-dd",u)),/^\d{4}\-\d{1,2}\-\d{1,2}[T ]\d{1,2}\:\d{1,2}$/.test(t)&&(n=this.parseFormat("yyyy-mm-dd hh:ii",u)),/^\d{4}\-\d{1,2}\-\d{1,2}[T ]\d{1,2}\:\d{1,2}\:\d{1,2}[Z]{0,1}$/.test(t)&&(n=this.parseFormat("yyyy-mm-dd hh:ii:ss",u));if(/^[-+]\d+[dmwy]([\s,]+[-+]\d+[dmwy])*$/.test(t)){var l=/([-+]\d+)([dmwy])/,c=t.match(/([-+]\d+)([dmwy])/g),h,p;t=new Date;for(var d=0;d<c.length;d++){h=l.exec(c[d]),p=parseInt(h[1]);switch(h[2]){case"d":t.setUTCDate(t.getUTCDate()+p);break;case"m":t=i.prototype.moveMonth.call(i.prototype,t,p);break;case"w":t.setUTCDate(t.getUTCDate()+p*7);break;case"y":t=i.prototype.moveYear.call(i.prototype,t,p)}}return r(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),0)}var c=t&&t.toString().match(this.nonpunctuation)||[],t=new Date(0,0,0,0,0,0,0),v={},m=["hh","h","ii","i","ss","s","yyyy","yy","M","MM","m","mm","D","DD","d","dd","H","HH","p","P","z","Z"],g={hh:function(e,t){return e.setUTCHours(t)},h:function(e,t){return e.setUTCHours(t)},HH:function(e,t){return e.setUTCHours(t===12?0:t)},H:function(e,t){return e.setUTCHours(t===12?0:t)},ii:function(e,t){return e.setUTCMinutes(t)},i:function(e,t){return e.setUTCMinutes(t)},ss:function(e,t){return e.setUTCSeconds(t)},s:function(e,t){return e.setUTCSeconds(t)},yyyy:function(e,t){return e.setUTCFullYear(t)},yy:function(e,t){return e.setUTCFullYear(2e3+t)},m:function(e,t){t-=1;while(t<0)t+=12;t%=12,e.setUTCMonth(t);while(e.getUTCMonth()!==t){if(isNaN(e.getUTCMonth()))return e;e.setUTCDate(e.getUTCDate()-1)}return e},d:function(e,t){return e.setUTCDate(t)},p:function(e,t){return e.setUTCHours(t===1?e.getUTCHours()+12:e.getUTCHours())},z:function(){return a}},y,b,h;g.M=g.MM=g.mm=g.m,g.dd=g.d,g.P=g.p,g.Z=g.z,t=r(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds());if(c.length===n.parts.length){for(var d=0,w=n.parts.length;d<w;d++){y=parseInt(c[d],10),h=n.parts[d];if(isNaN(y))switch(h){case"MM":b=e(o[s].months).filter(function(){var e=this.slice(0,c[d].length),t=c[d].slice(0,e.length);return e===t}),y=e.inArray(b[0],o[s].months)+1;break;case"M":b=e(o[s].monthsShort).filter(function(){var e=this.slice(0,c[d].length),t=c[d].slice(0,e.length);return e.toLowerCase()===t.toLowerCase()}),y=e.inArray(b[0],o[s].monthsShort)+1;break;case"p":case"P":y=e.inArray(c[d].toLowerCase(),o[s].meridiem);break;case"z":case"Z":a}v[h]=y}for(var d=0,E;d<m.length;d++)E=m[d],E in v&&!isNaN(v[E])&&g[E](t,v[E])}return t},formatDate:function(t,n,r,i,s){if(t===null)return"";var a;if(i==="standard")a={t:t.getTime(),yy:t.getUTCFullYear().toString().substring(2),yyyy:t.getUTCFullYear(),m:t.getUTCMonth()+1,M:o[r].monthsShort[t.getUTCMonth()],MM:o[r].months[t.getUTCMonth()],d:t.getUTCDate(),D:o[r].daysShort[t.getUTCDay()],DD:o[r].days[t.getUTCDay()],p:o[r].meridiem.length===2?o[r].meridiem[t.getUTCHours()<12?0:1]:"",h:t.getUTCHours(),i:t.getUTCMinutes(),s:t.getUTCSeconds(),z:s},o[r].meridiem.length===2?a.H=a.h%12===0?12:a.h%12:a.H=a.h,a.HH=(a.H<10?"0":"")+a.H,a.P=a.p.toUpperCase(),a.Z=a.z,a.hh=(a.h<10?"0":"")+a.h,a.ii=(a.i<10?"0":"")+a.i,a.ss=(a.s<10?"0":"")+a.s,a.dd=(a.d<10?"0":"")+a.d,a.mm=(a.m<10?"0":"")+a.m;else{if(i!=="php")throw new Error("Invalid format type.");a={y:t.getUTCFullYear().toString().substring(2),Y:t.getUTCFullYear(),F:o[r].months[t.getUTCMonth()],M:o[r].monthsShort[t.getUTCMonth()],n:t.getUTCMonth()+1,t:u.getDaysInMonth(t.getUTCFullYear(),t.getUTCMonth()),j:t.getUTCDate(),l:o[r].days[t.getUTCDay()],D:o[r].daysShort[t.getUTCDay()],w:t.getUTCDay(),N:t.getUTCDay()===0?7:t.getUTCDay(),S:t.getUTCDate()%10<=o[r].suffix.length?o[r].suffix[t.getUTCDate()%10-1]:"",a:o[r].meridiem.length===2?o[r].meridiem[t.getUTCHours()<12?0:1]:"",g:t.getUTCHours()%12===0?12:t.getUTCHours()%12,G:t.getUTCHours(),i:t.getUTCMinutes(),s:t.getUTCSeconds()},a.m=(a.n<10?"0":"")+a.n,a.d=(a.j<10?"0":"")+a.j,a.A=a.a.toString().toUpperCase(),a.h=(a.g<10?"0":"")+a.g,a.H=(a.G<10?"0":"")+a.G,a.i=(a.i<10?"0":"")+a.i,a.s=(a.s<10?"0":"")+a.s}var t=[],f=e.extend([],n.separators);for(var l=0,c=n.parts.length;l<c;l++)f.length&&t.push(f.shift()),t.push(a[n.parts[l]]);return f.length&&t.push(f.shift()),t.join("")},convertViewMode:function(e){switch(e){case 4:case"decade":e=4;break;case 3:case"year":e=3;break;case 2:case"month":e=2;break;case 1:case"day":e=1;break;case 0:case"hour":e=0}return e},headTemplate:'<thead><tr><th class="prev"><i class="{iconType} {leftArrow}"/></th><th colspan="5" class="switch" style="width: 120px;"></th><th class="next"><i class="{iconType} {rightArrow}"/></th></tr></thead>',headTemplateV3:'<thead><tr><th class="prev"><span class="{iconType} {leftArrow}"></span> </th><th colspan="5" class="switch"></th><th class="next"><span class="{iconType} {rightArrow}"></span> </th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};u.template='<div class="datetimepicker"><div class="datetimepicker-minutes"><table class=" table-condensed">'+u.headTemplate+u.contTemplate+u.footTemplate+"</table>"+"</div>"+'<div class="datetimepicker-hours">'+'<table class=" table-condensed">'+u.headTemplate+u.contTemplate+u.footTemplate+"</table>"+"</div>"+'<div class="datetimepicker-days">'+'<table class=" table-condensed">'+u.headTemplate+"<tbody></tbody>"+u.footTemplate+"</table>"+"</div>"+'<div class="datetimepicker-months">'+'<table class="table-condensed">'+u.headTemplate+u.contTemplate+u.footTemplate+"</table>"+"</div>"+'<div class="datetimepicker-years">'+'<table class="table-condensed">'+u.headTemplate+u.contTemplate+u.footTemplate+"</table>"+"</div>"+"</div>",u.templateV3='<div class="datetimepicker"><div class="datetimepicker-minutes"><table class=" table-condensed">'+u.headTemplateV3+u.contTemplate+u.footTemplate+"</table>"+"</div>"+'<div class="datetimepicker-hours">'+'<table class=" table-condensed">'+u.headTemplateV3+u.contTemplate+u.footTemplate+"</table>"+"</div>"+'<div class="datetimepicker-days">'+'<table class=" table-condensed">'+u.headTemplateV3+"<tbody></tbody>"+u.footTemplate+"</table>"+"</div>"+'<div class="datetimepicker-months">'+'<table class="table-condensed">'+u.headTemplateV3+u.contTemplate+u.footTemplate+"</table>"+"</div>"+'<div class="datetimepicker-years">'+'<table class="table-condensed">'+u.headTemplateV3+u.contTemplate+u.footTemplate+"</table>"+"</div>"+"</div>",e.fn.datetimepicker.DPGlobal=u,e.fn.datetimepicker.noConflict=function(){return e.fn.datetimepicker=s,this},e.fn.datetimepicker.dates["zh-CN"]={days:["\u661f\u671f\u65e5","\u661f\u671f\u4e00","\u661f\u671f\u4e8c","\u661f\u671f\u4e09","\u661f\u671f\u56db","\u661f\u671f\u4e94","\u661f\u671f\u516d","\u661f\u671f\u65e5"],daysShort:["\u5468\u65e5","\u5468\u4e00","\u5468\u4e8c","\u5468\u4e09","\u5468\u56db","\u5468\u4e94","\u5468\u516d","\u5468\u65e5"],daysMin:["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u65e5"],months:["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"],monthsShort:["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"],today:"\u4eca\u5929",suffix:[],meridiem:["\u4e0a\u5348","\u4e0b\u5348"]},e(document).on("focus.datetimepicker.data-api click.datetimepicker.data-api",'[data-provide="datetimepicker"]',function(t){var n=e(this);if(n.data("datetimepicker"))return;t.preventDefault(),n.datetimepicker("show")}),e(function(){e('[data-provide="datetimepicker-inline"]').datetimepicker()})}),!function(e,t){"use strict"
;if("undefined"!=typeof module&&module.exports){var n="undefined"!=typeof process,r=n&&"electron"in process.versions;r?e.BootstrapDialog=t(e.jQuery):module.exports=t(require("jquery"),require("bootstrap"))}else"function"==typeof define&&define.amd?define("bootstrap-dialog",["jquery","bootstrap"],function(e){return t(e)}):e.BootstrapDialog=t(e.jQuery)}(this,function(e){"use strict";var t=e.fn.modal.Constructor,n=function(e,n){t.call(this,e,n)};n.getModalVersion=function(){var t=null;return t="undefined"==typeof e.fn.modal.Constructor.VERSION?"v3.1":/3\.2\.\d+/.test(e.fn.modal.Constructor.VERSION)?"v3.2":/3\.3\.[1,2]/.test(e.fn.modal.Constructor.VERSION)?"v3.3":"v3.3.4"},n.ORIGINAL_BODY_PADDING=parseInt(e("body").css("padding-right")||0,10),n.METHODS_TO_OVERRIDE={},n.METHODS_TO_OVERRIDE["v3.1"]={},n.METHODS_TO_OVERRIDE["v3.2"]={hide:function(t){if(t&&t.preventDefault(),t=e.Event("hide.bs.modal"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()){this.isShown=!1;var n=this.getGlobalOpenedDialogs();0===n.length&&this.$body.removeClass("modal-open"),this.resetScrollbar(),this.escape(),e(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),e.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",e.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal()}}},n.METHODS_TO_OVERRIDE["v3.3"]={setScrollbar:function(){var e=n.ORIGINAL_BODY_PADDING;this.bodyIsOverflowing&&this.$body.css("padding-right",e+this.scrollbarWidth)},resetScrollbar:function(){var e=this.getGlobalOpenedDialogs();0===e.length&&this.$body.css("padding-right",n.ORIGINAL_BODY_PADDING)},hideModal:function(){this.$element.hide(),this.backdrop(e.proxy(function(){var e=this.getGlobalOpenedDialogs();0===e.length&&this.$body.removeClass("modal-open"),this.resetAdjustments(),this.resetScrollbar(),this.$element.trigger("hidden.bs.modal")},this))}},n.METHODS_TO_OVERRIDE["v3.3.4"]=e.extend({},n.METHODS_TO_OVERRIDE["v3.3"]),n.prototype={constructor:n,getGlobalOpenedDialogs:function(){var t=[];return e.each(r.dialogs,function(e,n){n.isRealized()&&n.isOpened()&&t.push(n)}),t}},n.prototype=e.extend(n.prototype,t.prototype,n.METHODS_TO_OVERRIDE[n.getModalVersion()]);var r=function(t){this.defaultOptions=e.extend(!0,{id:r.newGuid(),buttons:[],data:{},onshow:null,onshown:null,onhide:null,onhidden:null},r.defaultOptions),this.indexedButtons={},this.registeredButtonHotkeys={},this.draggableData={isMouseDown:!1,mouseOffset:{}},this.realized=!1,this.opened=!1,this.initOptions(t),this.holdThisInstance()};return r.BootstrapDialogModal=n,r.NAMESPACE="bootstrap-dialog",r.TYPE_DEFAULT="type-default",r.TYPE_INFO="type-info",r.TYPE_PRIMARY="type-primary",r.TYPE_SUCCESS="type-success",r.TYPE_WARNING="type-warning",r.TYPE_DANGER="type-danger",r.DEFAULT_TEXTS={},r.DEFAULT_TEXTS[r.TYPE_DEFAULT]="Information",r.DEFAULT_TEXTS[r.TYPE_INFO]="Information",r.DEFAULT_TEXTS[r.TYPE_PRIMARY]="Information",r.DEFAULT_TEXTS[r.TYPE_SUCCESS]="Success",r.DEFAULT_TEXTS[r.TYPE_WARNING]="Warning",r.DEFAULT_TEXTS[r.TYPE_DANGER]="Danger",r.DEFAULT_TEXTS.OK="OK",r.DEFAULT_TEXTS.CANCEL="Cancel",r.DEFAULT_TEXTS.CONFIRM="Confirmation",r.SIZE_NORMAL="size-normal",r.SIZE_SMALL="size-small",r.SIZE_WIDE="size-wide",r.SIZE_LARGE="size-large",r.BUTTON_SIZES={},r.BUTTON_SIZES[r.SIZE_NORMAL]="",r.BUTTON_SIZES[r.SIZE_SMALL]="",r.BUTTON_SIZES[r.SIZE_WIDE]="",r.BUTTON_SIZES[r.SIZE_LARGE]="btn-lg",r.ICON_SPINNER="glyphicon glyphicon-asterisk",r.defaultOptions={type:r.TYPE_PRIMARY,size:r.SIZE_NORMAL,cssClass:"",title:null,message:null,nl2br:!0,closable:!0,closeByBackdrop:!0,closeByKeyboard:!0,spinicon:r.ICON_SPINNER,autodestroy:!0,draggable:!1,animate:!0,description:"",tabindex:-1},r.configDefaultOptions=function(t){r.defaultOptions=e.extend(!0,r.defaultOptions,t)},r.dialogs={},r.openAll=function(){e.each(r.dialogs,function(e,t){t.open()})},r.closeAll=function(){e.each(r.dialogs,function(e,t){t.close()})},r.getDialog=function(e){var t=null;return"undefined"!=typeof r.dialogs[e]&&(t=r.dialogs[e]),t},r.setDialog=function(e){return r.dialogs[e.getId()]=e,e},r.addDialog=function(e){return r.setDialog(e)},r.moveFocus=function(){var t=null;e.each(r.dialogs,function(e,n){t=n}),null!==t&&t.isRealized()&&t.getModal().focus()},r.METHODS_TO_OVERRIDE={},r.METHODS_TO_OVERRIDE["v3.1"]={handleModalBackdropEvent:function(){return this.getModal().on("click",{dialog:this},function(e){e.target===this&&e.data.dialog.isClosable()&&e.data.dialog.canCloseByBackdrop()&&e.data.dialog.close()}),this},updateZIndex:function(){var t=1040,n=1050,i=0;e.each(r.dialogs,function(e,t){i++});var s=this.getModal(),u=s.data("bs.modal").$backdrop;return s.css("z-index",n+20*(i-1)),u.css("z-index",t+20*(i-1)),this},open:function(){return!this.isRealized()&&this.realize(),this.getModal().modal("show"),this.updateZIndex(),this}},r.METHODS_TO_OVERRIDE["v3.2"]={handleModalBackdropEvent:r.METHODS_TO_OVERRIDE["v3.1"].handleModalBackdropEvent,updateZIndex:r.METHODS_TO_OVERRIDE["v3.1"].updateZIndex,open:r.METHODS_TO_OVERRIDE["v3.1"].open},r.METHODS_TO_OVERRIDE["v3.3"]={},r.METHODS_TO_OVERRIDE["v3.3.4"]=e.extend({},r.METHODS_TO_OVERRIDE["v3.1"]),r.prototype={constructor:r,initOptions:function(t){return this.options=e.extend(!0,this.defaultOptions,t),this},holdThisInstance:function(){return r.addDialog(this),this},initModalStuff:function(){return this.setModal(this.createModal()).setModalDialog(this.createModalDialog()).setModalContent(this.createModalContent()).setModalHeader(this.createModalHeader()).setModalBody(this.createModalBody()).setModalFooter(this.createModalFooter()),this.getModal().append(this.getModalDialog()),this.getModalDialog().append(this.getModalContent()),this.getModalContent().append(this.getModalHeader()).append(this.getModalBody()).append(this.getModalFooter()),this},createModal:function(){var t=e('<div class="modal" role="dialog" aria-hidden="true"></div>');return t.prop("id",this.getId()),t.attr("aria-labelledby",this.getId()+"_title"),t},getModal:function(){return this.$modal},setModal:function(e){return this.$modal=e,this},createModalDialog:function(){return e('<div class="modal-dialog"></div>')},getModalDialog:function(){return this.$modalDialog},setModalDialog:function(e){return this.$modalDialog=e,this},createModalContent:function(){return e('<div class="modal-content"></div>')},getModalContent:function(){return this.$modalContent},setModalContent:function(e){return this.$modalContent=e,this},createModalHeader:function(){return e('<div class="modal-header"></div>')},getModalHeader:function(){return this.$modalHeader},setModalHeader:function(e){return this.$modalHeader=e,this},createModalBody:function(){return e('<div class="modal-body"></div>')},getModalBody:function(){return this.$modalBody},setModalBody:function(e){return this.$modalBody=e,this},createModalFooter:function(){return e('<div class="modal-footer"></div>')},getModalFooter:function(){return this.$modalFooter},setModalFooter:function(e){return this.$modalFooter=e,this},createDynamicContent:function(e){var t=null;return t="function"==typeof e?e.call(e,this):e,"string"==typeof t&&(t=this.formatStringContent(t)),t},formatStringContent:function(e){return this.options.nl2br?e.replace(/\r\n/g,"<br />").replace(/[\r\n]/g,"<br />"):e},setData:function(e,t){return this.options.data[e]=t,this},getData:function(e){return this.options.data[e]},setId:function(e){return this.options.id=e,this},getId:function(){return this.options.id},getType:function(){return this.options.type},setType:function(e){return this.options.type=e,this.updateType(),this},updateType:function(){if(this.isRealized()){var e=[r.TYPE_DEFAULT,r.TYPE_INFO,r.TYPE_PRIMARY,r.TYPE_SUCCESS,r.TYPE_WARNING,r.TYPE_DANGER];this.getModal().removeClass(e.join(" ")).addClass(this.getType())}return this},getSize:function(){return this.options.size},setSize:function(e){return this.options.size=e,this.updateSize(),this},updateSize:function(){if(this.isRealized()){var t=this;this.getModal().removeClass(r.SIZE_NORMAL).removeClass(r.SIZE_SMALL).removeClass(r.SIZE_WIDE).removeClass(r.SIZE_LARGE),this.getModal().addClass(this.getSize()),this.getModalDialog().removeClass("modal-sm"),this.getSize()===r.SIZE_SMALL&&this.getModalDialog().addClass("modal-sm"),this.getModalDialog().removeClass("modal-lg"),this.getSize()===r.SIZE_WIDE&&this.getModalDialog().addClass("modal-lg"),e.each(this.options.buttons,function(n,r){var i=t.getButton(r.id),s=["btn-lg","btn-sm","btn-xs"],o=!1;if("string"==typeof r.cssClass){var u=r.cssClass.split(" ");e.each(u,function(t,n){-1!==e.inArray(n,s)&&(o=!0)})}o||(i.removeClass(s.join(" ")),i.addClass(t.getButtonSize()))})}return this},getCssClass:function(){return this.options.cssClass},setCssClass:function(e){return this.options.cssClass=e,this},getTitle:function(){return this.options.title},setTitle:function(e){return this.options.title=e,this.updateTitle(),this},updateTitle:function(){if(this.isRealized()){var e=null!==this.getTitle()?this.createDynamicContent(this.getTitle()):this.getDefaultText();this.getModalHeader().find("."+this.getNamespace("title")).html("").append(e).prop("id",this.getId()+"_title")}return this},getMessage:function(){return this.options.message},setMessage:function(e){return this.options.message=e,this.updateMessage(),this},updateMessage:function(){if(this.isRealized()){var e=this.createDynamicContent(this.getMessage());this.getModalBody().find("."+this.getNamespace("message")).html("").append(e)}return this},isClosable:function(){return this.options.closable},setClosable:function(e){return this.options.closable=e,this.updateClosable(),this},setCloseByBackdrop:function(e){return this.options.closeByBackdrop=e,this},canCloseByBackdrop:function(){return this.options.closeByBackdrop},setCloseByKeyboard:function(e){return this.options.closeByKeyboard=e,this},canCloseByKeyboard:function(){return this.options.closeByKeyboard},isAnimate:function(){return this.options.animate},setAnimate:function(e){return this.options.animate=e,this},updateAnimate:function(){return this.isRealized()&&this.getModal().toggleClass("fade",this.isAnimate()),this},getSpinicon:function(){return this.options.spinicon},setSpinicon:function(e){return this.options.spinicon=e,this},addButton:function(e){return this.options.buttons.push(e),this},addButtons:function(t){var n=this;return e.each(t,function(e,t){n.addButton(t)}),this},getButtons:function(){return this.options.buttons},setButtons:function(e){return this.options.buttons=e,this.updateButtons(),this},getButton:function(e){return"undefined"!=typeof this.indexedButtons[e]?this.indexedButtons[e]:null},getButtonSize:function(){return"undefined"!=typeof r.BUTTON_SIZES[this.getSize()]?r.BUTTON_SIZES[this.getSize()]:""},updateButtons:function(){return this.isRealized()&&(0===this.getButtons().length?this.getModalFooter().hide():this.getModalFooter().show().find("."+this.getNamespace("footer")).html("").append(this.createFooterButtons())),this},isAutodestroy:function(){return this.options.autodestroy},setAutodestroy:function(e){this.options.autodestroy=e},getDescription:function(){return this.options.description},setDescription:function(e){return this.options.description=e,this},setTabindex:function(e){return this.options.tabindex=e,this},getTabindex:function(){return this.options.tabindex},updateTabindex:function(){return this.isRealized()&&this.getModal().attr("tabindex",this.getTabindex()),this},getDefaultText:function(){return r.DEFAULT_TEXTS[this.getType()]},getNamespace:function(e){return r.NAMESPACE+"-"+e},createHeaderContent:function(){var t=e("<div></div>");return t.addClass(this.getNamespace("header")),t.append(this.createTitleContent()),t.prepend(this.createCloseButton()),t},createTitleContent:function(){var t=e("<div></div>");return t.addClass(this.getNamespace("title")),t},createCloseButton:function(){var t=e("<div></div>");t.addClass(this.getNamespace("close-button"));var n=e('<button class="close">&times;</button>');return t.append(n),t.on("click",{dialog:this},function(e){e.data.dialog.close()}),t},createBodyContent:function(){var t=e("<div></div>");return t.addClass(this.getNamespace("body")),t.append(this.createMessageContent()),t},createMessageContent:function(){var t=e("<div></div>");return t.addClass(this.getNamespace("message")),t},createFooterContent:function(){var t=e("<div></div>");return t.addClass(this.getNamespace("footer")),t},createFooterButtons:function(){var t=this,n=e("<div></div>");return n.addClass(this.getNamespace("footer-buttons")),this.indexedButtons={},e.each(this.options.buttons,function(e,i){i.id||(i.id=r.newGuid());var s=t.createButton(i);t.indexedButtons[i.id]=s,n.append(s)}),n},createButton:function(t){var n=e('<button class="btn"></button>');return n.prop("id",t.id),n.data("button",t),"undefined"!=typeof t.icon&&""!==e.trim(t.icon)&&n.append(this.createButtonIcon(t.icon)),"undefined"!=typeof t.label&&n.append(t.label),n.addClass("undefined"!=typeof t.cssClass&&""!==e.trim(t.cssClass)?t.cssClass:"btn-default"),"undefined"!=typeof t.hotkey&&(this.registeredButtonHotkeys[t.hotkey]=n),n.on("click",{dialog:this,$button:n,button:t},function(e){var t=e.data.dialog,n=e.data.$button,r=n.data("button");"function"==typeof r.action&&r.action.call(n,t,e),r.autospin&&n.toggleSpin(!0)}),this.enhanceButton(n),"undefined"!=typeof t.enabled&&n.toggleEnable(t.enabled),n},enhanceButton:function(e){return e.dialog=this,e.toggleEnable=function(e){var t=this;return"undefined"!=typeof e?t.prop("disabled",!e).toggleClass("disabled",!e):t.prop("disabled",!t.prop("disabled")),t},e.enable=function(){var e=this;return e.toggleEnable(!0),e},e.disable=function(){var e=this;return e.toggleEnable(!1),e},e.toggleSpin=function(t){var n=this,r=n.dialog,i=n.find("."+r.getNamespace("button-icon"));return"undefined"==typeof t&&(t=!(e.find(".icon-spin").length>0)),t?(i.hide(),e.prepend(r.createButtonIcon(r.getSpinicon()).addClass("icon-spin"))):(i.show(),e.find(".icon-spin").remove()),n},e.spin=function(){var e=this;return e.toggleSpin(!0),e},e.stopSpin=function(){var e=this;return e.toggleSpin(!1),e},this},createButtonIcon:function(t){var n=e("<span></span>");return n.addClass(this.getNamespace("button-icon")).addClass(t),n},enableButtons:function(t){return e.each(this.indexedButtons,function(e,n){n.toggleEnable(t)}),this},updateClosable:function(){return this.isRealized()&&this.getModalHeader().find("."+this.getNamespace("close-button")).toggle(this.isClosable()),this},onShow:function(e){return this.options.onshow=e,this},onShown:function(e){return this.options.onshown=e,this},onHide:function(e){return this.options.onhide=e,this},onHidden:function(e){return this.options.onhidden=e,this},isRealized:function(){return this.realized},setRealized:function(e){return this.realized=e,this},isOpened:function(){return this.opened},setOpened:function(e){return this.opened=e,this},handleModalEvents:function(){return this.getModal().on("show.bs.modal",{dialog:this},function(e){var t=e.data.dialog;if(t.setOpened(!0),t.isModalEvent(e)&&"function"==typeof t.options.onshow){var n=t.options.onshow(t);return n===!1&&t.setOpened(!1),n}}),this.getModal().on("shown.bs.modal",{dialog:this},function(e){var t=e.data.dialog;t.isModalEvent(e)&&"function"==typeof t.options.onshown&&t.options.onshown(t)}),this.getModal().on("hide.bs.modal",{dialog:this},function(e){var t=e.data.dialog;if(t.setOpened(!1),t.isModalEvent(e)&&"function"==typeof t.options.onhide){var n=t.options.onhide(t);return n===!1&&t.setOpened(!0),n}}),this.getModal().on("hidden.bs.modal",{dialog:this},function(t){var n=t.data.dialog;n.isModalEvent(t)&&"function"==typeof n.options.onhidden&&n.options.onhidden(n),n.isAutodestroy()&&(delete r.dialogs[n.getId()],e(this).remove()),r.moveFocus()}),this.handleModalBackdropEvent(),this.getModal().on("keyup",{dialog:this},function(e){27===e.which&&e.data.dialog.isClosable()&&e.data.dialog.canCloseByKeyboard()&&e.data.dialog.close()}),this.getModal().on("keyup",{dialog:this},function(t){var n=t.data.dialog;if("undefined"!=typeof n.registeredButtonHotkeys[t.which]){var r=e(n.registeredButtonHotkeys[t.which]);!r.prop("disabled")&&r.focus().trigger("click")}}),this},handleModalBackdropEvent:function(){return this.getModal().on("click",{dialog:this},function(t){e(t.target).hasClass("modal-backdrop")&&t.data.dialog.isClosable()&&t.data.dialog.canCloseByBackdrop()&&t.data.dialog.close()}),this},isModalEvent:function(e){return"undefined"!=typeof e.namespace&&"bs.modal"===e.namespace},makeModalDraggable:function(){return this.options.draggable&&(this.getModalHeader().addClass(this.getNamespace("draggable")).on("mousedown",{dialog:this},function(e){var t=e.data.dialog;t.draggableData.isMouseDown=!0;var n=t.getModalDialog().offset();t.draggableData.mouseOffset={top:e.clientY-n.top,left:e.clientX-n.left}}),this.getModal().on("mouseup mouseleave",{dialog:this},function(e){e.data.dialog.draggableData.isMouseDown=!1}),e("body").on("mousemove",{dialog:this},function(e){var t=e.data.dialog;t.draggableData.isMouseDown&&t.getModalDialog().offset({top:e.clientY-t.draggableData.mouseOffset.top,left:e.clientX-t.draggableData.mouseOffset.left})})),this},realize:function(){return this.initModalStuff(),this.getModal().addClass(r.NAMESPACE).addClass(this.getCssClass()),this.updateSize(),this.getDescription()&&this.getModal().attr("aria-describedby",this.getDescription()),this.getModalFooter().append(this.createFooterContent()),this.getModalHeader().append(this.createHeaderContent()),this.getModalBody().append(this.createBodyContent()),this.getModal().data("bs.modal",new n(this.getModal(),{backdrop:"static",keyboard:!1,show:!1})),this.makeModalDraggable(),this.handleModalEvents(),this.setRealized(!0),this.updateButtons(),this.updateType(),this.updateTitle(),this.updateMessage(),this.updateClosable(),this.updateAnimate(),this.updateSize(),this.updateTabindex(),this},open:function(){return!this.isRealized()&&this.realize(),this.getModal().modal("show"),this},close:function(){return!this.isRealized()&&this.realize(),this.getModal().modal("hide"),this}},r.prototype=e.extend(r.prototype,r.METHODS_TO_OVERRIDE[n.getModalVersion()]),r.newGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,n="x"===e?t:3&t|8;return n.toString(16)})},r.show=function(e){return(new r(e)).open()},r.alert=function(){var t={},n={type:r.TYPE_PRIMARY,title:null,message:null,closable:!1,draggable:!1,buttonLabel:r.DEFAULT_TEXTS.OK,callback:null};return t="object"==typeof arguments[0]&&arguments[0].constructor==={}.constructor?e.extend(!0,n,arguments[0]):e.extend(!0,n,{message:arguments[0],callback:"undefined"!=typeof arguments[1]?arguments[1]:null}),(new r({type:t.type,title:t.title,message:t.message,closable:t.closable,draggable:t.draggable,data:{callback:t.callback},onhide:function(e){!e.getData("btnClicked")&&e.isClosable()&&"function"==typeof e.getData("callback")&&e.getData("callback")(!1)},buttons:[{label:t.buttonLabel,action:function(e){e.setData("btnClicked",!0),"function"==typeof e.getData("callback")&&e.getData("callback")(!0),e.close()}}]})).open()},r.confirm=function(){var t={},n={type:r.TYPE_PRIMARY,title:null,message:null,closable:!1,draggable:!1,btnCancelLabel:r.DEFAULT_TEXTS.CANCEL,btnOKLabel:r.DEFAULT_TEXTS.OK,btnOKClass:null,callback:null};return t="object"==typeof arguments[0]&&arguments[0].constructor==={}.constructor?e.extend(!0,n,arguments[0]):e.extend(!0,n,{message:arguments[0],closable:!1,buttonLabel:r.DEFAULT_TEXTS.OK,callback:"undefined"!=typeof arguments[1]?arguments[1]:null}),null===t.btnOKClass&&(t.btnOKClass=["btn",t.type.split("-")[1]].join("-")),(new r({type:t.type,title:t.title,message:t.message,closable:t.closable,draggable:t.draggable,data:{callback:t.callback},buttons:[{label:t.btnCancelLabel,action:function(e){"function"==typeof e.getData("callback")&&e.getData("callback")(!1),e.close()}},{label:t.btnOKLabel,cssClass:t.btnOKClass,action:function(e){"function"==typeof e.getData("callback")&&e.getData("callback")(!0),e.close()}}]})).open()},r.warning=function(e,t){return(new r({type:r.TYPE_WARNING,message:e})).open()},r.danger=function(e,t){return(new r({type:r.TYPE_DANGER,message:e})).open()},r.success=function(e,t){return(new r({type:r.TYPE_SUCCESS,message:e})).open()},r}),!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.template=t():e.template=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=6)}([function(e,t,n){(function(t){e.exports=!1;try{e.exports="[object process]"===Object.prototype.toString.call(t.process)}catch(n){}}).call(t,n(4))},function(e,t,n){"use strict";var r=n(8),i=n(3),s=n(23),o=function(e,t){t.onerror(e,t);var n=function(){return"{Template Error}"};return n.mappings=[],n.sourcesContent=[],n},u=function a(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};"string"!=typeof e?t=e:t.source=e,t=i.$extend(t),e=t.source,!0===t.debug&&(t.cache=!1,t.minimize=!1,t.compileDebug=!0),t.compileDebug&&(t.minimize=!1),t.filename&&(t.filename=t.resolveFilename(t.filename,t));var n=t.filename,u=t.cache,f=t.caches;if(u&&n){var l=f.get(n);if(l)return l}if(!e)try{e=t.loader(n,t),t.source=e}catch(c){var h=new s({name:"CompileError",path:n,message:"template not found: "+c.message,stack:c.stack});if(t.bail)throw h;return o(h,t)}var p=void 0,d=new r(t);try{p=d.build()}catch(h){if(h=new s(h),t.bail)throw h;return o(h,t)}var v=function(e,n){try{return p(e,n)}catch(r){if(!t.compileDebug)return t.cache=!1,t.compileDebug=!0,a(t)(e,n);if(r=new s(r),t.bail)throw r;return o(r,t)()}};return v.mappings=p.mappings,v.sourcesContent=p.sourcesContent,v.toString=function(){return p.toString()},u&&n&&f.set(n,v),v};u.Compiler=r,e.exports=u},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=/((['"])(?:(?!\2|\\).|\\(?:\r\n|[\s\S]))*(\2)?|`(?:[^`\\$]|\\[\s\S]|\$(?!\{)|\$\{(?:[^{}]|\{[^}]*\}?)*\}?)*(`)?)|(\/\/.*)|(\/\*(?:[^*]|\*(?!\/))*(\*\/)?)|(\/(?!\*)(?:\[(?:(?![\]\\]).|\\.)*\]|(?![\/\]\\]).|\\.)+\/(?:(?!\s*(?:\b|[\u0080-\uFFFF$\\'"~({]|[+\-!](?!=)|\.?\d))|[gmiyu]{1,5}\b(?![\u0080-\uFFFF$\\]|\s*(?:[+\-*%&|^<>!=?({]|\/(?![\/*])))))|(0[xX][\da-fA-F]+|0[oO][0-7]+|0[bB][01]+|(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?)|((?!\d)(?:(?!\s)[$\w\u0080-\uFFFF]|\\u[\da-fA-F]{4}|\\u\{[\da-fA-F]+\})+)|(--|\+\+|&&|\|\||=>|\.{3}|(?:[+\-\/%&|^]|\*{1,2}|<{1,2}|>{1,3}|!=?|={1,2})=?|[?~.,:;[\](){}])|(\s+)|(^$|[\s\S])/g,t.matchToToken=function(e){var t={type:"invalid",value:e[0]};return e[1]?(t.type="string",t.closed=!!e[3]||!!e[4]):e[5]?t.type="comment":e[6]?(t.type="comment",t.closed=!!e[7]):e[8]?t.type="regex":e[9]?t.type="number":e[10]?t.type="name":e[11]?t.type="punctuator":e[12]&&(t.type="whitespace"),t}},function(e,t,n){"use strict";function r(){this.$extend=function(e){return e=e||{},o(e,e instanceof r?e:this)}}var i=n(0),s=n(12),o=n(13),u=n(14),a=n(15),f=n(16),l=n(17),c=n(18),h=n(19),p=n(20),d=n(22),v={source:null,filename:null,rules:[h,c],escape:!0,debug:!!i&&"production"!==process.env.NODE_ENV,bail:!0,cache:!0,minimize:!0,compileDebug:!1,resolveFilename:d,include:u,htmlMinifier:p,htmlMinifierOptions:{collapseWhitespace:!0,minifyCSS:!0,minifyJS:!0,ignoreCustomFragments:[]},onerror:a,loader:l,caches:f,root:"/",extname:".art",ignore:[],imports:s};r.prototype=v,e.exports=new r},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(r){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){},function(e,t,n){"use strict";var r=n(7),i=n(1),s=n(24),o=function(e,t){return t instanceof Object?r({filename:e},t):i({filename:e,source:t})};o.render=r,o.compile=i,o.defaults=s,e.exports=o},function(e,t,n){"use strict";var r=n(1),i=function(e,t,n){return r(e,n)(t)};e.exports=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=n(9),s=n(11),o="$data",u="$imports",a="print",f="include",l="extend",c="block",h="$$out",p="$$line",d="$$blocks",v="$$slice",m="$$from",g="$$options",y=function(e,t){return e.hasOwnProperty(t)},b=JSON.stringify,w=function(){function e(t){var n,i,y=this;r(this,e);var b=t.source,w=t.minimize,E=t.htmlMinifier;if(this.options=t,this.stacks=[],this.context=[],this.scripts=[],this.CONTEXT_MAP={},this.ignore=[o,u,g].concat(t.ignore),this.internal=(n={},n[h]="''",n[p]="[0,0]",n[d]="arguments[1]||{}",n[m]="null",n[a]="function(){var s=''.concat.apply('',arguments);"+h+"+=s;return s}",n[f]="function(src,data){var s="+g+".include(src,data||"+o+",arguments[2]||"+d+","+g+");"+h+"+=s;return s}",n[l]="function(from){"+m+"=from}",n[v]="function(c,p,s){p="+h+";"+h+"='';c();s="+h+";"+h+"=p+s;return s}",n[c]="function(){var a=arguments,s;if(typeof a[0]==='function'){return "+v+"(a[0])}else if("+m+"){"+d+"[a[0]]="+v+"(a[1])}else{s="+d+"[a[0]];if(typeof s==='string'){"+h+"+=s}else{s="+v+"(a[1])}return s}}",n),this.dependencies=(i={},i[a]=[h],i[f]=[h,g,o,d],i[l]=[m,f],i[c]=[v,m,h,d],i),this.importContext(h),t.compileDebug&&this.importContext(p),w)try{b=E(b,t)}catch(S){}this.source=b,this.getTplTokens(b,t.rules,this).forEach(function(e){e.type===s.TYPE_STRING?y.parseString(e):y.parseExpression(e)})}return e.prototype.getTplTokens=function(){return s.apply(undefined,arguments)},e.prototype.getEsTokens=function(e){return i(e)},e.prototype.getVariables=function(e){var t=!1;return e.filter(function(e){return"whitespace"!==e.type&&"comment"!==e.type}).filter(function(e){return"name"===e.type&&!t||(t="punctuator"===e.type&&"."===e.value,!1)}).map(function(e){return e.value})},e.prototype.importContext=function(e){var t=this,n="",r=this.internal,i=this.dependencies,s=this.ignore,a=this.context,f=this.options,l=f.imports,c=this.CONTEXT_MAP;y(c,e)||-1!==s.indexOf(e)||(y(r,e)?(n=r[e],y(i,e)&&i[e].forEach(function(e){return t.importContext(e)})):n="$escape"===e||"$each"===e||y(l,e)?u+"."+e:o+"."+e,c[e]=n,a.push({name:e,value:n}))},e.prototype.parseString=function(e){var t=e.value;if(t){var n=h+"+="+b(t);this.scripts.push({source:t,tplToken:e,code:n})}},e.prototype.parseExpression=function(e){var t=this,n=e.value,r=e.script,i=r.output,o=this.options.escape,u=r.code;i&&(u=!1===o||i===s.TYPE_RAW?h+"+="+r.code:h+"+=$escape("+r.code+")");var a=this.getEsTokens(u);this.getVariables(a).forEach(function(e){return t.importContext(e)}),this.scripts.push({source:n,tplToken:e,code:u})},e.prototype.checkExpression=function(e){for(var t=[[/^\s*}[\w\W]*?{?[\s;]*$/,""],[/(^[\w\W]*?\([\w\W]*?(?:=>|\([\w\W]*?\))\s*{[\s;]*$)/,"$1})"],[/(^[\w\W]*?\([\w\W]*?\)\s*{[\s;]*$)/,"$1}"]],n=0;n<t.length;){if(t[n][0].test(e)){var r;e=(r=e).replace.apply(r,t[n]);break}n++}try{return new Function(e),!0}catch(i){return!1}},e.prototype.build=function(){var e=this.options,t=this.context,n=this.scripts,r=this.stacks,i=this.source,a=e.filename,c=e.imports,v=[],w=y(this.CONTEXT_MAP,l),E=0,S=function(e,t){var n=t.line,i=t.start,s={generated:{line:r.length+E+1,column:1},original:{line:n+1,column:i+1}};return E+=e.split(/\n/).length-1,s},x=function(e){return e.replace(/^[\t ]+|[\t ]$/g,"")};r.push("function("+o+"){"),r.push("'use strict'"),r.push(o+"="+o+"||{}"),r.push("var "+t.map(function(e){return e.name+"="+e.value}).join(",")),e.compileDebug?(r.push("try{"),n.forEach(function(e){e.tplToken.type===s.TYPE_EXPRESSION&&r.push(p+"=["+[e.tplToken.line,e.tplToken.start].join(",")+"]"),v.push(S(e.code,e.tplToken)),r.push(x(e.code))}),r.push("}catch(error){"),r.push("throw {"+["name:'RuntimeError'","path:"+b(a),"message:error.message","line:"+p+"[0]+1","column:"+p+"[1]+1","source:"+b(i),"stack:error.stack"].join(",")+"}"),r.push("}")):n.forEach(function(e){v.push(S(e.code,e.tplToken)),r.push(x(e.code))}),w&&(r.push(h+"=''"),r.push(f+"("+m+","+o+","+d+")")),r.push("return "+h),r.push("}");var T=r.join("\n");try{var N=(new Function(u,g,"return "+T))(c,e);return N.mappings=v,N.sourcesContent=[i],N}catch(C){for(var k=0,L=0,A=0,O=void 0;k<n.length;){var M=n[k];if(!this.checkExpression(M.code)){L=M.tplToken.line,A=M.tplToken.start,O=M.code;break}k++}throw{name:"CompileError",path:a,message:C.message,line:L+1,column:A+1,source:i,generated:O,stack:C.stack}}},e}();w.CONSTS={DATA:o,IMPORTS:u,PRINT:a,INCLUDE:f,EXTEND:l,BLOCK:c,OPTIONS:g,OUT:h,LINE:p,BLOCKS:d,SLICE:v,FROM:m,ESCAPE:"$escape",EACH:"$each"},e.exports=w},function(e,t,n){"use strict";var r=n(10),i=n(2)["default"],s=n(2).matchToToken,o=function(e){return e.match(i).map(function(e){return i.lastIndex=0,s(i.exec(e))}).map(function(e){return"name"===e.type&&r(e.value)&&(e.type="keyword"),e})};e.exports=o},function(e,t,n){"use strict";var r={"abstract":!0,await:!0,"boolean":!0,"break":!0,"byte":!0,"case":!0,"catch":!0,"char":!0,"class":!0,"const":!0,"continue":!0,"debugger":!0,"default":!0,"delete":!0,"do":!0,"double":!0,"else":!0,"enum":!0,"export":!0,"extends":!0,"false":!0,"final":!0,"finally":!0,"float":!0,"for":!0,"function":!0,"goto":!0,"if":!0,"implements":!0,"import":!0,"in":!0,"instanceof":!0,"int":!0,"interface":!0,let:!0,"long":!0,"native":!0,"new":!0,"null":!0,"package":!0,"private":!0,"protected":!0,"public":!0,"return":!0,"short":!0,"static":!0,"super":!0,"switch":!0,"synchronized":!0,"this":!0,"throw":!0,"transient":!0,"true":!0,"try":!0,"typeof":!0,"var":!0,"void":!0,"volatile":!0,"while":!0,"with":!0,yield:!0};e.exports=function(e){return r.hasOwnProperty(e)}},function(e,t,n){"use strict";function r(e,t,n,r){var i=new String(e);return i.line=t,i.start=n,i.end=r,i}var i=function(e,t){for(var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{},i=[{type:"string",value:e,line:0,start:0,end:e.length}],s=0;s<t.length;s++)!function(e){for(var t=e.test.ignoreCase?"ig":"g",s=e.test.source+"|^$|[\\w\\W]",o=new RegExp(s,t),u=0;u<i.length;u++)if("string"===i[u].type){for(var a=i[u].line,f=i[u].start,l=i[u].end,c=i[u].value.match(o),h=[],p=0;p<c.length;p++){var d=c[p];e.test.lastIndex=0;var v=e.test.exec(d),m=v?"expression":"string",g=h[h.length-1],y=g||i[u],b=y.value;f=y.line===a?g?g.end:f:b.length-b.lastIndexOf("\n")-1,l=f+d.length;var w={type:m,value:d,line:a,start:f,end:l};if("string"===m)g&&"string"===g.type?(g.value+=d,g.end+=d.length):h.push(w);else{v[0]=new r(v[0],a,f,l);var E=e.use.apply(n,v);w.script=E,h.push(w)}a+=d.split(/\n/).length-1}i.splice.apply(i,[u,1].concat(h)),u+=h.length-1}}(t[s]);return i};i.TYPE_STRING="string",i.TYPE_EXPRESSION="expression",i.TYPE_RAW="raw",i.TYPE_ESCAPE="escape",e.exports=i},function(e,t,n){"use strict";(function(t){function r(e){return"string"!=typeof e&&(e=e===undefined||null===e?"":"function"==typeof e?r(e.call(e)):JSON.stringify(e)),e}function i(e){var t=""+e,n=u.exec(t);if(!n)return e;var r="",i=void 0,s=void 0,o=void 0;for(i=n.index,s=0;i<t.length;i++){switch(t.charCodeAt(i)){case 34:o="&#34;";break;case 38:o="&#38;";break;case 39:o="&#39;";break;case 60:o="&#60;";break;case 62:o="&#62;";break;default:continue}s!==i&&(r+=t.substring(s,i)),s=i+1,r+=o}return s!==i?r+t.substring(s,i):r}var s=n(0),o=Object.create(s?t:window),u=/["&'<>]/;o.$escape=function(e){return i(r(e))},o.$each=function(e,t){if(Array.isArray(e))for(var n=0,r=e.length;n<r;n++)t(e[n],n);else for(var i in e)t(e[i],i)},e.exports=o}).call(t,n(4))},function(e,t,n){"use strict";var r=Object.prototype.toString,i=function(e){return null===e?"Null":r.call(e).slice(8,-1)},s=function o(e,t){var n=void 0,r=i(e);if("Object"===r?n=Object.create(t||{}):"Array"===r&&(n=[].concat(t||[])),n){for(var s in e)e.hasOwnProperty(s)&&(n[s]=o(e[s],n[s]));return n}return e};e.exports=s},function(e,t,n){"use strict";var r=function(e,t,r,i){var s=n(1);return i=i.$extend({filename:i.resolveFilename(e,i),bail:!0,source:null}),s(i)(t,r)};e.exports=r},function(e,t,n){"use strict";var r=function(e){console.error(e.name,e.message)};e.exports=r},function(e,t,n){"use strict";var r={__data:Object.create(null),set:function(e,t){this.__data[e]=t},get:function(e){return this.__data[e]},reset:function(){this.__data={}}};e.exports=r},function(e,t,n){"use strict";var r=n(0),i=function(e){if(r)return n(5).readFileSync(e,"utf8");var t=document.getElementById(e);return t.value||t.innerHTML};e.exports=i},function(e,t,n){"use strict";var r={test:/{{([@#]?)[ \t]*(\/?)([\w\W]*?)[ \t]*}}/,use:function(e,t,n,i){var s=
this,o=s.options,u=s.getEsTokens(i),a=u.map(function(e){return e.value}),f={},l=void 0,c=!!t&&"raw",h=n+a.shift(),p=function(t,n){console.warn((o.filename||"anonymous")+":"+(e.line+1)+":"+(e.start+1)+"\nTemplate upgrade: {{"+t+"}} -> {{"+n+"}}")};switch("#"===t&&p("#value","@value"),h){case"set":i="var "+a.join("").trim();break;case"if":i="if("+a.join("").trim()+"){";break;case"else":var d=a.indexOf("if");~d?(a.splice(0,d+1),i="}else if("+a.join("").trim()+"){"):i="}else{";break;case"/if":i="}";break;case"each":l=r._split(u),l.shift(),"as"===l[1]&&(p("each object as value index","each object value index"),l.splice(1,1)),i="$each("+(l[0]||"$data")+",function("+(l[1]||"$value")+","+(l[2]||"$index")+"){";break;case"/each":i="})";break;case"block":l=r._split(u),l.shift(),i="block("+l.join(",").trim()+",function(){";break;case"/block":i="})";break;case"echo":h="print",p("echo value","value");case"print":case"include":case"extend":if(0!==a.join("").trim().indexOf("(")){l=r._split(u),l.shift(),i=h+"("+l.join(",")+")";break};default:if(~a.indexOf("|")){var v=u.reduce(function(e,t){var n=t.value,r=t.type;return"|"===n?e.push([]):"whitespace"!==r&&"comment"!==r&&(e.length||e.push([]),":"===n&&1===e[e.length-1].length?p("value | filter: argv","value | filter argv"):e[e.length-1].push(t)),e},[]).map(function(e){return r._split(e)});i=v.reduce(function(e,t){var n=t.shift();return t.unshift(e),"$imports."+n+"("+t.join(",")+")"},v.shift().join(" ").trim())}c=c||"escape"}return f.code=i,f.output=c,f},_split:function(e){e=e.filter(function(e){var t=e.type;return"whitespace"!==t&&"comment"!==t});for(var t=0,n=e.shift(),r=/\]|\)/,i=[[n]];t<e.length;){var s=e[t];"punctuator"===s.type||"punctuator"===n.type&&!r.test(n.value)?i[i.length-1].push(s):i.push([s]),n=s,t++}return i.map(function(e){return e.map(function(e){return e.value}).join("")})}};e.exports=r},function(e,t,n){"use strict";var r={test:/<%(#?)((?:==|=#|[=-])?)[ \t]*([\w\W]*?)[ \t]*(-?)%>/,use:function(e,t,n,r){return n={"-":"raw","=":"escape","":!1,"==":"raw","=#":"raw"}[n],t&&(r="/*"+r+"*/",n=!1),{code:r,output:n}}};e.exports=r},function(e,t,n){"use strict";var r=n(0),i=function(e,t){if(r){var i,s=n(21).minify,o=t.htmlMinifierOptions,u=t.rules.map(function(e){return e.test});(i=o.ignoreCustomFragments).push.apply(i,u),e=s(e,o)}return e};e.exports=i},function(e,t){!function(e){e.noop=function(){}}("object"==typeof e&&"object"==typeof e.exports?e.exports:window)},function(e,t,n){"use strict";var r=n(0),i=/^\.+\//,s=function(e,t){if(r){var s=n(5),o=t.root,u=t.extname;if(i.test(e)){var a=t.filename,f=!a||e===a,l=f?o:s.dirname(a);e=s.resolve(l,e)}else e=s.resolve(o,e);s.extname(e)||(e+=u)}return e};e.exports=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e){var t=e.name,n=e.source,r=e.path,i=e.line,s=e.column,o=e.generated,u=e.message;if(!n)return u;var a=n.split(/\n/),f=Math.max(i-3,0),l=Math.min(a.length,i+3),c=a.slice(f,l).map(function(e,t){var n=t+f+1;return(n===i?" >> ":"    ")+n+"| "+e}).join("\n");return(r||"anonymous")+":"+i+":"+s+"\n"+c+"\n\n"+t+": "+u+(o?"\n   generated: "+o:"")}var u=function(e){function t(n){r(this,t);var s=i(this,e.call(this,n.message));return s.name="TemplateError",s.message=o(n),Error.captureStackTrace&&Error.captureStackTrace(s,s.constructor),s}return s(t,e),t}(Error);e.exports=u},function(e,t,n){"use strict";e.exports=n(3)}])}),function(e,t){var n={},r=function(e,t){var n,r,i;if(typeof e=="string")return o(e);n=[];for(r=e.length,i=0;i<r;i++)n.push(o(e[i]));return t.apply(null,n)},i=function(e,t,n){arguments.length===2&&(n=t,t=null),r(t||[],function(){s(e,n,arguments)})},s=function(e,t,i){var s={exports:t},o;typeof t=="function"&&(i.length||(i=[r,s.exports,s]),o=t.apply(null,i),o!==undefined&&(s.exports=o)),n[e]=s.exports},o=function(t){var r=n[t]||e[t];if(!r)throw new Error("`"+t+"` is undefined");return r},u=function(e){var t,r,i,s,o,u;u=function(e){return e&&e.charAt(0).toUpperCase()+e.substr(1)};for(t in n){r=e;if(!n.hasOwnProperty(t))continue;i=t.split("/"),o=u(i.pop());while(s=u(i.shift()))r[s]=r[s]||{},r=r[s];r[o]=n[t]}return e},a=function(n){return e.__dollar=n,u(t(e,i,r))},f;typeof module=="object"&&typeof module.exports=="object"?module.exports=a():typeof define=="function"&&define.amd?define(["jquery"],a):(f=e.WebUploader,e.WebUploader=a(),e.WebUploader.noConflict=function(){e.WebUploader=f})}(window,function(e,t,n){return t("dollar-third",[],function(){var t=e.require,n=e.__dollar||e.jQuery||e.Zepto||t("jquery")||t("zepto");if(!n)throw new Error("jQuery or Zepto not found!");return n}),t("dollar",["dollar-third"],function(e){return e}),t("promise-third",["dollar"],function(e){return{Deferred:e.Deferred,when:e.when,isPromise:function(e){return e&&typeof e.then=="function"}}}),t("promise",["promise-third"],function(e){return e}),t("base",["dollar","promise"],function(t,n){function s(e){return function(){return i.apply(e,arguments)}}function o(e,t){return function(){return e.apply(t,arguments)}}function u(e){var t;return Object.create?Object.create(e):(t=function(){},t.prototype=e,new t)}var r=function(){},i=Function.call;return{version:"0.1.6",$:t,Deferred:n.Deferred,isPromise:n.isPromise,when:n.when,browser:function(e){var t={},n=e.match(/WebKit\/([\d.]+)/),r=e.match(/Chrome\/([\d.]+)/)||e.match(/CriOS\/([\d.]+)/),i=e.match(/MSIE\s([\d\.]+)/)||e.match(/(?:trident)(?:.*rv:([\w.]+))?/i),s=e.match(/Firefox\/([\d.]+)/),o=e.match(/Safari\/([\d.]+)/),u=e.match(/OPR\/([\d.]+)/);return n&&(t.webkit=parseFloat(n[1])),r&&(t.chrome=parseFloat(r[1])),i&&(t.ie=parseFloat(i[1])),s&&(t.firefox=parseFloat(s[1])),o&&(t.safari=parseFloat(o[1])),u&&(t.opera=parseFloat(u[1])),t}(navigator.userAgent),os:function(e){var t={},n=e.match(/(?:Android);?[\s\/]+([\d.]+)?/),r=e.match(/(?:iPad|iPod|iPhone).*OS\s([\d_]+)/);return n&&(t.android=parseFloat(n[1])),r&&(t.ios=parseFloat(r[1].replace(/_/g,"."))),t}(navigator.userAgent),inherits:function(e,n,r){var i;return typeof n=="function"?(i=n,n=null):n&&n.hasOwnProperty("constructor")?i=n.constructor:i=function(){return e.apply(this,arguments)},t.extend(!0,i,e,r||{}),i.__super__=e.prototype,i.prototype=u(e.prototype),n&&t.extend(!0,i.prototype,n),i},noop:r,bindFn:o,log:function(){return e.console?o(console.log,console):r}(),nextTick:function(){return function(e){setTimeout(e,1)}}(),slice:s([].slice),guid:function(){var e=0;return function(t){var n=(+(new Date)).toString(32),r=0;for(;r<5;r++)n+=Math.floor(Math.random()*65535).toString(32);return(t||"wu_")+n+(e++).toString(32)}}(),formatSize:function(e,t,n){var r;n=n||["B","K","M","G","TB"];while((r=n.shift())&&e>1024)e/=1024;return(r==="B"?e:e.toFixed(t||2))+r}}}),t("mediator",["base"],function(e){function s(e,n,r,i){return t.grep(e,function(e){return e&&(!n||e.e===n)&&(!r||e.cb===r||e.cb._cb===r)&&(!i||e.ctx===i)})}function o(e,n,i){t.each((e||"").split(r),function(e,t){i(t,n)})}function u(e,t){var n=!1,r=-1,i=e.length,s;while(++r<i){s=e[r];if(s.cb.apply(s.ctx2,t)===!1){n=!0;break}}return!n}var t=e.$,n=[].slice,r=/\s+/,i;return i={on:function(e,t,n){var r=this,i;return t?(i=this._events||(this._events=[]),o(e,t,function(e,t){var s={e:e};s.cb=t,s.ctx=n,s.ctx2=n||r,s.id=i.length,i.push(s)}),this):this},once:function(e,t,n){var r=this;return t?(o(e,t,function(e,t){var i=function(){return r.off(e,i),t.apply(n||r,arguments)};i._cb=t,r.on(e,i,n)}),r):r},off:function(e,n,r){var i=this._events;return i?!e&&!n&&!r?(this._events=[],this):(o(e,n,function(e,n){t.each(s(i,e,n,r),function(){delete i[this.id]})}),this):this},trigger:function(e){var t,r,i;return!this._events||!e?this:(t=n.call(arguments,1),r=s(this._events,e),i=s(this._events,"all"),u(r,t)&&u(i,arguments))}},t.extend({installTo:function(e){return t.extend(e,i)}},i)}),t("uploader",["base","mediator"],function(e,t){function r(e){this.options=n.extend(!0,{},r.options,e),this._init(this.options)}var n=e.$;return r.options={},t.installTo(r.prototype),n.each({upload:"start-upload",stop:"stop-upload",getFile:"get-file",getFiles:"get-files",addFile:"add-file",addFiles:"add-file",sort:"sort-files",removeFile:"remove-file",cancelFile:"cancel-file",skipFile:"skip-file",retry:"retry",isInProgress:"is-in-progress",makeThumb:"make-thumb",md5File:"md5-file",getDimension:"get-dimension",addButton:"add-btn",predictRuntimeType:"predict-runtime-type",refresh:"refresh",disable:"disable",enable:"enable",reset:"reset"},function(e,t){r.prototype[e]=function(){return this.request(t,arguments)}}),n.extend(r.prototype,{state:"pending",_init:function(e){var t=this;t.request("init",e,function(){t.state="ready",t.trigger("ready")})},option:function(e,t){var r=this.options;if(!(arguments.length>1))return e?r[e]:r;n.isPlainObject(t)&&n.isPlainObject(r[e])?n.extend(r[e],t):r[e]=t},getStats:function(){var e=this.request("get-stats");return e?{successNum:e.numOfSuccess,progressNum:e.numOfProgress,cancelNum:e.numOfCancel,invalidNum:e.numOfInvalid,uploadFailNum:e.numOfUploadFailed,queueNum:e.numOfQueue,interruptNum:e.numofInterrupt}:{}},trigger:function(e){var r=[].slice.call(arguments,1),i=this.options,s="on"+e.substring(0,1).toUpperCase()+e.substring(1);return t.trigger.apply(this,arguments)===!1||n.isFunction(i[s])&&i[s].apply(this,r)===!1||n.isFunction(this[s])&&this[s].apply(this,r)===!1||t.trigger.apply(t,[this,e].concat(r))===!1?!1:!0},destroy:function(){this.request("destroy",arguments),this.off()},request:e.noop}),e.create=r.create=function(e){return new r(e)},e.Uploader=r,r}),t("runtime/runtime",["base","mediator"],function(e,t){function s(t){this.options=n.extend({container:document.body},t),this.uid=e.guid("rt_")}var n=e.$,r={},i=function(e){for(var t in e)if(e.hasOwnProperty(t))return t;return null};return n.extend(s.prototype,{getContainer:function(){var e=this.options,t,r;return this._container?this._container:(t=n(e.container||document.body),r=n(document.createElement("div")),r.attr("id","rt_"+this.uid),r.css({position:"absolute",top:"0px",left:"0px",width:"1px",height:"1px",overflow:"hidden"}),t.append(r),t.addClass("webuploader-container"),this._container=r,this._parent=t,r)},init:e.noop,exec:e.noop,destroy:function(){this._container&&this._container.remove(),this._parent&&this._parent.removeClass("webuploader-container"),this.off()}}),s.orders="html5,flash",s.addRuntime=function(e,t){r[e]=t},s.hasRuntime=function(e){return e?!!r[e]:!!i(r)},s.create=function(e,t){var o,u;t=t||s.orders,n.each(t.split(/\s*,\s*/g),function(){if(r[this])return o=this,!1}),o=o||i(r);if(!o)throw new Error("Runtime Error");return u=new r[o](e),u},t.installTo(s.prototype),s}),t("runtime/client",["base","mediator","runtime/runtime"],function(e,t,n){function i(t,i){var s=e.Deferred(),o;this.uid=e.guid("client_"),this.runtimeReady=function(e){return s.done(e)},this.connectRuntime=function(t,u){if(o)throw new Error("already connected!");return s.done(u),typeof t=="string"&&r.get(t)&&(o=r.get(t)),o=o||r.get(null,i),o?(e.$.extend(o.options,t),o.__promise.then(s.resolve),o.__client++):(o=n.create(t,t.runtimeOrder),o.__promise=s.promise(),o.once("ready",s.resolve),o.init(),r.add(o),o.__client=1),i&&(o.__standalone=i),o},this.getRuntime=function(){return o},this.disconnectRuntime=function(){if(!o)return;o.__client--,o.__client<=0&&(r.remove(o),delete o.__promise,o.destroy()),o=null},this.exec=function(){if(!o)return;var n=e.slice(arguments);return t&&n.unshift(t),o.exec.apply(this,n)},this.getRuid=function(){return o&&o.uid},this.destroy=function(e){return function(){e&&e.apply(this,arguments),this.trigger("destroy"),this.off(),this.exec("destroy"),this.disconnectRuntime()}}(this.destroy)}var r;return r=function(){var e={};return{add:function(t){e[t.uid]=t},get:function(t,n){var r;if(t)return e[t];for(r in e){if(n&&e[r].__standalone)continue;return e[r]}return null},remove:function(t){delete e[t.uid]}}}(),t.installTo(i.prototype),i}),t("lib/dnd",["base","mediator","runtime/client"],function(e,t,n){function i(e){e=this.options=r.extend({},i.options,e),e.container=r(e.container);if(!e.container.length)return;n.call(this,"DragAndDrop")}var r=e.$;return i.options={accept:null,disableGlobalDnd:!1},e.inherits(n,{constructor:i,init:function(){var e=this;e.connectRuntime(e.options,function(){e.exec("init"),e.trigger("ready")})}}),t.installTo(i.prototype),i}),t("widgets/widget",["base","uploader"],function(e,t){function u(e){if(!e)return!1;var t=e.length,r=n.type(e);return e.nodeType===1&&t?!0:r==="array"||r!=="function"&&r!=="string"&&(t===0||typeof t=="number"&&t>0&&t-1 in e)}function a(e){this.owner=e,this.options=e.options}var n=e.$,r=t.prototype._init,i=t.prototype.destroy,s={},o=[];return n.extend(a.prototype,{init:e.noop,invoke:function(e,t){var r=this.responseMap;return!!r&&e in r&&r[e]in this&&!!n.isFunction(this[r[e]])?this[r[e]].apply(this,t):s},request:function(){return this.owner.request.apply(this.owner,arguments)}}),n.extend(t.prototype,{_init:function(){var e=this,t=e._widgets=[],i=e.options.disableWidgets||"";return n.each(o,function(n,r){(!i||!~i.indexOf(r._name))&&t.push(new r(e))}),r.apply(e,arguments)},request:function(t,n,r){var i=0,o=this._widgets,a=o&&o.length,f=[],l=[],c,h,p,d;n=u(n)?n:[n];for(;i<a;i++)c=o[i],h=c.invoke(t,n),h!==s&&(e.isPromise(h)?l.push(h):f.push(h));return r||l.length?(p=e.when.apply(e,l),d=p.pipe?"pipe":"then",p[d](function(){var t=e.Deferred(),n=arguments;return n.length===1&&(n=n[0]),setTimeout(function(){t.resolve(n)},1),t.promise()})[r?d:"done"](r||e.noop)):f[0]},destroy:function(){i.apply(this,arguments),this._widgets=null}}),t.register=a.register=function(t,r){var i={init:"init",destroy:"destroy",name:"anonymous"},s;return arguments.length===1?(r=t,n.each(r,function(e){if(e[0]==="_"||e==="name"){e==="name"&&(i.name=r.name);return}i[e.replace(/[A-Z]/g,"-$&").toLowerCase()]=e})):i=n.extend(i,t),r.responseMap=i,s=e.inherits(a,r),s._name=i.name,o.push(s),s},t.unRegister=a.unRegister=function(e){if(!e||e==="anonymous")return;for(var t=o.length;t--;)o[t]._name===e&&o.splice(t,1)},a}),t("widgets/filednd",["base","uploader","lib/dnd","widgets/widget"],function(e,t,n){var r=e.$;return t.options.dnd="",t.register({name:"dnd",init:function(t){if(!t.dnd||this.request("predict-runtime-type")!=="html5")return;var i=this,s=e.Deferred(),o=r.extend({},{disableGlobalDnd:t.disableGlobalDnd,container:t.dnd,accept:t.accept}),u;return this.dnd=u=new n(o),u.once("ready",s.resolve),u.on("drop",function(e){i.request("add-file",[e])}),u.on("accept",function(e){return i.owner.trigger("dndAccept",e)}),u.init(),s.promise()},destroy:function(){this.dnd&&this.dnd.destroy()}})}),t("lib/filepaste",["base","mediator","runtime/client"],function(e,t,n){function i(e){e=this.options=r.extend({},e),e.container=r(e.container||document.body),n.call(this,"FilePaste")}var r=e.$;return e.inherits(n,{constructor:i,init:function(){var e=this;e.connectRuntime(e.options,function(){e.exec("init"),e.trigger("ready")})}}),t.installTo(i.prototype),i}),t("widgets/filepaste",["base","uploader","lib/filepaste","widgets/widget"],function(e,t,n){var r=e.$;return t.register({name:"paste",init:function(t){if(!t.paste||this.request("predict-runtime-type")!=="html5")return;var i=this,s=e.Deferred(),o=r.extend({},{container:t.paste,accept:t.accept}),u;return this.paste=u=new n(o),u.once("ready",s.resolve),u.on("paste",function(e){i.owner.request("add-file",[e])}),u.init(),s.promise()},destroy:function(){this.paste&&this.paste.destroy()}})}),t("lib/blob",["base","runtime/client"],function(e,t){function n(e,n){var r=this;r.source=n,r.ruid=e,this.size=n.size||0,!n.type&&this.ext&&~"jpg,jpeg,png,gif,bmp".indexOf(this.ext)?this.type="image/"+(this.ext==="jpg"?"jpeg":this.ext):this.type=n.type||"application/octet-stream",t.call(r,"Blob"),this.uid=n.uid||this.uid,e&&r.connectRuntime(e)}return e.inherits(t,{constructor:n,slice:function(e,t){return this.exec("slice",e,t)},getSource:function(){return this.source}}),n}),t("lib/file",["base","lib/blob"],function(e,t){function i(e,i){var s;this.name=i.name||"untitled"+n++,s=r.exec(i.name)?RegExp.$1.toLowerCase():"",!s&&i.type&&(s=/\/(jpg|jpeg|png|gif|bmp)$/i.exec(i.type)?RegExp.$1.toLowerCase():"",this.name+="."+s),this.ext=s,this.lastModifiedDate=i.lastModifiedDate||(new Date).toLocaleString(),t.apply(this,arguments)}var n=1,r=/\.([^.]+)$/;return e.inherits(t,i)}),t("lib/filepicker",["base","runtime/client","lib/file"],function(t,n,r){function s(e){e=this.options=i.extend({},s.options,e),e.container=i(e.id);if(!e.container.length)throw new Error("\u6309\u94ae\u6307\u5b9a\u9519\u8bef");e.innerHTML=e.innerHTML||e.label||e.container.html()||"",e.button=i(e.button||document.createElement("div")),e.button.html(e.innerHTML),e.container.html(e.button),n.call(this,"FilePicker",!0)}var i=t.$;return s.options={button:null,container:null,label:null,innerHTML:null,multiple:!0,accept:null,name:"file",style:"webuploader-pick"},t.inherits(n,{constructor:s,init:function(){var n=this,s=n.options,o=s.button,u=s.style;u&&o.addClass("webuploader-pick"),n.on("all",function(e){var t;switch(e){case"mouseenter":u&&o.addClass("webuploader-pick-hover");break;case"mouseleave":u&&o.removeClass("webuploader-pick-hover");break;case"change":t=n.exec("getFiles"),n.trigger("select",i.map(t,function(e){return e=new r(n.getRuid(),e),e._refer=s.container,e}),s.container)}}),n.connectRuntime(s,function(){n.refresh(),n.exec("init",s),n.trigger("ready")}),this._resizeHandler=t.bindFn(this.refresh,this),i(e).on("resize",this._resizeHandler)},refresh:function(){var e=this.getRuntime().getContainer(),t=this.options.button,n=t.outerWidth?t.outerWidth():t.width(),r=t.outerHeight?t.outerHeight():t.height(),i=t.offset();n&&r&&e.css({bottom:"auto",right:"auto",width:n+"px",height:r+"px"}).offset(i)},enable:function(){var e=this.options.button;e.removeClass("webuploader-pick-disable"),this.refresh()},disable:function(){var e=this.options.button;this.getRuntime().getContainer().css({top:"-99999px"}),e.addClass("webuploader-pick-disable")},destroy:function(){var t=this.options.button;i(e).off("resize",this._resizeHandler),t.removeClass("webuploader-pick-disable webuploader-pick-hover webuploader-pick")}}),s}),t("widgets/filepicker",["base","uploader","lib/filepicker","widgets/widget"],function(e,t,n){var r=e.$;return r.extend(t.options,{pick:null,accept:null}),t.register({name:"picker",init:function(e){return this.pickers=[],e.pick&&this.addBtn(e.pick)},refresh:function(){r.each(this.pickers,function(){this.refresh()})},addBtn:function(t){var i=this,s=i.options,o=s.accept,u=[];if(!t)return;return r.isPlainObject(t)||(t={id:t}),r(t.id).each(function(){var a,f,l;l=e.Deferred(),a=r.extend({},t,{accept:r.isPlainObject(o)?[o]:o,swf:s.swf,runtimeOrder:s.runtimeOrder,id:this}),f=new n(a),f.once("ready",l.resolve),f.on("select",function(e){i.owner.request("add-file",[e])}),f.on("dialogopen",function(){i.owner.trigger("dialogOpen",f.button)}),f.init(),i.pickers.push(f),u.push(l.promise())}),e.when.apply(e,u)},disable:function(){r.each(this.pickers,function(){this.disable()})},enable:function(){r.each(this.pickers,function(){this.enable()})},destroy:function(){r.each(this.pickers,function(){this.destroy()}),this.pickers=null}})}),t("lib/image",["base","runtime/client","lib/blob"],function(e,t,n){function i(e){this.options=r.extend({},i.options,e),t.call(this,"Image"),this.on("load",function(){this._info=this.exec("info"),this._meta=this.exec("meta")})}var r=e.$;return i.options={quality:90,crop:!1,preserveHeaders:!1,allowMagnify:!1},e.inherits(t,{constructor:i,info:function(e){return e?(this._info=e,this):this._info},meta:function(e){return e?(this._meta=e,this):this._meta},loadFromBlob:function(e){var t=this,n=e.getRuid();this.connectRuntime(n,function(){t.exec("init",t.options),t.exec("loadFromBlob",e)})},resize:function(){var t=e.slice(arguments);return this.exec.apply(this,["resize"].concat(t))},crop:function(){var t=e.slice(arguments);return this.exec.apply(this,["crop"].concat(t))},getAsDataUrl:function(e){return this.exec("getAsDataUrl",e)},getAsBlob:function(e){var t=this.exec("getAsBlob",e);return new n(this.getRuid(),t)}}),i}),t("widgets/image",["base","uploader","lib/image","widgets/widget"],function(e,t,n){var r=e.$,i;return i=function(e){var t=0,n=[],r=function(){var r;while(n.length&&t<e)r=n.shift(),t+=r[0],r[1]()};return function(e,i,s){n.push([i,s]),e.once("destroy",function(){t-=i,setTimeout(r,1)}),setTimeout(r,1)}}(5242880),r.extend(t.options,{thumb:{width:110,height:110,quality:70,allowMagnify:!0,crop:!0,preserveHeaders:!1,type:"image/jpeg"},compress:{width:1600,height:1600,quality:90,allowMagnify:!1,crop:!1,preserveHeaders:!0}}),t.register({name:"image",makeThumb:function(e,t,s,o){var u,a;e=this.request("get-file",e);if(!e.type.match(/^image/)){t(!0);return}u=r.extend({},this.options.thumb),r.isPlainObject(s)&&(u=r.extend(u,s),s=null),s=s||u.width,o=o||u.height,a=new n(u),a.once("load",function(){e._info=e._info||a.info(),e._meta=e._meta||a.meta(),s<=1&&s>0&&(s=e._info.width*s),o<=1&&o>0&&(o=e._info.height*o),a.resize(s,o)}),a.once("complete",function(){t(!1,a.getAsDataUrl(u.type)),a.destroy()}),a.once("error",function(e){t(e||!0),a.destroy()}),i(a,e.source.size,function(){e._info&&a.info(e._info),e._meta&&a.meta(e._meta),a.loadFromBlob(e.source)})},beforeSendFile:function(t){return;var i,s,o,u,a}})}),t("file",["base","mediator"],function(e,t){function u(){return r+i++}function a(e){this.name=e.name||"Untitled",this.size=e.size||0,this.type=e.type||"application/octet-stream",this.lastModifiedDate=e.lastModifiedDate||new Date*1,this.id=u(),this.ext=s.exec(this.name)?RegExp.$1:"",this.statusText="",o[this.id]=a.Status.INITED,this.source=e,this.loaded=0,this.on("error",function(e){this.setStatus(a.Status.ERROR,e)})}var n=e.$,r="WU_FILE_",i=0,s=/\.([^.]+)$/,o={};return n.extend(a.prototype,{setStatus:function(e,t){var n=o[this.id];typeof t!="undefined"&&(this.statusText=t),e!==n&&(o[this.id]=e,this.trigger("statuschange",e,n))},getStatus:function(){return o[this.id]},getSource:function(){return this.source},destroy:function(){this.off(),delete o[this.id]}}),t.installTo(a.prototype),a.Status={INITED:"inited",QUEUED:"queued",PROGRESS:"progress",ERROR:"error",COMPLETE:"complete",CANCELLED:"cancelled",INTERRUPT:"interrupt",INVALID:"invalid"},a}),t("queue",["base","mediator","file"],function(e,t,n){function s(){this.stats={numOfQueue:0,numOfSuccess:0,numOfCancel:0,numOfProgress:0,numOfUploadFailed:0,numOfInvalid:0,numofDeleted:0,numofInterrupt:0},this._queue=[],this._map={}}var r=e.$,i=n.Status;return r.extend(s.prototype,{append:function(e){return this._queue.push(e),this._fileAdded(e),this},prepend:function(e){return this._queue.unshift(e),this._fileAdded(e),this},getFile:function(e){return typeof e!="string"?e:this._map[e]},fetch:function(e){var t=this._queue.length,n,r;e=e||i.QUEUED;for(n=0;n<t;n++){r=this._queue[n];if(e===r.getStatus())return r}return null},sort:function(e){typeof e=="function"&&this._queue.sort(e)},getFiles:function(){var e=[].slice.call(arguments,0),t=[],n=0,i=this._queue.length,s;for(;n<i;n++){s=this._queue[n];if(e.length&&!~r.inArray(s.getStatus(),e))continue;t.push(s)}return t},removeFile:function(e){var t=this,n=this._map[e.id];n&&(delete this._map[e.id],e.destroy(),this.stats.numofDeleted++)},_fileAdded:function(e){var t=this,n=this._map[e.id];n||(this._map[e.id]=e,e.on("statuschange",function(e,n){t._onFileStatusChange(e,n)}))},_onFileStatusChange:function(e,t){var n=this.stats;switch(t){case i.PROGRESS:n.numOfProgress--;break;case i.QUEUED:n.numOfQueue--;break;case i.ERROR:n.numOfUploadFailed--;break;case i.INVALID:n.numOfInvalid--;break;case i.INTERRUPT:n.numofInterrupt--}switch(e){case i.QUEUED:n.numOfQueue++;break;case i.PROGRESS:n.numOfProgress++;break;case i.ERROR:n.numOfUploadFailed++;break;case i.COMPLETE:n.numOfSuccess++;break;case i.CANCELLED:n.numOfCancel++;break;case i.INVALID:n.numOfInvalid++;break;case i.INTERRUPT:n.numofInterrupt++}}}),t.installTo(s.prototype),s}),t("widgets/queue",["base","uploader","queue","file","lib/file","runtime/client","widgets/widget"],function(e,t,n,r,i,s){var o=e.$,u=/\.\w+$/,a=r.Status;return t.register({name:"queue",init:function(t){var r=this,i,u,a,f,l,c,h;o.isPlainObject(t.accept)&&(t.accept=[t.accept]);if(t.accept){l=[];for(a=0,u=t.accept.length;a<u;a++)f=t.accept[a].extensions,f&&l.push(f);l.length&&(c="\\."+l.join(",").replace(/,/g,"$|\\.").replace(/\*/g,".*")+"$"),r.accept=new RegExp(c,"i")}r.queue=new n,r.stats=r.queue.stats;if(this.request("predict-runtime-type")!=="html5")return;return i=e.Deferred(),this.placeholder=h=new s("Placeholder"),h.connectRuntime({runtimeOrder:"html5"},function(){r._ruid=h.getRuid(),i.resolve()}),i.promise()},_wrapFile:function(e){if(!(e instanceof r)){if(!(e instanceof i)){if(!this._ruid)throw new Error("Can't add external files.");e=new i(this._ruid,e)}e=new r(e)}return e},acceptFile:function(e){var t=!e||!e.size||this.accept&&u.exec(e.name)&&!this.accept.test(e.name);return!t},_addFile:function(e){var t=this;e=t._wrapFile(e);if(!t.owner.trigger("beforeFileQueued",e))return;if(!t.acceptFile(e)){t.owner.trigger("error","Q_TYPE_DENIED",e);return}return t.queue.append(e),t.owner.trigger("fileQueued",e),e},getFile:function(e){return this.queue.getFile(e)},addFile:function(e){var t=this;e.length||(e=[e]),e=o.map(e,function(e){return t._addFile(e)}),e.length&&(t.owner.trigger("filesQueued",e),t.options.auto&&setTimeout(function(){t.request("start-upload")},20))},getStats:function(){return this.stats},removeFile:function(e,t){var n=this;e=e.id?e:n.queue.getFile(e),this.request("cancel-file",e),t&&this.queue.removeFile(e)},getFiles:function(){return this.queue.getFiles.apply(this.queue,arguments)},fetchFile:function(){return this.queue.fetch.apply(this.queue,arguments)},retry:function(e,t){var n=this,r,i,s;if(e){e=e.id?e:n.queue.getFile(e),e.setStatus(a.QUEUED),t||n.request("start-upload");return}r=n.queue.getFiles(a.ERROR),i=0,s=r.length;for(;i<s;i++)e=r[i],e.setStatus(a.QUEUED);n.request("start-upload")},sortFiles:function(){return this.queue.sort.apply(this.queue,arguments)},reset:function(){this.owner.trigger("reset"),this.queue=new n,this.stats=this.queue.stats},destroy:function(){this.reset(),this.placeholder&&this.placeholder.destroy()}})}),t("widgets/runtime",["uploader","runtime/runtime","widgets/widget"],function(e,t){return e.support=function(){return t.hasRuntime.apply(t,arguments)},e.register({name:"runtime",init:function(){if(!this.predictRuntimeType())throw Error("Runtime Error")},predictRuntimeType:function(){var e=this.options.runtimeOrder||t.orders,n=this.type,r,i;if(!n){e=e.split(/\s*,\s*/g);for(r=0,i=e.length;r<i;r++)if(t.hasRuntime(e[r])){this.type=n=e[r];break}}return n}})}),t("lib/transport",["base","runtime/client","mediator"],function(e,t,n){function i(e){var n=this;e=n.options=r.extend(!0,{},i.options,e||{}),t.call(this,"Transport"),this._blob=null,this._formData=e.formData||{},this._headers=e.headers||{},this.on("progress",this._timeout),this.on("load error",function(){n.trigger("progress",1),clearTimeout(n._timer)})}var r=e.$;return i.options={server:"",method:"POST",withCredentials:!0,fileVal:"file",timeout:12e4,formData:{},headers:{},sendAsBinary:!1},r.extend(i.prototype,{appendBlob:function(e,t,n){var r=this,i=r.options;r.getRuid()&&r.disconnectRuntime(),r.connectRuntime(t.ruid,function(){r.exec("init")}),r._blob=t,i.fileVal=e||i.fileVal,i.filename=n||i.filename},append:function(e,t){typeof e=="object"?r.extend(this._formData,e):this._formData[e]=t},setRequestHeader:function(e,t){typeof e=="object"?r.extend(this._headers,e):this._headers[e]=t},send:function(e){this.exec("send",e),this._timeout()},abort:function(){return clearTimeout(this._timer),this.exec("abort")},destroy:function(){this.trigger("destroy"),this.off(),this.exec("destroy"),this.disconnectRuntime()},getResponse:function(){return this.exec("getResponse")},getResponseAsJson:function(){return this.exec("getResponseAsJson")},getStatus:function(){return this.exec("getStatus")},_timeout:function(){var e=this,t=e.options.timeout;if(!t)return;clearTimeout(e._timer),e._timer=setTimeout(function(){e.abort(),e.trigger("error","timeout")},t)}}),n.installTo(i.prototype),i}),t("widgets/upload",["base","uploader","file","lib/transport","widgets/widget"],function(e,t,n,r){function u(e,t){var n=[],r=e.source,i=r.size,s=t?Math.ceil(i/t):1,o=0,u=0,a,f;f={file:e,has:function(){return!!n.length},shift:function(){return n.shift()},unshift:function(e){n.unshift(e)}};while(u<s)a=Math.min(t,i-o),n.push({file:e,start:o,end:t?o+a:i,total:i,chunks:s,chunk:u++,cuted:f}),o+=a;return e.blocks=n.concat(),e.remaning=n.length,f}var i=e.$,s=e.isPromise,o=n.Status;i.extend(t.options,{prepareNextFile:!1,chunked:!1,chunkSize:5242880,chunkRetry:2,threads:1,formData:{}}),t.register({name:"upload",init:function(){var t=this.owner,n=this;this.runing=!1,this.progress=!1,t.on("startUpload",function(){n.progress=!0}).on("uploadFinished",function(){n.progress=!1}),this.pool=[],this.stack=[],this.pending=[],this.remaning=0,this.__tick=e.bindFn(this._tick,this),t.on("uploadComplete",function(e){e.blocks&&i.each(e.blocks,function(e,t){t.transport&&(t.transport.abort(),t.transport.destroy()),delete t.transport}),delete e.blocks,delete e.remaning})},reset:function(){this.request("stop-upload",!0),this.runing=!1,this.pool=[],this.stack=[],this.pending=[],this.remaning=0,this._trigged=!1,this._promise=null},startUpload:function(t){var n=this;i.each(n.request("get-files",o.INVALID),function(){n.request("remove-file",this)}),t?(t=t.id?t:n.request("get-file",t),t.getStatus()===o.INTERRUPT?(t.setStatus(o.QUEUED),i.each(n.pool,function(e,n){if(n.file!==t)return;n.transport&&n.transport.send(),t.setStatus(o.PROGRESS)})):t.getStatus()!==o.PROGRESS&&t.setStatus(o.QUEUED)):i.each(n.request("get-files",[o.INITED]),function(){this.setStatus(o.QUEUED)});if(n.runing)return e.nextTick(n.__tick);n.runing=!0;var r=[];t||i.each(n.pool,function(e,t){var i=t.file;i.getStatus()===o.INTERRUPT&&(n._trigged=!1,r.push(i),t.transport&&t.transport.send())}),i.each(r,function(){this.setStatus(o.PROGRESS)}),t||i.each(n.request("get-files",o.INTERRUPT),function(){this.setStatus(o.PROGRESS)}),n._trigged=!1,e.nextTick(n.__tick),n.owner.trigger("startUpload")},stopUpload:function(t,n){var r=this,s;t===!0&&(n=t,t=null);if(r.runing===!1)return;if(t){t=t.id?t:r.request("get-file",t);if(t.getStatus()!==o.PROGRESS&&t.getStatus()!==o.QUEUED)return;return t.setStatus(o.INTERRUPT),i.each(r.pool,function(e,n){if(n.file===t)return s=n,!1}),s.transport&&s.transport.abort(),n&&(r._putback(s),r._popBlock(s)),e.nextTick(r.__tick)}r.runing=!1,this._promise&&this._promise.file&&this._promise.file.setStatus(o.INTERRUPT),n&&i.each(r.pool,function(e,t){t.transport&&t.transport.abort(),t.file.setStatus(o.INTERRUPT)}),r.owner.trigger("stopUpload")},cancelFile:function(e){e=e.id?e:this.request("get-file",e),e.blocks&&i.each(e.blocks,function(e,t){var n=t.transport;n&&(n.abort(),n.destroy(),delete t.transport)}),e.setStatus(o.CANCELLED),this.owner.trigger("fileDequeued",e)},isInProgress:function(){return!!this.progress},_getStats:function(){return this.request("get-stats")},skipFile:function(e,t){e=e.id?e:this.request("get-file",e),e.setStatus(t||o.COMPLETE),e.skipped=!0,e.blocks&&i.each(e.blocks,function(e,t){var n=t.transport;n&&(n.abort(),n.destroy(),delete t.transport)}),this.owner.trigger("uploadSkip",e)},_tick:function(){var t=this,n=t.options,r,i;if(t._promise)return t._promise.always(t.__tick);t.pool.length<n.threads&&(i=t._nextBlock())?(t._trigged=!1,r=function(n){t._promise=null,n&&n.file&&t._startSend(n),e.nextTick(t.__tick)},t._promise=s(i)?i.always(r):r(i)):!t.remaning&&!t._getStats().numOfQueue&&!t._getStats().numofInterrupt&&(t.runing=!1,t._trigged||e.nextTick(function(){t.owner.trigger("uploadFinished")}),t._trigged=!0)},_putback:function(e){var t;e.cuted.unshift(e),t=this.stack.indexOf(e.cuted),~t||this.stack.unshift(e.cuted)},_getStack:function(){var e=0,t;while(t=this.stack[e++]){if(t.has()&&t.file.getStatus()===o.PROGRESS)return t;(!t.has()||t.file.getStatus()!==o.PROGRESS&&t.file.getStatus()!==o.INTERRUPT)&&this.stack.splice(--e,1)}return null},_nextBlock:function(){var e=this,t=e.options,n,r,i,o;if(n=this._getStack())return t.prepareNextFile&&!
e.pending.length&&e._prepareNextFile(),n.shift();if(e.runing)return!e.pending.length&&e._getStats().numOfQueue&&e._prepareNextFile(),r=e.pending.shift(),i=function(r){return r?(n=u(r,t.chunked?t.chunkSize:0),e.stack.push(n),n.shift()):null},s(r)?(o=r.file,r=r[r.pipe?"pipe":"then"](i),r.file=o,r):i(r)},_prepareNextFile:function(){var e=this,t=e.request("fetch-file"),n=e.pending,r;t&&(r=e.request("before-send-file",t,function(){return t.getStatus()===o.PROGRESS||t.getStatus()===o.INTERRUPT?t:e._finishFile(t)}),e.owner.trigger("uploadStart",t),t.setStatus(o.PROGRESS),r.file=t,r.done(function(){var e=i.inArray(r,n);~e&&n.splice(e,1,t)}),r.fail(function(n){t.setStatus(o.ERROR,n),e.owner.trigger("uploadError",t,n),e.owner.trigger("uploadComplete",t)}),n.push(r))},_popBlock:function(e){var t=i.inArray(e,this.pool);this.pool.splice(t,1),e.file.remaning--,this.remaning--},_startSend:function(t){var n=this,r=t.file,i;if(r.getStatus()!==o.PROGRESS){r.getStatus()===o.INTERRUPT&&n._putback(t);return}n.pool.push(t),n.remaning++,t.blob=t.chunks===1?r.source:r.source.slice(t.start,t.end),i=n.request("before-send",t,function(){r.getStatus()===o.PROGRESS?n._doSend(t):(n._popBlock(t),e.nextTick(n.__tick))}),i.fail(function(){r.remaning===1?n._finishFile(r).always(function(){t.percentage=1,n._popBlock(t),n.owner.trigger("uploadComplete",r),e.nextTick(n.__tick)}):(t.percentage=1,n.updateFileProgress(r),n._popBlock(t),e.nextTick(n.__tick))})},_doSend:function(t){var n=this,s=n.owner,u=n.options,a=t.file,f=new r(u),l=i.extend({},u.formData),c=i.extend({},u.headers),h,p;t.transport=f,f.on("destroy",function(){delete t.transport,n._popBlock(t),e.nextTick(n.__tick)}),f.on("progress",function(e){t.percentage=e,n.updateFileProgress(a)}),h=function(e){var n;return p=f.getResponseAsJson()||{},p._raw=f.getResponse(),n=function(t){e=t},s.trigger("uploadAccept",t,p,n)||(e=e||"server"),e},f.on("error",function(e,n){t.retried=t.retried||0,t.chunks>1&&~"http,abort".indexOf(e)&&t.retried<u.chunkRetry?(t.retried++,f.send()):(!n&&e==="server"&&(e=h(e)),a.setStatus(o.ERROR,e),s.trigger("uploadError",a,e),s.trigger("uploadComplete",a))}),f.on("load",function(){var e;if(e=h()){f.trigger("error",e,!0);return}a.remaning===1?n._finishFile(a,p):f.destroy()}),l=i.extend(l,{id:a.id,name:a.name,type:a.type,lastModifiedDate:a.lastModifiedDate,size:a.size}),t.chunks>1&&i.extend(l,{chunks:t.chunks,chunk:t.chunk}),s.trigger("uploadBeforeSend",t,l,c),f.appendBlob(u.fileVal,t.blob,a.name),f.append(l),f.setRequestHeader(c),f.send()},_finishFile:function(e,t,n){var r=this.owner;return r.request("after-send-file",arguments,function(){e.setStatus(o.COMPLETE),r.trigger("uploadSuccess",e,t,n)}).fail(function(t){e.getStatus()===o.PROGRESS&&e.setStatus(o.ERROR,t),r.trigger("uploadError",e,t)}).always(function(){r.trigger("uploadComplete",e)})},updateFileProgress:function(e){var t=0,n=0;if(!e.blocks)return;i.each(e.blocks,function(e,t){n+=(t.percentage||0)*(t.end-t.start)}),t=n/e.size,this.owner.trigger("uploadProgress",e,t||0)}})}),t("widgets/validator",["base","uploader","file","widgets/widget"],function(e,t,n){var r=e.$,i={},s;return s={addValidator:function(e,t){i[e]=t},removeValidator:function(e){delete i[e]}},t.register({name:"validator",init:function(){var t=this;e.nextTick(function(){r.each(i,function(){this.call(t.owner)})})}}),s.addValidator("fileNumLimit",function(){var e=this,t=e.options,n=0,r=parseInt(t.fileNumLimit,10),i=!0;if(!r)return;e.on("beforeFileQueued",function(e){return n>=r&&i&&(i=!1,this.trigger("error","Q_EXCEED_NUM_LIMIT",r,e),setTimeout(function(){i=!0},1)),n>=r?!1:!0}),e.on("fileQueued",function(){n++}),e.on("fileDequeued",function(){n--}),e.on("reset",function(){n=0})}),s.addValidator("fileSizeLimit",function(){var e=this,t=e.options,n=0,r=parseInt(t.fileSizeLimit,10),i=!0;if(!r)return;e.on("beforeFileQueued",function(e){var t=n+e.size>r;return t&&i&&(i=!1,this.trigger("error","Q_EXCEED_SIZE_LIMIT",r,e),setTimeout(function(){i=!0},1)),t?!1:!0}),e.on("fileQueued",function(e){n+=e.size}),e.on("fileDequeued",function(e){n-=e.size}),e.on("reset",function(){n=0})}),s.addValidator("fileSingleSizeLimit",function(){var e=this,t=e.options,r=t.fileSingleSizeLimit;if(!r)return;e.on("beforeFileQueued",function(e){if(e.size>r)return e.setStatus(n.Status.INVALID,"exceed_size"),this.trigger("error","F_EXCEED_SIZE",r,e),!1})}),s.addValidator("duplicate",function(){function r(e){var t=0,n=0,r=e.length,i;for(;n<r;n++)i=e.charCodeAt(n),t=i+(t<<6)+(t<<16)-t;return t}var e=this,t=e.options,n={};if(t.duplicate)return;e.on("beforeFileQueued",function(e){var t=e.__hash||(e.__hash=r(e.name+e.size+e.lastModifiedDate));if(n[t])return this.trigger("error","F_DUPLICATE",e),!1}),e.on("fileQueued",function(e){var t=e.__hash;t&&(n[t]=!0)}),e.on("fileDequeued",function(e){var t=e.__hash;t&&delete n[t]}),e.on("reset",function(){n={}})}),s}),t("lib/md5",["runtime/client","mediator"],function(e,t){function n(){e.call(this,"Md5")}return t.installTo(n.prototype),n.prototype.loadFromBlob=function(e){var t=this;t.getRuid()&&t.disconnectRuntime(),t.connectRuntime(e.ruid,function(){t.exec("init"),t.exec("loadFromBlob",e)})},n.prototype.getResult=function(){return this.exec("getResult")},n}),t("widgets/md5",["base","uploader","lib/md5","lib/blob","widgets/widget"],function(e,t,n,r){return t.register({name:"md5",md5File:function(t,i,s){var o=new n,u=e.Deferred(),a=t instanceof r?t:this.request("get-file",t).source;return o.on("progress load",function(e){e=e||{},u.notify(e.total?e.loaded/e.total:1)}),o.on("complete",function(){u.resolve(o.getResult())}),o.on("error",function(e){u.reject(e)}),arguments.length>1&&(i=i||0,s=s||0,i<0&&(i=a.size+i),s<0&&(s=a.size+s),s=Math.min(s,a.size),a=a.slice(i,s)),o.loadFromBlob(a),u.promise()}})}),t("runtime/compbase",[],function(){function e(e,t){this.owner=e,this.options=e.options,this.getRuntime=function(){return t},this.getRuid=function(){return t.uid},this.trigger=function(){return e.trigger.apply(e,arguments)}}return e}),t("runtime/html5/runtime",["base","runtime/runtime","runtime/compbase"],function(t,n,r){function o(){var e={},r=this,o=this.destroy;n.apply(r,arguments),r.type=i,r.exec=function(n,i){var o=this,u=o.uid,a=t.slice(arguments,2),f;if(s[n]){f=e[u]=e[u]||new s[n](o,r);if(f[i])return f[i].apply(f,a)}},r.destroy=function(){return o&&o.apply(this,arguments)}}var i="html5",s={};return t.inherits(n,{constructor:o,init:function(){var e=this;setTimeout(function(){e.trigger("ready")},1)}}),o.register=function(e,n){var i=s[e]=t.inherits(r,n);return i},e.Blob&&e.FileReader&&e.DataView&&n.addRuntime(i,o),o}),t("runtime/html5/blob",["runtime/html5/runtime","lib/blob"],function(e,t){return e.register("Blob",{slice:function(e,n){var r=this.owner.source,i=r.slice||r.webkitSlice||r.mozSlice;return r=i.call(r,e,n),new t(this.getRuid(),r)}})}),t("runtime/html5/dnd",["base","runtime/html5/runtime","lib/file"],function(e,t,n){var r=e.$,i="webuploader-dnd-";return t.register("DragAndDrop",{init:function(){var t=this.elem=this.options.container;this.dragEnterHandler=e.bindFn(this._dragEnterHandler,this),this.dragOverHandler=e.bindFn(this._dragOverHandler,this),this.dragLeaveHandler=e.bindFn(this._dragLeaveHandler,this),this.dropHandler=e.bindFn(this._dropHandler,this),this.dndOver=!1,t.on("dragenter",this.dragEnterHandler),t.on("dragover",this.dragOverHandler),t.on("dragleave",this.dragLeaveHandler),t.on("drop",this.dropHandler),this.options.disableGlobalDnd&&(r(document).on("dragover",this.dragOverHandler),r(document).on("drop",this.dropHandler))},_dragEnterHandler:function(e){var t=this,n=t._denied||!1,r;return e=e.originalEvent||e,t.dndOver||(t.dndOver=!0,r=e.dataTransfer.items,r&&r.length&&(t._denied=n=!t.trigger("accept",r)),t.elem.addClass(i+"over"),t.elem[n?"addClass":"removeClass"](i+"denied")),e.dataTransfer.dropEffect=n?"none":"copy",!1},_dragOverHandler:function(e){var t=this.elem.parent().get(0);return t&&!r.contains(t,e.currentTarget)?!1:(clearTimeout(this._leaveTimer),this._dragEnterHandler.call(this,e),!1)},_dragLeaveHandler:function(){var e=this,t;return t=function(){e.dndOver=!1,e.elem.removeClass(i+"over "+i+"denied")},clearTimeout(e._leaveTimer),e._leaveTimer=setTimeout(t,100),!1},_dropHandler:function(e){var t=this,s=t.getRuid(),o=t.elem.parent().get(0),u,a;if(o&&!r.contains(o,e.currentTarget))return!1;e=e.originalEvent||e,u=e.dataTransfer;try{a=u.getData("text/html")}catch(f){}t.dndOver=!1,t.elem.removeClass(i+"over");if(a)return;return t._getTansferFiles(u,function(e){t.trigger("drop",r.map(e,function(e){return new n(s,e)}))}),!1},_getTansferFiles:function(t,n){var r=[],i=[],s,o,u,a,f,l,c;s=t.items,o=t.files,c=!!s&&!!s[0].webkitGetAsEntry;for(f=0,l=o.length;f<l;f++)u=o[f],a=s&&s[f],c&&a.webkitGetAsEntry().isDirectory?i.push(this._traverseDirectoryTree(a.webkitGetAsEntry(),r)):r.push(u);e.when.apply(e,i).done(function(){if(!r.length)return;n(r)})},_traverseDirectoryTree:function(t,n){var r=e.Deferred(),i=this;return t.isFile?t.file(function(e){n.push(e),r.resolve()}):t.isDirectory&&t.createReader().readEntries(function(t){var s=t.length,o=[],u=[],a;for(a=0;a<s;a++)o.push(i._traverseDirectoryTree(t[a],u));e.when.apply(e,o).then(function(){n.push.apply(n,u),r.resolve()},r.reject)}),r.promise()},destroy:function(){var e=this.elem;if(!e)return;e.off("dragenter",this.dragEnterHandler),e.off("dragover",this.dragOverHandler),e.off("dragleave",this.dragLeaveHandler),e.off("drop",this.dropHandler),this.options.disableGlobalDnd&&(r(document).off("dragover",this.dragOverHandler),r(document).off("drop",this.dropHandler))}})}),t("runtime/html5/filepaste",["base","runtime/html5/runtime","lib/file"],function(e,t,n){return t.register("FilePaste",{init:function(){var t=this.options,n=this.elem=t.container,r=".*",i,s,o,u;if(t.accept){i=[];for(s=0,o=t.accept.length;s<o;s++)u=t.accept[s].mimeTypes,u&&i.push(u);i.length&&(r=i.join(","),r=r.replace(/,/g,"|").replace(/\*/g,".*"))}this.accept=r=new RegExp(r,"i"),this.hander=e.bindFn(this._pasteHander,this),n.on("paste",this.hander)},_pasteHander:function(e){var t=[],r=this.getRuid(),i,s,o,u,a;e=e.originalEvent||e,i=e.clipboardData.items;for(u=0,a=i.length;u<a;u++){s=i[u];if(s.kind!=="file"||!(o=s.getAsFile()))continue;t.push(new n(r,o))}t.length&&(e.preventDefault(),e.stopPropagation(),this.trigger("paste",t))},destroy:function(){this.elem.off("paste",this.hander)}})}),t("runtime/html5/filepicker",["base","runtime/html5/runtime"],function(e,t){var n=e.$;return t.register("FilePicker",{init:function(){var e=this.getRuntime().getContainer(),t=this,r=t.owner,i=t.options,s=this.label=n(document.createElement("label")),o=this.input=n(document.createElement("input")),u,a,f,l;o.attr("type","file"),o.attr("capture","camera"),o.attr("name",i.name),o.addClass("webuploader-element-invisible"),s.on("click",function(e){o.trigger("click"),e.stopPropagation(),r.trigger("dialogopen")}),s.css({opacity:0,width:"100%",height:"100%",display:"block",cursor:"pointer",background:"#ffffff"}),i.multiple&&o.attr("multiple","multiple");if(i.accept&&i.accept.length>0){u=[];for(a=0,f=i.accept.length;a<f;a++)u.push(i.accept[a].mimeTypes);o.attr("accept",u.join(","))}e.append(o),e.append(s),o.attr("data-id",n(o).parents(".zm-uploader").attr("id")),l=function(e){r.trigger(e.type)},o.on("change",function(e){var i=arguments.callee,s;t.files=e.target.files,s=this.cloneNode(!0),s.value=null,this.parentNode.replaceChild(s,this),o.off(),o=n(s).on("change",i).on("mouseenter mouseleave",l),r.trigger("change")}),s.on("mouseenter mouseleave",l)},getFiles:function(){return this.files},destroy:function(){this.input.off(),this.label.off()}})}),t("runtime/html5/util",["base"],function(t){var n=e.createObjectURL&&e||e.URL&&URL.revokeObjectURL&&URL||e.webkitURL,r=t.noop,i=r;return n&&(r=function(){return n.createObjectURL.apply(n,arguments)},i=function(){return n.revokeObjectURL.apply(n,arguments)}),{createObjectURL:r,revokeObjectURL:i,dataURL2Blob:function(e){var t,n,r,i,s,o;o=e.split(","),~o[0].indexOf("base64")?t=atob(o[1]):t=decodeURIComponent(o[1]),r=new ArrayBuffer(t.length),n=new Uint8Array(r);for(i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return s=o[0].split(":")[1].split(";")[0],this.arrayBufferToBlob(r,s)},dataURL2ArrayBuffer:function(e){var t,n,r,i;i=e.split(","),~i[0].indexOf("base64")?t=atob(i[1]):t=decodeURIComponent(i[1]),n=new Uint8Array(t.length);for(r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n.buffer},arrayBufferToBlob:function(t,n){var r=e.BlobBuilder||e.WebKitBlobBuilder,i;return r?(i=new r,i.append(t),i.getBlob(n)):new Blob([t],n?{type:n}:{})},canvasToDataUrl:function(e,t,n){return e.toDataURL(t,n/100)},parseMeta:function(e,t){t(!1,{})},updateImageHead:function(e){return e}}}),t("runtime/html5/imagemeta",["runtime/html5/util"],function(e){var t;return t={parsers:{65505:[]},maxMetaDataSize:262144,parse:function(e,t){var n=this,r=new FileReader;r.onload=function(){t(!1,n._parse(this.result)),r=r.onload=r.onerror=null},r.onerror=function(e){t(e.message),r=r.onload=r.onerror=null},e=e.slice(0,n.maxMetaDataSize),r.readAsArrayBuffer(e.getSource())},_parse:function(e,n){if(e.byteLength<6)return;var r=new DataView(e),i=2,s=r.byteLength-4,o=i,u={},a,f,l,c;if(r.getUint16(0)===65496){while(i<s){a=r.getUint16(i);if(!(a>=65504&&a<=65519||a===65534))break;f=r.getUint16(i+2)+2;if(i+f>r.byteLength)break;l=t.parsers[a];if(!n&&l)for(c=0;c<l.length;c+=1)l[c].call(t,r,i,f,u);i+=f,o=i}o>6&&(e.slice?u.imageHead=e.slice(2,o):u.imageHead=(new Uint8Array(e)).subarray(2,o))}return u},updateImageHead:function(e,t){var n=this._parse(e,!0),r,i,s;return s=2,n.imageHead&&(s=2+n.imageHead.byteLength),e.slice?i=e.slice(s):i=(new Uint8Array(e)).subarray(s),r=new Uint8Array(t.byteLength+2+i.byteLength),r[0]=255,r[1]=216,r.set(new Uint8Array(t),2),r.set(new Uint8Array(i),t.byteLength+2),r.buffer}},e.parseMeta=function(){return t.parse.apply(t,arguments)},e.updateImageHead=function(){return t.updateImageHead.apply(t,arguments)},t}),t("runtime/html5/imagemeta/exif",["base","runtime/html5/imagemeta"],function(e,t){var n={};return n.ExifMap=function(){return this},n.ExifMap.prototype.map={Orientation:274},n.ExifMap.prototype.get=function(e){return this[e]||this[this.map[e]]},n.exifTagTypes={1:{getValue:function(e,t){return e.getUint8(t)},size:1},2:{getValue:function(e,t){return String.fromCharCode(e.getUint8(t))},size:1,ascii:!0},3:{getValue:function(e,t,n){return e.getUint16(t,n)},size:2},4:{getValue:function(e,t,n){return e.getUint32(t,n)},size:4},5:{getValue:function(e,t,n){return e.getUint32(t,n)/e.getUint32(t+4,n)},size:8},9:{getValue:function(e,t,n){return e.getInt32(t,n)},size:4},10:{getValue:function(e,t,n){return e.getInt32(t,n)/e.getInt32(t+4,n)},size:8}},n.exifTagTypes[7]=n.exifTagTypes[1],n.getExifValue=function(t,r,i,s,o,u){var a=n.exifTagTypes[s],f,l,c,h,p,d;if(!a){e.log("Invalid Exif data: Invalid tag type.");return}f=a.size*o,l=f>4?r+t.getUint32(i+8,u):i+8;if(l+f>t.byteLength){e.log("Invalid Exif data: Invalid data offset.");return}if(o===1)return a.getValue(t,l,u);c=[];for(h=0;h<o;h+=1)c[h]=a.getValue(t,l+h*a.size,u);if(a.ascii){p="";for(h=0;h<c.length;h+=1){d=c[h];if(d==="\0")break;p+=d}return p}return c},n.parseExifTag=function(e,t,r,i,s){var o=e.getUint16(r,i);s.exif[o]=n.getExifValue(e,t,r,e.getUint16(r+2,i),e.getUint32(r+4,i),i)},n.parseExifTags=function(t,n,r,i,s){var o,u,a;if(r+6>t.byteLength){e.log("Invalid Exif data: Invalid directory offset.");return}o=t.getUint16(r,i),u=r+2+12*o;if(u+4>t.byteLength){e.log("Invalid Exif data: Invalid directory size.");return}for(a=0;a<o;a+=1)this.parseExifTag(t,n,r+2+12*a,i,s);return t.getUint32(u,i)},n.parseExifData=function(t,r,i,s){var o=r+10,u,a;if(t.getUint32(r+4)!==1165519206)return;if(o+8>t.byteLength){e.log("Invalid Exif data: Invalid segment size.");return}if(t.getUint16(r+8)!==0){e.log("Invalid Exif data: Missing byte alignment offset.");return}switch(t.getUint16(o)){case 18761:u=!0;break;case 19789:u=!1;break;default:e.log("Invalid Exif data: Invalid byte alignment marker.");return}if(t.getUint16(o+2,u)!==42){e.log("Invalid Exif data: Missing TIFF marker.");return}a=t.getUint32(o+4,u),s.exif=new n.ExifMap,a=n.parseExifTags(t,o,o+a,u,s)},t.parsers[65505].push(n.parseExifData),n}),t("runtime/html5/jpegencoder",[],function(e,t,n){function r(e){function P(e){var t=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99];for(var n=0;n<64;n++){var a=r((t[n]*e+50)/100);a<1?a=1:a>255&&(a=255),i[N[n]]=a}var f=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99];for(var l=0;l<64;l++){var c=r((f[l]*e+50)/100);c<1?c=1:c>255&&(c=255),s[N[l]]=c}var h=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],p=0;for(var d=0;d<8;d++)for(var v=0;v<8;v++)o[p]=1/(i[N[p]]*h[d]*h[v]*8),u[p]=1/(s[N[p]]*h[d]*h[v]*8),p++}function H(e,t){var n=0,r=0,i=new Array;for(var s=1;s<=16;s++){for(var o=1;o<=e[s];o++)i[t[r]]=[],i[t[r]][0]=n,i[t[r]][1]=s,r++,n++;n*=2}return i}function B(){a=H(C,k),f=H(O,M),l=H(L,A),c=H(_,D)}function j(){var e=1,t=2;for(var n=1;n<=15;n++){for(var r=e;r<t;r++)p[32767+r]=n,h[32767+r]=[],h[32767+r][1]=n,h[32767+r][0]=r;for(var i=-(t-1);i<=-e;i++)p[32767+i]=n,h[32767+i]=[],h[32767+i][1]=n,h[32767+i][0]=t-1+i;e<<=1,t<<=1}}function F(){for(var e=0;e<256;e++)x[e]=19595*e,x[e+256>>0]=38470*e,x[e+512>>0]=7471*e+32768,x[e+768>>0]=-11059*e,x[e+1024>>0]=-21709*e,x[e+1280>>0]=32768*e+8421375,x[e+1536>>0]=-27439*e,x[e+1792>>0]=-5329*e}function I(e){var t=e[0],n=e[1]-1;while(n>=0)t&1<<n&&(g|=1<<y),n--,y--,y<0&&(g==255?(q(255),q(0)):q(g),y=7,g=0)}function q(e){m.push(S[e])}function R(e){q(e>>8&255),q(e&255)}function U(e,t){var n,r,i,s,o,u,a,f,l=0,c,h=8,p=64;for(c=0;c<h;++c){n=e[l],r=e[l+1],i=e[l+2],s=e[l+3],o=e[l+4],u=e[l+5],a=e[l+6],f=e[l+7];var v=n+f,m=n-f,g=r+a,y=r-a,b=i+u,w=i-u,E=s+o,S=s-o,x=v+E,T=v-E,N=g+b,C=g-b;e[l]=x+N,e[l+4]=x-N;var k=(C+T)*.707106781;e[l+2]=T+k,e[l+6]=T-k,x=S+w,N=w+y,C=y+m;var L=(x-C)*.382683433,A=.5411961*x+L,O=1.306562965*C+L,M=N*.707106781,_=m+M,D=m-M;e[l+5]=D+A,e[l+3]=D-A,e[l+1]=_+O,e[l+7]=_-O,l+=8}l=0;for(c=0;c<h;++c){n=e[l],r=e[l+8],i=e[l+16],s=e[l+24],o=e[l+32],u=e[l+40],a=e[l+48],f=e[l+56];var P=n+f,H=n-f,B=r+a,j=r-a,F=i+u,I=i-u,q=s+o,R=s-o,U=P+q,z=P-q,W=B+F,X=B-F;e[l]=U+W,e[l+32]=U-W;var V=(X+z)*.707106781;e[l+16]=z+V,e[l+48]=z-V,U=R+I,W=I+j,X=j+H;var $=(U-X)*.382683433,J=.5411961*U+$,K=1.306562965*X+$,Q=W*.707106781,G=H+Q,Y=H-Q;e[l+40]=Y+J,e[l+24]=Y-J,e[l+8]=G+K,e[l+56]=G-K,l++}var Z;for(c=0;c<p;++c)Z=e[c]*t[c],d[c]=Z>0?Z+.5|0:Z-.5|0;return d}function z(){R(65504),R(16),q(74),q(70),q(73),q(70),q(0),q(1),q(1),q(0),R(1),R(1),q(0),q(0)}function W(e,t){R(65472),R(17),q(8),R(t),R(e),q(3),q(1),q(17),q(0),q(2),q(17),q(1),q(3),q(17),q(1)}function X(){R(65499),R(132),q(0);for(var e=0;e<64;e++)q(i[e]);q(1);for(var t=0;t<64;t++)q(s[t])}function V(){R(65476),R(418),q(0);for(var e=0;e<16;e++)q(C[e+1]);for(var t=0;t<=11;t++)q(k[t]);q(16);for(var n=0;n<16;n++)q(L[n+1]);for(var r=0;r<=161;r++)q(A[r]);q(1);for(var i=0;i<16;i++)q(O[i+1]);for(var s=0;s<=11;s++)q(M[s]);q(17);for(var o=0;o<16;o++)q(_[o+1]);for(var u=0;u<=161;u++)q(D[u])}function $(){R(65498),R(12),q(3),q(1),q(0),q(2),q(17),q(3),q(17),q(0),q(63),q(0)}function J(e,t,n,r,i){var s=i[0],o=i[240],u,a=16,f=63,l=64,c=U(e,t);for(var d=0;d<l;++d)v[N[d]]=c[d];var m=v[0]-n;n=v[0],m==0?I(r[0]):(u=32767+m,I(r[p[u]]),I(h[u]));var g=63;for(;g>0&&v[g]==0;g--);if(g==0)return I(s),n;var y=1,b;while(y<=g){var w=y;for(;v[y]==0&&y<=g;++y);var E=y-w;if(E>=a){b=E>>4;for(var S=1;S<=b;++S)I(o);E&=15}u=32767+v[y],I(i[(E<<4)+p[u]]),I(h[u]),y++}return g!=f&&I(s),n}function K(){var e=String.fromCharCode;for(var t=0;t<256;t++)S[t]=e(t)}function Q(e){e<=0&&(e=1),e>100&&(e=100);if(T==e)return;var t=0;e<50?t=Math.floor(5e3/e):t=Math.floor(200-e*2),P(t),T=e}function G(){e||(e=50),K(),B(),j(),F(),Q(e)}var t=this,n=Math.round,r=Math.floor,i=new Array(64),s=new Array(64),o=new Array(64),u=new Array(64),a,f,l,c,h=new Array(65535),p=new Array(65535),d=new Array(64),v=new Array(64),m=[],g=0,y=7,b=new Array(64),w=new Array(64),E=new Array(64),S=new Array(256),x=new Array(2048),T,N=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],C=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],k=[0,1,2,3,4,5,6,7,8,9,10,11],L=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],A=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],O=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],M=[0,1,2,3,4,5,6,7,8,9,10,11],_=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],D=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];this.encode=function(e,t){t&&Q(t),m=new Array,g=0,y=7,R(65496),z(),X(),W(e.width,e.height),V(),$();var n=0,r=0,i=0;g=0,y=7,this.encode.displayName="_encode_";var s=e.data,h=e.width,p=e.height,d=h*4,v=h*3,S,T=0,N,C,k,L,A,O,M,_;while(T<p){S=0;while(S<d){L=d*T+S,A=L,O=-1,M=0;for(_=0;_<64;_++)M=_>>3,O=(_&7)*4,A=L+M*d+O,T+M>=p&&(A-=d*(T+1+M-p)),S+O>=d&&(A-=S+O-d+4),N=s[A++],C=s[A++],k=s[A++],b[_]=(x[N]+x[C+256>>0]+x[k+512>>0]>>16)-128,w[_]=(x[N+768>>0]+x[C+1024>>0]+x[k+1280>>0]>>16)-128,E[_]=(x[N+1280>>0]+x[C+1536>>0]+x[k+1792>>0]>>16)-128;n=J(b,o,n,a,l),r=J(w,u,r,f,c),i=J(E,u,i,f,c),S+=32}T+=8}if(y>=0){var D=[];D[1]=y+1,D[0]=(1<<y+1)-1,I(D)}R(65497);var P="data:image/jpeg;base64,"+btoa(m.join(""));return m=[],P},G()}return r.encode=function(e,t){var n=new r(t);return n.encode(e)},r}),t("runtime/html5/androidpatch",["runtime/html5/util","runtime/html5/jpegencoder","base"],function(e,t,n){var r=e.canvasToDataUrl,i;e.canvasToDataUrl=function(e,s,o){var u,a,f,l,c;return n.os.android?(s==="image/jpeg"&&typeof i=="undefined"&&(l=r.apply(null,arguments),c=l.split(","),~c[0].indexOf("base64")?l=atob(c[1]):l=decodeURIComponent(c[1]),l=l.substring(0,2),i=l.charCodeAt(0)===255&&l.charCodeAt(1)===216),s==="image/jpeg"&&!i?(a=e.width,f=e.height,u=e.getContext("2d"),t.encode(u.getImageData(0,0,a,f),o)):r.apply(null,arguments)):r.apply(null,arguments)}}),t("runtime/html5/image",["base","runtime/html5/runtime","runtime/html5/util"],function(e,t,n){var r="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs%3D";return t.register("Image",{modified:!1,init:function(){var e=this,t=new Image;t.onload=function(){e._info={type:e.type,width:this.width,height:this.height},!e._metas&&"image/jpeg"===e.type?n.parseMeta(e._blob,function(t,n){e._metas=n,e.owner.trigger("load")}):e.owner.trigger("load")},t.onerror=function(){e.owner.trigger("error")},e._img=t},loadFromBlob:function(e){var t=this,r=t._img;t._blob=e,t.type=e.type,r.src=n.createObjectURL(e.getSource()),t.owner.once("load",function(){n.revokeObjectURL(r.src)})},resize:function(e,t){var n=this._canvas||(this._canvas=document.createElement("canvas"));this._resize(this._img,n,e,t),this._blob=null,this.modified=!0,this.owner.trigger("complete","resize")},crop:function(e,t,n,r,i){var s=this._canvas||(this._canvas=document.createElement("canvas")),o=this.options,u=this._img,a=u.naturalWidth,f=u.naturalHeight,l=this.getOrientation();i=i||1,s.width=n,s.height=r,o.preserveHeaders||this._rotate2Orientaion(s,l),this._renderImageToCanvas(s,u,-e,-t,a*i,f*i),this._blob=null,this.modified=!0,this.owner.trigger("complete","crop")},getAsBlob:function(e){var t=this._blob,r=this.options,i;e=e||this.type;if(this.modified||this.type!==e){i=this._canvas;if(e==="image/jpeg"){t=n.canvasToDataUrl(i,e,r.quality);if(r.preserveHeaders&&this._metas&&this._metas.imageHead)return t=n.dataURL2ArrayBuffer(t),t=n.updateImageHead(t,this._metas.imageHead),t=n.arrayBufferToBlob(t,e),t}else t=n.canvasToDataUrl(i,e);t=n.dataURL2Blob(t)}return t},getAsDataUrl:function(e){var t=this.options;return e=e||this.type,e==="image/jpeg"?n.canvasToDataUrl(this._canvas,e,t.quality):this._canvas.toDataURL(e)},getOrientation:function(){return this._metas&&this._metas.exif&&this._metas.exif.get("Orientation")||1},info:function(e){return e?(this._info=e,this):this._info},meta:function(e){return e?(this._metas=e,this):this._metas},destroy:function(){var e=this._canvas;this._img.onload=null,e&&(e.getContext("2d").clearRect(0,0,e.width,e.height),e.width=e.height=0,this._canvas=null),this._img.src=r,this._img=this._blob=null},_resize:function(e,t,n,r){var i=this.options,s=e.width,o=e.height,u=this.getOrientation(),a,f,l,c,h;~[5,6,7,8].indexOf(u)&&(n^=r,r^=n,n^=r),a=Math[i.crop?"max":"min"](n/s,r/o),i.allowMagnify||(a=Math.min(1,a)),f=s*a,l=o*a,i.crop?(t.width=n,t.height=r):(t.width=f,t.height=l),c=(t.width-f)/2,h=(t.height-l)/2,i.preserveHeaders||this._rotate2Orientaion(t,u),this._renderImageToCanvas(t,e,c,h,f,l)},_rotate2Orientaion:function(e,t){var n=e.width,r=e.height,i=e.getContext("2d");switch(t){case 5:case 6:case 7:case 8:e.width=r,e.height=n}switch(t){case 2:i.translate(n,0),i.scale(-1,1);break;case 3:i.translate(n,r),i.rotate(Math.PI);break;case 4:i.translate(0,r),i.scale(1,-1);break;case 5:i.rotate(.5*Math.PI),i.scale(1,-1);break;case 6:i.rotate(.5*Math.PI),i.translate(0,-r);break;case 7:i.rotate(.5*Math.PI),i.translate(n,-r),i.scale(-1,1);break;case 8:i.rotate(-0.5*Math.PI),i.translate(-n,0)}},_renderImageToCanvas:function(){function t(e,t,n){var r=document.createElement("canvas"),i=r.getContext("2d"),s=0,o=n,u=n,a,f,l;r.width=1,r.height=n,i.drawImage(e,0,0),a=i.getImageData(0,0,1,n).data;while(u>s)f=a[(u-1)*4+3],f===0?o=u:s=u,u=o+s>>1;return l=u/n,l===0?1:l}function n(e){var t=e.naturalWidth,n=e.naturalHeight,r,i;return t*n>1048576?(r=document.createElement("canvas"),r.width=r.height=1,i=r.getContext("2d"),i.drawImage(e,-t+1,0),i.getImageData(0,0,1,1).data[3]===0):!1}return e.os.ios?e.os.ios>=7?function(e,n,r,i,s,o){var u=n.naturalWidth,a=n.naturalHeight,f=t(n,u,a);return e.getContext("2d").drawImage(n,0,0,u*f,a*f,r,i,s,o)}:function(e,r,i,s,o,u){var a=r.naturalWidth,f=r.naturalHeight,l=e.getContext("2d"),c=n(r),h=this.type==="image/jpeg",p=1024,d=0,v=0,m,g,y,b,w,E,S;c&&(a/=2,f/=2),l.save(),m=document.createElement("canvas"),m.width=m.height=p,g=m.getContext("2d"),y=h?t(r,a,f):1,b=Math.ceil(p*o/a),w=Math.ceil(p*u/f/y);while(d<f){E=0,S=0;while(E<a)g.clearRect(0,0,p,p),g.drawImage(r,-E,-d),l.drawImage(m,0,0,p,p,i+S,s+v,b,w),E+=p,S+=b;d+=p,v+=w}l.restore(),m=g=null}:function(t){var n=e.slice(arguments,1),r=t.getContext("2d");r.drawImage.apply(r,n)}}()})}),t("runtime/html5/transport",["base","runtime/html5/runtime"],function(e,t){var n=e.noop,r=e.$;return t.register("Transport",{init:function(){this._status=0,this._response=null},send:function(){var t=this.owner,n=this.options,i=this._initAjax(),s=t._blob,o=n.server,u,a,f;n.sendAsBinary?(o+=(/\?/.test(o)?"&":"?")+r.param(t._formData),a=s.getSource()):(u=new FormData,r.each(t._formData,function(e,t){u.append(e,t)}),u.append(n.fileVal,s.getSource(),n.filename||t._formData.name||"")),n.withCredentials&&"withCredentials"in i?(i.open(n.method,o,!0),i.withCredentials=!0):i.open(n.method,o),this._setRequestHeader(i,n.headers),a?(i.overrideMimeType&&i.overrideMimeType("application/octet-stream"),e.os.android?(f=new FileReader,f.onload=function(){i.send(this.result),f=f.onload=null},f.readAsArrayBuffer(a)):i.send(a)):i.send(u)},getResponse:function(){return this._response},getResponseAsJson:function(){return this._parseJson(this._response)},getStatus:function(){return this._status},abort:function(){var e=this._xhr;e&&(e.upload.onprogress=n,e.onreadystatechange=n,e.abort(),this._xhr=e=null)},destroy:function(){this.abort()},_initAjax:function(){var e=this,t=new XMLHttpRequest,r=this.options;return r.withCredentials&&!("withCredentials"in t)&&typeof XDomainRequest!="undefined"&&(t=new XDomainRequest),t.upload.onprogress=function(t){var n=0;return t.lengthComputable&&(n=t.loaded/t.total),e.trigger("progress",n)},t.onreadystatechange=function(){if(t.readyState!==4)return;return t.upload.onprogress=n,t.onreadystatechange=n,e._xhr=null,e._status=t.status,t.status>=200&&t.status<300?(e._response=t.responseText,e.trigger("load")):t.status>=500&&t.status<600?(e._response=t.responseText,e.trigger("error","server")):e.trigger("error",e._status?"http":"abort")},e._xhr=t,t},_setRequestHeader:function(e,t){r.each(t,function(t,n){e.setRequestHeader(t,n)})},_parseJson:function(e){var t;try{t=JSON.parse(e)}catch(n){t={}}return t}})}),t("runtime/html5/md5",["runtime/html5/runtime"],function(e){var t=function(e,t){return e+t&4294967295},n=function(e,n,r,i,s,o){return n=t(t(n,e),t(i,o)),t(n<<s|n>>>32-s,r)},r=function(e,t,r,i,s,o,u){return n(t&r|~t&i,e,t,s,o,u)},i=function(e,t,r,i,s,o,u){return n(t&i|r&~i,e,t,s,o,u)},s=function(e,t,r,i,s,o,u){return n(t^r^i,e,t,s,o,u)},o=function(e,t,r,i,s,o,u){return n(r^(t|~i),e,t,s,o,u)},u=function(e,n){var u=e[0],a=e[1],f=e[2],l=e[3];u=r(u,a,f,l,n[0],7,-680876936),l=r(l,u,a,f,n[1],12,-389564586),f=r(f,l,u,a,n[2],17,606105819),a=r(a,f,l,u,n[3],22,-1044525330),u=r(u,a,f,l,n[4],7,-176418897),l=r(l,u,a,f,n[5],12,1200080426),f=r(f,l,u,a,n[6],17,-1473231341),a=r(a,f,l,u,n[7],22,-45705983),u=r(u,a,f,l,n[8],7,1770035416),l=r(l,u,a,f,n[9],12,-1958414417),f=r(f,l,u,a,n[10],17,-42063),a=r(a,f,l,u,n[11],22,-1990404162),u=r(u,a,f,l,n[12],7,1804603682),l=r(l,u,a,f,n[13],12,-40341101),f=r(f,l,u,a,n[14],17,-1502002290),a=r(a,f,l,u,n[15],22,1236535329),u=i(u,a,f,l,n[1],5,-165796510),l=i(l,u,a,f,n[6],9,-1069501632),f=i(f,l,u,a,n[11],14,643717713),a=i(a,f,l,u,n[0],20,-373897302),u=i(u,a,f,l,n[5],5,-701558691),l=i(l,u,a,f,n[10],9,38016083),f=i(f,l,u,a,n[15],14,-660478335),a=i(a,f,l,u,n[4],20,-405537848),u=i(u,a,f,l,n[9],5,568446438),l=i(l,u,a,f,n[14],9,-1019803690),f=i(f,l,u,a,n[3],14,-187363961),a=i(a,f,l,u,n[8],20,1163531501),u=i(u,a,f,l,n[13],5,-1444681467),l=i(l,u,a,f,n[2],9,-51403784),f=i(f,l,u,a,n[7],14,1735328473),a=i(a,f,l,u,n[12],20,-1926607734),u=s(u,a,f,l,n[5],4,-378558),l=s(l,u,a,f,n[8],11,-2022574463),f=s(f,l,u,a,n[11],16,1839030562),a=s(a,f,l,u,n[14],23,-35309556),u=s(u,a,f,l,n[1],4,-1530992060),l=s(l,u,a,f,n[4],11,1272893353),f=s(f,l,u,a,n[7],16,-155497632),a=s(a,f,l,u,n[10],23,-1094730640),u=s(u,a,f,l,n[13],4,681279174),l=s(l,u,a,f,n[0],11,-358537222),f=s(f,l,u,a,n[3],16,-722521979),a=s(a,f,l,u,n[6],23,76029189),u=s(u,a,f,l,n[9],4,-640364487),l=s(l,u,a,f,n[12],11,-421815835),f=s(f,l,u,a,n[15],16,530742520),a=s(a,f,l,u,n[2],23,-995338651),u=o(u,a,f,l,n[0],6,-198630844),l=o(l,u,a,f,n[7],10,1126891415),f=o(f,l,u,a,n[14],15,-1416354905),a=o(a,f,l,u,n[5],21,-57434055),u=o(u,a,f,l,n[12],6,1700485571),l=o(l,u,a,f,n[3],10,-1894986606),f=o(f,l,u,a,n[10],15,-1051523),a=o(a,f,l,u,n[1],21,-2054922799),u=o(u,a,f,l,n[8],6,1873313359),l=o(l,u,a,f,n[15],10,-30611744),f=o(f,l,u,a,n[6],15,-1560198380),a=o(a,f,l,u,n[13],21,1309151649),u=o(u,a,f,l,n[4],6,-145523070),l=o(l,u,a,f,n[11],10,-1120210379),f=o(f,l,u,a,n[2],15,718787259),a=o(a,f,l,u,n[9],21,-343485551),e[0]=t(u,e[0]),e[1]=t(a,e[1]),e[2]=t(f,e[2]),e[3]=t(l,e[3])},a=function(e){var t=[],n;for(n=0;n<64;n+=4)t[n>>2]=e.charCodeAt(n)+(e.charCodeAt(n+1)<<8)+(e.charCodeAt(n+2)<<16)+(e.charCodeAt(n+3)<<24);return t},f=function(e){var t=[],n;for(n=0;n<64;n+=4)t[n>>2]=e[n]+(e[n+1]<<8)+(e[n+2]<<16)+(e[n+3]<<24);return t},l=function(e){var t=e.length,n=[1732584193,-271733879,-1732584194,271733878],r,i,s,o,f,l;for(r=64;r<=t;r+=64)u(n,a(e.substring(r-64,r)));e=e.substring(r-64),i=e.length,s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(r=0;r<i;r+=1)s[r>>2]|=e.charCodeAt(r)<<(r%4<<3);s[r>>2]|=128<<(r%4<<3);if(r>55){u(n,s);for(r=0;r<16;r+=1)s[r]=0}return o=t*8,o=o.toString(16).match(/(.*?)(.{0,8})$/),f=parseInt(o[2],16),l=parseInt(o[1],16)||0,s[14]=f,s[15]=l,u(n,s),n},c=function(e){var t=e.length,n=[1732584193,-271733879,-1732584194,271733878],r,i,s,o,a,
l;for(r=64;r<=t;r+=64)u(n,f(e.subarray(r-64,r)));e=r-64<t?e.subarray(r-64):new Uint8Array(0),i=e.length,s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(r=0;r<i;r+=1)s[r>>2]|=e[r]<<(r%4<<3);s[r>>2]|=128<<(r%4<<3);if(r>55){u(n,s);for(r=0;r<16;r+=1)s[r]=0}return o=t*8,o=o.toString(16).match(/(.*?)(.{0,8})$/),a=parseInt(o[2],16),l=parseInt(o[1],16)||0,s[14]=a,s[15]=l,u(n,s),n},h=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],p=function(e){var t="",n;for(n=0;n<4;n+=1)t+=h[e>>n*8+4&15]+h[e>>n*8&15];return t},d=function(e){var t;for(t=0;t<e.length;t+=1)e[t]=p(e[t]);return e.join("")},v=function(e){return d(l(e))},m=function(){this.reset()};return v("hello")!=="5d41402abc4b2a76b9719d911017c592"&&(t=function(e,t){var n=(e&65535)+(t&65535),r=(e>>16)+(t>>16)+(n>>16);return r<<16|n&65535}),m.prototype.append=function(e){return/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e))),this.appendBinary(e),this},m.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;var t=this._buff.length,n;for(n=64;n<=t;n+=64)u(this._state,a(this._buff.substring(n-64,n)));return this._buff=this._buff.substr(n-64),this},m.prototype.end=function(e){var t=this._buff,n=t.length,r,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],s;for(r=0;r<n;r+=1)i[r>>2]|=t.charCodeAt(r)<<(r%4<<3);return this._finish(i,n),s=e?this._state:d(this._state),this.reset(),s},m.prototype._finish=function(e,t){var n=t,r,i,s;e[n>>2]|=128<<(n%4<<3);if(n>55){u(this._state,e);for(n=0;n<16;n+=1)e[n]=0}r=this._length*8,r=r.toString(16).match(/(.*?)(.{0,8})$/),i=parseInt(r[2],16),s=parseInt(r[1],16)||0,e[14]=i,e[15]=s,u(this._state,e)},m.prototype.reset=function(){return this._buff="",this._length=0,this._state=[1732584193,-271733879,-1732584194,271733878],this},m.prototype.destroy=function(){delete this._state,delete this._buff,delete this._length},m.hash=function(e,t){/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e)));var n=l(e);return t?n:d(n)},m.hashBinary=function(e,t){var n=l(e);return t?n:d(n)},m.ArrayBuffer=function(){this.reset()},m.ArrayBuffer.prototype.append=function(e){var t=this._concatArrayBuffer(this._buff,e),n=t.length,r;this._length+=e.byteLength;for(r=64;r<=n;r+=64)u(this._state,f(t.subarray(r-64,r)));return this._buff=r-64<n?t.subarray(r-64):new Uint8Array(0),this},m.ArrayBuffer.prototype.end=function(e){var t=this._buff,n=t.length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],i,s;for(i=0;i<n;i+=1)r[i>>2]|=t[i]<<(i%4<<3);return this._finish(r,n),s=e?this._state:d(this._state),this.reset(),s},m.ArrayBuffer.prototype._finish=m.prototype._finish,m.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._state=[1732584193,-271733879,-1732584194,271733878],this},m.ArrayBuffer.prototype.destroy=m.prototype.destroy,m.ArrayBuffer.prototype._concatArrayBuffer=function(e,t){var n=e.length,r=new Uint8Array(n+t.byteLength);return r.set(e),r.set(new Uint8Array(t),n),r},m.ArrayBuffer.hash=function(e,t){var n=c(new Uint8Array(e));return t?n:d(n)},e.register("Md5",{init:function(){},loadFromBlob:function(e){var t=e.getSource(),n=2097152,r=Math.ceil(t.size/n),i=0,s=this.owner,o=new m.ArrayBuffer,u=this,a=t.mozSlice||t.webkitSlice||t.slice,f,l;l=new FileReader,f=function(){var c,h;c=i*n,h=Math.min(c+n,t.size),l.onload=function(t){o.append(t.target.result),s.trigger("progress",{total:e.size,loaded:h})},l.onloadend=function(){l.onloadend=l.onload=null,++i<r?setTimeout(f,1):setTimeout(function(){s.trigger("load"),u.result=o.end(),f=e=t=o=null,s.trigger("complete")},50)},l.readAsArrayBuffer(a.call(t,c,h))},f()},getResult:function(){return this.result}})}),t("runtime/flash/runtime",["base","runtime/runtime","runtime/compbase"],function(t,n,r){function u(){var e;try{e=navigator.plugins["Shockwave Flash"],e=e.description}catch(t){try{e=(new ActiveXObject("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version")}catch(n){e="0.0"}}return e=e.match(/\d+/g),parseFloat(e[0]+"."+e[1],10)}function a(){function l(e,t){var n=e.type||e,r,s;r=n.split("::"),s=r[0],n=r[1],n==="Ready"&&s===a.uid?a.trigger("ready"):i[s]&&i[s].trigger(n.toLowerCase(),e,t)}var r={},i={},u=this.destroy,a=this,f=t.guid("webuploader_");n.apply(a,arguments),a.type=s,a.exec=function(e,n){var s=this,u=s.uid,f=t.slice(arguments,2),l;i[u]=s;if(o[e]){r[u]||(r[u]=new o[e](s,a)),l=r[u];if(l[n])return l[n].apply(l,f)}return a.flashExec.apply(s,arguments)},e[f]=function(){var e=arguments;setTimeout(function(){l.apply(null,e)},1)},this.jsreciver=f,this.destroy=function(){return u&&u.apply(this,arguments)},this.flashExec=function(e,n){var r=a.getFlash(),i=t.slice(arguments,2);return r.exec(this.uid,e,n,i)}}var i=t.$,s="flash",o={};return t.inherits(n,{constructor:a,init:function(){var e=this.getContainer(),n=this.options,r;e.css({position:"absolute",top:"-8px",left:"-8px",width:"9px",height:"9px",overflow:"hidden"}),r='<object id="'+this.uid+'" type="application/'+'x-shockwave-flash" data="'+n.swf+'" ',t.browser.ie&&(r+='classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" '),r+='width="100%" height="100%" style="outline:0"><param name="movie" value="'+n.swf+'" />'+'<param name="flashvars" value="uid='+this.uid+"&jsreciver="+this.jsreciver+'" />'+'<param name="wmode" value="transparent" />'+'<param name="allowscriptaccess" value="always" />'+"</object>",e.html(r)},getFlash:function(){return this._flash?this._flash:(this._flash=i("#"+this.uid).get(0),this._flash)}}),a.register=function(e,n){return n=o[e]=t.inherits(r,i.extend({flashExec:function(){var e=this.owner,t=this.getRuntime();return t.flashExec.apply(e,arguments)}},n)),n},u()>=11.4&&n.addRuntime(s,a),a}),t("runtime/flash/filepicker",["base","runtime/flash/runtime"],function(e,t){var n=e.$;return t.register("FilePicker",{init:function(e){var t=n.extend({},e),r,i;r=t.accept&&t.accept.length;for(i=0;i<r;i++)t.accept[i].title||(t.accept[i].title="Files");delete t.button,delete t.id,delete t.container,this.flashExec("FilePicker","init",t)},destroy:function(){this.flashExec("FilePicker","destroy")}})}),t("runtime/flash/image",["runtime/flash/runtime"],function(e){return e.register("Image",{loadFromBlob:function(e){var t=this.owner;t.info()&&this.flashExec("Image","info",t.info()),t.meta()&&this.flashExec("Image","meta",t.meta()),this.flashExec("Image","loadFromBlob",e.uid)}})}),t("runtime/flash/transport",["base","runtime/flash/runtime","runtime/client"],function(t,n,r){var i=t.$;return n.register("Transport",{init:function(){this._status=0,this._response=null,this._responseJson=null},send:function(){var e=this.owner,t=this.options,n=this._initAjax(),r=e._blob,s=t.server,o;n.connectRuntime(r.ruid),t.sendAsBinary?(s+=(/\?/.test(s)?"&":"?")+i.param(e._formData),o=r.uid):(i.each(e._formData,function(e,t){n.exec("append",e,t)}),n.exec("appendBlob",t.fileVal,r.uid,t.filename||e._formData.name||"")),this._setRequestHeader(n,t.headers),n.exec("send",{method:t.method,url:s,forceURLStream:t.forceURLStream,mimeType:"application/octet-stream"},o)},getStatus:function(){return this._status},getResponse:function(){return this._response||""},getResponseAsJson:function(){return this._responseJson},abort:function(){var e=this._xhr;e&&(e.exec("abort"),e.destroy(),this._xhr=e=null)},destroy:function(){this.abort()},_initAjax:function(){var t=this,n=new r("XMLHttpRequest");return n.on("uploadprogress progress",function(e){var n=e.loaded/e.total;return n=Math.min(1,Math.max(0,n)),t.trigger("progress",n)}),n.on("load",function(){var r=n.exec("getStatus"),i=!1,s="",o;return n.off(),t._xhr=null,r>=200&&r<300?i=!0:r>=500&&r<600?(i=!0,s="server"):s="http",i&&(t._response=n.exec("getResponse"),t._response=decodeURIComponent(t._response),o=function(t){try{return e.JSON&&e.JSON.parse?JSON.parse(t):(new Function("return "+t)).call()}catch(n){return{}}},t._responseJson=t._response?o(t._response):{}),n.destroy(),n=null,s?t.trigger("error",s):t.trigger("load")}),n.on("error",function(){n.off(),t._xhr=null,t.trigger("error","http")}),t._xhr=n,n},_setRequestHeader:function(e,t){i.each(t,function(t,n){e.exec("setRequestHeader",t,n)})}})}),t("runtime/flash/blob",["runtime/flash/runtime","lib/blob"],function(e,t){return e.register("Blob",{slice:function(e,n){var r=this.flashExec("Blob","slice",e,n);return new t(this.getRuid(),r)}})}),t("runtime/flash/md5",["runtime/flash/runtime"],function(e){return e.register("Md5",{init:function(){},loadFromBlob:function(e){return this.flashExec("Md5","loadFromBlob",e.uid)}})}),t("preset/all",["base","widgets/filednd","widgets/filepaste","widgets/filepicker","widgets/image","widgets/queue","widgets/runtime","widgets/upload","widgets/validator","widgets/md5","runtime/html5/blob","runtime/html5/dnd","runtime/html5/filepaste","runtime/html5/filepicker","runtime/html5/imagemeta/exif","runtime/html5/androidpatch","runtime/html5/image","runtime/html5/transport","runtime/html5/md5","runtime/flash/filepicker","runtime/flash/image","runtime/flash/transport","runtime/flash/blob","runtime/flash/md5"],function(e){return e}),t("webuploader",["preset/all"],function(e){return e}),n("webuploader")}),!function(e,t){var n,r={},i=function(e,t){var n,r,i;if("string"==typeof e)return u(e);for(n=[],r=e.length,i=0;i<r;i++)n.push(u(e[i]));return t.apply(null,n)},s=function(e,t,n){2===arguments.length&&(n=t,t=null),i(t||[],function(){o(e,n,arguments)})},o=function(e,t,n){var s,o={exports:t};"function"==typeof t&&(n.length||(n=[i,o.exports,o]),(s=t.apply(null,n))!==undefined&&(o.exports=s)),r[e]=o.exports},u=function(t){var n=r[t]||e[t];if(!n)throw new Error("`"+t+"` is undefined");return n},a=function(e){var t,n,i,s,o,u;u=function(e){return e&&e.charAt(0).toUpperCase()+e.substr(1)};for(t in r)if(n=e,r.hasOwnProperty(t)){for(i=t.split("/"),o=u(i.pop());s=u(i.shift());)n[s]=n[s]||{},n=n[s];n[o]=r[t]}return e},f=function(n){return e.__dollar=n,a(t(e,s,i))};"object"==typeof module&&"object"==typeof module.exports?module.exports=f():"function"==typeof define&&define.amd?define(["jquery"],f):(n=e.S3WebUploader,e.S3WebUploader=f(),e.S3WebUploader.noConflict=function(){e.S3WebUploader=n})}(window,function(e,t,n){return t("dollar-third",[],function(){var t=e.require,n=e.__dollar||e.jQuery||e.Zepto||t("jquery")||t("zepto");if(!n)throw new Error("jQuery or Zepto not found!");return n}),t("dollar",["dollar-third"],function(e){return e}),t("promise-third",["dollar"],function(e){return{Deferred:e.Deferred,when:e.when,isPromise:function(e){return e&&"function"==typeof e.then}}}),t("promise",["promise-third"],function(e){return e}),t("base",["dollar","promise"],function(t,n){function r(e,t){return function(){return e.apply(t,arguments)}}function i(e){var t;return Object.create?Object.create(e):(t=function(){},t.prototype=e,new t)}var s=function(){},o=Function.call;return{version:"0.1.6",$:t,Deferred:n.Deferred,isPromise:n.isPromise,when:n.when,browser:function(e){var t={},n=e.match(/WebKit\/([\d.]+)/),r=e.match(/Chrome\/([\d.]+)/)||e.match(/CriOS\/([\d.]+)/),i=e.match(/MSIE\s([\d\.]+)/)||e.match(/(?:trident)(?:.*rv:([\w.]+))?/i),s=e.match(/Firefox\/([\d.]+)/),o=e.match(/Safari\/([\d.]+)/),u=e.match(/OPR\/([\d.]+)/);return n&&(t.webkit=parseFloat(n[1])),r&&(t.chrome=parseFloat(r[1])),i&&(t.ie=parseFloat(i[1])),s&&(t.firefox=parseFloat(s[1])),o&&(t.safari=parseFloat(o[1])),u&&(t.opera=parseFloat(u[1])),t}(navigator.userAgent),os:function(e){var t={},n=!!e.match(/\(Macintosh\; Intel /),r=e.match(/(?:Android);?[\s\/]+([\d.]+)?/),i=e.match(/(?:iPad|iPod|iPhone).*OS\s([\d_]+)/);return n&&(t.osx=!0),r&&(t.android=parseFloat(r[1])),i&&(t.ios=parseFloat(i[1].replace(/_/g,"."))),t}(navigator.userAgent),inherits:function(e,n,r){var s;return"function"==typeof n?(s=n,n=null):s=n&&n.hasOwnProperty("constructor")?n.constructor:function(){return e.apply(this,arguments)},t.extend(!0,s,e,r||{}),s.__super__=e.prototype,s.prototype=i(e.prototype),n&&t.extend(!0,s.prototype,n),s},noop:s,bindFn:r,log:function(){return e.console?r(console.log,console):s}(),nextTick:function(){return function(e){setTimeout(e,1)}}(),slice:function(e){return function(){return o.apply(e,arguments)}}([].slice),guid:function(){var e=0;return function(t){for(var n=(+(new Date)).toString(32),r=0;r<5;r++)n+=Math.floor(65535*Math.random()).toString(32);return(t||"wu_")+n+(e++).toString(32)}}(),formatSize:function(e,t,n){var r;for(n=n||["B","K","M","G","TB"];(r=n.shift())&&e>1024;)e/=1024;return("B"===r?e:e.toFixed(t||2))+r},ksort:function(e){var t=[];for(var n in e)t.push(n);t=t.sort();for(var r={},n=0;n<t.length;n++)r[t[n]]=e[t[n]];return r},getUrlParams:function(e){var t="";for(var n in e)t&&(t+="&"),t+=n,t+="=",t+=e[n];return"?"+t}}}),t("mediator",["base"],function(e){function t(e,t,n,r){return s.grep(e,function(e){return e&&(!t||e.e===t)&&(!n||e.cb===n||e.cb._cb===n)&&(!r||e.ctx===r)})}function n(e,t,n){s.each((e||"").split(u),function(e,r){n(r,t)})}function r(e,t){for(var n,r=!1,i=-1,s=e.length;++i<s;)if(n=e[i],!1===n.cb.apply(n.ctx2,t)){r=!0;break}return!r}var i,s=e.$,o=[].slice,u=/\s+/;return i={on:function(e,t,r){var i,s=this;return t?(i=this._events||(this._events=[]),n(e,t,function(e,t){var n={e:e};n.cb=t,n.ctx=r,n.ctx2=r||s,n.id=i.length,i.push(n)}),this):this},once:function(e,t,r){var i=this;return t?(n(e,t,function(e,t){var n=function(){return i.off(e,n),t.apply(r||i,arguments)};n._cb=t,i.on(e,n,r)}),i):i},off:function(e,r,i){var o=this._events;return o?e||r||i?(n(e,r,function(e,n){s.each(t(o,e,n,i),function(){delete o[this.id]})}),this):(this._events=[],this):this},trigger:function(e){var n,i,s;return this._events&&e?(n=o.call(arguments,1),i=t(this._events,e),s=t(this._events,"all"),r(i,n)&&r(s,arguments)):this}},s.extend({installTo:function(e){return s.extend(e,i)}},i)}),t("uploader",["base","mediator"],function(e,t){function n(e){this.options=r.extend(!0,{},n.options,e),this._init(this.options)}var r=e.$;return n.options={},t.installTo(n.prototype),r.each({upload:"start-upload",stop:"stop-upload",getFile:"get-file",getFiles:"get-files",addFile:"add-file",addFiles:"add-file",sort:"sort-files",removeFile:"remove-file",cancelFile:"cancel-file",skipFile:"skip-file",retry:"retry",isInProgress:"is-in-progress",makeThumb:"make-thumb",md5File:"md5-file",getDimension:"get-dimension",addButton:"add-btn",predictRuntimeType:"predict-runtime-type",refresh:"refresh",disable:"disable",enable:"enable",reset:"reset"},function(e,t){n.prototype[e]=function(){return this.request(t,arguments)}}),r.extend(n.prototype,{state:"pending",_init:function(e){var t=this;t.request("init",e,function(){t.state="ready",t.trigger("ready")})},option:function(e,t){var n=this.options;if(!(arguments.length>1))return e?n[e]:n;r.isPlainObject(t)&&r.isPlainObject(n[e])?r.extend(n[e],t):n[e]=t},getStats:function(){var e=this.request("get-stats");return e?{successNum:e.numOfSuccess,progressNum:e.numOfProgress,cancelNum:e.numOfCancel,invalidNum:e.numOfInvalid,uploadFailNum:e.numOfUploadFailed,queueNum:e.numOfQueue,interruptNum:e.numofInterrupt}:{}},trigger:function(e){var n=[].slice.call(arguments,1),s=this.options,o="on"+e.substring(0,1).toUpperCase()+e.substring(1);return!(!1===t.trigger.apply(this,arguments)||r.isFunction(s[o])&&!1===s[o].apply(this,n)||r.isFunction(this[o])&&!1===this[o].apply(this,n)||!1===t.trigger.apply(t,[this,e].concat(n)))},destroy:function(){this.request("destroy",arguments),this.off()},request:e.noop}),e.create=n.create=function(e){return new n(e)},e.Uploader=n,n}),t("runtime/runtime",["base","mediator"],function(e,t){function n(t){this.options=r.extend({container:document.body},t),this.uid=e.guid("rt_")}var r=e.$,i={},s=function(e){for(var t in e)if(e.hasOwnProperty(t))return t;return null};return r.extend(n.prototype,{getContainer:function(){var e,t,n=this.options;return this._container?this._container:(e=r(n.container||document.body),t=r(document.createElement("div")),t.attr("id","rt_"+this.uid),t.css({position:"absolute",top:"0px",left:"0px",width:"1px",height:"1px",overflow:"hidden"}),e.append(t),e.addClass("webuploader-container"),this._container=t,this._parent=e,t)},init:e.noop,exec:e.noop,destroy:function(){this._container&&this._container.remove(),this._parent&&this._parent.removeClass("webuploader-container"),this.off()}}),n.orders="html5,flash",n.addRuntime=function(e,t){i[e]=t},n.hasRuntime=function(e){return e?!!i[e]:!!s(i)},n.create=function(e,t){var u;if(t=t||n.orders,r.each(t.split(/\s*,\s*/g),function(){if(i[this])return u=this,!1}),!(u=u||s(i)))throw new Error("Runtime Error");return new i[u](e)},t.installTo(n.prototype),n}),t("runtime/client",["base","mediator","runtime/runtime"],function(e,t,n){function r(t,r){var s,o=e.Deferred();this.uid=e.guid("client_"),this.runtimeReady=function(e){return o.done(e)},this.connectRuntime=function(t,u){if(s)throw new Error("already connected!");return o.done(u),"string"==typeof t&&i.get(t)&&(s=i.get(t)),s=s||i.get(null,r),s?(e.$.extend(s.options,t),s.__promise.then(o.resolve),s.__client++):(s=n.create(t,t.runtimeOrder),s.__promise=o.promise(),s.once("ready",o.resolve),s.init(),i.add(s),s.__client=1),r&&(s.__standalone=r),s},this.getRuntime=function(){return s},this.disconnectRuntime=function(){s&&(s.__client--,s.__client<=0&&(i.remove(s),delete s.__promise,s.destroy()),s=null)},this.exec=function(){if(s){var n=e.slice(arguments);return t&&n.unshift(t),s.exec.apply(this,n)}},this.getRuid=function(){return s&&s.uid},this.destroy=function(e){return function(){e&&e.apply(this,arguments),this.trigger("destroy"),this.off(),this.exec("destroy"),this.disconnectRuntime()}}(this.destroy)}var i;return i=function(){var e={};return{add:function(t){e[t.uid]=t},get:function(t,n){var r;if(t)return e[t];for(r in e)if(!n||!e[r].__standalone)return e[r];return null},remove:function(t){delete e[t.uid]}}}(),t.installTo(r.prototype),r}),t("lib/dnd",["base","mediator","runtime/client"],function(e,t,n){function r(e){e=this.options=i.extend({},r.options,e),e.container=i(e.container),e.container.length&&n.call(this,"DragAndDrop")}var i=e.$;return r.options={accept:null,disableGlobalDnd:!1},e.inherits(n,{constructor:r,init:function(){var e=this;e.connectRuntime(e.options,function(){e.exec("init"),e.trigger("ready")})}}),t.installTo(r.prototype),r}),t("widgets/widget",["base","uploader"],function(e,t){function n(e){if(!e)return!1;var t=e.length,n=i.type(e);return 1===e.nodeType&&!!t||"array"===n||"function"!==n&&"string"!==n&&(0===t||"number"==typeof t&&t>0&&t-1 in e)}function r(e){this.owner=e,this.options=e.options}var i=e.$,s=t.prototype._init,o=t.prototype.destroy,u={},a=[];return i.extend(r.prototype,{init:e.noop,invoke:function(e,t){var n=this.responseMap;return n&&e in n&&n[e]in this&&i.isFunction(this[n[e]])?this[n[e]].apply(this,t):u},request:function(){return this.owner.request.apply(this.owner,arguments)}}),i.extend(t.prototype,{_init:function(){var e=this,t=e._widgets=[],n=e.options.disableWidgets||"";return i.each(a,function(r,i){(!n||!~n.indexOf(i._name))&&t.push(new i(e))}),s.apply(e,arguments)},request:function(t,r,i){var s,o,a,f,l=0,c=this._widgets,h=c&&c.length,p=[],d=[];for(r=n(r)?r:[r];l<h;l++)s=c[l],(o=s.invoke(t,r))!==u&&(e.isPromise(o)?d.push(o):p.push(o));return i||d.length?(a=e.when.apply(e,d),f=a.pipe?"pipe":"then",a[f](function(){var t=e.Deferred(),n=arguments;return 1===n.length&&(n=n[0]),setTimeout(function(){t.resolve(n)},1),t.promise()})[i?f:"done"](i||e.noop)):p[0]},destroy:function(){o.apply(this,arguments),this._widgets=null}}),t.register=r.register=function(t,n){var s,o={init:"init",destroy:"destroy",name:"anonymous"};return 1===arguments.length?(n=t,i.each(n,function(e){if("_"===e[0]||"name"===e)return void ("name"===e&&(o.name=n.name));o[e.replace(/[A-Z]/g,"-$&").toLowerCase()]=e})):o=i.extend(o,t),n.responseMap=o,s=e.inherits(r,n),s._name=o.name,a.push(s),s},t.unRegister=r.unRegister=function(e){if(e&&"anonymous"!==e)for(var t=a.length;t--;)a[t]._name===e&&a.splice(t,1)},r}),t("widgets/filednd",["base","uploader","lib/dnd","widgets/widget"],function(e,t,n){var r=e.$;return t.options.dnd="",t.register({name:"dnd",init:function(t){if(t.dnd&&"html5"===this.request("predict-runtime-type")){var s,o=this,u=e.Deferred(),a=r.extend({},{disableGlobalDnd:t.disableGlobalDnd,container:t.dnd,accept:t.accept});return this.dnd=s=new n(a),s.once("ready",u.resolve),s.on("drop",function(e){o.request("add-file",[e])}),s.on("accept",function(e){return o.owner.trigger("dndAccept",e)}),s.init(),u.promise()}},destroy:function(){this.dnd&&this.dnd.destroy()}})}),t("lib/filepaste",["base","mediator","runtime/client"],function(e,t,n){function r(e){e=this.options=i.extend({},e),e.container=i(e.container||document.body),n.call(this,"FilePaste")}var i=e.$;return e.inherits(n,{constructor:r,init:function(){var e=this;e.connectRuntime(e.options,function(){e.exec("init"),e.trigger("ready")})}}),t.installTo(r.prototype),r}),t("widgets/filepaste",["base","uploader","lib/filepaste","widgets/widget"],function(e,t,n){var r=e.$;return t.register({name:"paste",init:function(t){if(t.paste&&"html5"===this.request("predict-runtime-type")){var s,o=this,u=e.Deferred(),a=r.extend({},{container:t.paste,accept:t.accept});return this.paste=s=new n(a),s.once("ready",u.resolve),s.on("paste",function(e){o.owner.request("add-file",[e])}),s.init(),u.promise()}},destroy:function(){this.paste&&this.paste.destroy()}})}),t("lib/blob",["base","runtime/client"],function(e,t){function n(e,n){var r=this;r.source=n,r.ruid=e,this.size=n.size||0,!n.type&&this.ext&&~"jpg,jpeg,png,gif,bmp".indexOf(this.ext)?this.type="image/"+("jpg"===this.ext?"jpeg":this.ext):this.type=n.type||"application/octet-stream",t.call(r,"Blob"),this.uid=n.uid||this.uid,e&&r.connectRuntime(e)}return e.inherits(t,{constructor:n,slice:function(e,t){return this.exec("slice",e,t)},getSource:function(){return this.source}}),n}),t("lib/file",["base","lib/blob"],function(e,t){function n(e,n){var s;this.name=n.name||"untitled"+r++,s=i.exec(n.name)?RegExp.$1.toLowerCase():"",!s&&n.type&&(s=/\/(jpg|jpeg|png|gif|bmp)$/i.exec(n.type)?RegExp.$1.toLowerCase():"",this.name+="."+s),this.ext=s,this.lastModifiedDate=n.lastModified||n.lastModifiedDate||(new Date).toLocaleString(),t.apply(this,arguments)}var r=1,i=/\.([^.]+)$/;return e.inherits(t,n)}),t("lib/filepicker",["base","runtime/client","lib/file"],function(t,n,r){function i(e){if(e=this.options=s.extend({},i.options,e),e.container=s(e.id),!e.container.length)throw new Error("\u6309\u94ae\u6307\u5b9a\u9519\u8bef");e.innerHTML=e.innerHTML||e.label||e.container.html()||"",e.button=s(e.button||document.createElement("div")),e.button.html(e.innerHTML),e.container.html(e.button),n.call(this,"FilePicker",!0)}var s=t.$;return i.options={button:null,container:null,label:null,innerHTML:null,multiple:!0,accept:null,name:"file",style:"webuploader-pick"},t.inherits(n,{constructor:i,init:function(){var n=this,i=n.options,u=i.button,a=i.style;a&&u.addClass("webuploader-pick"),n.on("all",function(e){var t;switch(e){case"mouseenter":a&&u.addClass("webuploader-pick-hover");break;case"mouseleave":a&&u.removeClass("webuploader-pick-hover");break;case"change":t=n.exec("getFiles"),n.trigger("select",s.map(t,function(e){return e=new r(n.getRuid(),e),e._refer=i.container,e}),i.container)}}),n.connectRuntime(i,function(){n.refresh(),n.exec("init",i),n.trigger("ready")}),this._resizeHandler=t.bindFn(this.refresh,this),s(e).on("resize",this._resizeHandler)},refresh:function(){var e=this.getRuntime().getContainer(),t=this.options.button,n=t.outerWidth?t.outerWidth():t.width(),r=t.outerHeight?t.outerHeight():t.height(),i=t.offset();n&&r&&e.css({bottom:"auto",right:"auto",width:n+"px",height:r+"px"}).offset(i)},enable:function(){this.options.button.removeClass("webuploader-pick-disable"),this.refresh()},disable:function(){var e=this.options.button;this.getRuntime().getContainer().css({top:"-99999px"}),e.addClass("webuploader-pick-disable")},destroy:function(){var t=this.options.button;s(e).off("resize",this._resizeHandler),t.removeClass("webuploader-pick-disable webuploader-pick-hover webuploader-pick")}}),i}),t("widgets/filepicker",["base","uploader","lib/filepicker","widgets/widget"],function(e,t,n){var r=e.$;return r.extend(t.options,{pick:null,accept:null}),t.register({name:"picker",init:function(e){return this.pickers=[],e.pick&&this.addBtn(e.pick)},refresh:function(){r.each(this.pickers,function(){this.refresh()})},addBtn:function(t){var s=this,o=s.options,u=o.accept,a=[];if(t)return r.isPlainObject(t)||(t={id:t}),r(t.id).each(function(){var f,l,c;c=e.Deferred(),f=r.extend({},t,{accept:r.isPlainObject(u)?[u]:u,swf:o.swf,runtimeOrder:o.runtimeOrder,id:this}),l=new n(f),l.once("ready",c.resolve),l.on("select",function(e){s.owner.request("add-file",[e])}),l.on("dialogopen",function(){s.owner.trigger("dialogOpen",l.button)}),l.init(),s.pickers.push(l),a.push(c.promise())}),e.when.apply(e,a)},disable:function(){r.each(this.pickers,function(){this.disable()})},enable:function(){r.each(this.pickers,function(){this.enable()})},destroy:function(){r.each(this.pickers,function(){this.destroy()}),this.pickers=null}})}),t("lib/image",["base","runtime/client","lib/blob"],function(e,t,n){function r(e){this.options=i.extend({},r.options,e),t.call(this,"Image"),this.on("load",function(){this._info=this.exec("info"),this._meta=this.exec("meta")})}var i=e.$;return r.options={quality:90,crop:!1,preserveHeaders:!1,allowMagnify:!1},e.inherits(t,{constructor:r,info:function(e){return e?(this._info=e,this):this._info},meta:function(e){return e?(this._meta=e,this):this._meta},loadFromBlob:function(e){var t=this,n=e.getRuid();this.connectRuntime(n,function(){t.exec("init",t.options),t.exec("loadFromBlob",e)})},resize:function(){var t=e.slice(arguments);return this.exec.apply(this,["resize"].concat(t))},crop:function(){var t=e.slice(arguments);return this.exec.apply(this,["crop"].concat(t))},getAsDataUrl:function(e){return this.exec("getAsDataUrl",e)},getAsBlob:function(e){var t=this.exec("getAsBlob",e);return new n(this.getRuid(),t)}}),r}),t("widgets/image",["base","uploader","lib/image","widgets/widget"],function(e,t,n){var r,i=e.$;return r=function(e){var t=0,n=[],r=function(){for(var e;n.length&&t<5242880;)e=n.shift(),t+=e[0],e[1]()};return function(e,i,s){n.push([i,s]),e.once("destroy",function(){t-=i,setTimeout(r,1)}),setTimeout(r,1)}}(),i.extend(t.options,{thumb:{width:110,height:110,quality:70,allowMagnify:!0,crop:!0,preserveHeaders:!1,type:"image/jpeg"},compress:{width:1600,height:1600,quality:90,allowMagnify:!1,crop:!1,preserveHeaders:!0}}),t.register({name:"image",makeThumb:function(e,t,s,o){var u,a;if(e=this.request("get-file",e),!e.type.match(/^image/))return void t(!0);u=i.extend({},this.options.thumb),i.isPlainObject(s)&&(u=i.extend(u,s),s=null),s=s||u.width,o=o||u.height,a=new n(u),a.once("load",function(){e._info=e._info||a.info(),e._meta=e._meta||a.meta(),s<=1&&s>0&&(s=e._info.width*s),o<=1&&o>0&&(o=e._info.height*o),a.resize(s,o)}),a.once("complete",function(){t(!1,a.getAsDataUrl(u.type)),a.destroy()}),a.once("error",function(e){t(e||!0),a.destroy()}),r(a,e.source.size,function(){e._info&&a.info(e._info),e._meta&&a.meta(e._meta),a.loadFromBlob(e.source)})},beforeSendFile:function(t){var r,s,o=this.options.compress||this.options.resize,u=o&&o.compressSize||0,a=o&&o.noCompressIfLarger||!1;if(t=this.request("get-file",t),o&&~"image/jpeg,image/jpg".indexOf(t.type)&&!(t.size<u)&&!t._compressed)return o=i.extend({},o),s=e.Deferred(),r=new n(o),s.always(function(){r.destroy(),r=null}),r.once("error",s.reject),r.once("load",function(){var e=o.width,n=o.height;t._info=t._info||r.info(),t._meta=t._meta||r.meta(),e<=1&&e>0&&(e=t._info.width*e),n<=1&&n>0&&(n=t._info.height*n),r.resize(e,n)}),r.once("complete",function(){var e,n;try{e=r.getAsBlob(o.type),n=t.size,(!a||e.size<n)&&(t.source=e,t.size=e.size,t.trigger("resize",e.size,n)),t._compressed=!0,s.resolve()}catch(i){s.resolve()}}),t._info&&r.info(t._info),t._meta&&r.meta(t._meta),r.loadFromBlob(t.source),s.promise()}})}),t("file",["base","mediator"],function(e,t){function n(){return s+o++}function r(e){this.name=e.name||"Untitled",this.size=e.size||0,this.type=e.type||"application/octet-stream",this.lastModifiedDate=e.lastModifiedDate||1*new Date,this.id=n(),this.ext=u.exec(this.name)?RegExp.$1:"",this.statusText="",a[this.id]=r.Status.INITED,this.source=e,this.loaded=0,this.on("error",function(e){this.setStatus(r.Status.ERROR,e)})}var i=e.$,s="WU_FILE_",o=0,u=/\.([^.]+)$/,a={};return i.extend(r.prototype,{setStatus:function(e,t){var n=a[this.id];void 0!==t&&(this.statusText=t),e!==n&&(a[this.id]=e,this.trigger("statuschange",e,n))},getStatus:function(){return a[this.id]},getSource:function(){return this.source},destroy:function(){this.off(),delete a[this.id]}}),t.installTo(r.prototype),r.Status={INITED:"inited",QUEUED:"queued",PROGRESS:"progress",ERROR:"error",COMPLETE:"complete",CANCELLED:"cancelled",INTERRUPT:"interrupt",INVALID:"invalid"},r}),t("queue",["base","mediator","file"],function(e,t,n){function r(){this.stats={numOfQueue:0,numOfSuccess:0,numOfCancel:0,numOfProgress:0,numOfUploadFailed:0,numOfInvalid:0,numofDeleted:0,numofInterrupt:0},this._queue=[],this._map={}}var i=e.$,s=n.Status;return i.extend(r.prototype,{append:function(e){return this._queue.push(e),this._fileAdded(e),this},prepend:function(e){return this._queue.unshift(e),this._fileAdded(e),this},getFile:function(e){return"string"!=typeof e?e:this._map[e]},fetch:function(e){var t,n,r=this._queue.length;for(e=e||s.QUEUED,t=0;t<r;t++)if(n=this._queue[t],e===n.getStatus())return n;return null},sort:function(e){"function"==typeof e&&this._queue.sort(e)},getFiles:function(){for(var e,t=[].slice.call(arguments,0),n=[],r=0,s=this._queue.length;r<s;r++)e=this._queue[r],t.length&&!~i.inArray(e.getStatus(),t)||n.push(e);return n},removeFile:function(e){var t=this._map[e.id],n=this._queue.length;if(t){delete this._map[e.id];for(var r=0;r<n;r++)if(e.id===this._queue[r].id){this._queue.splice(r,1);break}e.destroy(),this.stats.numofDeleted++}},_fileAdded:function(e){var t=this;this._map[e.id]||(this._map[e.id]=e,e.on("statuschange",function(e,n){t._onFileStatusChange(e,n)}))},_onFileStatusChange:function(e,t){var n=this.stats;switch(t){case s.PROGRESS:n.numOfProgress--;break;case s.QUEUED:n.numOfQueue--;break;case s.ERROR:n.numOfUploadFailed--;break;case s.INVALID:n.numOfInvalid--;break;case s.INTERRUPT:n.numofInterrupt--}switch(e){case s.QUEUED:n.numOfQueue++;break;case s.PROGRESS:n.numOfProgress++;break;case s.ERROR:n.numOfUploadFailed++;break;case s.COMPLETE:n.numOfSuccess++;break;case s.CANCELLED:n.numOfCancel++;break;case s.INVALID:n.numOfInvalid++;break;case s.INTERRUPT:n.numofInterrupt++}}}),t.installTo(r.prototype),r}),t("widgets/queue",["base","uploader","queue","file","lib/file","runtime/client","widgets/widget"],function(e,t,n,r,i,s){var o=e.$,u=/\.\w+$/,a=r.Status;return t.register({name:"queue",init:function(t){var r,i,u,a,f,l,c,h=this;if(o.isPlainObject(t.accept)&&(t.accept=[t.accept]),t.accept){for(f=[],u=0,i=t.accept.length;u<i;u++)(a=t.accept[u].extensions)&&f.push(a);f.length&&(l="\\."+f.join(",").replace(/,/g,"$|\\.").replace(/\*/g,".*")+"$"),h.accept=new RegExp(l,"i")}if(h.queue=new n,h.stats=h.queue.stats,h.owner.uploadServer={},"html5"===this.request("predict-runtime-type"))return r=e.Deferred(),this.placeholder=c=new s("Placeholder"),c.connectRuntime({runtimeOrder:"html5"},function(){h._ruid=c.getRuid(),r.resolve()}),r.promise()},_wrapFile:function(e){if(!(e instanceof r)){if(!(e instanceof i)){if(!this._ruid)throw new Error("Can't add external files.");e=new i(this._ruid,e)}e=new r(e)}return e},acceptFile:function(e){return!(!e||!e.size||this.accept&&u.exec(e.name)&&!this.accept.test(e.name))},_addFile:function(e){var t=this;if(e=t._wrapFile(e),t.owner.trigger("beforeFileQueued",e))return t.acceptFile(e)?(t.queue.append(e),t.owner.trigger("fileQueued",e),e):void t.owner.trigger("error","Q_TYPE_DENIED",e)},getFile:function(e){return this.queue.getFile(e)},addFile:function(e){var t=this;if(e.length||(e=[e]),e.length>this.options.fileNumLimit)return void this.owner.trigger("error","Q_EXCEED_NUM_LIMIT",e.length);if(e=o.map(e,function(e){return t._addFile(e)}),e.length&&t.options.getUploadurl){var n=[];o.each(e,function(e,r){var i={fsize:r.size,object:r.source.name,parallel:t.options.threads,insertOnly:0===t.options.insertOnly?t.options.insertOnly:1},s={method:"POST",dataType:"json"},u=t.owner.uploadServer;r.extra&&o.extend(i,r.extra),o.extend(i,t.options.getUploadurl.formData),o.extend(s,t.options.getUploadurl),u[r.__hash]=null;var a=o.ajax({url:s.url,type:s.method?s.method:"POST",dataType:"jsonp"===s.method.toLowerCase()?"jsonp":"json",crossDomain:!0,xhrFields:{withCredentials:!0},data:i,error:function(){t.owner.trigger("error","Q_TYPE_ERROR",r)},success:function(e){u[r.__hash]=e.block_heads||[],u[r.__hash].total=e.block_num,u
[r.__hash].commit_url=e.commit_url,u[r.__hash].uploadresponse=e,t.owner.trigger("getupload-success",r,e)}});n.push(a)}),o.when.apply(this,n).done(function(){var n;for(n in t.owner.uploadServer)if(!t.owner.uploadServer[n])return;t.owner.trigger("filesQueued",e),t.options.auto&&setTimeout(function(){t.request("start-upload")},20)}).fail(function(){t.owner.trigger("error","Q_TYPE_ERROR")})}},getStats:function(){return this.stats},removeFile:function(e,t){var n=this;e=e.id?e:n.queue.getFile(e),this.request("cancel-file",e),t&&this.queue.removeFile(e)},getFiles:function(){return this.queue.getFiles.apply(this.queue,arguments)},fetchFile:function(){return this.queue.fetch.apply(this.queue,arguments)},retry:function(e,t){var n,r,i,s=this;if(e)return e=e.id?e:s.queue.getFile(e),e.setStatus(a.QUEUED),void (t||s.request("start-upload"));for(n=s.queue.getFiles(a.ERROR),r=0,i=n.length;r<i;r++)e=n[r],e.setStatus(a.QUEUED);s.request("start-upload")},sortFiles:function(){return this.queue.sort.apply(this.queue,arguments)},reset:function(){this.owner.trigger("reset"),this.queue=new n,this.stats=this.queue.stats},destroy:function(){this.reset(),this.placeholder&&this.placeholder.destroy()}})}),t("widgets/runtime",["uploader","runtime/runtime","widgets/widget"],function(e,t){return e.support=function(){return t.hasRuntime.apply(t,arguments)},e.register({name:"runtime",init:function(){if(!this.predictRuntimeType())throw Error("Runtime Error")},predictRuntimeType:function(){var e,n,r=this.options.runtimeOrder||t.orders,i=this.type;if(!i)for(r=r.split(/\s*,\s*/g),e=0,n=r.length;e<n;e++)if(t.hasRuntime(r[e])){this.type=i=r[e];break}return i}})}),t("lib/transport",["base","runtime/client","mediator"],function(e,t,n){function r(e){var n=this;e=n.options=i.extend(!0,{},r.options,e||{}),t.call(this,"Transport"),this._blob=null,this._formData=e.formData||{},this._headers=e.headers||{},this.totalTime=new Date-0,this.on("progress",this._timeout),this.on("load error",function(){n.trigger("progress",1),clearTimeout(n._timer)})}var i=e.$;return r.options={server:"",method:"POST",withCredentials:!1,fileVal:"file",timeout:12e4,formData:{},headers:{},sendAsBinary:!1},i.extend(r.prototype,{appendBlob:function(e,t,n){var r=this,i=r.options;r.getRuid()&&r.disconnectRuntime(),r.connectRuntime(t.ruid,function(){r.exec("init")}),r._blob=t,i.fileVal=e||i.fileVal,i.filename=n||i.filename},append:function(e,t){"object"==typeof e?i.extend(this._formData,e):this._formData[e]=t},setRequestHeader:function(e,t){"object"==typeof e?i.extend(this._headers,e):this._headers[e]=t},send:function(e){this.exec("send",e),this._timeout()},abort:function(){return clearTimeout(this._timer),this.exec("abort")},destroy:function(){this.trigger("destroy"),this.off(),this.exec("destroy"),this.disconnectRuntime()},getResponse:function(){return this.exec("getResponse")},getResponseAsJson:function(){return this.exec("getResponseAsJson")},getStatus:function(){return this.exec("getStatus")},_timeout:function(){var e=this,t=e.options.timeout;t&&(clearTimeout(e._timer),e._timer=setTimeout(function(){e.abort(),e.trigger("error","timeout")},t))}}),n.installTo(r.prototype),r}),t("lib/sha1",[],function(){function n(e){e?(a[0]=a[16]=a[1]=a[2]=a[3]=a[4]=a[5]=a[6]=a[7]=a[8]=a[9]=a[10]=a[11]=a[12]=a[13]=a[14]=a[15]=0,this.blocks=a):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.h0=1732584193,this.h1=4023233417,this.h2=2562383102,this.h3=271733878,this.h4=3285377520,this.block=this.start=this.bytes=0,this.finalized=this.hashed=!1,this.first=!0}var r="object"==typeof e?e:{};!r.JS_SHA1_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node&&(r=global);var i=(!r.JS_SHA1_NO_COMMON_JS&&"object"==typeof module&&module.exports,"function"==typeof t&&t.amd,"0123456789abcdef".split("")),s=[-2147483648,8388608,32768,128],o=[24,16,8,0],u=["hex","array","digest","arrayBuffer"],a=[],f=function(e){return function(t){return(new n(!0)).update(t)[e]()}};return n.prototype.update=function(e){if(!this.finalized){var t="string"!=typeof e;t&&e.constructor===r.ArrayBuffer&&(e=new Uint8Array(e));for(var n,i,s=0,u=e.length||0,a=this.blocks;s<u;){if(this.hashed&&(this.hashed=!1,a[0]=this.block,a[16]=a[1]=a[2]=a[3]=a[4]=a[5]=a[6]=a[7]=a[8]=a[9]=a[10]=a[11]=a[12]=a[13]=a[14]=a[15]=0),t)for(i=this.start;s<u&&i<64;++s)a[i>>2]|=e[s]<<o[3&i++];else for(i=this.start;s<u&&i<64;++s)n=e.charCodeAt(s),n<128?a[i>>2]|=n<<o[3&i++]:n<2048?(a[i>>2]|=(192|n>>6)<<o[3&i++],a[i>>2]|=(128|63&n)<<o[3&i++]):n<55296||n>=57344?(a[i>>2]|=(224|n>>12)<<o[3&i++],a[i>>2]|=(128|n>>6&63)<<o[3&i++],a[i>>2]|=(128|63&n)<<o[3&i++]):(n=65536+((1023&n)<<10|1023&e.charCodeAt(++s)),a[i>>2]|=(240|n>>18)<<o[3&i++],a[i>>2]|=(128|n>>12&63)<<o[3&i++],a[i>>2]|=(128|n>>6&63)<<o[3&i++],a[i>>2]|=(128|63&n)<<o[3&i++]);this.lastByteIndex=i,this.bytes+=i-this.start,i>=64?(this.block=a[16],this.start=i-64,this.hash(),this.hashed=!0):this.start=i}return this}},n.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex;e[16]=this.block,e[t>>2]|=s[3&t],this.block=e[16],t>=56&&(this.hashed||this.hash(),e[0]=this.block,e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[15]=this.bytes<<3,this.hash()}},n.prototype.hash=function(){var e,t,n,r=this.h0,i=this.h1,s=this.h2,o=this.h3,u=this.h4,a=this.blocks;for(t=16;t<80;++t)n=a[t-3]^a[t-8]^a[t-14]^a[t-16],a[t]=n<<1|n>>>31;for(t=0;t<20;t+=5)e=i&s|~i&o,n=r<<5|r>>>27,u=n+e+u+1518500249+a[t]<<0,i=i<<30|i>>>2,e=r&i|~r&s,n=u<<5|u>>>27,o=n+e+o+1518500249+a[t+1]<<0,r=r<<30|r>>>2,e=u&r|~u&i,n=o<<5|o>>>27,s=n+e+s+1518500249+a[t+2]<<0,u=u<<30|u>>>2,e=o&u|~o&r,n=s<<5|s>>>27,i=n+e+i+1518500249+a[t+3]<<0,o=o<<30|o>>>2,e=s&o|~s&u,n=i<<5|i>>>27,r=n+e+r+1518500249+a[t+4]<<0,s=s<<30|s>>>2;for(;t<40;t+=5)e=i^s^o,n=r<<5|r>>>27,u=n+e+u+1859775393+a[t]<<0,i=i<<30|i>>>2,e=r^i^s,n=u<<5|u>>>27,o=n+e+o+1859775393+a[t+1]<<0,r=r<<30|r>>>2,e=u^r^i,n=o<<5|o>>>27,s=n+e+s+1859775393+a[t+2]<<0,u=u<<30|u>>>2,e=o^u^r,n=s<<5|s>>>27,i=n+e+i+1859775393+a[t+3]<<0,o=o<<30|o>>>2,e=s^o^u,n=i<<5|i>>>27,r=n+e+r+1859775393+a[t+4]<<0,s=s<<30|s>>>2;for(;t<60;t+=5)e=i&s|i&o|s&o,n=r<<5|r>>>27,u=n+e+u-1894007588+a[t]<<0,i=i<<30|i>>>2,e=r&i|r&s|i&s,n=u<<5|u>>>27,o=n+e+o-1894007588+a[t+1]<<0,r=r<<30|r>>>2,e=u&r|u&i|r&i,n=o<<5|o>>>27,s=n+e+s-1894007588+a[t+2]<<0,u=u<<30|u>>>2,e=o&u|o&r|u&r,n=s<<5|s>>>27,i=n+e+i-1894007588+a[t+3]<<0,o=o<<30|o>>>2,e=s&o|s&u|o&u,n=i<<5|i>>>27,r=n+e+r-1894007588+a[t+4]<<0,s=s<<30|s>>>2;for(;t<80;t+=5)e=i^s^o,n=r<<5|r>>>27,u=n+e+u-899497514+a[t]<<0,i=i<<30|i>>>2,e=r^i^s,n=u<<5|u>>>27,o=n+e+o-899497514+a[t+1]<<0,r=r<<30|r>>>2,e=u^r^i,n=o<<5|o>>>27,s=n+e+s-899497514+a[t+2]<<0,u=u<<30|u>>>2,e=o^u^r,n=s<<5|s>>>27,i=n+e+i-899497514+a[t+3]<<0,o=o<<30|o>>>2,e=s^o^u,n=i<<5|i>>>27,r=n+e+r-899497514+a[t+4]<<0,s=s<<30|s>>>2;this.h0=this.h0+r<<0,this.h1=this.h1+i<<0,this.h2=this.h2+s<<0,this.h3=this.h3+o<<0,this.h4=this.h4+u<<0},n.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,r=this.h3,s=this.h4;return i[e>>28&15]+i[e>>24&15]+i[e>>20&15]+i[e>>16&15]+i[e>>12&15]+i[e>>8&15]+i[e>>4&15]+i[15&e]+i[t>>28&15]+i[t>>24&15]+i[t>>20&15]+i[t>>16&15]+i[t>>12&15]+i[t>>8&15]+i[t>>4&15]+i[15&t]+i[n>>28&15]+i[n>>24&15]+i[n>>20&15]+i[n>>16&15]+i[n>>12&15]+i[n>>8&15]+i[n>>4&15]+i[15&n]+i[r>>28&15]+i[r>>24&15]+i[r>>20&15]+i[r>>16&15]+i[r>>12&15]+i[r>>8&15]+i[r>>4&15]+i[15&r]+i[s>>28&15]+i[s>>24&15]+i[s>>20&15]+i[s>>16&15]+i[s>>12&15]+i[s>>8&15]+i[s>>4&15]+i[15&s]},n.prototype.toString=n.prototype.hex,n.prototype.digest=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,r=this.h3,i=this.h4;return[e>>24&255,e>>16&255,e>>8&255,255&e,t>>24&255,t>>16&255,t>>8&255,255&t,n>>24&255,n>>16&255,n>>8&255,255&n,r>>24&255,r>>16&255,r>>8&255,255&r,i>>24&255,i>>16&255,i>>8&255,255&i]},n.prototype.array=n.prototype.digest,n.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(20),t=new DataView(e);return t.setUint32(0,this.h0),t.setUint32(4,this.h1),t.setUint32(8,this.h2),t.setUint32(12,this.h3),t.setUint32(16,this.h4),e},function(){var e=f("hex");e.create=function(){return new n},e.update=function(t){return e.create().update(t)};for(var t=0;t<u.length;++t){var r=u[t];e[r]=f(r)}return e}()}),t("lib/md5",["runtime/client","mediator"],function(e,t){function n(){e.call(this,"Md5")}return t.installTo(n.prototype),n.prototype.loadFromBlob=function(e,t){var n=this;n.getRuid()&&n.disconnectRuntime(),n.connectRuntime(e.ruid,function(){n.exec("init"),n.exec("loadFromBlob",e,t)})},n.prototype.getResult=function(){return this.exec("getResult")},n}),t("widgets/upload",["base","uploader","file","lib/transport","widgets/widget","lib/sha1","lib/md5"],function(e,t,n,r,i,s,o){function u(e,t){var n,r,i=[],s=e.source,o=s.size,u=t?Math.ceil(o/t):1,a=0,f=0,l=this;for(r={file:e,has:function(){return 0!=l.owner.uploadServer[e.__hash].total},shift:function(){for(var t=l.owner.uploadServer[e.__hash],n=null,r=0;r<t.length;r++)if(!t[r].complete){n=i.slice(t[r].bid,t[r].bid+1)[0],n.uploadServer=t[r].next_block_url,t[r].complete=!0,t.total--;break}return n},unshift:function(t){var n=i.indexOf(t),r=l.owner.uploadServer[e.__hash];r.total++;for(var s=0;s<r.length;s++)if(r[s].bid==n){r[s].complete=!1;break}}};f<u;)n=Math.min(t,o-a),i.push({file:e,start:a,end:t?a+n:o,total:o,chunks:u,chunk:f++,cuted:r}),a+=n;return e.blocks=i.concat(),e.remaning=i.length,r}var a=e.$,f=e.isPromise,l=n.Status;a.extend(t.options,{prepareNextFile:!1,chunked:!0,chunkSize:524288,chunkRetry:2,threads:3,formData:{}}),t.options.chunkSize=524288,t.options.chunked=!0,t.register({name:"upload",init:function(){var t=this.owner,n=this;this.runing=!1,this.progress=!1,this.pointParams={pid:"H5",ver:e.browser.chrome||e.browser.ie||e.browser.firefox||e.browser.safari||e.browser.opera,sdkver:e.version,os:"none",net:"none",mid:"none",r:Math.random(),u:location.protocol+"//qos.live.360.cn/vc.gif",ty:"upload",dip:"none",bs:"524288"},t.on("startUpload",function(){n.progress=!0}).on("uploadFinished",function(){n.progress=!1}),this.pool=[],this.stack=[],this.pending=[],this.remaning=0,this.__tick=e.bindFn(this._tick,this),this.cdnReg=/(\/\/.+?)\//,t.on("uploadComplete",function(e){e.blocks&&a.each(e.blocks,function(e,t){t.transport&&(t.transport.abort(),t.transport.destroy()),delete t.transport}),delete e.blocks,delete e.remaning})},reset:function(){this.request("stop-upload",!0),this.runing=!1,this.pool=[],this.stack=[],this.pending=[],this.remaning=0,this._trigged=!1,this._promise=null},startUpload:function(t){var n=this;if(a.each(n.request("get-files",l.INVALID),function(){n.request("remove-file",this)}),t?(t=t.id?t:n.request("get-file",t),t.getStatus()===l.INTERRUPT?(t.setStatus(l.QUEUED),a.each(n.pool,function(e,n){n.file===t&&(n.transport&&n.transport.send(),t.setStatus(l.PROGRESS))})):t.getStatus()!==l.PROGRESS&&t.setStatus(l.QUEUED)):a.each(n.request("get-files",[l.INITED]),function(){this.setStatus(l.QUEUED)}),n.runing)return n.owner.trigger("startUpload",t),e.nextTick(n.__tick);n.runing=!0;var r=[];t||a.each(n.pool,function(e,t){var i=t.file;i.getStatus()===l.INTERRUPT&&(n._trigged=!1,r.push(i),t.transport&&t.transport.send())}),a.each(r,function(){this.setStatus(l.PROGRESS)}),t||a.each(n.request("get-files",l.INTERRUPT),function(){this.setStatus(l.PROGRESS)}),n._trigged=!1,e.nextTick(n.__tick),n.owner.trigger("startUpload")},stopUpload:function(t,n){var r=this;if(!0===t&&(n=t,t=null),!1!==r.runing){if(t){if(t=t.id?t:r.request("get-file",t),t.getStatus()!==l.PROGRESS&&t.getStatus()!==l.QUEUED)return;return t.setStatus(l.INTERRUPT),a.each(r.pool,function(e,i){i.file===t&&(i.transport&&i.transport.abort(),n&&(r._putback(i),r._popBlock(i)))}),r.owner.trigger("stopUpload",t),e.nextTick(r.__tick)}r.runing=!1,this._promise&&this._promise.file&&this._promise.file.setStatus(l.INTERRUPT),n&&a.each(r.pool,function(e,t){t.transport&&t.transport.abort(),t.file.setStatus(l.INTERRUPT)}),r.owner.trigger("stopUpload")}},cancelFile:function(e){e=e.id?e:this.request("get-file",e),e.blocks&&a.each(e.blocks,function(e,t){var n=t.transport;n&&(n.abort(),n.destroy(),delete t.transport)}),e.setStatus(l.CANCELLED),this.owner.trigger("fileDequeued",e)},isInProgress:function(){return!!this.progress},_getStats:function(){return this.request("get-stats")},skipFile:function(e,t){e=e.id?e:this.request("get-file",e),e.setStatus(t||l.COMPLETE),e.skipped=!0,e.blocks&&a.each(e.blocks,function(e,t){var n=t.transport;n&&(n.abort(),n.destroy(),delete t.transport)}),this.owner.trigger("uploadSkip",e)},_tick:function(){var t,n,r=this,i=r.options;if(r._promise)return r._promise.always(r.__tick);r.pool.length<i.threads&&(n=r._nextBlock())?(r._trigged=!1,t=function(t){r._promise=null,t&&t.file&&r._startSend(t),e.nextTick(r.__tick)},r._promise=f(n)?n.always(t):t(n)):r.remaning||r._getStats().numOfQueue||r._getStats().numofInterrupt||(r.runing=!1,r._trigged||e.nextTick(function(){r.owner.trigger("uploadFinished")}),r._trigged=!0)},_putback:function(e){var t;e.cuted.unshift(e),~(t=this.stack.indexOf(e.cuted))||this.stack.unshift(e.cuted)},_getStack:function(){for(var e,t=0;e=this.stack[t++];){if(e.has()&&e.file.getStatus()===l.PROGRESS)return e;(!e.has()||e.file.getStatus()!==l.PROGRESS&&e.file.getStatus()!==l.INTERRUPT)&&this.stack.splice(--t,1)}return null},_nextBlock:function(){var e,t,n,r,i=this,s=i.options;return(e=this._getStack())?(s.prepareNextFile&&!i.pending.length&&i._prepareNextFile(),e.shift()):i.runing?(!i.pending.length&&i._getStats().numOfQueue&&i._prepareNextFile(),t=i.pending.shift(),n=function(t){return t?(e=u.call(i,t,s.chunked?s.chunkSize:0),i.stack.push(e),e.shift()):null},f(t)?(r=t.file,t=t[t.pipe?"pipe":"then"](n),t.file=r,t):n(t)):void 0},_prepareNextFile:function(){var e,t=this,n=t.request("fetch-file"),r=t.pending;n&&(e=t.request("before-send-file",n,function(){return n.getStatus()===l.PROGRESS||n.getStatus()===l.INTERRUPT?n:t._finishFile(n)}),t.owner.trigger("uploadStart",n),n.setStatus(l.PROGRESS),e.file=n,e.done(function(){var t=a.inArray(e,r);~t&&r.splice(t,1,n)}),e.fail(function(e){n.setStatus(l.ERROR,e),t.owner.trigger("uploadError",n,e),t.owner.trigger("uploadComplete",n)}),r.push(e))},_popBlock:function(e){var t=a.inArray(e,this.pool);this.pool.splice(t,1),e.file.remaning--,this.remaning--},_startSend:function(t){var n,r=this,i=t.file;if(r._tickPoint(42,t,null,i),i.getStatus()!==l.PROGRESS)return void (i.getStatus()===l.INTERRUPT&&r._putback(t));r.pool.push(t),r.remaning++,t.blob=1===t.chunks?i.source:i.source.slice(t.start,t.end),n=r.request("before-send",t,function(){if(r.owner.fastestCdnUrl){var n=t.uploadServer.match(r.cdnReg)[1];t.uploadServer=t.uploadServer.replace(n,r.owner.fastestCdnUrl)}r.options.server=t.uploadServer,i.getStatus()===l.PROGRESS?r._doSend(t):(r._popBlock(t),e.nextTick(r.__tick))}),n.fail(function(){1===i.remaning?r._finishFile(i).always(function(){t.percentage=1,r._popBlock(t),r.owner.trigger("uploadComplete",i),e.nextTick(r.__tick)}):(t.percentage=1,r.updateFileProgress(i),r._popBlock(t),e.nextTick(r.__tick))})},_tickPoint:function(t,n,i,s){var o=a.extend({bid:this.options.bid,cid:this.options.cid},this.pointParams),u="";flagReg=/42|45/,o.st=t,o.rc=n&&n.retried?n.retried:0,o.block=n?n.chunk:0,o.er=flagReg.test(t)?0:-602,o.tm=new Date-0,o.ct=0,o.bs=s.size|o.bs;var f=0;s&&(45===t&&(f=s.size/((new Date-s.uploadTime)/1e3)),o.sid=s.__hash),o.sp=parseInt(f);var l=new r({server:location.protocol+"//qos.live.360.cn/vc.gif",method:"get",sendSimpleRequest:!0});if(o.rt=new Date-(i?i.totalTime:0),u=e.getUrlParams(o),l.options.server=l.options.server+u,e.browser.firefox||e.browser.ie){var c=new Image;return c.onload=c.onerror=function(){c=null},void (c.src=l.options.server)}l.appendBlob("point",{getSource:function(){return[]}},"test"),l.send()},_doSend:function(t){var n,i,u=this,f=u.owner,c=u.options,h=t.file,p=new r(c),d=a.extend({},c.formData),v=a.extend({},c.headers);if(t.transport=p,h.uploadTime=new Date-0,p.on("destroy",function(){delete t.transport,u._popBlock(t),e.nextTick(u.__tick)}),p.on("progress",function(e){t.percentage=e,u.updateFileProgress(h)}),n=function(e){var n;if(i=p.getResponseAsJson()||{},i._raw=p.getResponse(),!1===i.is_last_block)for(var r=u.owner.uploadServer[h.__hash],s=0;s<r.length;s++)if(r[s].bid===i.bid-1){r[s].complete=!1,r[s].next_block_url=i.next_block_url,r[s].bid=i.bid,r[s].begin=i.begin,r[s].end=i.end;break}return n=function(t){e=t},f.trigger("uploadAccept",t,i,n)||(e=e||"server"),e},p.on("error",function(e,r){t.retried=t.retried||0,u._tickPoint(43,t,p,h),t.chunks>1&&~"http,abort".indexOf(e)&&t.retried<c.chunkRetry?(t.retried++,p.send()):(r||"server"!==e||(e=n(e)),h.setStatus(l.ERROR,e),f.trigger("uploadError",h,e),f.trigger("uploadComplete",h))}),p.on("load",function(){var e;if(e=n())return void p.trigger("error",e,!0);1===h.remaning?u._finishFile(h,i):p.destroy()}),"html5"===t.blob.getRuntime().type){var m=new FileReader;m.onload=function(){m=m.onload=null,d=a.extend(d,{id:h.id,name:h.name,type:h.type,lastModifiedDate:h.lastModified||h.lastModifiedDate,size:h.size,bhash:s(this.result)}),t.chunks>1&&a.extend(d,{chunks:t.chunks,chunk:t.chunk}),f.trigger("uploadBeforeSend",t,d,v),p.appendBlob(c.fileVal,t.blob,h.name),p.append(d),p.setRequestHeader(v),p.send()},m.readAsArrayBuffer(t.blob.source)}else{var g=new o;g.on("complete",function(){d=a.extend(d,{id:h.id,name:h.name,type:h.type,lastModifiedDate:h.lastModified||h.lastModifiedDate,size:h.size,bhash:g.getResult()}),t.chunks>1&&a.extend(d,{chunks:t.chunks,chunk:t.chunk}),f.trigger("uploadBeforeSend",t,d,v),p.appendBlob(c.fileVal,t.blob,h.name),p.append(d),p.setRequestHeader(v),p.send()}),g.loadFromBlob(t.blob,"sha1")}},_finishFile:function(e,t,n){var r=this.owner,i=this;return i._tickPoint(45,null,null,e),r.trigger("fileDequeued",e),r.request("after-send-file",arguments,function(){if(e.setStatus(l.COMPLETE),i.options.autoCommit)try{a.ajax({url:i.owner.uploadServer[e.__hash].commit_url,type:"get",error:function(){r.trigger("uploadError",e,"IE8\u7981\u6b62\u8de8\u57df\uff0c\u5c1d\u8bd5\u7528IMG\u8bf7\u6c42\u63a5\u53e3"),(new Image).src=i.owner.uploadServer[e.__hash].commit_url,r.trigger("commitSuccess",e)},success:function(t){r.trigger("commitSuccess",e,t)}})}catch(s){new Image,img.src=i.owner.uploadServer[e.__hash].commit_url}else r.trigger("needCommit",e,i.owner.uploadServer[e.__hash].uploadresponse);r.trigger("uploadSuccess",e,t,n)}).fail(function(t){e.getStatus()===l.PROGRESS&&e.setStatus(l.ERROR,t),r.trigger("uploadError",e,t)}).always(function(){r.trigger("uploadComplete",e)})},updateFileProgress:function(e){var t=0,n=0;e.blocks&&(a.each(e.blocks,function(e,t){n+=(t.percentage||0)*(t.end-t.start)}),t=n/e.size,this.owner.trigger("uploadProgress",e,t||0))}})}),t("widgets/validator",["base","uploader","file","widgets/widget"],function(e,t,n){var r,i=e.$,s={};return r={addValidator:function(e,t){s[e]=t},removeValidator:function(e){delete s[e]}},t.register({name:"validator",init:function(){var t=this;e.nextTick(function(){i.each(s,function(){this.call(t.owner)})})}}),r.addValidator("fileNumLimit",function(){var e=this,t=e.options,n=0,r=parseInt(t.fileNumLimit,10),i=!0;r&&(e.on("beforeFileQueued",function(e){return n>=r&&i&&(i=!1,this.trigger("error","Q_EXCEED_NUM_LIMIT",r,e),setTimeout(function(){i=!0},1)),!(n>=r)}),e.on("fileQueued",function(){n++}),e.on("fileDequeued",function(){n--}),e.on("reset",function(){n=0}))}),r.addValidator("fileSizeLimit",function(){var e=this,t=e.options,n=0,r=parseInt(t.fileSizeLimit,10),i=!0;r&&(e.on("beforeFileQueued",function(e){var t=n+e.size>r;return t&&i&&(i=!1,this.trigger("error","Q_EXCEED_SIZE_LIMIT",r,e),setTimeout(function(){i=!0},1)),!t}),e.on("fileQueued",function(e){n+=e.size}),e.on("fileDequeued",function(e){n-=e.size}),e.on("reset",function(){n=0}))}),r.addValidator("fileSingleSizeLimit",function(){var e=this,t=e.options,r=t.fileSingleSizeLimit;r&&e.on("beforeFileQueued",function(e){if(e.size>r)return e.setStatus(n.Status.INVALID,"exceed_size"),this.trigger("error","F_EXCEED_SIZE",r,e),!1})}),r.addValidator("duplicate",function(){function e(e){for(var t,n=0,r=0,i=e.length;r<i;r++)t=e.charCodeAt(r),n=t+(n<<6)+(n<<16)-n;return n}var t=this,n=t.options,r={};n.duplicate||(t.on("beforeFileQueued",function(t){t.__hash||(t.__hash=e(t.name+t.size+(t.lastModified||t.lastModifiedDate)))}),t.on("fileQueued",function(e){var t=e.__hash;t&&(r[t]=!0)}),t.on("fileDequeued",function(e){var t=e.__hash;t&&delete r[t]}),t.on("reset",function(){r={}}))}),r}),t("widgets/md5",["base","uploader","lib/md5","lib/blob","widgets/widget"],function(e,t,n,r){return t.register({name:"md5",md5File:function(t,s,o){var u=new n,a=e.Deferred(),f=t instanceof r?t:this.request("get-file",t).source;return u.on("progress load",function(e){e=e||{},a.notify(e.total?e.loaded/e.total:1)}),u.on("complete",function(){a.resolve(u.getResult())}),u.on("error",function(e){a.reject(e)}),arguments.length>1&&(s=s||0,o=o||0,s<0&&(s=f.size+s),o<0&&(o=f.size+o),o=Math.min(o,f.size),f=f.slice(s,o)),u.loadFromBlob(f),a.promise()}})}),t("widgets/testspeed",["base","uploader","file","lib/transport","lib/sha1","runtime/client"],function(t,n,r,i,s,o){if($.extend(n.options,{testspeed:!1}),e.Blob&&e.Uint32Array){var u=["//up-beijing.oss.yunpan.360.cn","//up-shanghai.oss.yunpan.360.cn","//up-beijing.oss.huajiao.com"],a={},f={},l=location.protocol,c=null,h=new o("text");try{c=new Blob(new Uint32Array(1048576))}catch(p){return}u.length<=1||n.register({name:"testspeed",init:function(){var e=this;this.options.testspeed&&(h.getRuid()||h.connectRuntime({runtimeOrder:"html5"},function(){e.sendDate()}))},sendDate:function(){for(var e=this,t=0;t<u.length;t++)!function(t){var n=new i({server:l+u[t]+"/Object.testUpload"});n.on("load",function(){e.owner.fastestCdnUrl||(e.owner.fastestCdnUrl=u[t])}),n.on("error",function(){}),n.appendBlob("file",{getSource:function(){return c}},"test"),n.append(f),n.setRequestHeader(a),n.send()}(t)}})}}),t("runtime/compbase",[],function(){function e(e,t){this.owner=e,this.options=e.options,this.getRuntime=function(){return t},this.getRuid=function(){return t.uid},this.trigger=function(){return e.trigger.apply(e,arguments)}}return e}),t("runtime/html5/runtime",["base","runtime/runtime","runtime/compbase"],function(t,n,r){function i(){var e={},r=this,i=this.destroy;n.apply(r,arguments),r.type=s,r.exec=function(n,i){var s,u=this,a=u.uid,f=t.slice(arguments,2);if(o[n]&&(s=e[a]=e[a]||new o[n](u,r),s[i]))return s[i].apply(s,f)},r.destroy=function(){return i&&i.apply(this,arguments)}}var s="html5",o={};return t.inherits(n,{constructor:i,init:function(){var e=this;setTimeout(function(){e.trigger("ready")},1)}}),i.register=function(e,n){return o[e]=t.inherits(r,n)},e.Blob&&e.FileReader&&e.DataView&&n.addRuntime(s,i),i}),t("runtime/html5/blob",["runtime/html5/runtime","lib/blob"],function(e,t){return e.register("Blob",{slice:function(e,n){var r=this.owner.source;return r=(r.slice||r.webkitSlice||r.mozSlice).call(r,e,n),new t(this.getRuid(),r)}})}),t("runtime/html5/dnd",["base","runtime/html5/runtime","lib/file"],function(e,t,n){var r=e.$,i="webuploader-dnd-";return t.register("DragAndDrop",{init:function(){var t=this.elem=this.options.container;this.dragEnterHandler=e.bindFn(this._dragEnterHandler,this),this.dragOverHandler=e.bindFn(this._dragOverHandler,this),this.dragLeaveHandler=e.bindFn(this._dragLeaveHandler,this),this.dropHandler=e.bindFn(this._dropHandler,this),this.dndOver=!1,t.on("dragenter",this.dragEnterHandler),t.on("dragover",this.dragOverHandler),t.on("dragleave",this.dragLeaveHandler),t.on("drop",this.dropHandler),this.options.disableGlobalDnd&&(r(document).on("dragover",this.dragOverHandler),r(document).on("drop",this.dropHandler))},_dragEnterHandler:function(e){var t,n=this,r=n._denied||!1;return e=e.originalEvent||e,n.dndOver||(n.dndOver=!0,t=e.dataTransfer.items,t&&t.length&&(n._denied=r=!n.trigger("accept",t)),n.elem.addClass(i+"over"),n.elem[r?"addClass":"removeClass"](i+"denied")),e.dataTransfer.dropEffect=r?"none":"copy",!1},_dragOverHandler:function(e){var t=this.elem.parent().get(0);return(!t||!!r.contains(t,e.currentTarget))&&(clearTimeout(this._leaveTimer),this._dragEnterHandler.call(this,e),!1)},_dragLeaveHandler:function(){var e,t=this;return e=function(){t.dndOver=!1,t.elem.removeClass(i+"over "+i+"denied")},clearTimeout(t._leaveTimer),t._leaveTimer=setTimeout(e,100),!1},_dropHandler:function(e){var t,s,o=this,u=o.getRuid(),a=o.elem.parent().get(0);if(a&&!r.contains(a,e.currentTarget))return!1;e=e.originalEvent||e,t=e.dataTransfer;try{s=t.getData("text/html")}catch(f){}return o.dndOver=!1,o.elem.removeClass(i+"over"),t&&!s?(o._getTansferFiles(t,function(e){o.trigger("drop",r.map(e,function(e){return new n(u,e)}))}),!1):void 0},_getTansferFiles:function(t,n){var r,i,s,o,u,a,f,l=[],c=[];for(r=t.items,i=t.files,f=!!r&&!!r[0].webkitGetAsEntry,u=0,a=i.length;u<a;u++)s=i[u],o=r&&r[u],f&&o.webkitGetAsEntry().isDirectory?c.push(this._traverseDirectoryTree(o.webkitGetAsEntry(),l)):l.push(s);e.when.apply(e,c).done(function(){l.length&&n(l)})},_traverseDirectoryTree:function(t,n){var r=e.Deferred(),i=this;return t.isFile?t.file(function(e){n.push(e),r.resolve()}):t.isDirectory&&t.createReader().readEntries(function(t){var s,o=t.length,u=[],a=[];for(s=0;s<o;s++)u.push(i._traverseDirectoryTree(t[s],a));e.when.apply(e,u).then(function(){n.push.apply(n,a),r.resolve()},r.reject)}),r.promise()},destroy:function(){var e=this.elem;e&&(e.off("dragenter",this.dragEnterHandler),e.off("dragover",this.dragOverHandler),e.off("dragleave",this.dragLeaveHandler),e.off("drop",this.dropHandler),this.options.disableGlobalDnd&&(r(document).off("dragover",this.dragOverHandler),r(document).off("drop",this.dropHandler)))}})}),t("runtime/html5/filepaste",["base","runtime/html5/runtime","lib/file"],function(e,t,n){return t.register("FilePaste",{init:function(){var t,n,r,i,s=this.options,o=this.elem=s.container,u=".*";if(s.accept){for(t=[],n=0,r=s.accept.length;n<r;n++)(i=s.accept[n].mimeTypes)&&t.push(i);t.length&&(u=t.join(","),u=u.replace(/,/g,"|").replace(/\*/g,".*"))}this.accept=u=new RegExp(u,"i"),this.hander=e.bindFn(this._pasteHander,this),o.on("paste",this.hander)},_pasteHander:function(e){var t,r,i,s,o,u=[],a=this.getRuid();for(e=e.originalEvent||e,t=e.clipboardData.items,s=0,o=t.length;s<o;s++)r=t[s],"file"===r.kind&&(i=r.getAsFile())&&u.push(new n(a,i));u.length&&(e.preventDefault(),e.stopPropagation(),this.trigger("paste",u))},destroy:function(){this.elem.off("paste",this.hander)}})}),t("runtime/html5/filepicker",["base","runtime/html5/runtime"],function(e,t){var n=e.$;return t.register("FilePicker",{init:function(){var e,t,r,i,s=this.getRuntime().getContainer(),o=this,u=o.owner,a=o.options,f=this.label=n(document.createElement("label")),l=this.input=n(document.createElement("input"));if(l.attr("type","file"),l.attr("capture","camera"),l.attr("name",a.name),l.addClass("webuploader-element-invisible"),f.on("click",function(e){l.trigger("click"),e.stopPropagation(),u.trigger("dialogopen")}),f.css({opacity:0,width:"100%",height:"100%",display:"block",cursor:"pointer",background:"#ffffff"}),a.multiple&&l.attr("multiple","multiple"),a.accept&&a.accept.length>0){for(e=[],t=0,r=a.accept.length;t<r;t++)e.push(a.accept[t].mimeTypes);l.attr("accept",e.join(","))}s.append(l),s.append(f),i=function(e){u.trigger(e.type)},l.on("change",function(e){var t,r=arguments.callee;o.files=e.target.files,t=this.cloneNode(!0),t.value=null,this.parentNode.replaceChild(t,this),l.off(),l=n(t).on("change",r).on("mouseenter mouseleave",i),u.trigger("change")}),f.on("mouseenter mouseleave",i)},getFiles:function(){return this.files},destroy:function(){this.input.off(),this.label.off()}})}),t("runtime/html5/util",["base"],function(t){var n=e.createObjectURL&&e||e.URL&&URL.revokeObjectURL&&URL||e.webkitURL,r=t.noop,i=r;return n&&(r=function(){return n.createObjectURL.apply(n,arguments)},i=function(){return n.revokeObjectURL.apply(n,arguments)}),{createObjectURL:r,revokeObjectURL:i,dataURL2Blob:function(e){var t,n,r,i,s,o;for(o=e.split(","),t=~o[0].indexOf("base64")?atob(o[1]):decodeURIComponent(o[1]),r=new ArrayBuffer(t.length),n=new Uint8Array(r),i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return s=o[0].split(":")[1].split(";")[0],this.arrayBufferToBlob(r,s)},dataURL2ArrayBuffer:function(e){var t,n,r,i;for(i=e.split(","),t=~i[0].indexOf("base64")?atob(i[1]):decodeURIComponent(i[1]),n=new Uint8Array(t.length),r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n.buffer},arrayBufferToBlob:function(t,n){var r,i=e.BlobBuilder||e.WebKitBlobBuilder;return i?(r=new i,r.append(t),r.getBlob(n)):new Blob([t],n?{type:n}:{})},canvasToDataUrl:function(e,t,n){return e.toDataURL(t,n/100)},parseMeta:function(e,t){t(!1,{})},updateImageHead:function(e){return e}}}),t("runtime/html5/imagemeta",["runtime/html5/util"],function(e){var t;return t={parsers:{65505:[]},maxMetaDataSize:262144,parse:function(e,t){var n=this,r=new FileReader;r.onload=function(){t(!1,n._parse(this.result)),r=r.onload=r.onerror=null},r.onerror=function(e){t(e.message),r=r.onload=r.onerror=null},e=e.slice(0,n.maxMetaDataSize),r.readAsArrayBuffer(e.getSource())},_parse:function(e,n){if(!(e.byteLength<6)){var r,i,s,o,u=new DataView(e),a=2,f=u.byteLength-4,l=a,c={};if(65496===u.getUint16(0)){for(;a<f&&((r=u.getUint16(a))>=65504&&r<=65519||65534===r)&&(i=u.getUint16(a+2)+2,!(a+i>u.byteLength));){if(s=t.parsers[r],!n&&s)for(o=0;o<s.length;o+=1)s[o].call(t,u,a,i,c);a+=i,l=a}l>6&&(e.slice?c.imageHead=e.slice(2,l):c.imageHead=(new Uint8Array(e)).subarray(2,l))}return c}},updateImageHead:function(e,t){var n,r,i,s=this._parse(e,!0);return i=2,s.imageHead&&(i=2+s.imageHead.byteLength),r=e.slice?e.slice(i):(new Uint8Array(e)).subarray(i),n=new Uint8Array(t.byteLength+2+r.byteLength),n[0]=255,n[1]=216,n.set(new Uint8Array(t),2),n.set(new Uint8Array(r),t.byteLength+2),n.buffer}},e.parseMeta=function(){return t.parse.apply(t,arguments)},e.updateImageHead=function(){return t.updateImageHead.apply(t,arguments)},t}),t("runtime/html5/imagemeta/exif",["base","runtime/html5/imagemeta"],function(e,t){var n={};return n.ExifMap=function(){return this},n.ExifMap.prototype.map={Orientation:274},n.ExifMap.prototype.get=function(e){return this[e]||this[this.map[e]]},n.exifTagTypes={1:{getValue:function(e,t){return e.getUint8(t)},size:1},2:{getValue:function(e,t){return String.fromCharCode(e.getUint8(t))},size:1,ascii:!0},3:{getValue:function(e,t,n){return e.getUint16(t,n)},size:2},4:{getValue:function(e,t,n){return e.getUint32(t,n)},size:4},5:{getValue:function(e,t,n){return e.getUint32(t,n)/e.getUint32(t+4,n)},size:8},9:{getValue:function(e,t,n){return e.getInt32(t,n)},size:4},10:{getValue:function(e,t,n){return e.getInt32(t,n)/e.getInt32(t+4,n)},size:8}},n.exifTagTypes[7]=n.exifTagTypes[1],n.getExifValue=function(t,r,i,s,o,u){var a,f,l,c,h,p,d=n.exifTagTypes[s];if(!d)return void e.log("Invalid Exif data: Invalid tag type.");if(a=d.size*o,(f=a>4?r+t.getUint32(i+8,u):i+8)+a>t.byteLength)return void e.log("Invalid Exif data: Invalid data offset.");if(1===o)return d.getValue(t,f,u);for(l=[],c=0;c<o;c+=1)l[c]=d.getValue(t,f+c*d.size,u);if(d.ascii){for(h="",c=0;c<l.length&&"\0"!==(p=l[c]);c+=1)h+=p;return h}return l},n.parseExifTag=function(e,t,r,i,s){var o=e.getUint16(r,i);s.exif[o]=n.getExifValue(e,t,r,e.getUint16(r+2,i),e.getUint32(r+4,i),i)},n.parseExifTags=function(t,n,r,i,s){var o,u,a;if(r+6>t.byteLength)return void e.log("Invalid Exif data: Invalid directory offset.");if(o=t.getUint16(r,i),(u=r+2+12*o)+4>t.byteLength)return void e.log("Invalid Exif data: Invalid directory size.");for(a=0;a<o;a+=1)this.parseExifTag(t,n,r+2+12*a,i,s);return t.getUint32(u,i)},n.parseExifData=function(t,r,i,s){var o,u,a=r+10;if(1165519206===t.getUint32(r+4)){if(a+8>t.byteLength)return void e.log("Invalid Exif data: Invalid segment size.");if(0!==t.getUint16(r+8))return void e.log("Invalid Exif data: Missing byte alignment offset.");switch(t.getUint16(a)){case 18761:o=!0;break;case 19789:o=!1;break;default:return void e.log("Invalid Exif data: Invalid byte alignment marker.")}if(42!==t.getUint16(a+2,o))return void e.log("Invalid Exif data: Missing TIFF marker.");u=t.getUint32(a+4,o),s.exif=new n.ExifMap,u=n.parseExifTags(t,a,a+u,o,s)}},t.parsers[65505].push(n.parseExifData),n}),t("runtime/html5/jpegencoder",[],function(e,t,n){function r(e){function t(e){for(var t=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],n=0;n<64;n++){var r=x((t[n]*e+50)/100);r<1?r=1:r>255&&(r=255),T[q[n]]=r}for(var i=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99
,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],s=0;s<64;s++){var o=x((i[s]*e+50)/100);o<1?o=1:o>255&&(o=255),N[q[s]]=o}for(var u=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],a=0,f=0;f<8;f++)for(var l=0;l<8;l++)C[a]=1/(T[q[a]]*u[f]*u[l]*8),k[a]=1/(N[q[a]]*u[f]*u[l]*8),a++}function n(e,t){for(var n=0,r=0,i=new Array,s=1;s<=16;s++){for(var o=1;o<=e[s];o++)i[t[r]]=[],i[t[r]][0]=n,i[t[r]][1]=s,r++,n++;n*=2}return i}function r(){y=n(R,U),b=n(X,V),w=n(z,W),E=n($,J)}function i(){for(var e=1,t=2,n=1;n<=15;n++){for(var r=e;r<t;r++)A[32767+r]=n,L[32767+r]=[],L[32767+r][1]=n,L[32767+r][0]=r;for(var i=-(t-1);i<=-e;i++)A[32767+i]=n,L[32767+i]=[],L[32767+i][1]=n,L[32767+i][0]=t-1+i;e<<=1,t<<=1}}function s(){for(var e=0;e<256;e++)I[e]=19595*e,I[e+256>>0]=38470*e,I[e+512>>0]=7471*e+32768,I[e+768>>0]=-11059*e,I[e+1024>>0]=-21709*e,I[e+1280>>0]=32768*e+8421375,I[e+1536>>0]=-27439*e,I[e+1792>>0]=-5329*e}function o(e){for(var t=e[0],n=e[1]-1;n>=0;)t&1<<n&&(D|=1<<P),n--,--P<0&&(255==D?(u(255),u(0)):u(D),P=7,D=0)}function u(e){_.push(F[e])}function a(e){u(e>>8&255),u(255&e)}function f(e,t){var n,r,i,s,o,u,a,f,l,c=0;for(l=0;l<8;++l){n=e[c],r=e[c+1],i=e[c+2],s=e[c+3],o=e[c+4],u=e[c+5],a=e[c+6],f=e[c+7];var h=n+f,p=n-f,d=r+a,v=r-a,m=i+u,g=i-u,y=s+o,b=s-o,w=h+y,E=h-y,S=d+m,x=d-m;e[c]=w+S,e[c+4]=w-S;var T=.707106781*(x+E);e[c+2]=E+T,e[c+6]=E-T,w=b+g,S=g+v,x=v+p;var N=.382683433*(w-x),C=.5411961*w+N,k=1.306562965*x+N,L=.707106781*S,A=p+L,M=p-L;e[c+5]=M+C,e[c+3]=M-C,e[c+1]=A+k,e[c+7]=A-k,c+=8}for(c=0,l=0;l<8;++l){n=e[c],r=e[c+8],i=e[c+16],s=e[c+24],o=e[c+32],u=e[c+40],a=e[c+48],f=e[c+56];var _=n+f,D=n-f,P=r+a,H=r-a,B=i+u,j=i-u,F=s+o,I=s-o,q=_+F,R=_-F,U=P+B,z=P-B;e[c]=q+U,e[c+32]=q-U;var W=.707106781*(z+R);e[c+16]=R+W,e[c+48]=R-W,q=I+j,U=j+H,z=H+D;var X=.382683433*(q-z),V=.5411961*q+X,$=1.306562965*z+X,J=.707106781*U,K=D+J,Q=D-J;e[c+40]=Q+V,e[c+24]=Q-V,e[c+8]=K+$,e[c+56]=K-$,c++}var G;for(l=0;l<64;++l)G=e[l]*t[l],O[l]=G>0?G+.5|0:G-.5|0;return O}function l(){a(65504),a(16),u(74),u(70),u(73),u(70),u(0),u(1),u(1),u(0),a(1),a(1),u(0),u(0)}function c(e,t){a(65472),a(17),u(8),a(t),a(e),u(3),u(1),u(17),u(0),u(2),u(17),u(1),u(3),u(17),u(1)}function h(){a(65499),a(132),u(0);for(var e=0;e<64;e++)u(T[e]);u(1);for(var t=0;t<64;t++)u(N[t])}function p(){a(65476),a(418),u(0);for(var e=0;e<16;e++)u(R[e+1]);for(var t=0;t<=11;t++)u(U[t]);u(16);for(var n=0;n<16;n++)u(z[n+1]);for(var r=0;r<=161;r++)u(W[r]);u(1);for(var i=0;i<16;i++)u(X[i+1]);for(var s=0;s<=11;s++)u(V[s]);u(17);for(var o=0;o<16;o++)u($[o+1]);for(var f=0;f<=161;f++)u(J[f])}function d(){a(65498),a(12),u(3),u(1),u(0),u(2),u(17),u(3),u(17),u(0),u(63),u(0)}function v(e,t,n,r,i){for(var s,u=i[0],a=i[240],l=f(e,t),c=0;c<64;++c)M[q[c]]=l[c];var h=M[0]-n;n=M[0],0==h?o(r[0]):(s=32767+h,o(r[A[s]]),o(L[s]));for(var p=63;p>0&&0==M[p];p--);if(0==p)return o(u),n;for(var d,v=1;v<=p;){for(var m=v;0==M[v]&&v<=p;++v);var g=v-m;if(g>=16){d=g>>4;for(var y=1;y<=d;++y)o(a);g&=15}s=32767+M[v],o(i[(g<<4)+A[s]]),o(L[s]),v++}return 63!=p&&o(u),n}function m(){for(var e=String.fromCharCode,t=0;t<256;t++)F[t]=e(t)}function g(e){if(e<=0&&(e=1),e>100&&(e=100),S!=e){var n=0;n=e<50?Math.floor(5e3/e):Math.floor(200-2*e),t(n),S=e}}var y,b,w,E,S,x=(Math.round,Math.floor),T=new Array(64),N=new Array(64),C=new Array(64),k=new Array(64),L=new Array(65535),A=new Array(65535),O=new Array(64),M=new Array(64),_=[],D=0,P=7,H=new Array(64),B=new Array(64),j=new Array(64),F=new Array(256),I=new Array(2048),q=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],R=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],U=[0,1,2,3,4,5,6,7,8,9,10,11],z=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],W=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],X=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],V=[0,1,2,3,4,5,6,7,8,9,10,11],$=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],J=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];this.encode=function(e,t){t&&g(t),_=new Array,D=0,P=7,a(65496),l(),h(),c(e.width,e.height),p(),d();var n=0,r=0,i=0;D=0,P=7,this.encode.displayName="_encode_";for(var s,u,f,m,S,x,T,N,L,A=e.data,O=e.width,M=e.height,F=4*O,q=0;q<M;){for(s=0;s<F;){for(S=F*q+s,x=S,T=-1,N=0,L=0;L<64;L++)N=L>>3,T=4*(7&L),x=S+N*F+T,q+N>=M&&(x-=F*(q+1+N-M)),s+T>=F&&(x-=s+T-F+4),u=A[x++],f=A[x++],m=A[x++],H[L]=(I[u]+I[f+256>>0]+I[m+512>>0]>>16)-128,B[L]=(I[u+768>>0]+I[f+1024>>0]+I[m+1280>>0]>>16)-128,j[L]=(I[u+1280>>0]+I[f+1536>>0]+I[m+1792>>0]>>16)-128;n=v(H,C,n,y,w),r=v(B,k,r,b,E),i=v(j,k,i,b,E),s+=32}q+=8}if(P>=0){var R=[];R[1]=P+1,R[0]=(1<<P+1)-1,o(R)}a(65497);var U="data:image/jpeg;base64,"+btoa(_.join(""));return _=[],U},function(){e||(e=50),m(),r(),i(),s(),g(e)}()}return r.encode=function(e,t){return(new r(t)).encode(e)},r}),t("runtime/html5/androidpatch",["runtime/html5/util","runtime/html5/jpegencoder","base"],function(e,t,n){var r,i=e.canvasToDataUrl;e.canvasToDataUrl=function(e,s,o){var u,a,f,l,c;return n.os.android?("image/jpeg"===s&&void 0===r&&(l=i.apply(null,arguments),c=l.split(","),l=~c[0].indexOf("base64")?atob(c[1]):decodeURIComponent(c[1]),l=l.substring(0,2),r=255===l.charCodeAt(0)&&216===l.charCodeAt(1)),"image/jpeg"!==s||r?i.apply(null,arguments):(a=e.width,f=e.height,u=e.getContext("2d"),t.encode(u.getImageData(0,0,a,f),o))):i.apply(null,arguments)}}),t("runtime/html5/image",["base","runtime/html5/runtime","runtime/html5/util"],function(e,t,n){return t.register("Image",{modified:!1,init:function(){var e=this,t=new Image;t.onload=function(){e._info={type:e.type,width:this.width,height:this.height},e._metas||"image/jpeg"!==e.type?e.owner.trigger("load"):n.parseMeta(e._blob,function(t,n){e._metas=n,e.owner.trigger("load")})},t.onerror=function(){e.owner.trigger("error")},e._img=t},loadFromBlob:function(e){var t=this,r=t._img;t._blob=e,t.type=e.type,r.src=n.createObjectURL(e.getSource()),t.owner.once("load",function(){n.revokeObjectURL(r.src)})},resize:function(e,t){var n=this._canvas||(this._canvas=document.createElement("canvas"));this._resize(this._img,n,e,t),this._blob=null,this.modified=!0,this.owner.trigger("complete","resize")},crop:function(e,t,n,r,i){var s=this._canvas||(this._canvas=document.createElement("canvas")),o=this.options,u=this._img,a=u.naturalWidth,f=u.naturalHeight,l=this.getOrientation();i=i||1,s.width=n,s.height=r,o.preserveHeaders||this._rotate2Orientaion(s,l),this._renderImageToCanvas(s,u,-e,-t,a*i,f*i),this._blob=null,this.modified=!0,this.owner.trigger("complete","crop")},getAsBlob:function(e){var t,r=this._blob,i=this.options;if(e=e||this.type,this.modified||this.type!==e){if(t=this._canvas,"image/jpeg"===e){if(r=n.canvasToDataUrl(t,e,i.quality),i.preserveHeaders&&this._metas&&this._metas.imageHead)return r=n.dataURL2ArrayBuffer(r),r=n.updateImageHead(r,this._metas.imageHead),r=n.arrayBufferToBlob(r,e)}else r=n.canvasToDataUrl(t,e);r=n.dataURL2Blob(r)}return r},getAsDataUrl:function(e){var t=this.options;return e=e||this.type,"image/jpeg"===e?n.canvasToDataUrl(this._canvas,e,t.quality):this._canvas.toDataURL(e)},getOrientation:function(){return this._metas&&this._metas.exif&&this._metas.exif.get("Orientation")||1},info:function(e){return e?(this._info=e,this):this._info},meta:function(e){return e?(this._metas=e,this):this._metas},destroy:function(){var e=this._canvas;this._img.onload=null,e&&(e.getContext("2d").clearRect(0,0,e.width,e.height),e.width=e.height=0,this._canvas=null),this._img.src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs%3D",this._img=this._blob=null},_resize:function(e,t,n,r){var i,s,o,u,a,f=this.options,l=e.width,c=e.height,h=this.getOrientation();~[5,6,7,8].indexOf(h)&&(n^=r,r^=n,n^=r),i=Math[f.crop?"max":"min"](n/l,r/c),f.allowMagnify||(i=Math.min(1,i)),s=l*i,o=c*i,f.crop?(t.width=n,t.height=r):(t.width=s,t.height=o),u=(t.width-s)/2,a=(t.height-o)/2,f.preserveHeaders||this._rotate2Orientaion(t,h),this._renderImageToCanvas(t,e,u,a,s,o)},_rotate2Orientaion:function(e,t){var n=e.width,r=e.height,i=e.getContext("2d");switch(t){case 5:case 6:case 7:case 8:e.width=r,e.height=n}switch(t){case 2:i.translate(n,0),i.scale(-1,1);break;case 3:i.translate(n,r),i.rotate(Math.PI);break;case 4:i.translate(0,r),i.scale(1,-1);break;case 5:i.rotate(.5*Math.PI),i.scale(1,-1);break;case 6:i.rotate(.5*Math.PI),i.translate(0,-r);break;case 7:i.rotate(.5*Math.PI),i.translate(n,-r),i.scale(-1,1);break;case 8:i.rotate(-0.5*Math.PI),i.translate(-n,0)}},_renderImageToCanvas:function(){function t(e,t,n){var r,i,s,o=document.createElement("canvas"),u=o.getContext("2d"),a=0,f=n,l=n;for(o.width=1,o.height=n,u.drawImage(e,0,0),r=u.getImageData(0,0,1,n).data;l>a;)i=r[4*(l-1)+3],0===i?f=l:a=l,l=f+a>>1;return s=l/n,0===s?1:s}function n(e){var t,n,r=e.naturalWidth,i=e.naturalHeight;return r*i>1048576&&(t=document.createElement("canvas"),t.width=t.height=1,n=t.getContext("2d"),n.drawImage(e,1-r,0),0===n.getImageData(0,0,1,1).data[3])}return e.os.ios?e.os.ios>=7?function(e,n,r,i,s,o){var u=n.naturalWidth,a=n.naturalHeight,f=t(n,u,a);return e.getContext("2d").drawImage(n,0,0,u*f,a*f,r,i,s,o)}:function(e,r,i,s,o,u){var a,f,l,c,h,p,d,v=r.naturalWidth,m=r.naturalHeight,g=e.getContext("2d"),y=n(r),b="image/jpeg"===this.type,w=1024,E=0,S=0;for(y&&(v/=2,m/=2),g.save(),a=document.createElement("canvas"),a.width=a.height=w,f=a.getContext("2d"),l=b?t(r,v,m):1,c=Math.ceil(w*o/v),h=Math.ceil(w*u/m/l);E<m;){for(p=0,d=0;p<v;)f.clearRect(0,0,w,w),f.drawImage(r,-p,-E),g.drawImage(a,0,0,w,w,i+d,s+S,c,h),p+=w,d+=c;E+=w,S+=h}g.restore(),a=f=null}:function(t){var n=e.slice(arguments,1),r=t.getContext("2d");r.drawImage.apply(r,n)}}()})}),t("runtime/html5/transport",["base","runtime/html5/runtime"],function(e,t){var n=e.noop,r=e.$;return t.register("Transport",{init:function(){this._status=0,this._response=null},send:function(){var t,n,s,o=this.owner,u=this.options,a=this._initAjax(),f=o._blob,l=u.server;if(u.sendAsBinary?(l+=(/\?/.test(l)?"&":"?")+r.param(o._formData),n=f.getSource()):u.sendSimpleRequest||(t=new FormData,r.each(o._formData,function(e,n){t.append(e,n)}),t.append(u.fileVal,f.getSource(),u.filename||o._formData.name||"")),u.withCredentials&&"withCredentials"in a?(a.open(u.method,l,!0),a.withCredentials=!0):a.open(u.method,l),this._setRequestHeader(a,u.headers),u.sendSimpleRequest)return void a.send();n?(a.overrideMimeType&&a.overrideMimeType("application/octet-stream"),e.os.android?(s=new FileReader,s.onload=function(){a.send(this.result),s=s.onload=null},s.readAsArrayBuffer(n)):a.send(n)):a.send(t)},getResponse:function(){return this._response},getResponseAsJson:function(){return this._parseJson(this._response)},getStatus:function(){return this._status},abort:function(){var e=this._xhr;e&&(e.upload.onprogress=n,e.onreadystatechange=n,e.abort(),this._xhr=e=null)},destroy:function(){this.abort()},_initAjax:function(){var e=this,t=new XMLHttpRequest;return!this.options.withCredentials||"withCredentials"in t||"undefined"==typeof XDomainRequest||(t=new XDomainRequest),t.upload.onprogress=function(t){var n=0;return t.lengthComputable&&(n=t.loaded/t.total),e.trigger("progress",n)},t.onreadystatechange=function(){if(4===t.readyState)return t.upload.onprogress=n,t.onreadystatechange=n,e._xhr=null,e._status=t.status,t.status>=200&&t.status<300?(e._response=t.responseText,e.trigger("load")):t.status>=500&&t.status<600?(e._response=t.responseText,e.trigger("error","server-"+status)):e.trigger("error",e._status?"http-"+status:"abort")},e._xhr=t,t},_setRequestHeader:function(e,t){r.each(t,function(t,n){e.setRequestHeader(t,n)})},_parseJson:function(e){var t;try{t=JSON.parse(e)}catch(n){t={}}return t}})}),t("runtime/html5/md5",["runtime/html5/runtime"],function(e){var t=function(e,t){return e+t&4294967295},n=function(e,n,r,i,s,o){return n=t(t(n,e),t(i,o)),t(n<<s|n>>>32-s,r)},r=function(e,t,r,i,s,o,u){return n(t&r|~t&i,e,t,s,o,u)},i=function(e,t,r,i,s,o,u){return n(t&i|r&~i,e,t,s,o,u)},s=function(e,t,r,i,s,o,u){return n(t^r^i,e,t,s,o,u)},o=function(e,t,r,i,s,o,u){return n(r^(t|~i),e,t,s,o,u)},u=function(e,n){var u=e[0],a=e[1],f=e[2],l=e[3];u=r(u,a,f,l,n[0],7,-680876936),l=r(l,u,a,f,n[1],12,-389564586),f=r(f,l,u,a,n[2],17,606105819),a=r(a,f,l,u,n[3],22,-1044525330),u=r(u,a,f,l,n[4],7,-176418897),l=r(l,u,a,f,n[5],12,1200080426),f=r(f,l,u,a,n[6],17,-1473231341),a=r(a,f,l,u,n[7],22,-45705983),u=r(u,a,f,l,n[8],7,1770035416),l=r(l,u,a,f,n[9],12,-1958414417),f=r(f,l,u,a,n[10],17,-42063),a=r(a,f,l,u,n[11],22,-1990404162),u=r(u,a,f,l,n[12],7,1804603682),l=r(l,u,a,f,n[13],12,-40341101),f=r(f,l,u,a,n[14],17,-1502002290),a=r(a,f,l,u,n[15],22,1236535329),u=i(u,a,f,l,n[1],5,-165796510),l=i(l,u,a,f,n[6],9,-1069501632),f=i(f,l,u,a,n[11],14,643717713),a=i(a,f,l,u,n[0],20,-373897302),u=i(u,a,f,l,n[5],5,-701558691),l=i(l,u,a,f,n[10],9,38016083),f=i(f,l,u,a,n[15],14,-660478335),a=i(a,f,l,u,n[4],20,-405537848),u=i(u,a,f,l,n[9],5,568446438),l=i(l,u,a,f,n[14],9,-1019803690),f=i(f,l,u,a,n[3],14,-187363961),a=i(a,f,l,u,n[8],20,1163531501),u=i(u,a,f,l,n[13],5,-1444681467),l=i(l,u,a,f,n[2],9,-51403784),f=i(f,l,u,a,n[7],14,1735328473),a=i(a,f,l,u,n[12],20,-1926607734),u=s(u,a,f,l,n[5],4,-378558),l=s(l,u,a,f,n[8],11,-2022574463),f=s(f,l,u,a,n[11],16,1839030562),a=s(a,f,l,u,n[14],23,-35309556),u=s(u,a,f,l,n[1],4,-1530992060),l=s(l,u,a,f,n[4],11,1272893353),f=s(f,l,u,a,n[7],16,-155497632),a=s(a,f,l,u,n[10],23,-1094730640),u=s(u,a,f,l,n[13],4,681279174),l=s(l,u,a,f,n[0],11,-358537222),f=s(f,l,u,a,n[3],16,-722521979),a=s(a,f,l,u,n[6],23,76029189),u=s(u,a,f,l,n[9],4,-640364487),l=s(l,u,a,f,n[12],11,-421815835),f=s(f,l,u,a,n[15],16,530742520),a=s(a,f,l,u,n[2],23,-995338651),u=o(u,a,f,l,n[0],6,-198630844),l=o(l,u,a,f,n[7],10,1126891415),f=o(f,l,u,a,n[14],15,-1416354905),a=o(a,f,l,u,n[5],21,-57434055),u=o(u,a,f,l,n[12],6,1700485571),l=o(l,u,a,f,n[3],10,-1894986606),f=o(f,l,u,a,n[10],15,-1051523),a=o(a,f,l,u,n[1],21,-2054922799),u=o(u,a,f,l,n[8],6,1873313359),l=o(l,u,a,f,n[15],10,-30611744),f=o(f,l,u,a,n[6],15,-1560198380),a=o(a,f,l,u,n[13],21,1309151649),u=o(u,a,f,l,n[4],6,-145523070),l=o(l,u,a,f,n[11],10,-1120210379),f=o(f,l,u,a,n[2],15,718787259),a=o(a,f,l,u,n[9],21,-343485551),e[0]=t(u,e[0]),e[1]=t(a,e[1]),e[2]=t(f,e[2]),e[3]=t(l,e[3])},a=function(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n},f=function(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24);return n},l=function(e){var t,n,r,i,s,o,f=e.length,l=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=f;t+=64)u(l,a(e.substring(t-64,t)));for(e=e.substring(t-64),n=e.length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<n;t+=1)r[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(r[t>>2]|=128<<(t%4<<3),t>55)for(u(l,r),t=0;t<16;t+=1)r[t]=0;return i=8*f,i=i.toString(16).match(/(.*?)(.{0,8})$/),s=parseInt(i[2],16),o=parseInt(i[1],16)||0,r[14]=s,r[15]=o,u(l,r),l},c=function(e){var t,n,r,i,s,o,a=e.length,l=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=a;t+=64)u(l,f(e.subarray(t-64,t)));for(e=t-64<a?e.subarray(t-64):new Uint8Array(0),n=e.length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<n;t+=1)r[t>>2]|=e[t]<<(t%4<<3);if(r[t>>2]|=128<<(t%4<<3),t>55)for(u(l,r),t=0;t<16;t+=1)r[t]=0;return i=8*a,i=i.toString(16).match(/(.*?)(.{0,8})$/),s=parseInt(i[2],16),o=parseInt(i[1],16)||0,r[14]=s,r[15]=o,u(l,r),l},h=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],p=function(e){var t,n="";for(t=0;t<4;t+=1)n+=h[e>>8*t+4&15]+h[e>>8*t&15];return n},d=function(e){var t;for(t=0;t<e.length;t+=1)e[t]=p(e[t]);return e.join("")},v=function(){this.reset()};return"5d41402abc4b2a76b9719d911017c592"!==function(e){return d(l(e))}("hello")&&(t=function(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}),v.prototype.append=function(e){return/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e))),this.appendBinary(e),this},v.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;var t,n=this._buff.length;for(t=64;t<=n;t+=64)u(this._state,a(this._buff.substring(t-64,t)));return this._buff=this._buff.substr(t-64),this},v.prototype.end=function(e){var t,n,r=this._buff,i=r.length,s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<i;t+=1)s[t>>2]|=r.charCodeAt(t)<<(t%4<<3);return this._finish(s,i),n=e?this._state:d(this._state),this.reset(),n},v.prototype._finish=function(e,t){var n,r,i,s=t;if(e[s>>2]|=128<<(s%4<<3),s>55)for(u(this._state,e),s=0;s<16;s+=1)e[s]=0;n=8*this._length,n=n.toString(16).match(/(.*?)(.{0,8})$/),r=parseInt(n[2],16),i=parseInt(n[1],16)||0,e[14]=r,e[15]=i,u(this._state,e)},v.prototype.reset=function(){return this._buff="",this._length=0,this._state=[1732584193,-271733879,-1732584194,271733878],this},v.prototype.destroy=function(){delete this._state,delete this._buff,delete this._length},v.hash=function(e,t){/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e)));var n=l(e);return t?n:d(n)},v.hashBinary=function(e,t){var n=l(e);return t?n:d(n)},v.ArrayBuffer=function(){this.reset()},v.ArrayBuffer.prototype.append=function(e){var t,n=this._concatArrayBuffer(this._buff,e),r=n.length;for(this._length+=e.byteLength,t=64;t<=r;t+=64)u(this._state,f(n.subarray(t-64,t)));return this._buff=t-64<r?n.subarray(t-64):new Uint8Array(0),this},v.ArrayBuffer.prototype.end=function(e){var t,n,r=this._buff,i=r.length,s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<i;t+=1)s[t>>2]|=r[t]<<(t%4<<3);return this._finish(s,i),n=e?this._state:d(this._state),this.reset(),n},v.ArrayBuffer.prototype._finish=v.prototype._finish,v.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._state=[1732584193,-271733879,-1732584194,271733878],this},v.ArrayBuffer.prototype.destroy=v.prototype.destroy,v.ArrayBuffer.prototype._concatArrayBuffer=function(e,t){var n=e.length,r=new Uint8Array(n+t.byteLength);return r.set(e),r.set(new Uint8Array(t),n),r},v.ArrayBuffer.hash=function(e,t){var n=c(new Uint8Array(e));return t?n:d(n)},e.register("Md5",{init:function(){},loadFromBlob:function(e){var t,n,r=e.getSource(),i=Math.ceil(r.size/2097152),s=0,o=this.owner,u=new v.ArrayBuffer,a=this,f=r.mozSlice||r.webkitSlice||r.slice;n=new FileReader,(t=function(){var l,c;l=2097152*s,c=Math.min(l+2097152,r.size),n.onload=function(t){u.append(t.target.result),o.trigger("progress",{total:e.size,loaded:c})},n.onloadend=function(){n.onloadend=n.onload=null,++s<i?setTimeout(t,1):setTimeout(function(){o.trigger("load"),a.result=u.end(),t=e=r=u=null,o.trigger("complete")},50)},n.readAsArrayBuffer(f.call(r,l,c))})()},getResult:function(){return this.result}})}),t("runtime/flash/runtime",["base","runtime/runtime","runtime/compbase"],function(t,n,r){function i(){function r(e,t){var n,r,i=e.type||e;n=i.split("::"),r=n[0],i=n[1],"Ready"===i&&r===l.uid?l.trigger("ready"):s[r]&&s[r].trigger(i.toLowerCase(),e,t)}var i={},s={},f=this.destroy,l=this,c=t.guid("webuploader_");n.apply(l,arguments),l.type=o,l.exec=function(e,n){var r,o=this,f=o.uid,c=t.slice(arguments,2);return s[f]=o,u[e]&&(i[f]||(i[f]=new u[e](o,l)),r=i[f],r[n])?r[n].apply(r,c):l.flashExec.apply(o,arguments)},e[c]=function(){var e=arguments;setTimeout(function(){r.apply(null,e)},1)},this.jsreciver=c,this.destroy=function(){return f&&f.apply(this,arguments)},this.flashExec=function(e,n){var r=l.getFlash(),i=t.slice(arguments,2);return r.exec(this.uid,e,n,i)}}var s=t.$,o="flash",u={};return t.inherits(n,{constructor:i,init:function(){var e,n=this.getContainer(),r=this.options;n.css({position:"absolute",top:"-8px",left:"-8px",width:"9px",height:"9px",overflow:"hidden"}),e='<object id="'+this.uid+'" type="application/x-shockwave-flash" data="'+r.swf+'" ',t.browser.ie&&(e+='classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" '),e+='width="100%" height="100%" style="outline:0"><param name="movie" value="'+r.swf+'" /><param name="flashvars" value="uid='+this.uid+"&jsreciver="+this.jsreciver+'" /><param name="wmode" value="transparent" /><param name="allowscriptaccess" value="always" /></object>',n.html(e)},getFlash:function(){return this._flash?this._flash:(this._flash=s("#"+this.uid).get(0),this._flash)}}),i.register=function(e,n){return n=u[e]=t.inherits(r,s.extend({flashExec:function(){var e=this.owner;return this.getRuntime().flashExec.apply(e,arguments)}},n))},function(){var e;try{e=navigator.plugins["Shockwave Flash"],e=e.description}catch(t){try{e=(new ActiveXObject("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version")}catch(n){e="0.0"}}return e=e.match(/\d+/g),parseFloat(e[0]+"."+e[1],10)}()>=11.3&&n.addRuntime(o,i),i}),t("runtime/flash/filepicker",["base","runtime/flash/runtime"],function(e,t){var n=e.$;return t.register("FilePicker",{init:function(e){var t,r,i=n.extend({},e);for(t=i.accept&&i.accept.length,r=0;r<t;r++)i.accept[r].title||(i.accept[r].title="Files");delete i.button,delete i.id,delete i.container,this.flashExec("FilePicker","init",i)},destroy:function(){this.flashExec("FilePicker","destroy")}})}),t("runtime/flash/image",["runtime/flash/runtime"],function(e){return e.register("Image",{loadFromBlob:function(e){var t=this.owner;t.info()&&this.flashExec("Image","info",t.info()),t.meta()&&this.flashExec("Image","meta",t.meta()),this.flashExec("Image","loadFromBlob",e.uid)}})}),t("runtime/flash/transport",["base","runtime/flash/runtime","runtime/client"],function(t,n,r){var i=t.$;return n.register("Transport",{init:function(){this._status=0,this._response=null,this._responseJson=null},send:function(){var e,t=this.owner,n=this.options,r=this._initAjax(),s=t._blob,o=n.server;r.connectRuntime(s.ruid),n.sendAsBinary?(o+=(/\?/.test(o)?"&":"?")+i.param(t._formData),e=s.uid):(i.each(t._formData,function(e,t){r.exec("append",e,t)}),r.exec("appendBlob",n.fileVal,s.uid,n.filename||t._formData.name||"")),this._setRequestHeader(r,n.headers),r.exec("send",{method:n.method,url:o,forceURLStream:n.forceURLStream,mimeType:"application/octet-stream"},e)},getStatus:function(){return this._status},getResponse:function(){return this._response||""},getResponseAsJson:function(){return this._responseJson},abort:function(){var e=this._xhr;e&&(e.exec("abort"),e.destroy(),this._xhr=e=null)},destroy:function(){this.abort()},_initAjax:function(){var t=this,n=new r("XMLHttpRequest");return n.on("uploadprogress progress",function(e){var n=e.loaded/e.total;return n=Math.min(1,Math.max(0,n)),t.trigger("progress",n)}),n.on("load",function(){var r,i=n.exec("getStatus"),s=!1,o="";return n.off(),t._xhr=null,i>=200&&i<300?s=!0:i>=500&&i<600?(s=!0,o="server-"+i):o="http-"+i,s&&(t._response=n.exec("getResponse"),t._response=decodeURIComponent(t._response),r=function(t){try{return e.JSON&&e.JSON.parse?JSON.parse(t):(new Function("return "+t)).call()}catch(n){return{}}},t._responseJson=t._response?r(t._response):{}),n.destroy(),n=null,o?t.trigger("error",o):t.trigger("load")}),n.on("error",function(){var e=n.exec("getStatus"),r=e?"http-"+e:"http";n.off(),t._xhr=null,t.trigger("error",r)}),t._xhr=n,n},_setRequestHeader:function(e,t){i.each(t,function(t,n){e.exec("setRequestHeader",t,n)})}})}),t("runtime/flash/blob",["runtime/flash/runtime","lib/blob"],function(e,t){return e.register("Blob",{slice:function(e,n){var r=this.flashExec("Blob","slice",e,n);return new t(this.getRuid(),r)}})}),t("runtime/flash/md5",["runtime/flash/runtime"],function(e){return e.register("Md5",{init:function(){},loadFromBlob:function(e,t){return this.flashExec("Md5","loadFromBlob",e.uid,t)}})}),t("preset/all",["base","widgets/filednd","widgets/filepaste","widgets/filepicker","widgets/image","widgets/queue","widgets/runtime","widgets/upload","widgets/validator","widgets/md5","widgets/testspeed","runtime/html5/blob","runtime/html5/dnd","runtime/html5/filepaste","runtime/html5/filepicker","runtime/html5/imagemeta/exif","runtime/html5/androidpatch","runtime/html5/image","runtime/html5/transport","runtime/html5/md5","runtime/flash/filepicker","runtime/flash/image","runtime/flash/transport","runtime/flash/blob","runtime/flash/md5"],function(e){return e}),t("widgets/log",["base","uploader","widgets/widget"],function(e,t){function n(e){var t=i.extend({},r,e),n=s.replace(/^(.*)\?/,"$1"+i.param(t));(new Image).src=n}var r,i=e.$,s=" http://static.tieba.baidu.com/tb/pms/img/st.gif??",o=(location.hostname||location.host||"protected").toLowerCase(),u=o&&/baidu/i.exec(o);if(u)return r={dv:3,master:"webuploader",online:/test/.exec(o)?0:1,module:"",product:o,type:0},t.register({name:"log",init:function(){var e=this.owner,t=0,r=0;e.on("error",function(e){n({type:2,c_error_code:e})}).on("uploadError",function(e,t){n({type:2,c_error_code:"UPLOAD_ERROR",c_reason:""+t})}).on("uploadComplete",function(e){t++,r+=e.size}).on("uploadFinished",function(){n({c_count:t,c_size:r}),t=r=0}),n({c_usage:1})}})}),t("webuploader",["preset/all","widgets/log"],function(e){return e}),n("webuploader")}),function(e,t,n){function r(){var e=location.protocol+"//"+location.hostname;return location.port!="80"&&(e+=":"+location.port),e+=location.pathname,e}function i(t,n,r){e(t).find(".webuploader-element-invisible").parent().prev()[n===!0?"removeClass":"addClass"]("webuploader-pick-disabled"),e(".zm-upload-image-wrap."+r).length>0?e(".zm-upload-image-wrap."+r)[n===!0?"removeClass":"addClass"]("uploading"):e(t).parents(".zm-uploader").parent().find(".zm-upload-image-wrap:last")[[n===!0?"removeClass":"addClass"]]("uploading")}e.uploader=function(t,s){function c(e,t,r){var i=t.split("."),s=i.length,o=0,u=e;while(o<s-1){var a=i[o];u=e[a]||{},o++}r!==n&&(u[i[o]]=r)}function v(e,t){p.hide(),t=t||"upload-error",d.removeClass("upload-success upload-error").html(e).addClass(t).show()}var o,u=t.id,a=e(u);if(a.length<=0)return null;var f={auto:"auto",server:"server",multiple:"pick.multiple",acceptTitle:"accept.title",acceptExt:"accept.extensions",acceptMine:"accept.mimeTypes",fileSize:"fileSingleSizeLimit",fileVal:"fileVal",chunked:"chunked",chunkSize:"chunkSize",chunkRetry:"chunkRetry",threads:"threads",dnd:"dnd",fileNumLimit:"fileNumLimit"},l={auto:!0,server:"",pick:{id:u||"",innerHTML:"",multiple:!1},accept:{title:"\u56fe\u7247",extensions:"bmp,png,jpg,jpeg,gif",mimeTypes:"image/bmp,image/png,image/jpg,image/jpeg,image/gif"},fileNumLimit:1,fileSingleSizeLimit:10485760,fileVal:"",formData:{},chunked:!1,chunkSize:5242880,chunkRetry:5,threads:1,dnd:u,disableGlobalDnd:!1,paste:u,swf:r()+"/static/swf/Uploader.swf",compress:!1,resize:!1,runtimeOrder:"html5,flash",method:"POST",sendAsBinary:!1,duplicate:!0,disableWidgets:n};e.each(f,function(e,t){c(l,t,a.data(e))}),l.formData=e.extend(!0,{_method:"post"},s||{}),t=e.extend(!0,l,t),t.auto=!1,o=WebUploader.create(t);var h=e(t.uploadWrapFile),p=e(t.uploadWrapProgress),d=e(t.uploadWrapResult),m={error:function(e,n){var r="";switch(e){case"Q_TYPE_DENIED":r="\u6587\u4ef6\u7c7b\u578b\u9519\u8bef";break;case"Q_EXCEED_NUM_LIMIT":r="\u6700\u591a\u53ea\u80fd\u6dfb\u52a0"+(t.fileNumLimit||1)+"\u4e2a\u6587\u4ef6";break;case"Q_EXCEED_SIZE_LIMIT":r="\u8d85\u8fc7\u5141\u8bb8\u6dfb\u52a0\u7684\u6587\u4ef6\u603b\u5927\u5c0f";break;case"F_EXCEED_SIZE":r="\u8d85\u8fc7\u5141\u8bb8\u4e0a\u4f20\u7684\u6700\u5927\u6587\u4ef6\u5927\u5c0f";break;case"F_DUPLICATE":r="\u91cd\u590d\u4e0a\u4f20\u6587\u4ef6";break;default:r="\u4e0a\u4f20\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5"}v(r)},beforeFileQueued:function(e){var t,n;e&&(t=n=e.name,t&&t.length>25&&(n=t.slice(0,12)+"..."+t.slice(t.length-10,t.length)),h.val(n).attr("title",t),p.html("").hide(),d.html("").hide())},fileQueued:function(e){o.md5File(e).then(function(t){e.md5=t,e.size=e.size,e.ext=e.ext,o.upload()})},filesQueued:function(e){},startUpload:function(){i(u,!1,t.uuid)},uploadStart:function(){},uploadProgress:function(e,t){t=Math.round(t*100);var n=(t==100?"":'<i class="sj-upload__content__icon"></i>')+'<span class="upload-tips green"><b class="uname">'+e.name+"</b> "+(t==100?"\u5df2\u5b8c\u6210":"\u6b63\u5728\u4e0a\u4f20...")+'<b class="uprogress"> '+t+" %</b></span>";p.html(n).show()},uploadSuccess:function(e,t){t.errno?v(t.errmsg):v(a.data("msg")||t.errmsg||"\u4e0a\u4f20\u6210\u529f","upload-success")},uploadError:function(e,n){i(u,!0,t.uuid),v(n)},uploadComplete:function(){i(u,!0,t.uuid),this.reset()},uploadFinished:function(){i(u,!0,t.uuid),this.reset()},uploadBeforeSend:function(e,t){t.md5=e.file.md5+"__"+e.file.size+"__"+e.file.type}},g=["dndAccept","beforeFileQueued","fileQueued","filesQueued","fileDequeued","reset","startUpload","stopUpload","uploadFinished","uploadStart","uploadBeforeSend","uploadAccept","uploadProgress","uploadError","uploadSuccess","uploadComplete","error"];return e.each(g,function(e,t){o.on(t,function(e){var t=m[e];return function(){t&&t.apply(o,arguments)}}(t))}),o}}(jQuery,document),!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],t):t(e.jQuery)}(this,function(e){"use strict";function t(e){return"number"==typeof e&&!isNaN(e)}function n(e){return"undefined"==typeof e}function r(e,n){var r=[];return t(n)&&r.push(n),r.slice.apply(e,r)}function i(e,t){for(var n=arguments.length,i=Array(n>2?n-2:0),s=2;s<n;s++)i[s-2]=arguments[s];return function(){for(var n=arguments.length,s=Array(n),o=0;o<n;o++)s[o]=arguments[o];return e.apply(t,i.concat(r(s)))}}function s(t){var n=[];return e.each(t,function(e){n.push(e)}),n}function o(e){var t=e.match(/^(https?:)\/\/([^:\/?#]+):?(\d*)/i);return t&&(t[1]!==location.protocol||t[2]!==location.hostname||t[3]!==location.port)}function u(e){var t="timestamp="+(new Date).getTime();return e+(e.indexOf("?")===-1?"?":"&")+t}function a(e,t){if(e.naturalWidth&&!T)return void t(e.naturalWidth,e.naturalHeight);var n=document.createElement("img");n.onload=function(){t(this.width,this.height)},n.src=e.src}function f(e){var n=[],r=e.translateX,i=e.translateY,s=e.rotate,o=e.scaleX,u=e.scaleY;return t(r)&&0!==r&&n.push("translateX("+r+"px)"),t(i)&&0!==i&&n.push("translateY("+i+"px)"),t(s)&&0!==s&&n.push("rotate("+s+"deg)"),t(o)&&1!==o&&n.push("scaleX("+o+")"),t(u)&&1!==u&&n.push("scaleY("+u+")"),n.length?n.join(" "):"none"}function l(e,t){var n=Math.abs(e.degree)%180,r=(n>90?180-n:n)*Math.PI/180,i=Math.sin(r),s=Math.cos(r),o=e.width,u=e.height,a=e.aspectRatio,f=void 0,l=void 0;return t?(f=o/(s+i/a),l=f/a):(f=o*s+u*i,l=o*i+u*s),{width:f,height:l}}function c(n,r,i){var s=e("<canvas>")[0],o=s.getContext("2d"),u=0,a=0,f=r.naturalWidth,c=r.naturalHeight,h=r.rotate,p=r.scaleX,d=r.scaleY,v=t(p)&&t(d)&&(1!==p||1!==d),m=t(h)&&0!==h,g=m||v,y=f*Math.abs(p||1),b=c*Math.abs(d||1),w=void 0,E=void 0,S=void 0;return v&&(w=y/2,E=b/2),m&&(S=l({width:y,height:b,degree:h}),y=S.width,b=S.height,w=y/2,E=b/2),s.width=y,s.height=b,i.fillColor&&(o.fillStyle=i.fillColor,o.fillRect(0,0,y,b)),g&&(u=-f/2,a=-c/2,o.save(),o.translate(w,E)),m&&o.rotate(h*Math.PI/180),v&&o.scale(p,d),o.imageSmoothingEnabled=!!i.imageSmoothingEnabled,i.imageSmoothingQuality&&(o.imageSmoothingQuality=i.imageSmoothingQuality),o.drawImage(n,Math.floor(u),Math.floor(a),Math.floor(f),Math.floor(c)),g&&o.restore(),s}function h(e,t,n){var r="",i=void 0;for(i=t,n+=t;i<n;i++)r+=N(e.getUint8(i));return r}function p(e){var t=new DataView(e),n=t.byteLength,r=void 0,i=void 0,s=void 0,o=void 0,u=void 0,a=void 0,f=void 0,l=void 0,c=void 0,p=void 0;if(255===t.getUint8(0)&&216===t.getUint8(1))for(c=2;c<n;){if(255===t.getUint8(c)&&225===t.getUint8(c+1)){f=c;break}c++}if(f&&(i=f+4,s=f+10,"Exif"===h(t,i,4)&&(a=t.getUint16(s),u=18761===a,(u||19789===a)&&42===t.getUint16(s+2,u)&&(o=t.getUint32(s+4,u),o>=8&&(l=s+o)))),l)for(n=t.getUint16(l,u),p=0;p<n;p++)if(c=l+12*p+2,274===t.getUint16(c,u)){c+=8,r=t.getUint16(c,u),T&&t.setUint16(c,1,u);break}return r}function d(e){var t=e.replace(E,""),n=atob(t),r=n.length,i=new ArrayBuffer(r),s=new Uint8Array(i),o=void 0;
for(o=0;o<r;o++)s[o]=n.charCodeAt(o);return i}function v(e){var t=new Uint8Array(e),n=t.length,r="",i=void 0;for(i=0;i<n;i++)r+=N(t[i]);return"data:image/jpeg;base64,"+btoa(r)}function m(t,n){var r=t.pageX,i=t.pageY,s={endX:r,endY:i};return n?s:e.extend({startX:r,startY:i},s)}function g(t){var n=e.extend({},t),r=[];return e.each(t,function(t,i){delete n[t],e.each(n,function(e,t){var n=Math.abs(i.startX-t.startX),s=Math.abs(i.startY-t.startY),o=Math.abs(i.endX-t.endX),u=Math.abs(i.endY-t.endY),a=Math.sqrt(n*n+s*s),f=Math.sqrt(o*o+u*u),l=(f-a)/a;r.push(l)})}),r.sort(function(e,t){return Math.abs(e)<Math.abs(t)}),r[0]}function y(t){var n=0,r=0,i=0;return e.each(t,function(e,t){var s=t.startX,o=t.startY;n+=s,r+=o,i+=1}),n/=i,r/=i,{pageX:n,pageY:r}}e="default"in e?e.default:e;var b={viewMode:0,dragMode:"crop",aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},w='<div class="cropper_new-container"><div class="cropper_new-wrap-box"><div class="cropper_new-canvas"></div></div><div class="cropper_new-drag-box"></div><div class="cropper_new-crop-box"><span class="cropper_new-view-box"></span><span class="cropper_new-dashed dashed-h"></span><span class="cropper_new-dashed dashed-v"></span><span class="cropper_new-center"></span><span class="cropper_new-face"></span><span class="cropper_new-line line-e" data-action="e"></span><span class="cropper_new-line line-n" data-action="n"></span><span class="cropper_new-line line-w" data-action="w"></span><span class="cropper_new-line line-s" data-action="s"></span><span class="cropper_new-point point-e" data-action="e"></span><span class="cropper_new-point point-n" data-action="n"></span><span class="cropper_new-point point-w" data-action="w"></span><span class="cropper_new-point point-s" data-action="s"></span><span class="cropper_new-point point-ne" data-action="ne"></span><span class="cropper_new-point point-nw" data-action="nw"></span><span class="cropper_new-point point-sw" data-action="sw"></span><span class="cropper_new-point point-se" data-action="se"></span></div></div>',E=/^data:.*,/,S=/(Macintosh|iPhone|iPod|iPad).*AppleWebKit/i,x="undefined"!=typeof window?window.navigator:null,T=x&&S.test(x.userAgent),N=String.fromCharCode,C={render:function(){var e=this;e.initContainer(),e.initCanvas(),e.initCropBox(),e.renderCanvas(),e.cropped&&e.renderCropBox()},initContainer:function(){var e=this,t=e.options,n=e.$element,r=e.$container,i=e.$cropper_new,s="cropper_new-hidden";i.addClass(s),n.removeClass(s),i.css(e.container={width:Math.max(r.width(),Number(t.minContainerWidth)||200),height:Math.max(r.height(),Number(t.minContainerHeight)||100)}),n.addClass(s),i.removeClass(s)},initCanvas:function(){var t=this,n=t.options.viewMode,r=t.container,i=r.width,s=r.height,o=t.image,u=o.naturalWidth,a=o.naturalHeight,f=Math.abs(o.rotate)%180===90,l=f?a:u,c=f?u:a,h=l/c,p=i,d=s;s*h>i?3===n?p=s*h:d=i/h:3===n?d=i/h:p=s*h;var v={naturalWidth:l,naturalHeight:c,aspectRatio:h,width:p,height:d};v.oldLeft=v.left=(i-p)/2,v.oldTop=v.top=(s-d)/2,t.canvas=v,t.limited=1===n||2===n,t.limitCanvas(!0,!0),t.initialImage=e.extend({},o),t.initialCanvas=e.extend({},v)},limitCanvas:function(e,t){var n=this,r=n.options,i=r.viewMode,s=n.container,o=s.width,u=s.height,a=n.canvas,f=a.aspectRatio,l=n.cropBox,c=n.cropped&&l;if(e){var h=Number(r.minCanvasWidth)||0,p=Number(r.minCanvasHeight)||0;i&&(i>1?(h=Math.max(h,o),p=Math.max(p,u),3===i&&(p*f>h?h=p*f:p=h/f)):h?h=Math.max(h,c?l.width:0):p?p=Math.max(p,c?l.height:0):c&&(h=l.width,p=l.height,p*f>h?h=p*f:p=h/f)),h&&p?p*f>h?p=h/f:h=p*f:h?p=h/f:p&&(h=p*f),a.minWidth=h,a.minHeight=p,a.maxWidth=1/0,a.maxHeight=1/0}if(t)if(i){var d=o-a.width,v=u-a.height;a.minLeft=Math.min(0,d),a.minTop=Math.min(0,v),a.maxLeft=Math.max(0,d),a.maxTop=Math.max(0,v),c&&n.limited&&(a.minLeft=Math.min(l.left,l.left+l.width-a.width),a.minTop=Math.min(l.top,l.top+l.height-a.height),a.maxLeft=l.left,a.maxTop=l.top,2===i&&(a.width>=o&&(a.minLeft=Math.min(0,d),a.maxLeft=Math.max(0,d)),a.height>=u&&(a.minTop=Math.min(0,v),a.maxTop=Math.max(0,v))))}else a.minLeft=-a.width,a.minTop=-a.height,a.maxLeft=o,a.maxTop=u},renderCanvas:function(e){var t=this,n=t.canvas,r=t.image,i=r.rotate,s=r.naturalWidth,o=r.naturalHeight;if(t.rotated){t.rotated=!1;var u=l({width:r.width,height:r.height,degree:i}),a=u.width/u.height,c=1===r.aspectRatio;if(c||a!==n.aspectRatio){if(n.left-=(u.width-n.width)/2,n.top-=(u.height-n.height)/2,n.width=u.width,n.height=u.height,n.aspectRatio=a,n.naturalWidth=s,n.naturalHeight=o,c&&i%90||i%180){var h=l({width:s,height:o,degree:i});n.naturalWidth=h.width,n.naturalHeight=h.height}t.limitCanvas(!0,!1)}}(n.width>n.maxWidth||n.width<n.minWidth)&&(n.left=n.oldLeft),(n.height>n.maxHeight||n.height<n.minHeight)&&(n.top=n.oldTop),n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth),n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight),t.limitCanvas(!1,!0),n.oldLeft=n.left=Math.min(Math.max(n.left,n.minLeft),n.maxLeft),n.oldTop=n.top=Math.min(Math.max(n.top,n.minTop),n.maxTop),t.$canvas.css({width:n.width,height:n.height,transform:f({translateX:n.left,translateY:n.top})}),t.renderImage(),t.cropped&&t.limited&&t.limitCropBox(!0,!0),e&&t.output()},renderImage:function(t){var n=this,r=n.canvas,i=n.image,s=void 0;i.rotate&&(s=l({width:r.width,height:r.height,degree:i.rotate,aspectRatio:i.aspectRatio},!0)),e.extend(i,s?{width:s.width,height:s.height,left:(r.width-s.width)/2,top:(r.height-s.height)/2}:{width:r.width,height:r.height,left:0,top:0}),n.$clone.css({width:i.width,height:i.height,transform:f(e.extend({translateX:i.left,translateY:i.top},i))}),t&&n.output()},initCropBox:function(){var t=this,n=t.options,r=t.canvas,i=n.aspectRatio,s=Number(n.autoCropArea)||.8,o={width:r.width,height:r.height};i&&(r.height*i>r.width?o.height=o.width/i:o.width=o.height*i),t.cropBox=o,t.limitCropBox(!0,!0),o.width=Math.min(Math.max(o.width,o.minWidth),o.maxWidth),o.height=Math.min(Math.max(o.height,o.minHeight),o.maxHeight),o.width=Math.max(o.minWidth,o.width*s),o.height=Math.max(o.minHeight,o.height*s),o.oldLeft=o.left=r.left+(r.width-o.width)/2,o.oldTop=o.top=r.top+(r.height-o.height)/2,t.initialCropBox=e.extend({},o)},limitCropBox:function(e,t){var n=this,r=n.options,i=r.aspectRatio,s=n.container,o=s.width,u=s.height,a=n.canvas,f=n.cropBox,l=n.limited;if(e){var c=Number(r.minCropBoxWidth)||0,h=Number(r.minCropBoxHeight)||0,p=Math.min(o,l?a.width:o),d=Math.min(u,l?a.height:u);c=Math.min(c,o),h=Math.min(h,u),i&&(c&&h?h*i>c?h=c/i:c=h*i:c?h=c/i:h&&(c=h*i),d*i>p?d=p/i:p=d*i),f.minWidth=Math.min(c,p),f.minHeight=Math.min(h,d),f.maxWidth=p,f.maxHeight=d}t&&(l?(f.minLeft=Math.max(0,a.left),f.minTop=Math.max(0,a.top),f.maxLeft=Math.min(o,a.left+a.width)-f.width,f.maxTop=Math.min(u,a.top+a.height)-f.height):(f.minLeft=0,f.minTop=0,f.maxLeft=o-f.width,f.maxTop=u-f.height))},renderCropBox:function(){var e=this,t=e.options,n=e.container,r=n.width,i=n.height,s=e.cropBox;(s.width>s.maxWidth||s.width<s.minWidth)&&(s.left=s.oldLeft),(s.height>s.maxHeight||s.height<s.minHeight)&&(s.top=s.oldTop),s.width=Math.min(Math.max(s.width,s.minWidth),s.maxWidth),s.height=Math.min(Math.max(s.height,s.minHeight),s.maxHeight),e.limitCropBox(!1,!0),s.oldLeft=s.left=Math.min(Math.max(s.left,s.minLeft),s.maxLeft),s.oldTop=s.top=Math.min(Math.max(s.top,s.minTop),s.maxTop),t.movable&&t.cropBoxMovable&&e.$face.data("action",s.width===r&&s.height===i?"move":"all"),e.$cropBox.css({width:s.width,height:s.height,transform:f({translateX:s.left,translateY:s.top})}),e.cropped&&e.limited&&e.limitCanvas(!0,!0),e.disabled||e.output()},output:function(){var e=this;e.preview(),e.completed&&e.trigger("crop",e.getData())}},k="preview",L={initPreview:function(){var t=this,n=t.crossOrigin,r=n?t.crossOriginUrl:t.url,i=document.createElement("img");n&&(i.crossOrigin=n),i.src=r;var s=e(i);t.$preview=e(t.options.preview),t.$clone2=s,t.$viewBox.html(s),t.$preview.each(function(t,i){var s=e(i),o=document.createElement("img");s.data(k,{width:s.width(),height:s.height(),html:s.html()}),n&&(o.crossOrigin=n),o.src=r,o.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',s.html(o)})},resetPreview:function(){this.$preview.each(function(t,n){var r=e(n),i=r.data(k);r.css({width:i.width,height:i.height}).html(i.html).removeData(k)})},preview:function(){var t=this,n=t.image,r=t.canvas,i=t.cropBox,s=i.width,o=i.height,u=n.width,a=n.height,l=i.left-r.left-n.left,c=i.top-r.top-n.top;t.cropped&&!t.disabled&&(t.$clone2.css({width:u,height:a,transform:f(e.extend({translateX:-l,translateY:-c},n))}),t.$preview.each(function(t,r){var i=e(r),h=i.data(k),p=h.width,d=h.height,v=p,m=d,g=1;s&&(g=p/s,m=o*g),o&&m>d&&(g=d/o,v=s*g,m=d),i.css({width:v,height:m}).find("img").css({width:u*g,height:a*g,transform:f(e.extend({translateX:-l*g,translateY:-c*g},n))})}))}},A="undefined"!=typeof window?window.PointerEvent:null,O=A?"pointerdown":"touchstart mousedown",M=A?"pointermove":"touchmove mousemove",_=A?" pointerup pointercancel":"touchend touchcancel mouseup",D="wheel mousewheel DOMMouseScroll",P="dblclick",H="resize",B="cropstart",j="cropmove",F="cropend",I="crop",q="zoom",R={bind:function(){var t=this,n=t.options,r=t.$element,s=t.$cropper_new;e.isFunction(n.cropstart)&&r.on(B,n.cropstart),e.isFunction(n.cropmove)&&r.on(j,n.cropmove),e.isFunction(n.cropend)&&r.on(F,n.cropend),e.isFunction(n.crop)&&r.on(I,n.crop),e.isFunction(n.zoom)&&r.on(q,n.zoom),s.on(O,i(t.cropStart,this)),n.zoomable&&n.zoomOnWheel&&s.on(D,i(t.wheel,this)),n.toggleDragModeOnDblclick&&s.on(P,i(t.dblclick,this)),e(document).on(M,t.onCropMove=i(t.cropMove,this)).on(_,t.onCropEnd=i(t.cropEnd,this)),n.responsive&&e(window).on(H,t.onResize=i(t.resize,this))},unbind:function(){var t=this,n=t.options,r=t.$element,i=t.$cropper_new;e.isFunction(n.cropstart)&&r.off(B,n.cropstart),e.isFunction(n.cropmove)&&r.off(j,n.cropmove),e.isFunction(n.cropend)&&r.off(F,n.cropend),e.isFunction(n.crop)&&r.off(I,n.crop),e.isFunction(n.zoom)&&r.off(q,n.zoom),i.off(O,t.cropStart),n.zoomable&&n.zoomOnWheel&&i.off(D,t.wheel),n.toggleDragModeOnDblclick&&i.off(P,t.dblclick),e(document).off(M,t.onCropMove).off(_,t.onCropEnd),n.responsive&&e(window).off(H,t.onResize)}},U=/^(e|w|s|n|se|sw|ne|nw|all|crop|move|zoom)$/,z={resize:function(){var t=this,n=t.options,r=t.$container,i=t.container,s=Number(n.minContainerWidth)||200,o=Number(n.minContainerHeight)||100;if(!t.disabled&&i.width!==s&&i.height!==o){var u=r.width()/i.width;1===u&&r.height()===i.height||!function(){var r=void 0,i=void 0;n.restore&&(r=t.getCanvasData(),i=t.getCropBoxData()),t.render(),n.restore&&(t.setCanvasData(e.each(r,function(e,t){r[e]=t*u})),t.setCropBoxData(e.each(i,function(e,t){i[e]=t*u})))}()}},dblclick:function(){var e=this;e.disabled||"none"===e.options.dragMode||e.setDragMode(e.$dragBox.hasClass("cropper_new-crop")?"move":"crop")},wheel:function(e){var t=this,n=e.originalEvent||e,r=Number(t.options.wheelZoomRatio)||.1;if(!t.disabled&&(e.preventDefault(),!t.wheeling)){t.wheeling=!0,setTimeout(function(){t.wheeling=!1},50);var i=1;n.deltaY?i=n.deltaY>0?1:-1:n.wheelDelta?i=-n.wheelDelta/120:n.detail&&(i=n.detail>0?1:-1),t.zoom(-i*r,e)}},cropStart:function(t){var n=this;if(!n.disabled){var r=n.options,i=n.pointers,o=t.originalEvent,u=void 0;o&&o.changedTouches?e.each(o.changedTouches,function(e,t){i[t.identifier]=m(t)}):i[o&&o.pointerId||0]=m(o||t),u=s(i).length>1&&r.zoomable&&r.zoomOnTouch?"zoom":e(t.target).data("action"),U.test(u)&&(n.trigger("cropstart",{originalEvent:o,action:u}).isDefaultPrevented()||(t.preventDefault(),n.action=u,n.cropping=!1,"crop"===u&&(n.cropping=!0,n.$dragBox.addClass("cropper_new-modal"))))}},cropMove:function(t){var n=this,r=n.action;if(!n.disabled&&r){var i=n.pointers,s=t.originalEvent;t.preventDefault(),n.trigger("cropmove",{originalEvent:s,action:r}).isDefaultPrevented()||(s&&s.changedTouches?e.each(s.changedTouches,function(t,n){e.extend(i[n.identifier],m(n,!0))}):e.extend(i[s&&s.pointerId||0],m(s||t,!0)),n.change(t))}},cropEnd:function(t){var n=this;if(!n.disabled){var r=n.action,i=n.pointers,o=t.originalEvent;o&&o.changedTouches?e.each(o.changedTouches,function(e,t){delete i[t.identifier]}):delete i[o&&o.pointerId||0],r&&(t.preventDefault(),s(i).length||(n.action=""),n.cropping&&(n.cropping=!1,n.$dragBox.toggleClass("cropper_new-modal",n.cropped&&n.options.modal)),n.trigger("cropend",{originalEvent:o,action:r}))}}},W="e",X="w",V="s",$="n",J="se",K="sw",Q="ne",G="nw",Y={change:function(t){var n=this,r=n.options,i=n.pointers,o=i[s(i)[0]],u=n.container,a=n.canvas,f=n.cropBox,l=n.action,c=r.aspectRatio,h=f.width,p=f.height,d=f.left,v=f.top,m=d+h,y=v+p,b=0,w=0,E=u.width,S=u.height,x=!0,T=void 0;!c&&t.shiftKey&&(c=h&&p?h/p:1),n.limited&&(b=f.minLeft,w=f.minTop,E=b+Math.min(u.width,a.width,a.left+a.width),S=w+Math.min(u.height,a.height,a.top+a.height));var N={x:o.endX-o.startX,y:o.endY-o.startY};switch(c&&(N.X=N.y*c,N.Y=N.x/c),l){case"all":d+=N.x,v+=N.y;break;case W:if(N.x>=0&&(m>=E||c&&(v<=w||y>=S))){x=!1;break}h+=N.x,c&&(p=h/c,v-=N.Y/2),h<0&&(l=X,h=0);break;case $:if(N.y<=0&&(v<=w||c&&(d<=b||m>=E))){x=!1;break}p-=N.y,v+=N.y,c&&(h=p*c,d+=N.X/2),p<0&&(l=V,p=0);break;case X:if(N.x<=0&&(d<=b||c&&(v<=w||y>=S))){x=!1;break}h-=N.x,d+=N.x,c&&(p=h/c,v+=N.Y/2),h<0&&(l=W,h=0);break;case V:if(N.y>=0&&(y>=S||c&&(d<=b||m>=E))){x=!1;break}p+=N.y,c&&(h=p*c,d-=N.X/2),p<0&&(l=$,p=0);break;case Q:if(c){if(N.y<=0&&(v<=w||m>=E)){x=!1;break}p-=N.y,v+=N.y,h=p*c}else N.x>=0?m<E?h+=N.x:N.y<=0&&v<=w&&(x=!1):h+=N.x,N.y<=0?v>w&&(p-=N.y,v+=N.y):(p-=N.y,v+=N.y);h<0&&p<0?(l=K,p=0,h=0):h<0?(l=G,h=0):p<0&&(l=J,p=0);break;case G:if(c){if(N.y<=0&&(v<=w||d<=b)){x=!1;break}p-=N.y,v+=N.y,h=p*c,d+=N.X}else N.x<=0?d>b?(h-=N.x,d+=N.x):N.y<=0&&v<=w&&(x=!1):(h-=N.x,d+=N.x),N.y<=0?v>w&&(p-=N.y,v+=N.y):(p-=N.y,v+=N.y);h<0&&p<0?(l=J,p=0,h=0):h<0?(l=Q,h=0):p<0&&(l=K,p=0);break;case K:if(c){if(N.x<=0&&(d<=b||y>=S)){x=!1;break}h-=N.x,d+=N.x,p=h/c}else N.x<=0?d>b?(h-=N.x,d+=N.x):N.y>=0&&y>=S&&(x=!1):(h-=N.x,d+=N.x),N.y>=0?y<S&&(p+=N.y):p+=N.y;h<0&&p<0?(l=Q,p=0,h=0):h<0?(l=J,h=0):p<0&&(l=G,p=0);break;case J:if(c){if(N.x>=0&&(m>=E||y>=S)){x=!1;break}h+=N.x,p=h/c}else N.x>=0?m<E?h+=N.x:N.y>=0&&y>=S&&(x=!1):h+=N.x,N.y>=0?y<S&&(p+=N.y):p+=N.y;h<0&&p<0?(l=G,p=0,h=0):h<0?(l=K,h=0):p<0&&(l=Q,p=0);break;case"move":n.move(N.x,N.y),x=!1;break;case"zoom":n.zoom(g(i),t.originalEvent),x=!1;break;case"crop":if(!N.x||!N.y){x=!1;break}T=n.$cropper_new.offset(),d=o.startX-T.left,v=o.startY-T.top,h=f.minWidth,p=f.minHeight,N.x>0?l=N.y>0?J:Q:N.x<0&&(d-=h,l=N.y>0?K:G),N.y<0&&(v-=p),n.cropped||(n.$cropBox.removeClass("cropper_new-hidden"),n.cropped=!0,n.limited&&n.limitCropBox(!0,!0))}x&&(f.width=h,f.height=p,f.left=d,f.top=v,n.action=l,n.renderCropBox()),e.each(i,function(e,t){t.startX=t.endX,t.startY=t.endY})}},Z=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},et=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),tt=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},nt={crop:function(){var e=this;e.ready&&!e.disabled&&(e.cropped||(e.cropped=!0,e.limitCropBox(!0,!0),e.options.modal&&e.$dragBox.addClass("cropper_new-modal"),e.$cropBox.removeClass("cropper_new-hidden")),e.setCropBoxData(e.initialCropBox))},reset:function(){var t=this;t.ready&&!t.disabled&&(t.image=e.extend({},t.initialImage),t.canvas=e.extend({},t.initialCanvas),t.cropBox=e.extend({},t.initialCropBox),t.renderCanvas(),t.cropped&&t.renderCropBox())},clear:function(){var t=this;t.cropped&&!t.disabled&&(e.extend(t.cropBox,{left:0,top:0,width:0,height:0}),t.cropped=!1,t.renderCropBox(),t.limitCanvas(!0,!0),t.renderCanvas(),t.$dragBox.removeClass("cropper_new-modal"),t.$cropBox.addClass("cropper_new-hidden"))},replace:function(e,t){var n=this;!n.disabled&&e&&(n.isImg&&n.$element.attr("src",e),t?(n.url=e,n.$clone.attr("src",e),n.ready&&n.$preview.find("img").add(n.$clone2).attr("src",e)):(n.isImg&&(n.replaced=!0),n.options.data=null,n.load(e)))},enable:function(){var e=this;e.ready&&(e.disabled=!1,e.$cropper_new.removeClass("cropper_new-disabled"))},disable:function(){var e=this;e.ready&&(e.disabled=!0,e.$cropper_new.addClass("cropper_new-disabled"))},destroy:function(){var e=this,t=e.$element;e.loaded?(e.isImg&&e.replaced&&t.attr("src",e.originalUrl),e.unbuild(),t.removeClass("cropper_new-hidden")):e.isImg?t.off("load",e.start):e.$clone&&e.$clone.remove(),t.removeData("cropper_new")},move:function(e,t){var r=this,i=r.canvas;r.moveTo(n(e)?e:i.left+Number(e),n(t)?t:i.top+Number(t))},moveTo:function(e,r){var i=this,s=i.canvas,o=!1;n(r)&&(r=e),e=Number(e),r=Number(r),i.ready&&!i.disabled&&i.options.movable&&(t(e)&&(s.left=e,o=!0),t(r)&&(s.top=r,o=!0),o&&i.renderCanvas(!0))},zoom:function(e,t){var n=this,r=n.canvas;e=Number(e),e=e<0?1/(1-e):1+e,n.zoomTo(r.width*e/r.naturalWidth,t)},zoomTo:function(e,t){var n=this,r=n.options,i=n.pointers,o=n.canvas,u=o.width,a=o.height,f=o.naturalWidth,l=o.naturalHeight;if(e=Number(e),e>=0&&n.ready&&!n.disabled&&r.zoomable){var c=f*e,h=l*e,p=void 0;if(t&&(p=t.originalEvent),n.trigger("zoom",{originalEvent:p,oldRatio:u/f,ratio:c/f}).isDefaultPrevented())return;if(p){var d=n.$cropper_new.offset(),v=i&&s(i).length?y(i):{pageX:t.pageX||p.pageX||0,pageY:t.pageY||p.pageY||0};o.left-=(c-u)*((v.pageX-d.left-o.left)/u),o.top-=(h-a)*((v.pageY-d.top-o.top)/a)}else o.left-=(c-u)/2,o.top-=(h-a)/2;o.width=c,o.height=h,n.renderCanvas(!0)}},rotate:function(e){var t=this;t.rotateTo((t.image.rotate||0)+Number(e))},rotateTo:function(e){var n=this;e=Number(e),t(e)&&n.ready&&!n.disabled&&n.options.rotatable&&(n.image.rotate=e%360,n.rotated=!0,n.renderCanvas(!0))},scale:function(e,r){var i=this,s=i.image,o=!1;n(r)&&(r=e),e=Number(e),r=Number(r),i.ready&&!i.disabled&&i.options.scalable&&(t(e)&&(s.scaleX=e,o=!0),t(r)&&(s.scaleY=r,o=!0),o&&i.renderImage(!0))},scaleX:function(e){var n=this,r=n.image.scaleY;n.scale(e,t(r)?r:1)},scaleY:function(e){var n=this,r=n.image.scaleX;n.scale(t(r)?r:1,e)},getData:function(t){var n=this,r=n.options,i=n.image,s=n.canvas,o=n.cropBox,u=void 0,a=void 0;return n.ready&&n.cropped?(a={x:o.left-s.left,y:o.top-s.top,width:o.width,height:o.height},u=i.width/i.naturalWidth,e.each(a,function(e,n){n/=u,a[e]=t?Math.round(n):n})):a={x:0,y:0,width:0,height:0},r.rotatable&&(a.rotate=i.rotate||0),r.scalable&&(a.scaleX=i.scaleX||1,a.scaleY=i.scaleY||1),a},setData:function(n){var r=this,i=r.options,s=r.image,o=r.canvas,u={},a=void 0,f=void 0,l=void 0;e.isFunction(n)&&(n=n.call(r.element)),r.ready&&!r.disabled&&e.isPlainObject(n)&&(i.rotatable&&t(n.rotate)&&n.rotate!==s.rotate&&(s.rotate=n.rotate,r.rotated=a=!0),i.scalable&&(t(n.scaleX)&&n.scaleX!==s.scaleX&&(s.scaleX=n.scaleX,f=!0),t(n.scaleY)&&n.scaleY!==s.scaleY&&(s.scaleY=n.scaleY,f=!0)),a?r.renderCanvas():f&&r.renderImage(),l=s.width/s.naturalWidth,t(n.x)&&(u.left=n.x*l+o.left),t(n.y)&&(u.top=n.y*l+o.top),t(n.width)&&(u.width=n.width*l),t(n.height)&&(u.height=n.height*l),r.setCropBoxData(u))},getContainerData:function(){return this.ready?this.container:{}},getImageData:function(){return this.loaded?this.image:{}},getCanvasData:function(){var t=this,n=t.canvas,r={};return t.ready&&e.each(["left","top","width","height","naturalWidth","naturalHeight"],function(e,t){r[t]=n[t]}),r},setCanvasData:function(n){var r=this,i=r.canvas,s=i.aspectRatio;e.isFunction(n)&&(n=n.call(r.$element)),r.ready&&!r.disabled&&e.isPlainObject(n)&&(t(n.left)&&(i.left=n.left),t(n.top)&&(i.top=n.top),t(n.width)?(i.width=n.width,i.height=n.width/s):t(n.height)&&(i.height=n.height,i.width=n.height*s),r.renderCanvas(!0))},getCropBoxData:function(){var e=this,t=e.cropBox;return e.ready&&e.cropped?{left:t.left,top:t.top,width:t.width,height:t.height}:{}},setCropBoxData:function(n){var r=this,i=r.cropBox,s=r.options.aspectRatio,o=void 0,u=void 0;e.isFunction(n)&&(n=n.call(r.$element)),r.ready&&r.cropped&&!r.disabled&&e.isPlainObject(n)&&(t(n.left)&&(i.left=n.left),t(n.top)&&(i.top=n.top),t(n.width)&&n.width!==i.width&&(o=!0,i.width=n.width),t(n.height)&&n.height!==i.height&&(u=!0,i.height=n.height),s&&(o?i.height=i.width/s:u&&(i.width=i.height*s)),r.renderCropBox())},getCroppedCanvas:function(t){var n=this;if(!n.ready||!window.HTMLCanvasElement)return null;if(e.isPlainObject(t)||(t={}),!n.cropped)return c(n.$clone[0],n.image,t);var r=n.getData(),i=r.width,s=r.height,o=i/s,u=void 0,a=void 0,f=void 0;e.isPlainObject(t)&&(u=t.width,a=t.height,u?(a=u/o,f=u/i):a&&(u=a*o,f=a/s));var l=Math.floor(u||i),h=Math.floor(a||s),p=e("<canvas>")[0],d=p.getContext("2d");p.width=l,p.height=h,t.fillColor&&(d.fillStyle=t.fillColor,d.fillRect(0,0,l,h));var v=function(){var e=c(n.$clone[0],n.image,t),o=e.width,u=e.height,a=n.canvas,l=[e],h=r.x+a.naturalWidth*(Math.abs(r.scaleX||1)-1)/2,p=r.y+a.naturalHeight*(Math.abs(r.scaleY||1)-1)/2,d=void 0,v=void 0,m=void 0,g=void 0,y=void 0,b=void 0;return h<=-i||h>o?h=d=m=y=0:h<=0?(m=-h,h=0,d=y=Math.min(o,i+h)):h<=o&&(m=0,d=y=Math.min(i,o-h)),d<=0||p<=-s||p>u?p=v=g=b=0:p<=0?(g=-p,p=0,v=b=Math.min(u,s+p)):p<=u&&(g=0,v=b=Math.min(s,u-p)),l.push(Math.floor(h),Math.floor(p),Math.floor(d),Math.floor(v)),f&&(m*=f,g*=f,y*=f,b*=f),y>0&&b>0&&l.push(Math.floor(m),Math.floor(g),Math.floor(y),Math.floor(b)),l}();return d.imageSmoothingEnabled=!!t.imageSmoothingEnabled,t.imageSmoothingQuality&&(d.imageSmoothingQuality=t.imageSmoothingQuality),d.drawImage.apply(d,tt(v)),p},setAspectRatio:function(e){var t=this,r=t.options;t.disabled||n(e)||(r.aspectRatio=Math.max(0,e)||NaN,t.ready&&(t.initCropBox(),t.cropped&&t.renderCropBox()))},setDragMode:function(e){var t=this,n=t.options,r=void 0,i=void 0;t.loaded&&!t.disabled&&(r="crop"===e,i=n.movable&&"move"===e,e=r||i?e:"none",t.$dragBox.data("action",e).toggleClass("cropper_new-crop",r).toggleClass("cropper_new-move",i),n.cropBoxMovable||t.$face.data("action",e).toggleClass("cropper_new-crop",r).toggleClass("cropper_new-move",i))}},rt="cropper_new-hidden",it=/^data:/,st=/^data:image\/jpeg;base64,/,ot=function(){function t(n,r){Z(this,t);var i=this;i.$element=e(n),i.options=e.extend({},b,e.isPlainObject(r)&&r),i.loaded=!1,i.ready=!1,i.completed=!1,i.rotated=!1,i.cropped=!1,i.disabled=!1,i.replaced=!1,i.limited=!1,i.wheeling=!1,i.isImg=!1,i.originalUrl="",i.canvas=null,i.cropBox=null,i.pointers={},i.init()}return et(t,[{key:"init",value:function(){var e=this,t=e.$element,n=void 0;if(t.is("img")){if(e.isImg=!0,e.originalUrl=n=t.attr("src"),!n)return;n=t.prop("src")}else t.is("canvas")&&window.HTMLCanvasElement&&(n=t[0].toDataURL());e.load(n)}},{key:"trigger",value:function(t,n){var r=e.Event(t,n);return this.$element.trigger(r),r}},{key:"load",value:function(t){var n=this,r=n.options,i=n.$element;if(t){if(n.url=t,n.image={},!r.checkOrientation||!window.ArrayBuffer)return void n.clone();if(it.test(t))return void (st.test(t)?n.read(d(t)):n.clone());var s=new XMLHttpRequest;s.onerror=s.onabort=e.proxy(function(){n.clone()},this),s.onload=function(){n.read(this.response)},r.checkCrossOrigin&&o(t)&&i.prop("crossOrigin")&&(t=u(t)),s.open("get",t),s.responseType="arraybuffer",s.withCredentials="use-credentials"===i.prop("crossOrigin"),s.send()}}},{key:"read",value:function(e){var t=this,n=t.options,r=p(e),i=t.image,s=0,o=1,u=1;if(r>1)switch(t.url=v(e),r){case 2:o=-1;break;case 3:s=-180;break;case 4:u=-1;break;case 5:s=90,u=-1;break;case 6:s=90;break;case 7:s=90,o=-1;break;case 8:s=-90}n.rotatable&&(i.rotate=s),n.scalable&&(i.scaleX=o,i.scaleY=u),t.clone()}},{key:"clone",value:function(){var t=this,n=t.options,r=t.$element,i=t.url,s="",a=void 0;n.checkCrossOrigin&&o(i)&&(s=r.prop("crossOrigin"),s?a=i:(s="anonymous",a=u(i))),t.crossOrigin=s,t.crossOriginUrl=a;var f=document.createElement("img");s&&(f.crossOrigin=s),f.src=a||i;var l=e(f);t.$clone=l,t.isImg?r[0].complete?t.start():r.one("load",e.proxy(t.start,this)):l.one("load",e.proxy(t.start,this)).one("error",e.proxy(t.stop,this)).addClass("cropper_new-hide").insertAfter(r)}},{key:"start",value:function(){var t=this,n=t.$clone,r=t.$element;t.isImg||(n.off("error",t.stop),r=n),a(r[0],function(n,r){e.extend(t.image,{naturalWidth:n,naturalHeight:r,aspectRatio:n/r}),t.loaded=!0,t.build()})}},{key:"stop",value:function(){var e=this;e.$clone.remove(),e.$clone=null}},{key:"build",value:function(){var t=this,n=t.options,r=t.$element,i=t.$clone,s=void 0,o=void 0,u=void 0;t.loaded&&(t.ready&&t.unbuild(),t.$container=r.parent(),t.$cropper_new=s=e(w),t.$canvas=s.find(".cropper_new-canvas").append(i),t.$dragBox=s.find(".cropper_new-drag-box"),t.$cropBox=o=s.find(".cropper_new-crop-box"),t.$viewBox=s.find(".cropper_new-view-box"),t.$face=u=o.find(".cropper_new-face"),r.addClass(rt).after(s),t.isImg||i.removeClass("cropper_new-hide"),t.initPreview(),t.bind(),n.aspectRatio=Math.max(0,n.aspectRatio)||NaN,n.viewMode=Math.max(0,Math.min(3,Math.round(n.viewMode)))||0,t.cropped=n.autoCrop,n.autoCrop?n.modal&&t.$dragBox.addClass("cropper_new-modal"):o.addClass(rt),n.guides||o.find(".cropper_new-dashed").addClass(rt),n.center||o.find(".cropper_new-center").addClass(rt),n.cropBoxMovable&&u.addClass("cropper_new-move").data("action","all"),n.highlight||u.addClass("cropper_new-invisible"),n.background&&s.addClass("cropper_new-bg"),n.cropBoxResizable||o.find(".cropper_new-line, .cropper_new-point").addClass(rt),t.setDragMode(n.dragMode),t.render(),t.ready=!0,t.setData(n.data),t.completing=setTimeout(function(){e.isFunction(n.ready)&&r.one("ready",n.ready),t.trigger("ready"),t.trigger("crop",t.getData()),t.completed=!0},0))}},{key:"unbuild",value:function(){var e=this;e.ready&&(e.completed||clearTimeout(e.completing),e.ready=!1,e.completed=!1,e.initialImage=null,e.initialCanvas=null,e.initialCropBox=null,e.container=null,e.canvas=null,e.cropBox=null,e.unbind(),e.resetPreview(),e.$preview=null,e.$viewBox=null,e.$cropBox=null,e.$dragBox=null,e.$canvas=null,e.$container=null,e.$cropper_new.remove(),e.$cropper_new=null)}}],[{key:"setDefaults",value:function(t){e.extend(b,e.isPlainObject(t)&&t)}}]),t}();e.extend(ot.prototype,C),e.extend(ot.prototype,L),e.extend(ot.prototype,R),e.extend(ot.prototype,z),e.extend(ot.prototype,Y),e.extend(ot.prototype,nt);var ut="cropper_new",at=e.fn.cropper_new;e.fn.cropper_new=function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var s=void 0;return this.each(function(n,i){var o=e(i),u=o.data(ut);if(!u){if(/destroy/.test(t))return;var a=e.extend({},o.data(),e.isPlainObject(t)&&t);o.data(ut,u=new ot(i,a))}if("string"==typeof t){var f=u[t];e.isFunction(f)&&(s=f.apply(u,r))}}),"undefined"!=typeof s?s:this},e.fn.cropper_new.Constructor=ot,e.fn.cropper_new.setDefaults=ot.setDefaults,e.fn.cropper_new.noConflict=function(){return e.fn.cropper_new=at,this}}),function(e,t){"object"==typeof module&&module.exports?module.exports=e.document?t(e):t:e.Highcharts=t(e)}("undefined"!=typeof window?window:this,function(e){e=function(){var e=window,t=e.document,n=e.navigator&&e.navigator.userAgent||"",r=t&&t.createElementNS&&!!t.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,i=/(edge|msie|trident)/i.test(n)&&!window.opera,s=!r,o=/Firefox/.test(n),u=o&&4>parseInt(n.split("Firefox/")[1],10);return e.Highcharts?e.Highcharts.error(16,!0):{product:"Highcharts",version:"5.0.12",deg2rad:2*Math.PI/360,doc:t,hasBidiBug:u,hasTouch:t&&void 0!==t.documentElement.ontouchstart,isMS:i,isWebKit:/AppleWebKit/.test(n),isFirefox:o,isTouchDevice:/(Mobile|Android|Windows Phone)/.test(n),SVG_NS:"http://www.w3.org/2000/svg",chartCount:0,seriesTypes:{},symbolSizes:{},svg:r,vml:s,win:e,marginNames:["plotTop","marginRight","marginBottom","plotLeft"],noop:function(){},charts:[]}}(),function(e){var t=[],n=e.charts,r=e.doc,i=e.win;e.error=function(t,n){t=e.isNumber(t)?"Highcharts error #"+t+": www.highcharts.com/errors/"+t:t;if(n)throw Error(t);i.console&&console.log(t)},e.Fx=function(e,t,n){this.options=t,this.elem=e,this.prop=n},e.Fx.prototype={dSetter:function(){var e=this.paths[0],t=this.paths[1],n=[],r=this.now,i=e.length,s;if(1===r)n=this.toD;else if(i===t.length&&1>r)for(;i--;)s=parseFloat(e[i]),n[i]=isNaN(s)?e[i]:r*parseFloat(t[i]-s)+s;else n=t;this.elem.attr("d",n,null,!0)},update:function(){var e=this.elem,t=this.prop,n=this.now,r=this.options.step;this[t+"Setter"]?this[t+"Setter"]():e.attr?e.element&&e.attr(t,n,null,!0):e.style[t]=n+this.unit,r&&r.call(e,n,this)},run:function(e,n,r){var i=this,s=function(e){return s.stopped?!1:i.step(e)},o;this.startTime=+(new Date),this.start=e,this.end=n,this.unit=r,this.now=this.start,this.pos=0,s.elem=this.elem,s.prop=this.prop,s()&&1===t.push(s)&&(s.timerId=setInterval(function(){for(o=0;o<t.length;o++)t[o]()||t.splice(o--,1);t.length||clearInterval(s.timerId)},13))},step:function(t){var n=+(new Date),r,i=this.options,s=this.elem,o=i.complete,u=i.duration,f=i.curAnim;return s.attr&&!s.element?t=!1:t||n>=u+this.startTime?(this.now=this.end,this.pos=1,this.update(),r=f[this.prop]=!0,e.objectEach(f,function(e){!0!==e&&(r=!1)}),r&&o&&o.call(s),t=!1):(this.pos=i.easing((n-this.startTime)/u),this.now=this.start+(this.end-this.start)*this.pos,this.update(),t=!0),t},initPath:function(t,n,r){function i(e){var t,n;for(v=e.length;v--;)t="M"===e[v]||"L"===e[v],n=/[a-zA-Z]/.test(e[v+3]),t&&n&&e.splice(v+1,0,e[v+1],e[v+2],e[v+1],e[v+2])}function s(e,t){for(;e.length<p;){e[0]=t[p-e.length];var n=e.slice(0,h);[].splice.apply(e,[0,0].concat(n)),m&&(n=e.slice(e.length-h),[].splice.apply(e,[e.length,0].concat(n)),v--)}e[0]="M"}function o(e,t){for(var n=(p-e.length)/h;0<n&&n--;)d=e.slice().splice(e.length/g-h,h*g),d[0]=t[p-h-n*h],c&&(d[h-6]=d[h-2],d[h-5]=d[h-1]),[].splice.apply(e,[e.length/g,0].concat(d)),m&&n--}n=n||"";var u,f=t.startX,l=t.endX,c=-1<n.indexOf("C"),h=c?7:3,p,d,v;n=n.split(" "),r=r.slice();var m=t.isArea,g=m?2:1,y;c&&(i(n),i(r));if(f&&l){for(v=0;v<f.length;v++){if(f[v]===l[0]){u=v;break}if(f[0]===l[l.length-f.length+v]){u=v,y=!0;break}}void 0===u&&(n=[])}return n.length&&e.isNumber(u)&&(p=r.length+u*g*h,y?(s(n,r),o(r,n)):(s(r,n),o(n,r))),[n,r]}},e.Fx.prototype.fillSetter=e.Fx.prototype.strokeSetter=function(){this.elem.attr(this.prop,e.color(this.start).tweenTo(e.color(this.end),this.pos),null,!0)},e.extend=function(e,t){var n;e||(e={});for(n in t)e[n]=t[n];return e},e.merge=function(){var t,n=arguments,r,i={},s=function(t,n){return"object"!=typeof t&&(t={}),e.objectEach(n,function(r,i){!e.isObject(r,!0)||e.isClass(r)||e.isDOMElement(r)?t[i]=n[i]:t[i]=s(t[i]||{},r)}),t};!0===n[0]&&(i=n[1],n=Array.prototype.slice.call(n,2)),r=n.length;for(t=0;t<r;t++)i=s(i,n[t]);return i},e.pInt=function(e,t){return parseInt(e,t||10)},e.isString=function(e){return"string"==typeof e},e.isArray=function(e){return e=Object.prototype.toString.call(e),"[object Array]"===e||"[object Array Iterator]"===e},e.isObject=function(t,n){return!!t&&"object"==typeof t&&(!n||!e.isArray(t))},e.isDOMElement=function(t){return e.isObject(t)&&"number"==typeof t.nodeType},e.isClass=function(t){var n=t&&t.constructor;return!(!e.isObject(t,!0)||e.isDOMElement(t)||!n||!n.name||"Object"===n.name)},e.isNumber=function(e){return"number"==typeof e&&!isNaN(e)},e.erase=function(e,t){for(var n=e.length;n--;)if(e[n]===t){e.splice(n,1);break}},e.defined=function(e){return void 0!==e&&null!==e},e.attr=function(t,n,r){var i;return e.isString(n)?e.defined(r)?t.setAttribute(n,r):t&&t.getAttribute&&(i=t.getAttribute(n)):e.defined(n)&&e.isObject(n)&&e.objectEach(n,function(e,n){t.setAttribute(n,e)}),i},e.splat=function(t){return e.isArray(t)?t:[t]},e.syncTimeout=function(e,t,n){if(t)return setTimeout(e,t,n);e.call(0,n)},e.pick=function(){var e=arguments,t,n,r=e.length;for(t=0;t<r;t++)if(n=e[t],void 0!==n&&null!==n)return n},e.css=function(t,n){e.isMS&&!e.svg&&n&&void 0!==n.opacity&&(n.filter="alpha(opacity="+100*n.opacity+")"),e.extend(t.style,n)},e.createElement=function(t,n,i,s,o){t=r.createElement(t);var u=e.css;return n&&e.extend(t,n),o&&u(t,{padding:0,border:"none",margin:0}),i&&u(t,i),s&&s.appendChild(t),t},e.extendClass=function(t,n){var r=function(){};return r.prototype=new t,e.extend(r.prototype,n),r},e.pad=function(e,t,n){return Array((t||2)+1-
String(e).length).join(n||0)+e},e.relativeLength=function(e,t){return/%$/.test(e)?t*parseFloat(e)/100:parseFloat(e)},e.wrap=function(e,t,n){var r=e[t];e[t]=function(){var e=Array.prototype.slice.call(arguments),t=arguments,i=this;return i.proceed=function(){r.apply(i,arguments.length?arguments:t)},e.unshift(r),e=n.apply(this,e),i.proceed=null,e}},e.getTZOffset=function(t){var n=e.Date;return 6e4*(n.hcGetTimezoneOffset&&n.hcGetTimezoneOffset(t)||n.hcTimezoneOffset||0)},e.dateFormat=function(t,n,r){if(!e.defined(n)||isNaN(n))return e.defaultOptions.lang.invalidDate||"";t=e.pick(t,"%Y-%m-%d %H:%M:%S");var i=e.Date,s=new i(n-e.getTZOffset(n)),o=s[i.hcGetHours](),u=s[i.hcGetDay](),f=s[i.hcGetDate](),l=s[i.hcGetMonth](),c=s[i.hcGetFullYear](),h=e.defaultOptions.lang,p=h.weekdays,d=h.shortWeekdays,v=e.pad,i=e.extend({a:d?d[u]:p[u].substr(0,3),A:p[u],d:v(f),e:v(f,2," "),w:u,b:h.shortMonths[l],B:h.months[l],m:v(l+1),y:c.toString().substr(2,2),Y:c,H:v(o),k:o,I:v(o%12||12),l:o%12||12,M:v(s[i.hcGetMinutes]()),p:12>o?"AM":"PM",P:12>o?"am":"pm",S:v(s.getSeconds()),L:v(Math.round(n%1e3),3)},e.dateFormats);return e.objectEach(i,function(e,r){for(;-1!==t.indexOf("%"+r);)t=t.replace("%"+r,"function"==typeof e?e(n):e)}),r?t.substr(0,1).toUpperCase()+t.substr(1):t},e.formatSingle=function(t,n){var r=/\.([0-9])/,i=e.defaultOptions.lang;return/f$/.test(t)?(r=(r=t.match(r))?r[1]:-1,null!==n&&(n=e.numberFormat(n,r,i.decimalPoint,-1<t.indexOf(",")?i.thousandsSep:""))):n=e.dateFormat(t,n),n},e.format=function(t,n){for(var r="{",i=!1,s,o,u,f,l=[],c;t;){r=t.indexOf(r);if(-1===r)break;s=t.slice(0,r);if(i){s=s.split(":"),o=s.shift().split("."),f=o.length,c=n;for(u=0;u<f;u++)c=c[o[u]];s.length&&(c=e.formatSingle(s.join(":"),c)),l.push(c)}else l.push(s);t=t.slice(r+1),r=(i=!i)?"}":"{"}return l.push(t),l.join("")},e.getMagnitude=function(e){return Math.pow(10,Math.floor(Math.log(e)/Math.LN10))},e.normalizeTickInterval=function(t,n,r,i,s){var o,u=t;r=e.pick(r,1),o=t/r,n||(n=s?[1,1.2,1.5,2,2.5,3,4,5,6,8,10]:[1,2,2.5,5,10],!1===i&&(1===r?n=e.grep(n,function(e){return 0===e%1}):.1>=r&&(n=[1/r])));for(i=0;i<n.length&&!(u=n[i],s&&u*r>=t||!s&&o<=(n[i]+(n[i+1]||n[i]))/2);i++);return u=e.correctFloat(u*r,-Math.round(Math.log(.001)/Math.LN10))},e.stableSort=function(e,t){var n=e.length,r,i;for(i=0;i<n;i++)e[i].safeI=i;e.sort(function(e,n){return r=t(e,n),0===r?e.safeI-n.safeI:r});for(i=0;i<n;i++)delete e[i].safeI},e.arrayMin=function(e){for(var t=e.length,n=e[0];t--;)e[t]<n&&(n=e[t]);return n},e.arrayMax=function(e){for(var t=e.length,n=e[0];t--;)e[t]>n&&(n=e[t]);return n},e.destroyObjectProperties=function(t,n){e.objectEach(t,function(e,r){e&&e!==n&&e.destroy&&e.destroy(),delete t[r]})},e.discardElement=function(t){var n=e.garbageBin;n||(n=e.createElement("div")),t&&n.appendChild(t),n.innerHTML=""},e.correctFloat=function(e,t){return parseFloat(e.toPrecision(t||14))},e.setAnimation=function(t,n){n.renderer.globalAnimation=e.pick(t,n.options.chart.animation,!0)},e.animObject=function(t){return e.isObject(t)?e.merge(t):{duration:t?500:0}},e.timeUnits={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:24192e5,year:314496e5},e.numberFormat=function(t,n,r,i){t=+t||0,n=+n;var s=e.defaultOptions.lang,o=(t.toString().split(".")[1]||"").length,u,f;return-1===n?n=Math.min(o,20):e.isNumber(n)||(n=2),f=(Math.abs(t)+Math.pow(10,-Math.max(n,o)-1)).toFixed(n),o=String(e.pInt(f)),u=3<o.length?o.length%3:0,r=e.pick(r,s.decimalPoint),i=e.pick(i,s.thousandsSep),t=(0>t?"-":"")+(u?o.substr(0,u)+i:""),t+=o.substr(u).replace(/(\d{3})(?=\d)/g,"$1"+i),n&&(t+=r+f.slice(-n)),t},Math.easeInOutSine=function(e){return-0.5*(Math.cos(Math.PI*e)-1)},e.getStyle=function(t,n,r){if("width"===n)return Math.min(t.offsetWidth,t.scrollWidth)-e.getStyle(t,"padding-left")-e.getStyle(t,"padding-right");if("height"===n)return Math.min(t.offsetHeight,t.scrollHeight)-e.getStyle(t,"padding-top")-e.getStyle(t,"padding-bottom");if(t=i.getComputedStyle(t,void 0))t=t.getPropertyValue(n),e.pick(r,!0)&&(t=e.pInt(t));return t},e.inArray=function(e,t){return t.indexOf?t.indexOf(e):[].indexOf.call(t,e)},e.grep=function(e,t){return[].filter.call(e,t)},e.find=function(e,t){return[].find.call(e,t)},e.map=function(e,t){for(var n=[],r=0,i=e.length;r<i;r++)n[r]=t.call(e[r],e[r],r,e);return n},e.offset=function(e){var t=r.documentElement;return e=e.getBoundingClientRect(),{top:e.top+(i.pageYOffset||t.scrollTop)-(t.clientTop||0),left:e.left+(i.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}},e.stop=function(e,n){for(var r=t.length;r--;)t[r].elem!==e||n&&n!==t[r].prop||(t[r].stopped=!0)},e.each=function(e,t,n){return Array.prototype.forEach.call(e,t,n)},e.objectEach=function(e,t,n){for(var r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r,e)},e.addEvent=function(t,n,r){function s(e){e.target=e.srcElement||i,r.call(t,e)}var o=t.hcEvents=t.hcEvents||{};return t.addEventListener?t.addEventListener(n,r,!1):t.attachEvent&&(t.hcEventsIE||(t.hcEventsIE={}),t.hcEventsIE[r.toString()]=s,t.attachEvent("on"+n,s)),o[n]||(o[n]=[]),o[n].push(r),function(){e.removeEvent(t,n,r)}},e.removeEvent=function(t,n,r){function i(e,n){t.removeEventListener?t.removeEventListener(e,n,!1):t.attachEvent&&(n=t.hcEventsIE[n.toString()],t.detachEvent("on"+e,n))}function s(){var r,s;t.nodeName&&(n?(r={},r[n]=!0):r=u,e.objectEach(r,function(e,t){if(u[t])for(s=u[t].length;s--;)i(t,u[t][s])}))}var o,u=t.hcEvents,f;u&&(n?(o=u[n]||[],r?(f=e.inArray(r,o),-1<f&&(o.splice(f,1),u[n]=o),i(n,r)):(s(),u[n]=[])):(s(),t.hcEvents={}))},e.fireEvent=function(t,n,i,s){var o;o=t.hcEvents;var u,f;i=i||{};if(r.createEvent&&(t.dispatchEvent||t.fireEvent))o=r.createEvent("Events"),o.initEvent(n,!0,!0),e.extend(o,i),t.dispatchEvent?t.dispatchEvent(o):t.fireEvent(n,o);else if(o)for(o=o[n]||[],u=o.length,i.target||e.extend(i,{preventDefault:function(){i.defaultPrevented=!0},target:t,type:n}),n=0;n<u;n++)(f=o[n])&&!1===f.call(t,i)&&i.preventDefault();s&&!i.defaultPrevented&&s(i)},e.animate=function(t,n,r){var i,s="",o,u,f;e.isObject(r)||(f=arguments,r={duration:f[2],easing:f[3],complete:f[4]}),e.isNumber(r.duration)||(r.duration=400),r.easing="function"==typeof r.easing?r.easing:Math[r.easing]||Math.easeInOutSine,r.curAnim=e.merge(n),e.objectEach(n,function(f,l){e.stop(t,l),u=new e.Fx(t,r,l),o=null,"d"===l?(u.paths=u.initPath(t,t.d,n.d),u.toD=n.d,i=0,o=1):t.attr?i=t.attr(l):(i=parseFloat(e.getStyle(t,l))||0,"opacity"!==l&&(s="px")),o||(o=f),o&&o.match&&o.match("px")&&(o=o.replace(/px/g,"")),u.run(i,o,s)})},e.seriesType=function(t,n,r,i,s){var o=e.getOptions(),u=e.seriesTypes;return u[t]?e.error(27):(o.plotOptions[t]=e.merge(o.plotOptions[n],r),u[t]=e.extendClass(u[n]||function(){},i),u[t].prototype.type=t,s&&(u[t].prototype.pointClass=e.extendClass(e.Point,s)),u[t])},e.uniqueKey=function(){var e=Math.random().toString(36).substring(2,9),t=0;return function(){return"highcharts-"+e+"-"+t++}}(),i.jQuery&&(i.jQuery.fn.highcharts=function(){var t=[].slice.call(arguments);if(this[0])return t[0]?(new(e[e.isString(t[0])?t.shift():"Chart"])(this[0],t[0],t[1]),this):n[e.attr(this[0],"data-highcharts-chart")]}),r&&!r.defaultView&&(e.getStyle=function(t,n){var r={width:"clientWidth",height:"clientHeight"}[n];return t.style[n]?e.pInt(t.style[n]):("opacity"===n&&(n="filter"),r?(t.style.zoom=1,Math.max(t[r]-2*e.getStyle(t,"padding"),0)):(t=t.currentStyle[n.replace(/\-(\w)/g,function(e,t){return t.toUpperCase()})],"filter"===n&&(t=t.replace(/alpha\(opacity=([0-9]+)\)/,function(e,t){return t/100})),""===t?1:e.pInt(t)))}),Array.prototype.forEach||(e.each=function(e,t,n){for(var r=0,i=e.length;r<i;r++)if(!1===t.call(n,e[r],r,e))return r}),Array.prototype.indexOf||(e.inArray=function(e,t){var n,r=0;if(t)for(n=t.length;r<n;r++)if(t[r]===e)return r;return-1}),Array.prototype.filter||(e.grep=function(e,t){for(var n=[],r=0,i=e.length;r<i;r++)t(e[r],r)&&n.push(e[r]);return n}),Array.prototype.find||(e.find=function(e,t){var n,r=e.length;for(n=0;n<r;n++)if(t(e[n],n))return e[n]})}(e),function(e){var t=e.each,n=e.isNumber,r=e.map,i=e.merge,s=e.pInt;e.Color=function(t){if(!(this instanceof e.Color))return new e.Color(t);this.init(t)},e.Color.prototype={parsers:[{regex:/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]?(?:\.[0-9]+)?)\s*\)/,parse:function(e){return[s(e[1]),s(e[2]),s(e[3]),parseFloat(e[4],10)]}},{regex:/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/,parse:function(e){return[s(e[1]),s(e[2]),s(e[3]),1]}}],names:{none:"rgba(255,255,255,0)",white:"#ffffff",black:"#000000"},init:function(t){var n,i,s,o;if((this.input=t=this.names[t&&t.toLowerCase?t.toLowerCase():""]||t)&&t.stops)this.stops=r(t.stops,function(t){return new e.Color(t[1])});else if(t&&"#"===t[0]&&(n=t.length,t=parseInt(t.substr(1),16),7===n?i=[(t&16711680)>>16,(t&65280)>>8,t&255,1]:4===n&&(i=[(t&3840)>>4|(t&3840)>>8,(t&240)>>4|t&240,(t&15)<<4|t&15,1])),!i)for(s=this.parsers.length;s--&&!i;)o=this.parsers[s],(n=o.regex.exec(t))&&(i=o.parse(n));this.rgba=i||[]},get:function(e){var r=this.input,s=this.rgba,o;return this.stops?(o=i(r),o.stops=[].concat(o.stops),t(this.stops,function(t,n){o.stops[n]=[o.stops[n][0],t.get(e)]})):o=s&&n(s[0])?"rgb"===e||!e&&1===s[3]?"rgb("+s[0]+","+s[1]+","+s[2]+")":"a"===e?s[3]:"rgba("+s.join(",")+")":r,o},brighten:function(e){var r,i=this.rgba;if(this.stops)t(this.stops,function(t){t.brighten(e)});else if(n(e)&&0!==e)for(r=0;3>r;r++)i[r]+=s(255*e),0>i[r]&&(i[r]=0),255<i[r]&&(i[r]=255);return this},setOpacity:function(e){return this.rgba[3]=e,this},tweenTo:function(e,t){var n,r;return e.rgba.length?(n=this.rgba,e=e.rgba,r=1!==e[3]||1!==n[3],e=(r?"rgba(":"rgb(")+Math.round(e[0]+(n[0]-e[0])*(1-t))+","+Math.round(e[1]+(n[1]-e[1])*(1-t))+","+Math.round(e[2]+(n[2]-e[2])*(1-t))+(r?","+(e[3]+(n[3]-e[3])*(1-t)):"")+")"):e=e.input||"none",e}},e.color=function(t){return new e.Color(t)}}(e),function(e){var t,n,r=e.addEvent,i=e.animate,s=e.attr,o=e.charts,u=e.color,a=e.css,f=e.createElement,l=e.defined,c=e.deg2rad,h=e.destroyObjectProperties,p=e.doc,d=e.each,v=e.extend,m=e.erase,g=e.grep,y=e.hasTouch,b=e.inArray,w=e.isArray,E=e.isFirefox,S=e.isMS,x=e.isObject,T=e.isString,N=e.isWebKit,C=e.merge,k=e.noop,L=e.objectEach,A=e.pick,O=e.pInt,M=e.removeEvent,_=e.stop,D=e.svg,P=e.SVG_NS,H=e.symbolSizes,B=e.win;t=e.SVGElement=function(){return this},v(t.prototype,{opacity:1,SVG_NS:P,textProps:"direction fontSize fontWeight fontFamily fontStyle color lineHeight width textAlign textDecoration textOverflow textOutline".split(" "),init:function(e,t){this.element="span"===t?f(t):p.createElementNS(this.SVG_NS,t),this.renderer=e},animate:function(t,n,r){return n=e.animObject(A(n,this.renderer.globalAnimation,!0)),0!==n.duration?(r&&(n.complete=r),i(this,t,n)):(this.attr(t,null,r),n.step&&n.step.call(this)),this},colorGradient:function(t,n,r){var i=this.renderer,s,o,u,a,f,c,h,p,v,m,g=[],y;t.radialGradient?o="radialGradient":t.linearGradient&&(o="linearGradient"),o&&(u=t[o],f=i.gradients,h=t.stops,m=r.radialReference,w(u)&&(t[o]=u={x1:u[0],y1:u[1],x2:u[2],y2:u[3],gradientUnits:"userSpaceOnUse"}),"radialGradient"===o&&m&&!l(u.gradientUnits)&&(a=u,u=C(u,i.getRadialAttr(m,a),{gradientUnits:"userSpaceOnUse"})),L(u,function(e,t){"id"!==t&&g.push(t,e)}),L(h,function(e){g.push(e)}),g=g.join(","),f[g]?m=f[g].attr("id"):(u.id=m=e.uniqueKey(),f[g]=c=i.createElement(o).attr(u).add(i.defs),c.radAttr=a,c.stops=[],d(h,function(t){0===t[1].indexOf("rgba")?(s=e.color(t[1]),p=s.get("rgb"),v=s.get("a")):(p=t[1],v=1),t=i.createElement("stop").attr({offset:t[0],"stop-color":p,"stop-opacity":v}).add(c),c.stops.push(t)})),y="url("+i.url+"#"+m+")",r.setAttribute(n,y),r.gradient=g,t.toString=function(){return y})},applyTextOutline:function(t){var n=this.element,r,i,o,u,a;-1!==t.indexOf("contrast")&&(t=t.replace(/contrast/g,this.renderer.getContrast(n.style.fill))),t=t.split(" "),i=t[t.length-1];if((o=t[0])&&"none"!==o&&e.svg){this.fakeTS=!0,t=[].slice.call(n.getElementsByTagName("tspan")),this.ySetter=this.xSetter,o=o.replace(/(^[\d\.]+)(.*?)$/g,function(e,t,n){return 2*t+n});for(a=t.length;a--;)r=t[a],"highcharts-text-outline"===r.getAttribute("class")&&m(t,n.removeChild(r));u=n.firstChild,d(t,function(e,t){0===t&&(e.setAttribute("x",n.getAttribute("x")),t=n.getAttribute("y"),e.setAttribute("y",t||0),null===t&&n.setAttribute("y",0)),e=e.cloneNode(1),s(e,{"class":"highcharts-text-outline",fill:i,stroke:i,"stroke-width":o,"stroke-linejoin":"round"}),n.insertBefore(e,u)})}},attr:function(e,t,n,r){var i,s=this.element,o,u=this,a,f;return"string"==typeof e&&void 0!==t&&(i=e,e={},e[i]=t),"string"==typeof e?u=(this[e+"Getter"]||this._defaultGetter).call(this,e,s):(L(e,function(t,n){a=!1,r||_(this,n),this.symbolName&&/^(x|y|width|height|r|start|end|innerR|anchorX|anchorY)$/.test(n)&&(o||(this.symbolAttr(e),o=!0),a=!0),!this.rotation||"x"!==n&&"y"!==n||(this.doTransform=!0),a||(f=this[n+"Setter"]||this._defaultSetter,f.call(this,t,n,s),this.shadows&&/^(width|height|visibility|x|y|d|transform|cx|cy|r)$/.test(n)&&this.updateShadows(n,t,f))},this),this.afterSetters()),n&&n(),u},afterSetters:function(){this.doTransform&&(this.updateTransform(),this.doTransform=!1)},updateShadows:function(e,t,n){for(var r=this.shadows,i=r.length;i--;)n.call(r[i],"height"===e?Math.max(t-(r[i].cutHeight||0),0):"d"===e?this.d:t,e,r[i])},addClass:function(e,t){var n=this.attr("class")||"";return-1===n.indexOf(e)&&(t||(e=(n+(n?" ":"")+e).replace("  "," ")),this.attr("class",e)),this},hasClass:function(e){return-1!==s(this.element,"class").indexOf(e)},removeClass:function(e){return s(this.element,"class",(s(this.element,"class")||"").replace(e,"")),this},symbolAttr:function(e){var t=this;d("x y r start end width height innerR anchorX anchorY".split(" "),function(n){t[n]=A(e[n],t[n])}),t.attr({d:t.renderer.symbols[t.symbolName](t.x,t.y,t.width,t.height,t)})},clip:function(e){return this.attr("clip-path",e?"url("+this.renderer.url+"#"+e.id+")":"none")},crisp:function(e,t){var n=this,r={},i;return t=t||e.strokeWidth||0,i=Math.round(t)%2/2,e.x=Math.floor(e.x||n.x||0)+i,e.y=Math.floor(e.y||n.y||0)+i,e.width=Math.floor((e.width||n.width||0)-2*i),e.height=Math.floor((e.height||n.height||0)-2*i),l(e.strokeWidth)&&(e.strokeWidth=t),L(e,function(e,t){n[t]!==e&&(n[t]=r[t]=e)}),r},css:function(e){var t=this.styles,n={},r=this.element,i,o="",u,f=!t,l=["textOutline","textOverflow","width"];return e&&e.color&&(e.fill=e.color),t&&L(e,function(e,r){e!==t[r]&&(n[r]=e,f=!0)}),f&&(t&&(e=v(t,n)),i=this.textWidth=e&&e.width&&"auto"!==e.width&&"text"===r.nodeName.toLowerCase()&&O(e.width),this.styles=e,i&&!D&&this.renderer.forExport&&delete e.width,S&&!D?a(this.element,e):(u=function(e,t){return"-"+t.toLowerCase()},L(e,function(e,t){-1===b(t,l)&&(o+=t.replace(/([A-Z])/g,u)+":"+e+";")}),o&&s(r,"style",o)),this.added&&("text"===this.element.nodeName&&this.renderer.buildText(this),e&&e.textOutline&&this.applyTextOutline(e.textOutline))),this},strokeWidth:function(){return this["stroke-width"]||0},on:function(e,t){var n=this,r=n.element;return y&&"click"===e?(r.ontouchstart=function(e){n.touchEventFired=Date.now(),e.preventDefault(),t.call(r,e)},r.onclick=function(e){(-1===B.navigator.userAgent.indexOf("Android")||1100<Date.now()-(n.touchEventFired||0))&&t.call(r,e)}):r["on"+e]=t,this},setRadialReference:function(e){var t=this.renderer.gradients[this.element.gradient];return this.element.radialReference=e,t&&t.radAttr&&t.animate(this.renderer.getRadialAttr(e,t.radAttr)),this},translate:function(e,t){return this.attr({translateX:e,translateY:t})},invert:function(e){return this.inverted=e,this.updateTransform(),this},updateTransform:function(){var e=this.translateX||0,t=this.translateY||0,n=this.scaleX,r=this.scaleY,i=this.inverted,s=this.rotation,o=this.element;i&&(e+=this.width,t+=this.height),e=["translate("+e+","+t+")"],i?e.push("rotate(90) scale(-1,1)"):s&&e.push("rotate("+s+" "+(o.getAttribute("x")||0)+" "+(o.getAttribute("y")||0)+")"),(l(n)||l(r))&&e.push("scale("+A(n,1)+" "+A(r,1)+")"),e.length&&o.setAttribute("transform",e.join(" "))},toFront:function(){var e=this.element;return e.parentNode.appendChild(e),this},align:function(e,t,n){var r,i,s,o,u={};i=this.renderer,s=i.alignedObjects;var a,f;if(e){if(this.alignOptions=e,this.alignByTranslate=t,!n||T(n))this.alignTo=r=n||"renderer",m(s,this),s.push(this),n=null}else e=this.alignOptions,t=this.alignByTranslate,r=this.alignTo;return n=A(n,i[r],i),r=e.align,i=e.verticalAlign,s=(n.x||0)+(e.x||0),o=(n.y||0)+(e.y||0),"right"===r?a=1:"center"===r&&(a=2),a&&(s+=(n.width-(e.width||0))/a),u[t?"translateX":"x"]=Math.round(s),"bottom"===i?f=1:"middle"===i&&(f=2),f&&(o+=(n.height-(e.height||0))/f),u[t?"translateY":"y"]=Math.round(o),this[this.placed?"animate":"attr"](u),this.placed=!0,this.alignAttr=u,this},getBBox:function(e,t){var n,r=this.renderer,i,s=this.element,o=this.styles,u,a=this.textStr,f,l=r.cache,h=r.cacheKeys,p;t=A(t,this.rotation),i=t*c,u=o&&o.fontSize,void 0!==a&&(p=a.toString(),-1===p.indexOf("<")&&(p=p.replace(/[0-9]/g,"0")),p+=["",t||0,u,o&&o.width,o&&o.textOverflow].join()),p&&!e&&(n=l[p]);if(!n){if(s.namespaceURI===this.SVG_NS||r.forExport){try{(f=this.fakeTS&&function(e){d(s.querySelectorAll(".highcharts-text-outline"),function(t){t.style.display=e})})&&f("none"),n=s.getBBox?v({},s.getBBox()):{width:s.offsetWidth,height:s.offsetHeight},f&&f("")}catch(m){}if(!n||0>n.width)n={width:0,height:0}}else n=this.htmlGetBBox();r.isSVG&&(e=n.width,r=n.height,o&&"11px"===o.fontSize&&17===Math.round(r)&&(n.height=r=14),t&&(n.width=Math.abs(r*Math.sin(i))+Math.abs(e*Math.cos(i)),n.height=Math.abs(r*Math.cos(i))+Math.abs(e*Math.sin(i))));if(p&&0<n.height){for(;250<h.length;)delete l[h.shift()];l[p]||h.push(p),l[p]=n}}return n},show:function(e){return this.attr({visibility:e?"inherit":"visible"})},hide:function(){return this.attr({visibility:"hidden"})},fadeOut:function(e){var t=this;t.animate({opacity:0},{duration:e||150,complete:function(){t.attr({y:-9999})}})},add:function(e){var t=this.renderer,n=this.element,r;e&&(this.parentGroup=e),this.parentInverted=e&&e.inverted,void 0!==this.textStr&&t.buildText(this),this.added=!0;if(!e||e.handleZ||this.zIndex)r=this.zIndexSetter();return r||(e?e.element:t.box).appendChild(n),this.onAdd&&this.onAdd(),this},safeRemoveChild:function(e){var t=e.parentNode;t&&t.removeChild(e)},destroy:function(){var e=this,t=e.element||{},n=e.renderer.isSVG&&"SPAN"===t.nodeName&&e.parentGroup,r=t.ownerSVGElement;t.onclick=t.onmouseout=t.onmouseover=t.onmousemove=t.point=null,_(e),e.clipPath&&r&&(d(r.querySelectorAll("[clip-path]"),function(t){-1<t.getAttribute("clip-path").indexOf(e.clipPath.element.id+")")&&t.removeAttribute("clip-path")}),e.clipPath=e.clipPath.destroy());if(e.stops){for(r=0;r<e.stops.length;r++)e.stops[r]=e.stops[r].destroy();e.stops=null}e.safeRemoveChild(t);for(e.destroyShadows();n&&n.div&&0===n.div.childNodes.length;)t=n.parentGroup,e.safeRemoveChild(n.div),delete n.div,n=t;return e.alignTo&&m(e.renderer.alignedObjects,e),L(e,function(t,n){delete e[n]}),null},shadow:function(e,t,n){var r=[],i,o,u=this.element,a,f,l,c;if(!e)this.destroyShadows();else if(!this.shadows){f=A(e.width,3),l=(e.opacity||.15)/f,c=this.parentInverted?"(-1,-1)":"("+A(e.offsetX,1)+", "+A(e.offsetY,1)+")";for(i=1;i<=f;i++)o=u.cloneNode(0),a=2*f+1-2*i,s(o,{isShadow:"true",stroke:e.color||"#000000","stroke-opacity":l*i,"stroke-width":a,transform:"translate"+c,fill:"none"}),n&&(s(o,"height",Math.max(s(o,"height")-a,0)),o.cutHeight=a),t?t.element.appendChild(o):u.parentNode.insertBefore(o,u),r.push(o);this.shadows=r}return this},destroyShadows:function(){d(this.shadows||[],function(e){this.safeRemoveChild(e)},this),this.shadows=void 0},xGetter:function(e){return"circle"===this.element.nodeName&&("x"===e?e="cx":"y"===e&&(e="cy")),this._defaultGetter(e)},_defaultGetter:function(e){return e=A(this[e],this.element?this.element.getAttribute(e):null,0),/^[\-0-9\.]+$/.test(e)&&(e=parseFloat(e)),e},dSetter:function(e,t,n){e&&e.join&&(e=e.join(" ")),/(NaN| {2}|^$)/.test(e)&&(e="M 0 0"),n.setAttribute(t,e),this[t]=e},dashstyleSetter:function(e){var t,n=this["stroke-width"];"inherit"===n&&(n=1);if(e=e&&e.toLowerCase()){e=e.replace("shortdashdotdot","3,1,1,1,1,1,").replace("shortdashdot","3,1,1,1").replace("shortdot","1,1,").replace("shortdash","3,1,").replace("longdash","8,3,").replace(/dot/g,"1,3,").replace("dash","4,3,").replace(/,$/,"").split(",");for(t=e.length;t--;)e[t]=O(e[t])*n;e=e.join(",").replace(/NaN/g,"none"),this.element.setAttribute("stroke-dasharray",e)}},alignSetter:function(e){this.element.setAttribute("text-anchor",{left:"start",center:"middle",right:"end"}[e])},opacitySetter:function(e,t,n){this[t]=e,n.setAttribute(t,e)},titleSetter:function(e){var t=this.element.getElementsByTagName("title")[0];t||(t=p.createElementNS(this.SVG_NS,"title"),this.element.appendChild(t)),t.firstChild&&t.removeChild(t.firstChild),t.appendChild(p.createTextNode(String(A(e),"").replace(/<[^>]*>/g,"")))},textSetter:function(e){e!==this.textStr&&(delete this.bBox,this.textStr=e,this.added&&this.renderer.buildText(this))},fillSetter:function(e,t,n){"string"==typeof e?n.setAttribute(t,e):e&&this.colorGradient(e,t,n)},visibilitySetter:function(e,t,n){"inherit"===e?n.removeAttribute(t):n.setAttribute(t,e)},zIndexSetter:function(e,t){var n=this.renderer,r=this.parentGroup,i=(r||n).element||n.box,s,o=this.element,u;s=this.added;var a;l(e)&&(o.zIndex=e,e=+e,this[t]===e&&(s=!1),this[t]=e);if(s){(e=this.zIndex)&&r&&(r.handleZ=!0),t=i.childNodes;for(a=0;a<t.length&&!u;a++)r=t[a],s=r.zIndex,r!==o&&(O(s)>e||!l(e)&&l(s)||0>e&&!l(s)&&i!==n.box)&&(i.insertBefore(o,r),u=!0);u||i.appendChild(o)}return u},_defaultSetter:function(e,t,n){n.setAttribute(t,e)}}),t.prototype.yGetter=t.prototype.xGetter,t.prototype.translateXSetter=t.prototype.translateYSetter=t.prototype.rotationSetter=t.prototype.verticalAlignSetter=t.prototype.scaleXSetter=t.prototype.scaleYSetter=function(e,t){this[t]=e,this.doTransform=!0},t.prototype["stroke-widthSetter"]=t.prototype.strokeSetter=function(e,n,r){this[n]=e,this.stroke&&this["stroke-width"]?(t.prototype.fillSetter.call(this,this.stroke,"stroke",r),r.setAttribute("stroke-width",this["stroke-width"]),this.hasStroke=!0):"stroke-width"===n&&0===e&&this.hasStroke&&(r.removeAttribute("stroke"),this.hasStroke=!1)},n=e.SVGRenderer=function(){this.init.apply(this,arguments)},v(n.prototype,{Element:t,SVG_NS:P,init:function(e,t,n,i,o,u){var f;i=this.createElement("svg").attr({version:"1.1","class":"highcharts-root"}).css(this.getStyle(i)),f=i.element,e.appendChild(f),-1===e.innerHTML.indexOf("xmlns")&&s(f,"xmlns",this.SVG_NS),this.isSVG=!0,this.box=f,this.boxWrapper=i,this.alignedObjects=[],this.url=(E||N)&&p.getElementsByTagName("base").length?B.location.href.replace(/#.*?$/,"").replace(/<[^>]*>/g,"").replace(/([\('\)])/g,"\\$1").replace(/ /g,"%20"):"",this.createElement("desc").add().element.appendChild(p.createTextNode("Created with Highcharts 5.0.12")),this.defs=this.createElement("defs").add(),this.allowHTML=u,this.forExport=o,this.gradients={},this.cache={},this.cacheKeys=[],this.imgCount=0,this.setSize(t,n,!1);var l;E&&e.getBoundingClientRect&&(t=function(){a(e,{left:0,top:0}),l=e.getBoundingClientRect(),a(e,{left:Math.ceil(l.left)-l.left+"px",top:Math.ceil(l.top)-l.top+"px"})},t(),this.unSubPixelFix=r(B,"resize",t))},getStyle:function(e){return this.style=v({fontFamily:'"Lucida Grande", "Lucida Sans Unicode", Arial, Helvetica, sans-serif',fontSize:"12px"},e)},setStyle:function(e){this.boxWrapper.css(this.getStyle(e))},isHidden:function(){return!this.boxWrapper.getBBox().width},destroy:function(){var e=this.defs;return this.box=null,this.boxWrapper=this.boxWrapper.destroy(),h(this.gradients||{}),this.gradients=null,e&&(this.defs=e.destroy()),this.unSubPixelFix&&this.unSubPixelFix(),this.alignedObjects=null},createElement:function(e){var t=new this.Element;return t.init(this,e),t},draw:k,getRadialAttr:function(e,t){return{cx:e[0]-e[2]/2+t.cx*e[2],cy:e[1]-e[2]/2+t.cy*e[2],r:t.r*e[2]}},getSpanWidth:function(e,t){var n=e.getBBox(!0).width;return!D&&this.forExport&&(n=this.measureSpanWidth(t.firstChild.data,e.styles)),n},applyEllipsis:function(e,t,n,r){var i=this.getSpanWidth(e,t),s=i>r,i=n,o,u=0,a=n.length,f=function(e){t.removeChild(t.firstChild),e&&t.appendChild(p.createTextNode(e))};if(s){for(;u<=a;)o=Math.ceil((u+a)/2),i=n.substring(0,o)+"\u2026",f(i),i=this.getSpanWidth(e,t),u===a?u=a+1:i>r?a=o-1:u=o;0===a&&f("")}return s},buildText:function(e){var t=e.element,n=this,r=n.forExport,i=A(e.textStr,"").toString(),o=-1!==i.indexOf("<"),u=t.childNodes,f,l,c,h,v=s(t,"x"),m=e.styles,y=e.textWidth,b=m&&m.lineHeight,w=m&&m.textOutline,E=m&&"ellipsis"===m.textOverflow,S=m&&"nowrap"===m.whiteSpace,x=m&&m.fontSize,T,N,C=u.length,m=y&&!e.added&&this.box,k=function(e){var r;return r=/(px|em)$/.test(e&&e.style.fontSize)?e.style.fontSize:x||n.style.fontSize||12,b?O(b):n.fontMetrics(r,e.getAttribute("style")?e:t).h};T=[i,E,S,b,w,x,y].join();if(T!==e.textCache){for(e.textCache=T;C--;)t.removeChild(u[C]);o||w||E||y||-1!==i.indexOf(" ")?(f=/<.*class="([^"]+)".*>/,l=/<.*style="([^"]+)".*>/,c=/<.*href="([^"]+)".*>/,m&&m.appendChild(t),i=o?i.replace(/<(b|strong)>/g,'<span style="font-weight:bold">').replace(/<(i|em)>/g,'<span style="font-style:italic">').replace(/<a/g,"<span").replace(/<\/(b|strong|i|em|a)>/g,"</span>").split(/<br.*?>/g):[i],i=g(i,function(e){return""!==e}),d(i,function(i,o){var u,m=0;i=i.replace(/^\s+|\s+$/g,"").replace(/<span/g,"|||<span").replace(/<\/span>/g,"</span>|||"),u=i.split("|||"),d(u,function(i){if(""!==i||1===u.length){var d={},g=p.createElementNS(n.SVG_NS,"tspan"),b,w;f.test(i)&&(b=i.match(f)[1],s(g,"class",b)),l.test(i)&&(w=i.match(l)[1].replace(/(;| |^)color([ :])/,"$1fill$2"),s(g,"style",w)),c.test(i)&&!r&&(s(g,"onclick",'location.href="'+i.match(c)[1]+'"'),a(g,{cursor:"pointer"})),i=(i.replace(/<(.|\n)*?>/g,"")||" ").replace(/&lt;/g,"<").replace(/&gt;/g,">");if(" "!==i){g.appendChild(p.createTextNode(i)),m?d.dx=0:o&&null!==v&&(d.x=v),s(g,d),t.appendChild(g),!m&&N&&(!D&&r&&a(g,{display:"block"}),s(g,"dy",k(g)));if(y){d=i.replace(/([^\^])-/g,"$1- ").split(" "),b=1<u.length||o||1<d.length&&!S;var x=[],T,C=k(g),L=e.rotation;for(E&&(h=n.applyEllipsis(e,g,i,y));!E&&b&&(d.length||x.length);)e.rotation=0,T=n.getSpanWidth(e,g),i=T>y,void 0===h&&(h=i),i&&1!==d.length?(g.removeChild(g.firstChild),x.unshift(d.pop())):(d=x,x=[],d.length&&!S&&(g=p.createElementNS(P,"tspan"),s(g,{dy:C,x:v}),w&&s(g,"style",w),t.appendChild(g)),T>y&&(y=T)),d.length&&g.appendChild(p.createTextNode(d.join(" ").replace(/- /g,"-")));e.rotation=L}m++}}}),N=N||t.childNodes.length}),h&&e.attr("title",e.textStr),m&&m.removeChild(t),w&&e.applyTextOutline&&e.applyTextOutline(w)):t.appendChild(p.createTextNode(i.replace(/&lt;/g,"<").replace(/&gt;/g,">")))}},getContrast:function(e){return e=u(e).rgba,510<e[0]+e[1]+e[2]?"#000000":"#FFFFFF"},button:function(e,t,n,i,s,o,u,a,f){var l=this.label(e,t,n,f,null,null,null,null,"button"),c=0;l.attr(C({padding:8,r:2},s));var h,p,d,m;return s=C({fill:"#f7f7f7",stroke:"#cccccc","stroke-width":1,style:{color:"#333333",cursor:"pointer",fontWeight:"normal"}},s),h=s.style,delete s.style,o=C(s,{fill:"#e6e6e6"},o),p=o.style,delete o.style,u=C(s,{fill:"#e6ebf5",style:{color:"#000000",fontWeight:"bold"}},u),d=u.style,delete u.style,a=C(s,{style:{color:"#cccccc"}},a),m=a.style,delete a.style,r(l.element,S?"mouseover":"mouseenter",function(){3!==c&&l.setState(1)}),r(l.element,S?"mouseout":"mouseleave",function(){3!==c&&l.setState(c)}),l.setState=function(e){1!==e&&(l.state=c=e),l.removeClass(/highcharts-button-(normal|hover|pressed|disabled)/).addClass("highcharts-button-"+["normal","hover","pressed","disabled"][e||0]),l.attr([s,o,u,a][e||0]).css([h,p,d,m][e||0])},l.attr(s).css(v({cursor:"default"},h)),l.on("click",function(e){3!==c&&i.call(l,e)})},crispLine:function(e,t){return e[1]===e[4]&&(e[1]=e[4]=Math.round(e[1])-t%2/2),e[2]===e[5]&&(e[2]=e[5]=Math.round(e[2])+t%2/2),e},path:function(e){var t={fill:"none"};return w(e)?t.d=e:x(e)&&v(t,e),this.createElement("path").attr(t)},circle:function(e,t,n){return e=x(e)?e:{x:e,y:t,r:n},t=this.createElement("circle"),t.xSetter=t.ySetter=function(e,t,n){n.setAttribute("c"+t,e)},t.attr(e)},arc:function(e,t,n,r,i,s){return x(e)?(r=e,t=r.y,n=r.r,e=r.x):r={innerR:r,start:i,end:s},e=this.symbol("arc",e,t,n,n,r),e.r=n,e},rect:function(e,t,n,r,i,o){i=x(e)?e.r:i;var u=this.createElement("rect");return e=x(e)?e:void 0===e?{}:{x:e,y:t,width:Math.max(n,0),height:Math.max(r,0)},void 0!==o&&(e.strokeWidth=o,e=u.crisp(e)),e.fill="none",i&&(e.r=i),u.rSetter=function(e,t,n){s(n,{rx:e,ry:e})},u.attr(e)},setSize:function(e,t,n){var r=this.alignedObjects,i=r.length;this.width=e,this.height=t;for(this.boxWrapper.animate({width:e,height:t},{step:function(){this.attr({viewBox:"0 0 "+this.attr("width")+" "+this.attr("height")})},duration:A(n,!0)?void 0:0});i--;)r[i].align()},g:function(e){var t=this.createElement("g");return e?t.attr({"class":"highcharts-"+e}):t},image:function(e,t,n,r,i){var s={preserveAspectRatio:"none"};return 1<arguments.length&&v(s,{x:t,y:n,width:r,height:i}),s=this.createElement("image").attr(s),s.element.setAttributeNS?s.element.setAttributeNS("http://www.w3.org/1999/xlink","href",e):s.element.setAttribute("hc-svg-href",e),s},symbol:function(e,t,n,r,i,s){var u=this,c,h=/^url\((.*?)\)$/,m=h.test(e),g=!m&&(this.symbols[e]?e:"circle"),y=g&&this.symbols[g],b=l(t)&&y&&y.call(this.symbols,Math.round(t),Math.round(n),r,i,s),w,E;return y?(c=this.path(b),c.attr("fill","none"),v(c,{symbolName:g,x:t,y:n,width:r,height:i}),s&&v(c,s)):m&&(w=e.match(h)[1],c=this.image(w),c.imgwidth=A(H[w]&&H[w].width,s&&s.width),c.imgheight=A(H[w]&&H[w].height,s&&s.height),E=function(){c.attr({width:c.width,height:c.height})},d(["width","height"],function(e){c[e+"Setter"]=function(e,t){var n={},r=this["img"+t],i="width"===t?"translateX":"translateY";this[t]=e,l(r)&&(this.element&&this.element.setAttribute(t,r),this.alignByTranslate||(n[i]=((this[t]||0)-r)/2,this.attr(n)))}}),l(t)&&c.attr({x:t,y:n}),c.isImg=!0,l(c.imgwidth)&&l(c.imgheight)?E():(c.attr({width:0,height:0}),f("img",{onload:function(){var e=o[u.chartIndex];0===this.width&&(a(this,{position:"absolute",top:"-999em"}),p.body.appendChild(this)),H[w]={width:this.width,height:this.height},c.imgwidth=this.width,c.imgheight=this.height,c.element&&E(),this.parentNode&&this.parentNode.removeChild(this),u.imgCount--,!u.imgCount&&e&&e.onload&&e.onload()},src:w}),this.imgCount++)),c},symbols:{circle:function(e,t,n,r){return this.arc(e+n/2,t+r/2,n/2,r/2,{start:0,end:2*Math.PI,open:!1})},square:function(e,t,n,r){return["M",e,t,"L",e+n,t,e+n,t+r,e,t+r,"Z"]},triangle:function(e,t,n,r){return["M",e+n/2,t,"L",e+n,t+r,e,t+r,"Z"]},"triangle-down":function(e,t,n,r){return["M",e,t,"L",e+n,t,e+n/2,t+r,"Z"]},diamond:function(e,t,n,r){return["M",e+n/2,t,"L",e+n,t+r/2,e+n/2,t+r,e,t+r/2,"Z"]},arc:function(e,t,n,r,i){var s=i.start,o=i.r||n,u=i.r||r||n,a=i.end-.001;n=i.innerR,r=i.open;var f=Math.cos(s),c=Math.sin(s),h=Math.cos(a),a=Math.sin(a);return i=i.end-s<Math.PI?0:1,o=["M",e+o*f,t+u*c,"A",o,u,0,i,1,e+o*h,t+u*a],l(n)&&o.push(r?"M":"L",e+n*h,t+n*a,"A",n,n,0,i,0,e+n*f,t+n*c),o.push(r?"":"Z"),o},callout:function(e,t,n,r,i){var s=Math.min(i&&i.r||0,n,r),o=s+6,u=i&&i.anchorX;i=i&&i.anchorY;var a;return a=["M",e+s,t,"L",e+n-s,t,"C",e+n,t,e+n,t,e+n,t+s,"L",e+n,t+r-s,"C",e+n,t+r,e+n,t+r,e+n-s,t+r,"L",e+s,t+r,"C",e,t+r,e,t+r,e,t+r-s,"L",e,t+s,"C",e,t,e,t,e+s,t],u&&u>n?i>t+o&&i<t+r-o?a.splice(13,3,"L",e+n,i-6,e+n+6,i,e+n,i+6,e+n,t+r-s):a.splice(13,3,"L",e+n,r/2,u,i,e+n,r/2,e+n,t+r-s):u&&0>u?i>t+o&&i<t+r-o?a.splice(33,3,"L",e,i+6,e-6,i,e,i-6,e,t+s):a.splice(33,3,"L",e,r/2,u,i,e,r/2,e,t+s):i&&i>r&&u>e+o&&u<e+n-o?a.splice(23,3,"L",u+6,t+r,u,t+r+6,u-6,t+r,e+s,t+r):i&&0>i&&u>e+o&&u<e+n-o&&a.splice(3,3,"L",u-6,t,u,t-6,u+6,t,n-s,t),a}},clipRect:function(t,n,r,i){var s=e.uniqueKey(),o=this.createElement("clipPath").attr({id:s}).add(this.defs);return t=this.rect(t,n,r,i,0).add(o),t.id=s,t.clipPath=o,t.count=0,t},text:function(e,t,n,r){var i=!D&&this.forExport,s={};if(r&&(this.allowHTML||!this.forExport))return this.html(e,t,n);s.x=Math.round(t||0),n&&(s.y=Math.round(n));if(e||0===e)s.text=e;return e=this.createElement("text").attr(s),i&&e.css({position:"absolute"}),r||(e.xSetter=function(e,t,n){var r=n.getElementsByTagName("tspan"),i,s=n.getAttribute(t),o;for(o=0;o<r.length;o++)i=r[o],i.getAttribute(t)===s&&i.setAttribute(t,e);n.setAttribute(t,e)}),e},fontMetrics:function(e,t){return e=e||t&&t.style&&t.style.fontSize||this.style&&this.style.fontSize,e=/px/.test(e)?O(e):/em/.test(e)?parseFloat(e)*(t?this.fontMetrics(null,t.parentNode).f:16):12,t=24>e?e+3:Math.round(1.2*e),{h:t,b:Math.round(.8*t),f:e}},rotCorr:function(e,t,n){var r=e;return t&&n&&(r=Math.max(r*Math.cos(t*c),4)),{x:-e/3*Math.sin(t*c),y:r}
},label:function(n,r,i,s,o,u,a,f,c){var h=this,p=h.g("button"!==c&&"label"),m=p.text=h.text("",0,0,a).attr({zIndex:1}),g,y,b=0,w=3,E=0,S,x,T,N,k,L={},A,O,_=/^url\((.*?)\)$/.test(s),D=_,P,H,B,j;c&&p.addClass("highcharts-"+c),D=_,P=function(){return(A||0)%2/2},H=function(){var e=m.element.style,t={};y=(void 0===S||void 0===x||k)&&l(m.textStr)&&m.getBBox(),p.width=(S||y.width||0)+2*w+E,p.height=(x||y.height||0)+2*w,O=w+h.fontMetrics(e&&e.fontSize,m).b,D&&(g||(p.box=g=h.symbols[s]||_?h.symbol(s):h.rect(),g.addClass(("button"===c?"":"highcharts-label-box")+(c?" highcharts-"+c+"-box":"")),g.add(p),e=P(),t.x=e,t.y=(f?-O:0)+e),t.width=Math.round(p.width),t.height=Math.round(p.height),g.attr(v(t,L)),L={})},B=function(){var e=E+w,t;t=f?0:O,l(S)&&y&&("center"===k||"right"===k)&&(e+={center:.5,right:1}[k]*(S-y.width));if(e!==m.x||t!==m.y)m.attr("x",e),void 0!==t&&m.attr("y",t);m.x=e,m.y=t},j=function(e,t){g?g.attr(e,t):L[e]=t},p.onAdd=function(){m.add(p),p.attr({text:n||0===n?n:"",x:r,y:i}),g&&l(o)&&p.attr({anchorX:o,anchorY:u})},p.widthSetter=function(t){S=e.isNumber(t)?t:null},p.heightSetter=function(e){x=e},p["text-alignSetter"]=function(e){k=e},p.paddingSetter=function(e){l(e)&&e!==w&&(w=p.padding=e,B())},p.paddingLeftSetter=function(e){l(e)&&e!==E&&(E=e,B())},p.alignSetter=function(e){e={left:0,center:.5,right:1}[e],e!==b&&(b=e,y&&p.attr({x:T}))},p.textSetter=function(e){void 0!==e&&m.textSetter(e),H(),B()},p["stroke-widthSetter"]=function(e,t){e&&(D=!0),A=this["stroke-width"]=e,j(t,e)},p.strokeSetter=p.fillSetter=p.rSetter=function(e,t){"fill"===t&&e&&(D=!0),j(t,e)},p.anchorXSetter=function(e,t){o=p.anchorX=e,j(t,Math.round(e)-P()-T)},p.anchorYSetter=function(e,t){u=p.anchorY=e,j(t,e-N)},p.xSetter=function(e){p.x=e,b&&(e-=b*((S||y.width)+2*w)),T=Math.round(e),p.attr("translateX",T)},p.ySetter=function(e){N=p.y=Math.round(e),p.attr("translateY",N)};var F=p.css;return v(p,{css:function(e){if(e){var t={};e=C(e),d(p.textProps,function(n){void 0!==e[n]&&(t[n]=e[n],delete e[n])}),m.css(t)}return F.call(p,e)},getBBox:function(){return{width:y.width+2*w,height:y.height+2*w,x:y.x-w,y:y.y-w}},shadow:function(e){return e&&(H(),g&&g.shadow(e)),p},destroy:function(){M(p.element,"mouseenter"),M(p.element,"mouseleave"),m&&(m=m.destroy()),g&&(g=g.destroy()),t.prototype.destroy.call(p),p=h=H=B=j=null}})}}),e.Renderer=n}(e),function(e){var t=e.attr,n=e.createElement,r=e.css,i=e.defined,s=e.each,o=e.extend,u=e.isFirefox,a=e.isMS,f=e.isWebKit,l=e.pInt,c=e.SVGRenderer,h=e.win,p=e.wrap;o(e.SVGElement.prototype,{htmlCss:function(e){var t=this.element;if(t=e&&"SPAN"===t.tagName&&e.width)delete e.width,this.textWidth=t,this.updateTransform();return e&&"ellipsis"===e.textOverflow&&(e.whiteSpace="nowrap",e.overflow="hidden"),this.styles=o(this.styles,e),r(this.element,e),this},htmlGetBBox:function(){var e=this.element;return"text"===e.nodeName&&(e.style.position="absolute"),{x:e.offsetLeft,y:e.offsetTop,width:e.offsetWidth,height:e.offsetHeight}},htmlUpdateTransform:function(){if(this.added){var e=this.renderer,t=this.element,n=this.translateX||0,o=this.translateY||0,u=this.x||0,a=this.y||0,c=this.textAlign||"left",h={left:0,center:.5,right:1}[c],p=this.styles;r(t,{marginLeft:n,marginTop:o}),this.shadows&&s(this.shadows,function(e){r(e,{marginLeft:n+1,marginTop:o+1})}),this.inverted&&s(t.childNodes,function(n){e.invertChild(n,t)});if("SPAN"===t.tagName){var d=this.rotation,g=l(this.textWidth),y=p&&p.whiteSpace,b=[d,c,t.innerHTML,this.textWidth,this.textAlign].join();b!==this.cTT&&(p=e.fontMetrics(t.style.fontSize).b,i(d)&&this.setSpanRotation(d,h,p),r(t,{width:"",whiteSpace:y||"nowrap"}),t.offsetWidth>g&&/[ \-]/.test(t.textContent||t.innerText)&&r(t,{width:g+"px",display:"block",whiteSpace:y||"normal"}),this.getSpanCorrection(t.offsetWidth,p,h,d,c)),r(t,{left:u+(this.xCorr||0)+"px",top:a+(this.yCorr||0)+"px"}),f&&(p=t.offsetHeight),this.cTT=b}}else this.alignOnAdd=!0},setSpanRotation:function(e,t,n){var i={},s=a?"-ms-transform":f?"-webkit-transform":u?"MozTransform":h.opera?"-o-transform":"";i[s]=i.transform="rotate("+e+"deg)",i[s+(u?"Origin":"-origin")]=i.transformOrigin=100*t+"% "+n+"px",r(this.element,i)},getSpanCorrection:function(e,t,n){this.xCorr=-e*n,this.yCorr=-t}}),o(c.prototype,{html:function(e,r,i){var u=this.createElement("span"),a=u.element,f=u.renderer,l=f.isSVG,c=function(e,t){s(["opacity","visibility"],function(n){p(e,n+"Setter",function(e,n,r,i){e.call(this,n,r,i),t[r]=n})})};return u.textSetter=function(e){e!==a.innerHTML&&delete this.bBox,a.innerHTML=this.textStr=e,u.htmlUpdateTransform()},l&&c(u,u.element.style),u.xSetter=u.ySetter=u.alignSetter=u.rotationSetter=function(e,t){"align"===t&&(t="textAlign"),u[t]=e,u.htmlUpdateTransform()},u.attr({text:e,x:Math.round(r),y:Math.round(i)}).css({fontFamily:this.style.fontFamily,fontSize:this.style.fontSize,position:"absolute"}),a.style.whiteSpace="nowrap",u.css=u.htmlCss,l&&(u.add=function(e){var r,i=f.box.parentNode,l=[];if(this.parentGroup=e){if(r=e.div,!r){for(;e;)l.push(e),e=e.parentGroup;s(l.reverse(),function(e){var s,a=t(e.element,"class");a&&(a={className:a}),r=e.div=e.div||n("div",a,{position:"absolute",left:(e.translateX||0)+"px",top:(e.translateY||0)+"px",display:e.display,opacity:e.opacity,pointerEvents:e.styles&&e.styles.pointerEvents},r||i),s=r.style,o(e,{on:function(){return u.on.apply({element:l[0].div},arguments),e},translateXSetter:function(t,n){s.left=t+"px",e[n]=t,e.doTransform=!0},translateYSetter:function(t,n){s.top=t+"px",e[n]=t,e.doTransform=!0}}),c(e,s)})}}else r=i;return r.appendChild(a),u.added=!0,u.alignOnAdd&&u.htmlUpdateTransform(),u}),u}})}(e),function(e){var t,n,r=e.createElement,i=e.css,s=e.defined,o=e.deg2rad,u=e.discardElement,a=e.doc,f=e.each,l=e.erase,c=e.extend;t=e.extendClass;var h=e.isArray,p=e.isNumber,d=e.isObject,v=e.merge;n=e.noop;var m=e.pick,g=e.pInt,y=e.SVGElement,b=e.SVGRenderer,w=e.win;e.svg||(n={docMode8:a&&8===a.documentMode,init:function(e,t){var n=["<",t,' filled="f" stroked="f"'],i=["position: ","absolute",";"],s="div"===t;("shape"===t||s)&&i.push("left:0;top:0;width:1px;height:1px;"),i.push("visibility: ",s?"hidden":"visible"),n.push(' style="',i.join(""),'"/>'),t&&(n=s||"span"===t||"img"===t?n.join(""):e.prepVML(n),this.element=r(n)),this.renderer=e},add:function(e){var t=this.renderer,n=this.element,r=t.box,i=e&&e.inverted,r=e?e.element||e:r;return e&&(this.parentGroup=e),i&&t.invertChild(n,r),r.appendChild(n),this.added=!0,this.alignOnAdd&&!this.deferUpdateTransform&&this.updateTransform(),this.onAdd&&this.onAdd(),this.className&&this.attr("class",this.className),this},updateTransform:y.prototype.htmlUpdateTransform,setSpanRotation:function(){var e=this.rotation,t=Math.cos(e*o),n=Math.sin(e*o);i(this.element,{filter:e?["progid:DXImageTransform.Microsoft.Matrix(M11=",t,", M12=",-n,", M21=",n,", M22=",t,", sizingMethod='auto expand')"].join(""):"none"})},getSpanCorrection:function(e,t,n,r,s){var u=r?Math.cos(r*o):1,a=r?Math.sin(r*o):0,f=m(this.elemHeight,this.element.offsetHeight),l;this.xCorr=0>u&&-e,this.yCorr=0>a&&-f,l=0>u*a,this.xCorr+=a*t*(l?1-n:n),this.yCorr-=u*t*(r?l?n:1-n:1),s&&"left"!==s&&(this.xCorr-=e*n*(0>u?-1:1),r&&(this.yCorr-=f*n*(0>a?-1:1)),i(this.element,{textAlign:s}))},pathToVML:function(e){for(var t=e.length,n=[];t--;)p(e[t])?n[t]=Math.round(10*e[t])-5:"Z"===e[t]?n[t]="x":(n[t]=e[t],!e.isArc||"wa"!==e[t]&&"at"!==e[t]||(n[t+5]===n[t+7]&&(n[t+7]+=e[t+7]>e[t+5]?1:-1),n[t+6]===n[t+8]&&(n[t+8]+=e[t+8]>e[t+6]?1:-1)));return n.join(" ")||"x"},clip:function(e){var t=this,n;return e?(n=e.members,l(n,t),n.push(t),t.destroyClip=function(){l(n,t)},e=e.getCSS(t)):(t.destroyClip&&t.destroyClip(),e={clip:t.docMode8?"inherit":"rect(auto)"}),t.css(e)},css:y.prototype.htmlCss,safeRemoveChild:function(e){e.parentNode&&u(e)},destroy:function(){return this.destroyClip&&this.destroyClip(),y.prototype.destroy.apply(this)},on:function(e,t){return this.element["on"+e]=function(){var e=w.event;e.target=e.srcElement,t(e)},this},cutOffPath:function(e,t){var n;e=e.split(/[ ,]/),n=e.length;if(9===n||11===n)e[n-4]=e[n-2]=g(e[n-2])-10*t;return e.join(" ")},shadow:function(e,t,n){var i=[],s,o=this.element,u=this.renderer,a,f=o.style,l,c=o.path,h,p,d,v;c&&"string"!=typeof c.value&&(c="x"),p=c;if(e){d=m(e.width,3),v=(e.opacity||.15)/d;for(s=1;3>=s;s++)h=2*d+1-2*s,n&&(p=this.cutOffPath(c.value,h+.5)),l=['<shape isShadow="true" strokeweight="',h,'" filled="false" path="',p,'" coordsize="10 10" style="',o.style.cssText,'" />'],a=r(u.prepVML(l),null,{left:g(f.left)+m(e.offsetX,1),top:g(f.top)+m(e.offsetY,1)}),n&&(a.cutOff=h+1),l=['<stroke color="',e.color||"#000000",'" opacity="',v*s,'"/>'],r(u.prepVML(l),null,null,a),t?t.element.appendChild(a):o.parentNode.insertBefore(a,o),i.push(a);this.shadows=i}return this},updateShadows:n,setAttr:function(e,t){this.docMode8?this.element[e]=t:this.element.setAttribute(e,t)},classSetter:function(e){(this.added?this.element:this).className=e},dashstyleSetter:function(e,t,n){(n.getElementsByTagName("stroke")[0]||r(this.renderer.prepVML(["<stroke/>"]),null,null,n))[t]=e||"solid",this[t]=e},dSetter:function(e,t,n){var r=this.shadows;e=e||[],this.d=e.join&&e.join(" "),n.path=e=this.pathToVML(e);if(r)for(n=r.length;n--;)r[n].path=r[n].cutOff?this.cutOffPath(e,r[n].cutOff):e;this.setAttr(t,e)},fillSetter:function(e,t,n){var r=n.nodeName;"SPAN"===r?n.style.color=e:"IMG"!==r&&(n.filled="none"!==e,this.setAttr("fillcolor",this.renderer.color(e,n,t,this)))},"fill-opacitySetter":function(e,t,n){r(this.renderer.prepVML(["<",t.split("-")[0],' opacity="',e,'"/>']),null,null,n)},opacitySetter:n,rotationSetter:function(e,t,n){n=n.style,this[t]=n[t]=e,n.left=-Math.round(Math.sin(e*o)+1)+"px",n.top=Math.round(Math.cos(e*o))+"px"},strokeSetter:function(e,t,n){this.setAttr("strokecolor",this.renderer.color(e,n,t,this))},"stroke-widthSetter":function(e,t,n){n.stroked=!!e,this[t]=e,p(e)&&(e+="px"),this.setAttr("strokeweight",e)},titleSetter:function(e,t){this.setAttr(t,e)},visibilitySetter:function(e,t,n){"inherit"===e&&(e="visible"),this.shadows&&f(this.shadows,function(n){n.style[t]=e}),"DIV"===n.nodeName&&(e="hidden"===e?"-999em":0,this.docMode8||(n.style[t]=e?"visible":"hidden"),t="top"),n.style[t]=e},xSetter:function(e,t,n){this[t]=e,"x"===t?t="left":"y"===t&&(t="top"),this.updateClipping?(this[t]=e,this.updateClipping()):n.style[t]=e},zIndexSetter:function(e,t,n){n.style[t]=e}},n["stroke-opacitySetter"]=n["fill-opacitySetter"],e.VMLElement=n=t(y,n),n.prototype.ySetter=n.prototype.widthSetter=n.prototype.heightSetter=n.prototype.xSetter,n={Element:n,isIE8:-1<w.navigator.userAgent.indexOf("MSIE 8.0"),init:function(e,t,n){var r,i;this.alignedObjects=[],r=this.createElement("div").css({position:"relative"}),i=r.element,e.appendChild(r.element),this.isVML=!0,this.box=i,this.boxWrapper=r,this.gradients={},this.cache={},this.cacheKeys=[],this.imgCount=0,this.setSize(t,n,!1);if(!a.namespaces.hcv){a.namespaces.add("hcv","urn:schemas-microsoft-com:vml");try{a.createStyleSheet().cssText="hcv\\:fill, hcv\\:path, hcv\\:shape, hcv\\:stroke{ behavior:url(#default#VML); display: inline-block; } "}catch(s){a.styleSheets[0].cssText+="hcv\\:fill, hcv\\:path, hcv\\:shape, hcv\\:stroke{ behavior:url(#default#VML); display: inline-block; } "}}},isHidden:function(){return!this.box.offsetWidth},clipRect:function(e,t,n,r){var i=this.createElement(),s=d(e);return c(i,{members:[],count:0,left:(s?e.x:e)+1,top:(s?e.y:t)+1,width:(s?e.width:n)-1,height:(s?e.height:r)-1,getCSS:function(e){var t=e.element,n=t.nodeName,r=e.inverted,i=this.top-("shape"===n?t.offsetTop:0),s=this.left,t=s+this.width,o=i+this.height,i={clip:"rect("+Math.round(r?s:i)+"px,"+Math.round(r?o:t)+"px,"+Math.round(r?t:o)+"px,"+Math.round(r?i:s)+"px)"};return!r&&e.docMode8&&"DIV"===n&&c(i,{width:t+"px",height:o+"px"}),i},updateClipping:function(){f(i.members,function(e){e.element&&e.css(i.getCSS(e))})}})},color:function(t,n,i,s){var o=this,u,a=/^rgba/,l,c,h="none";t&&t.linearGradient?c="gradient":t&&t.radialGradient&&(c="pattern");if(c){var p,d,v=t.linearGradient||t.radialGradient,m,g,y,b,w,E="";t=t.stops;var S,x=[],T=function(){l=['<fill colors="'+x.join(",")+'" opacity="',y,'" o:opacity2="',g,'" type="',c,'" ',E,'focus="100%" method="any" />'],r(o.prepVML(l),null,null,n)};m=t[0],S=t[t.length-1],0<m[0]&&t.unshift([0,m[1]]),1>S[0]&&t.push([1,S[1]]),f(t,function(t,n){a.test(t[1])?(u=e.color(t[1]),p=u.get("rgb"),d=u.get("a")):(p=t[1],d=1),x.push(100*t[0]+"% "+p),n?(y=d,b=p):(g=d,w=p)});if("fill"===i)if("gradient"===c)i=v.x1||v[0]||0,t=v.y1||v[1]||0,m=v.x2||v[2]||0,v=v.y2||v[3]||0,E='angle="'+(90-180*Math.atan((v-t)/(m-i))/Math.PI)+'"',T();else{var h=v.r,N=2*h,C=2*h,k=v.cx,L=v.cy,A=n.radialReference,O,h=function(){A&&(O=s.getBBox(),k+=(A[0]-O.x)/O.width-.5,L+=(A[1]-O.y)/O.height-.5,N*=A[2]/O.width,C*=A[2]/O.height),E='src="'+e.getOptions().global.VMLRadialGradientURL+'" size="'+N+","+C+'" origin="0.5,0.5" position="'+k+","+L+'" color2="'+w+'" ',T()};s.added?h():s.onAdd=h,h=b}else h=p}else a.test(t)&&"IMG"!==n.tagName?(u=e.color(t),s[i+"-opacitySetter"](u.get("a"),i,n),h=u.get("rgb")):(h=n.getElementsByTagName(i),h.length&&(h[0].opacity=1,h[0].type="solid"),h=t);return h},prepVML:function(e){var t=this.isIE8;return e=e.join(""),t?(e=e.replace("/>",' xmlns="urn:schemas-microsoft-com:vml" />'),e=-1===e.indexOf('style="')?e.replace("/>",' style="display:inline-block;behavior:url(#default#VML);" />'):e.replace('style="','style="display:inline-block;behavior:url(#default#VML);')):e=e.replace("<","<hcv:"),e},text:b.prototype.html,path:function(e){var t={coordsize:"10 10"};return h(e)?t.d=e:d(e)&&c(t,e),this.createElement("shape").attr(t)},circle:function(e,t,n){var r=this.symbol("circle");return d(e)&&(n=e.r,t=e.y,e=e.x),r.isCircle=!0,r.r=n,r.attr({x:e,y:t})},g:function(e){var t;return e&&(t={className:"highcharts-"+e,"class":"highcharts-"+e}),this.createElement("div").attr(t)},image:function(e,t,n,r,i){var s=this.createElement("img").attr({src:e});return 1<arguments.length&&s.attr({x:t,y:n,width:r,height:i}),s},createElement:function(e){return"rect"===e?this.symbol(e):b.prototype.createElement.call(this,e)},invertChild:function(e,t){var n=this;t=t.style;var r="IMG"===e.tagName&&e.style;i(e,{flip:"x",left:g(t.width)-(r?g(r.top):1),top:g(t.height)-(r?g(r.left):1),rotation:-90}),f(e.childNodes,function(t){n.invertChild(t,e)})},symbols:{arc:function(e,t,n,r,i){var s=i.start,o=i.end,u=i.r||n||r;n=i.innerR,r=Math.cos(s);var a=Math.sin(s),f=Math.cos(o),l=Math.sin(o);return 0===o-s?["x"]:(s=["wa",e-u,t-u,e+u,t+u,e+u*r,t+u*a,e+u*f,t+u*l],i.open&&!n&&s.push("e","M",e,t),s.push("at",e-n,t-n,e+n,t+n,e+n*f,t+n*l,e+n*r,t+n*a,"x","e"),s.isArc=!0,s)},circle:function(e,t,n,r,i){return i&&s(i.r)&&(n=r=2*i.r),i&&i.isCircle&&(e-=n/2,t-=r/2),["wa",e,t,e+n,t+r,e+n,t+r/2,e+n,t+r/2,"e"]},rect:function(e,t,n,r,i){return b.prototype.symbols[s(i)&&i.r?"callout":"square"].call(0,e,t,n,r,i)}}},e.VMLRenderer=t=function(){this.init.apply(this,arguments)},t.prototype=v(b.prototype,n),e.Renderer=t),b.prototype.measureSpanWidth=function(e,t){var n=a.createElement("span");return e=a.createTextNode(e),n.appendChild(e),i(n,t),this.box.appendChild(n),t=n.offsetWidth,u(n),t}}(e),function(e){function t(){var t=e.defaultOptions.global,n=a.moment;if(t.timezone){if(n)return function(e){return-n.tz(e,t.timezone).utcOffset()};e.error(25)}return t.useUTC&&t.getTimezoneOffset}function n(){var n=e.defaultOptions.global,r,o=n.useUTC,f=o?"getUTC":"get",l=o?"setUTC":"set";e.Date=r=n.Date||a.Date,r.hcTimezoneOffset=o&&n.timezoneOffset,r.hcGetTimezoneOffset=t(),r.hcMakeTime=function(e,t,n,i,a,f){var l;return o?(l=r.UTC.apply(0,arguments),l+=s(l)):l=(new r(e,t,u(n,1),u(i,0),u(a,0),u(f,0))).getTime(),l},i("Minutes Hours Day Date Month FullYear".split(" "),function(e){r["hcGet"+e]=f+e}),i("Milliseconds Seconds Minutes Hours Date Month FullYear".split(" "),function(e){r["hcSet"+e]=l+e})}var r=e.color,i=e.each,s=e.getTZOffset,o=e.merge,u=e.pick,a=e.win;e.defaultOptions={colors:"#7cb5ec #434348 #90ed7d #f7a35c #8085e9 #f15c80 #e4d354 #2b908f #f45b5b #91e8e1".split(" "),symbols:["circle","diamond","square","triangle","triangle-down"],lang:{loading:"Loading...",months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),weekdays:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),decimalPoint:".",numericSymbols:"kMGTPE".split(""),resetZoom:"Reset zoom",resetZoomTitle:"Reset zoom level 1:1",thousandsSep:" "},global:{useUTC:!0,VMLRadialGradientURL:"http://code.highcharts.com/5.0.12/gfx/vml-radial-gradient.png"},chart:{borderRadius:0,defaultSeriesType:"line",ignoreHiddenSeries:!0,spacing:[10,10,15,10],resetZoomButton:{theme:{zIndex:20},position:{align:"right",x:-10,y:10}},width:null,height:null,borderColor:"#335cad",backgroundColor:"#ffffff",plotBorderColor:"#cccccc"},title:{text:"Chart title",align:"center",margin:15,widthAdjust:-44},subtitle:{text:"",align:"center",widthAdjust:-44},plotOptions:{},labels:{style:{position:"absolute",color:"#333333"}},legend:{enabled:!0,align:"center",layout:"horizontal",labelFormatter:function(){return this.name},borderColor:"#999999",borderRadius:0,navigation:{activeColor:"#003399",inactiveColor:"#cccccc"},itemStyle:{color:"#333333",fontSize:"12px",fontWeight:"bold",textOverflow:"ellipsis"},itemHoverStyle:{color:"#000000"},itemHiddenStyle:{color:"#cccccc"},shadow:!1,itemCheckboxStyle:{position:"absolute",width:"13px",height:"13px"},squareSymbol:!0,symbolPadding:5,verticalAlign:"bottom",x:0,y:0,title:{style:{fontWeight:"bold"}}},loading:{labelStyle:{fontWeight:"bold",position:"relative",top:"45%"},style:{position:"absolute",backgroundColor:"#ffffff",opacity:.5,textAlign:"center"}},tooltip:{enabled:!0,animation:e.svg,borderRadius:3,dateTimeLabelFormats:{millisecond:"%A, %b %e, %H:%M:%S.%L",second:"%A, %b %e, %H:%M:%S",minute:"%A, %b %e, %H:%M",hour:"%A, %b %e, %H:%M",day:"%A, %b %e, %Y",week:"Week from %A, %b %e, %Y",month:"%B %Y",year:"%Y"},footerFormat:"",padding:8,snap:e.isTouchDevice?25:10,backgroundColor:r("#f7f7f7").setOpacity(.85).get(),borderWidth:1,headerFormat:'<span style="font-size: 10px">{point.key}</span><br/>',pointFormat:'<span style="color:{point.color}">\u25cf</span> {series.name}: <b>{point.y}</b><br/>',shadow:!0,style:{color:"#333333",cursor:"default",fontSize:"12px",pointerEvents:"none",whiteSpace:"nowrap"}},credits:{enabled:!0,href:"http://www.highcharts.com",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:"#999999",fontSize:"9px"},text:"Highcharts.com"}},e.setOptions=function(t){return e.defaultOptions=o(!0,e.defaultOptions,t),n(),e.defaultOptions},e.getOptions=function(){return e.defaultOptions},e.defaultPlotOptions=e.defaultOptions.plotOptions,n()}(e),function(e){var t=e.correctFloat,n=e.defined,r=e.destroyObjectProperties,i=e.isNumber,s=e.merge,o=e.pick,u=e.deg2rad;e.Tick=function(e,t,n,r){this.axis=e,this.pos=t,this.type=n||"",this.isNewLabel=this.isNew=!0,n||r||this.addLabel()},e.Tick.prototype={addLabel:function(){var e=this.axis,r=e.options,i=e.chart,u=e.categories,a=e.names,f=this.pos,l=r.labels,c=e.tickPositions,h=f===c[0],p=f===c[c.length-1],a=u?o(u[f],a[f],f):f,u=this.label,c=c.info,d;e.isDatetimeAxis&&c&&(d=r.dateTimeLabelFormats[c.higherRanks[f]||c.unitName]),this.isFirst=h,this.isLast=p,r=e.labelFormatter.call({axis:e,chart:i,isFirst:h,isLast:p,dateTimeLabelFormat:d,value:e.isLog?t(e.lin2log(a)):a}),n(u)?u&&u.attr({text:r}):(this.labelLength=(this.label=u=n(r)&&l.enabled?i.renderer.text(r,0,0,l.useHTML).css(s(l.style)).add(e.labelGroup):null)&&u.getBBox().width,this.rotation=0)},getLabelSize:function(){return this.label?this.label.getBBox()[this.axis.horiz?"height":"width"]:0},handleOverflow:function(e){var t=this.axis,n=e.x,r=t.chart.chartWidth,i=t.chart.spacing,s=o(t.labelLeft,Math.min(t.pos,i[3])),i=o(t.labelRight,Math.max(t.pos+t.len,r-i[1])),a=this.label,f=this.rotation,l={left:0,center:.5,right:1}[t.labelAlign],c=a.getBBox().width,h=t.getSlotWidth(),p=h,d=1,v,m={};if(f)0>f&&n-l*c<s?v=Math.round(n/Math.cos(f*u)-s):0<f&&n+l*c>i&&(v=Math.round((r-n)/Math.cos(f*u)));else if(r=n+(1-l)*c,n-l*c<s?p=e.x+p*(1-l)-s:r>i&&(p=i-e.x+p*l,d=-1),p=Math.min(h,p),p<h&&"center"===t.labelAlign&&(e.x+=d*(h-p-l*(h-Math.min(c,p)))),c>p||t.autoRotation&&(a.styles||{}).width)v=p;v&&(m.width=v,(t.options.labels.style||{}).textOverflow||(m.textOverflow="ellipsis"),a.css(m))},getPosition:function(e,t,n,r){var i=this.axis,s=i.chart,o=r&&s.oldChartHeight||s.chartHeight;return{x:e?i.translate(t+n,null,null,r)+i.transB:i.left+i.offset+(i.opposite?(r&&s.oldChartWidth||s.chartWidth)-i.right-i.left:0),y:e?o-i.bottom+i.offset-(i.opposite?i.height:0):o-i.translate(t+n,null,null,r)-i.transB}},getLabelPosition:function(e,t,r,i,s,o,a,f){var l=this.axis,c=l.transA,h=l.reversed,p=l.staggerLines,d=l.tickRotCorr||{x:0,y:0},v=s.y;return n(v)||(v=0===l.side?r.rotation?-8:-r.getBBox().height:2===l.side?d.y+8:Math.cos(r.rotation*u)*(d.y-r.getBBox(!1,0).height/2)),e=e+s.x+d.x-(o&&i?o*c*(h?-1:1):0),t=t+v-(o&&!i?o*c*(h?1:-1):0),p&&(r=a/(f||1)%p,l.opposite&&(r=p-r-1),t+=l.labelOffset/p*r),{x:e,y:Math.round(t)}},getMarkPath:function(e,t,n,r,i,s){return s.crispLine(["M",e,t,"L",e+(i?0:-n),t+(i?n:0)],r)},renderGridLine:function(e,t,n){var r=this.axis,i=r.options,s=this.gridLine,o={},u=this.pos,a=this.type,f=r.tickmarkOffset,l=r.chart.renderer,c=a?a+"Grid":"grid",h=i[c+"LineWidth"],p=i[c+"LineColor"],i=i[c+"LineDashStyle"];s||(o.stroke=p,o["stroke-width"]=h,i&&(o.dashstyle=i),a||(o.zIndex=1),e&&(o.opacity=0),this.gridLine=s=l.path().attr(o).addClass("highcharts-"+(a?a+"-":"")+"grid-line").add(r.gridGroup)),!e&&s&&(e=r.getPlotLinePath(u+f,s.strokeWidth()*n,e,!0))&&s[this.isNew?"attr":"animate"]({d:e,opacity:t})},renderMark:function(e,t,n){var r=this.axis,i=r.options,s=r.chart.renderer,u=this.type,a=u?u+"Tick":"tick",f=r.tickSize(a),l=this.mark,c=!l,h=e.x;e=e.y;var p=o(i[a+"Width"],!u&&r.isXAxis?1:0),i=i[a+"Color"];f&&(r.opposite&&(f[0]=-f[0]),c&&(this.mark=l=s.path().addClass("highcharts-"+(u?u+"-":"")+"tick").add(r.axisGroup),l.attr({stroke:i,"stroke-width":p})),l[c?"attr":"animate"]({d:this.getMarkPath(h,e,f[0],l.strokeWidth()*n,r.horiz,s),opacity:t}))},renderLabel:function(e,t,n,r){var s=this.axis,u=s.horiz,a=s.options,f=this.label,l=a.labels,c=l.step,h=s.tickmarkOffset,p=!0,d=e.x;e=e.y,f&&i(d)&&(f.xy=e=this.getLabelPosition(d,e,f,u,l,h,r,c),this.isFirst&&!this.isLast&&!o(a.showFirstLabel,1)||this.isLast&&!this.isFirst&&!o(a.showLastLabel,1)?p=!1:!u||s.isRadial||l.step||l.rotation||t||0===n||this.handleOverflow(e),c&&r%c&&(p=!1),p&&i(e.y)?(e.opacity=n,f[this.isNewLabel?"attr":"animate"](e),this.isNewLabel=!1):(f.attr("y",-9999),this.isNewLabel=!0),this.isNew=!1)},render:function(e,t,n){var r=this.axis,i=r.horiz,s=this.getPosition(i,this.pos,r.tickmarkOffset,t),u=s.x,a=s.y,r=i&&u===r.pos+r.len||!i&&a===r.pos?-1:1;n=o(n,1),this.isActive=!0,this.renderGridLine(t,n,r),this.renderMark(s,n,r),this.renderLabel(s,t,n,e)},destroy:function(){r(this,this.axis)}}}(e);var t=function(e){var t=e.addEvent,n=e.animObject,r=e.arrayMax,i=e.arrayMin,s=e.color,o=e.correctFloat,u=e.defaultOptions,a=e.defined,f=e.deg2rad,l=e.destroyObjectProperties,c=e.each,h=e.extend,p=e.fireEvent,d=e.format,v=e.getMagnitude,m=e.grep,g=e.inArray,y=e.isArray,b=e.isNumber,w=e.isString,E=e.merge,S=e.normalizeTickInterval,x=e.objectEach,T=e.pick,N=e.removeEvent,C=e.splat,k=e.syncTimeout,L=e.Tick,A=function(){this.init.apply(this,arguments)};return e.extend(A.prototype,{defaultOptions:{dateTimeLabelFormats:{millisecond:"%H:%M:%S.%L",second:"%H:%M:%S",minute:"%H:%M",hour:"%H:%M",day:"%e. %b",week:"%e. %b",month:"%b '%y",year:"%Y"},endOnTick:!1,labels:{enabled:!0,style:{color:"#666666",cursor:"default",fontSize:"11px"},x:0},minPadding:.01,maxPadding:.01,minorTickLength:2,minorTickPosition:"outside",startOfWeek:1,startOnTick:!1,tickLength:10,tickmarkPlacement:"between",tickPixelInterval:100,tickPosition:"outside",title:{align:"middle",style:{color:"#666666"}},type:"linear",minorGridLineColor:"#f2f2f2",minorGridLineWidth:1,minorTickColor:"#999999",lineColor:"#ccd6eb",lineWidth:1,gridLineColor:"#e6e6e6",tickColor:"#ccd6eb"},defaultYAxisOptions:{endOnTick:!0,tickPixelInterval:72,showLastLabel:!0,labels:{x:-8},maxPadding:.05,minPadding:.05,startOnTick:!0,title:{rotation:270,text:"Values"},stackLabels:{enabled:!1,formatter:function(){return e.numberFormat(this.total,-1)},style:{fontSize:"11px",fontWeight:"bold",color:"#000000",textOutline:"1px contrast"}},gridLineWidth:1,lineWidth:0},defaultLeftAxisOptions:{labels:{x:-15},title:{rotation:270}},defaultRightAxisOptions:{labels:{x:15},title:{rotation:90}},defaultBottomAxisOptions:{labels:{autoRotation:[-45],x:0},title:{rotation:0}},defaultTopAxisOptions:{labels:{autoRotation:[-45],x:0},title:{rotation:0}},init:function(e,n){var r=n.isX,i=this;i.chart=e,i.horiz=e.inverted&&!i.isZAxis?!r:r,i.isXAxis=r,i.coll=i.coll||(r?"xAxis":"yAxis"),i.opposite=n.opposite,i.side=n.side||(i.horiz?i.opposite?0:2:i.opposite?1:3),i.setOptions(n);var s=this.options,o=s.type;i.labelFormatter=s.labels.formatter||i.defaultLabelFormatter,i.userOptions=n,i.minPixelPadding=0,i.reversed=s.reversed,i.visible=!1!==s.visible,i.zoomEnabled=!1!==s.zoomEnabled,i.hasNames="category"===o||!0===s.categories,i.categories=s.categories||i.hasNames,i.names=i.names||[],i.plotLinesAndBandsGroups={},i.isLog="logarithmic"===o,i.isDatetimeAxis="datetime"===o,i.positiveValuesOnly=i.isLog&&!i.allowNegativeLog,i.isLinked=a(s.linkedTo),i.ticks={},i.labelEdge=[],i.minorTicks={},i.plotLinesAndBands=[],i.alternateBands={},i.len=0,i.minRange=i.userMinRange=s.minRange||s.maxZoom,i.range=s.range,i.offset=s.offset||0,i.stacks={},i.oldStacks={},i.stacksTouched=0,i.max=null,i.min=null,i.crosshair=T(s.crosshair,C(e.options.tooltip.crosshairs)[r?0:1],!1),n=i.options.events,-1===g(i,e.axes)&&(r?e.axes.splice(e.xAxis.length,0,i):e.axes.push(i),e[i.coll].push(i)),i.series=i.series||[],e.inverted&&!i.isZAxis&&r&&void 0===i.reversed&&(i.reversed=!0),x(n,function(e,n){t(i,n,e)}),i.lin2log=s.linearToLogConverter||i.lin2log,i.isLog&&(i.val2lin=i.log2lin,i.lin2val=i.lin2log)},setOptions:function(e){this.options=E(this.defaultOptions,"yAxis"===this.coll&&this.defaultYAxisOptions,[this.defaultTopAxisOptions,this.defaultRightAxisOptions,this.defaultBottomAxisOptions,this.defaultLeftAxisOptions][this.side],E(u[this.coll],e))},defaultLabelFormatter:function(){var t=this.axis,n=this.value,r=t.categories,i=this.dateTimeLabelFormat,s=u.lang,o=s.numericSymbols,s=s.numericSymbolMagnitude||1e3,a=o&&o.length,f,l=t.options.labels.format,t=t.isLog?Math.abs(n):t.tickInterval;if(l)f=d(l,this);else if(r)f=n;else if(i)f=e.dateFormat(i,n);else if(a&&1e3<=t)for(;a--&&void 0===f;)r=Math.pow(s,a+1),t>=r&&0===10*n%r&&null!==o[a]&&0!==n&&(f=e.numberFormat(n/r,-1)+o[a]);return void 0===f&&(f=1e4<=Math.abs(n)?e.numberFormat(n,-1):e.numberFormat(n,-1,void 0,"")),f},getSeriesExtremes:function(){var e=this,t=e.chart;e.hasVisibleSeries=!1,e.dataMin=e.dataMax=e.threshold=null,e.softThreshold=!e.isXAxis,e.buildStacks&&e.buildStacks(),c(e.series,function(n){if(n.visible||!t.options.chart.ignoreHiddenSeries){var s=n.options,o=s.threshold,u;e.hasVisibleSeries=!0,e.positiveValuesOnly&&0>=o&&(o=null);if(e.isXAxis)s=n.xData,s.length&&(n=i(s),b(n)||n instanceof Date||(s=m(s,function(e){return b(e)}),n=i(s)),e.dataMin=Math.min(T(e.dataMin,s[0]),n),e.dataMax=Math.max(T(e.dataMax,s[0]),r(s)));else if(n.getExtremes(),u=n.dataMax,n=n.dataMin,a(n)&&a(u)&&(e.dataMin=Math.min(T(e.dataMin,n),n),e.dataMax=Math.max(T(e.dataMax,u),u)),a(o)&&(e.threshold=o),!s.softThreshold||e.positiveValuesOnly)e.softThreshold=!1}})},translate:function(e,t,n,r,i,s){var o=this.linkedParent||this,u=1,a=0,f=r?o.oldTransA:o.transA;r=r?o.oldMin:o.min;var l=o.minPixelPadding;return i=(o.isOrdinal||o.isBroken||o.isLog&&i)&&o.lin2val,f||(f=o.transA),n&&(u*=-1,a=o.len),o.reversed&&(u*=-1,a-=u*(o.sector||o.len)),t?(e=(e*u+a-l)/f+r,i&&(e=o.lin2val(e))):(i&&(e=o.val2lin(e)),e=u*(e-r)*f+a+u*l+(b(s)?f*s:0)),e},toPixels:function(e,t){return this.translate(e,!1,!this.horiz,null,!0)+(t?0:this.pos)},toValue:function(e,t){return this.translate(e-(t?0:this.pos),!0,!this.horiz,null,!0)},getPlotLinePath:function(e,t,n,r,i){var s=this.chart,o=this.left,u=this.top,a,f,l=n&&s.oldChartHeight||s.chartHeight,c=n&&s.oldChartWidth||s.chartWidth,h;a=this.transB;var p=function(e,t,n){if(e<t||e>n)r?e=Math.min(Math.max(t,e),n):h=!0;return e};return i=T(i,this.translate(e,null,null,n)),e=n=Math.round(i+a),a=f=Math.round(l-i-a),b(i)?this.horiz?(a=u,f=l-this.bottom,e=n=p(e,o,o+this.width)):(e=o,n=c-this.right,a=f=p(a,u,u+this.height)):h=!0,h&&!r?null:s.renderer.crispLine(["M",e,a,"L",n,f],t||1)},getLinearTickPositions:function(e,t,n){var r,i=o(Math.floor(t/e)*e);n=o(Math.ceil(n/e)*e);var s=[];if(this.single)return[t];for(t=i;t<=n;){s.push(t),t=o(t+e);if(t===r)break;r=t}return s},getMinorTickPositions:function(){var e=this,t=e.options,n=e.tickPositions,r=e.minorTickInterval,i=[],s=e.pointRangePadding||0,o=e.min-s,s=e.max+s,u=s-o;if(u&&u/r<e.len/3)if(e.isLog)c(this.paddedTicks,function(t,n,s){n&&i.push.apply(i,e.getLogTickPositions(r,s[n-1],s[n],!0))});else if(e.isDatetimeAxis&&"auto"===t.minorTickInterval)i=i.concat(e.getTimeTicks(e.normalizeTimeTickInterval(r),o,s,t.startOfWeek));else for(t=o+(n[0]-o)%r;t<=s&&t!==i[0];t+=r)i.push(t);return 0!==i.length&&e.trimTicks(i),i},adjustForMinRange:function(){var e=this.options,t=this.min,n=this.max,s,o,u,f,l,h,p,d;this.isXAxis&&void 0===this.minRange&&!this.isLog&&(a(e.min)||a(e.max)?this.minRange=null:(c(this.series,function(e){h=e.xData;for(f=p=e.xIncrement?1:h.length-1;0<f;f--)if(l=h[f]-h[f-1],void 0===u||l<u)u=l}),this.minRange=Math.min(5*u,this.dataMax-this.dataMin))),n-t<this.minRange&&(o=this.dataMax-this.dataMin>=this.minRange,d=this.minRange,s=(d-n+t)/2,s=[t-s,T(e.min,t-s)],o&&(s[2]=this.isLog?this.log2lin(this.dataMin):this.dataMin),t=r(s),n=[t+d,T(e.max,t+d)],o&&(n[2]=this.isLog?this.log2lin(this.dataMax):this.dataMax),n=i(n),n-t<d&&(s[0]=n-d,s[1]=T(e.min,n-d),t=r(s))),this.min=t,this.max=n},getClosest:function(){var e;return this.categories?e=1:c(this.series,function(t){var n=t.closestPointRange,r=t.visible||!t.chart.options.chart.ignoreHiddenSeries;!t.noSharedTooltip&&a(n)&&r&&(e=a(e)?Math.min(e,n):n)}),e},nameToX:function(e){var t=y(this.categories),n=t?this.categories:this.names,r=e.options.x,i;return e.series.requireSorting=!1,a(r)||(r=!1===this.options.uniqueNames?e.series.autoIncrement():g(e.name,n)),-1===r?t||(i=n.length):i=r,void 0!==i&&(this.names[i]=e.name),i},updateNames:function(){var e=this;0<this.names.length&&(this.names.length=0,this.minRange=this.userMinRange,c(this.series||[],function(t){t.xIncrement=null;if(!t.points||t.isDirtyData)t.processData(),t.generatePoints();c(t.points,function(n,r){var i;n.options&&(i=e.nameToX(n),void 0!==i&&i!==n.x&&(n.x=i,t.xData[r]=i))})}))},setAxisTranslation:function(e){var t=this,n=t.max-t.min,r=t.axisPointRange||0,i,s=0,o=0,u=t.linkedParent,a=!!t.categories,f=t.transA,l=t.isXAxis;if(l||a||r)i=t.getClosest(),u?(s=u.minPointOffset,o=u.pointRangePadding):c(t.series,function(e){var n=a?1:l?T(e.options.pointRange,i,0):t.axisPointRange||0;e=e.options.pointPlacement,r=Math.max(r,n),t.single||(s=Math.max(s,w(e)?0:n/2),o=Math.max(o,"on"===e?0:n))}),u=t.ordinalSlope&&i?t.ordinalSlope/i:1,t.minPointOffset=s*=u,t.pointRangePadding=o*=u,t.pointRange=Math.min(r,n),l&&(t.closestPointRange=i);e&&(t.oldTransA=f),t.translationSlope=t.transA=f=t.options.staticScale||t.len/(n+o||1),t.transB=t.horiz?t.left:t.bottom,t.minPixelPadding=f*s},minFromRange:function(){return this.max-this.range},setTickInterval:function(t){var n=this,r=n.chart,i=n.options,s=n.isLog,u=n.log2lin,f=n.isDatetimeAxis,l=n.isXAxis,h=n.isLinked,d=i.maxPadding,m=i.minPadding,g=i.tickInterval,y=i.tickPixelInterval,w=n.categories,E=n.threshold,x=n.softThreshold,N,C,k,L;f||w||h||this.getTickAmount(),k=T(n.userMin,i.min),L=T(n.userMax,i.max),h?(n.linkedParent=r[n.coll][i.linkedTo],r=n.linkedParent.getExtremes(),n.min=T(r.min,r.dataMin),n.max=T(r.max,r.dataMax),i.type!==n.linkedParent.options.type&&e.error(11,1)):(!x&&a(E)&&(n.dataMin>=E?(N=E,m=0):n.dataMax<=E&&(C=E,d=0)),n.min=T(k,N,n.dataMin),n.max=T(L,C,n.dataMax)),s&&(n.positiveValuesOnly&&!t&&0>=Math.min(n.min,T(n.dataMin,n.min))&&e.error(10,1),n.min=o(u(n.min),15),n.max=o(u(n.max),15)),n.range&&a(n.max)&&(n.userMin=n.min=k=Math.max(n.min,n.minFromRange()),n.userMax=L=n.max,n.range=null),p(n,"foundExtremes"),n.beforePadding&&n.beforePadding(),n.adjustForMinRange(),!(w||n.axisPointRange||n.usePercentage||h)&&a(n.min)&&a(n.max)&&(u=n.max-n.min)&&(!a(k)&&m&&(n.min-=u*m),!a(L)&&d&&(n.max+=u*d)),b(i.softMin)&&(n.min=Math.min(n.min,i.softMin)),b(i.softMax)&&(n.max=
Math.max(n.max,i.softMax)),b(i.floor)&&(n.min=Math.max(n.min,i.floor)),b(i.ceiling)&&(n.max=Math.min(n.max,i.ceiling)),x&&a(n.dataMin)&&(E=E||0,!a(k)&&n.min<E&&n.dataMin>=E?n.min=E:!a(L)&&n.max>E&&n.dataMax<=E&&(n.max=E)),n.tickInterval=n.min===n.max||void 0===n.min||void 0===n.max?1:h&&!g&&y===n.linkedParent.options.tickPixelInterval?g=n.linkedParent.tickInterval:T(g,this.tickAmount?(n.max-n.min)/Math.max(this.tickAmount-1,1):void 0,w?1:(n.max-n.min)*y/Math.max(n.len,y)),l&&!t&&c(n.series,function(e){e.processData(n.min!==n.oldMin||n.max!==n.oldMax)}),n.setAxisTranslation(!0),n.beforeSetTickPositions&&n.beforeSetTickPositions(),n.postProcessTickInterval&&(n.tickInterval=n.postProcessTickInterval(n.tickInterval)),n.pointRange&&!g&&(n.tickInterval=Math.max(n.pointRange,n.tickInterval)),t=T(i.minTickInterval,n.isDatetimeAxis&&n.closestPointRange),!g&&n.tickInterval<t&&(n.tickInterval=t),f||s||g||(n.tickInterval=S(n.tickInterval,null,v(n.tickInterval),T(i.allowDecimals,!(.5<n.tickInterval&&5>n.tickInterval&&1e3<n.max&&9999>n.max)),!!this.tickAmount)),this.tickAmount||(n.tickInterval=n.unsquish()),this.setTickPositions()},setTickPositions:function(){var e=this.options,t,n=e.tickPositions,r=e.tickPositioner,i=e.startOnTick,s=e.endOnTick;this.tickmarkOffset=this.categories&&"between"===e.tickmarkPlacement&&1===this.tickInterval?.5:0,this.minorTickInterval="auto"===e.minorTickInterval&&this.tickInterval?this.tickInterval/5:e.minorTickInterval,this.single=this.min===this.max&&a(this.min)&&!this.tickAmount&&(parseInt(this.min,10)===this.min||!1!==e.allowDecimals),this.tickPositions=t=n&&n.slice(),!t&&(t=this.isDatetimeAxis?this.getTimeTicks(this.normalizeTimeTickInterval(this.tickInterval,e.units),this.min,this.max,e.startOfWeek,this.ordinalPositions,this.closestPointRange,!0):this.isLog?this.getLogTickPositions(this.tickInterval,this.min,this.max):this.getLinearTickPositions(this.tickInterval,this.min,this.max),t.length>this.len&&(t=[t[0],t.pop()]),this.tickPositions=t,r&&(r=r.apply(this,[this.min,this.max])))&&(this.tickPositions=t=r),this.paddedTicks=t.slice(0),this.trimTicks(t,i,s),this.isLinked||(this.single&&(this.min-=.5,this.max+=.5),n||r||this.adjustTickAmount())},trimTicks:function(e,t,n){var r=e[0],i=e[e.length-1],s=this.minPointOffset||0;if(!this.isLinked){if(t&&-Infinity!==r)this.min=r;else for(;this.min-s>e[0];)e.shift();if(n)this.max=i;else for(;this.max+s<e[e.length-1];)e.pop();0===e.length&&a(r)&&e.push((i+r)/2)}},alignToOthers:function(){var e={},t,n=this.options;return!1===this.chart.options.chart.alignTicks||!1===n.alignTicks||this.isLog||c(this.chart[this.coll],function(n){var r=n.options,r=[n.horiz?r.left:r.top,r.width,r.height,r.pane].join();n.series.length&&(e[r]?t=!0:e[r]=1)}),t},getTickAmount:function(){var e=this.options,t=e.tickAmount,n=e.tickPixelInterval;!a(e.tickInterval)&&this.len<n&&!this.isRadial&&!this.isLog&&e.startOnTick&&e.endOnTick&&(t=2),!t&&this.alignToOthers()&&(t=Math.ceil(this.len/n)+1),4>t&&(this.finalTickAmt=t,t=5),this.tickAmount=t},adjustTickAmount:function(){var e=this.tickInterval,t=this.tickPositions,n=this.tickAmount,r=this.finalTickAmt,i=t&&t.length;if(i<n){for(;t.length<n;)t.push(o(t[t.length-1]+e));this.transA*=(i-1)/(n-1),this.max=t[t.length-1]}else i>n&&(this.tickInterval*=2,this.setTickPositions());if(a(r)){for(e=n=t.length;e--;)(3===r&&1===e%2||2>=r&&0<e&&e<n-1)&&t.splice(e,1);this.finalTickAmt=void 0}},setScale:function(){var e,t;this.oldMin=this.min,this.oldMax=this.max,this.oldAxisLength=this.len,this.setAxisSize(),t=this.len!==this.oldAxisLength,c(this.series,function(t){if(t.isDirtyData||t.isDirty||t.xAxis.isDirty)e=!0}),t||e||this.isLinked||this.forceRedraw||this.userMin!==this.oldUserMin||this.userMax!==this.oldUserMax||this.alignToOthers()?(this.resetStacks&&this.resetStacks(),this.forceRedraw=!1,this.getSeriesExtremes(),this.setTickInterval(),this.oldUserMin=this.userMin,this.oldUserMax=this.userMax,this.isDirty||(this.isDirty=t||this.min!==this.oldMin||this.max!==this.oldMax)):this.cleanStacks&&this.cleanStacks()},setExtremes:function(e,t,n,r,i){var s=this,o=s.chart;n=T(n,!0),c(s.series,function(e){delete e.kdTree}),i=h(i,{min:e,max:t}),p(s,"setExtremes",i,function(){s.userMin=e,s.userMax=t,s.eventArgs=i,n&&o.redraw(r)})},zoom:function(e,t){var n=this.dataMin,r=this.dataMax,i=this.options,s=Math.min(n,T(i.min,n)),i=Math.max(r,T(i.max,r));if(e!==this.min||t!==this.max)this.allowZoomOutside||(a(n)&&(e<s&&(e=s),e>i&&(e=i)),a(r)&&(t<s&&(t=s),t>i&&(t=i))),this.displayBtn=void 0!==e||void 0!==t,this.setExtremes(e,t,!1,void 0,{trigger:"zoom"});return!0},setAxisSize:function(){var e=this.chart,t=this.options,n=t.offsets||[0,0,0,0],r=this.horiz,i=T(t.width,e.plotWidth-n[3]+n[1]),s=T(t.height,e.plotHeight-n[0]+n[2]),o=T(t.top,e.plotTop+n[0]),t=T(t.left,e.plotLeft+n[3]),n=/%$/;n.test(s)&&(s=Math.round(parseFloat(s)/100*e.plotHeight)),n.test(o)&&(o=Math.round(parseFloat(o)/100*e.plotHeight+e.plotTop)),this.left=t,this.top=o,this.width=i,this.height=s,this.bottom=e.chartHeight-s-o,this.right=e.chartWidth-i-t,this.len=Math.max(r?i:s,0),this.pos=r?t:o},getExtremes:function(){var e=this.isLog,t=this.lin2log;return{min:e?o(t(this.min)):this.min,max:e?o(t(this.max)):this.max,dataMin:this.dataMin,dataMax:this.dataMax,userMin:this.userMin,userMax:this.userMax}},getThreshold:function(e){var t=this.isLog,n=this.lin2log,r=t?n(this.min):this.min,t=t?n(this.max):this.max;return null===e?e=r:r>e?e=r:t<e&&(e=t),this.translate(e,0,1,0,1)},autoLabelAlign:function(e){return e=(T(e,0)-90*this.side+720)%360,15<e&&165>e?"right":195<e&&345>e?"left":"center"},tickSize:function(e){var t=this.options,n=t[e+"Length"],r=T(t[e+"Width"],"tick"===e&&this.isXAxis?1:0);if(r&&n)return"inside"===t[e+"Position"]&&(n=-n),[n,r]},labelMetrics:function(){var e=this.tickPositions&&this.tickPositions[0]||0;return this.chart.renderer.fontMetrics(this.options.labels.style&&this.options.labels.style.fontSize,this.ticks[e]&&this.ticks[e].label)},unsquish:function(){var e=this.options.labels,t=this.horiz,n=this.tickInterval,r=n,i=this.len/(((this.categories?1:0)+this.max-this.min)/n),s,o=e.rotation,u=this.labelMetrics(),l,h=Number.MAX_VALUE,p,d=function(e){return e/=i||1,e=1<e?Math.ceil(e):1,e*n};return t?(p=!e.staggerLines&&!e.step&&(a(o)?[o]:i<T(e.autoRotationLimit,80)&&e.autoRotation))&&c(p,function(e){var t;if(e===o||e&&-90<=e&&90>=e)l=d(Math.abs(u.h/Math.sin(f*e))),t=l+Math.abs(e/360),t<h&&(h=t,s=e,r=l)}):e.step||(r=d(u.h)),this.autoRotation=p,this.labelRotation=T(s,o),r},getSlotWidth:function(){var e=this.chart,t=this.horiz,n=this.options.labels,r=Math.max(this.tickPositions.length-(this.categories?0:1),1),i=e.margin[3];return t&&2>(n.step||0)&&!n.rotation&&(this.staggerLines||1)*this.len/r||!t&&(i&&i-e.spacing[3]||.33*e.chartWidth)},renderUnsquish:function(){var e=this.chart,t=e.renderer,n=this.tickPositions,r=this.ticks,i=this.options.labels,s=this.horiz,o=this.getSlotWidth(),u=Math.max(1,Math.round(o-2*(i.padding||5))),a={},f=this.labelMetrics(),l=i.style&&i.style.textOverflow,h,p=0,d,v;w(i.rotation)||(a.rotation=i.rotation||0),c(n,function(e){(e=r[e])&&e.labelLength>p&&(p=e.labelLength)}),this.maxLabelLength=p;if(this.autoRotation)p>u&&p>f.h?a.rotation=this.labelRotation:this.labelRotation=0;else if(o&&(h={width:u+"px"},!l))for(h.textOverflow="clip",d=n.length;!s&&d--;)if(v=n[d],u=r[v].label)u.styles&&"ellipsis"===u.styles.textOverflow?u.css({textOverflow:"clip"}):r[v].labelLength>o&&u.css({width:o+"px"}),u.getBBox().height>this.len/n.length-(f.h-f.f)&&(u.specCss={textOverflow:"ellipsis"});a.rotation&&(h={width:(p>.5*e.chartHeight?.33*e.chartHeight:e.chartHeight)+"px"},l||(h.textOverflow="ellipsis"));if(this.labelAlign=i.align||this.autoLabelAlign(this.labelRotation))a.align=this.labelAlign;c(n,function(e){var t=(e=r[e])&&e.label;t&&(t.attr(a),h&&t.css(E(h,t.specCss)),delete t.specCss,e.rotation=a.rotation)}),this.tickRotCorr=t.rotCorr(f.b,this.labelRotation||0,0!==this.side)},hasData:function(){return this.hasVisibleSeries||a(this.min)&&a(this.max)&&!!this.tickPositions},addTitle:function(e){var t=this.chart.renderer,n=this.horiz,r=this.opposite,i=this.options.title,s;this.axisTitle||((s=i.textAlign)||(s=(n?{low:"left",middle:"center",high:"right"}:{low:r?"right":"left",middle:"center",high:r?"left":"right"})[i.align]),this.axisTitle=t.text(i.text,0,0,i.useHTML).attr({zIndex:7,rotation:i.rotation||0,align:s}).addClass("highcharts-axis-title").css(i.style).add(this.axisGroup),this.axisTitle.isNew=!0),this.axisTitle[e?"show":"hide"](!0)},generateTick:function(e){var t=this.ticks;t[e]?t[e].addLabel():t[e]=new L(this,e)},getOffset:function(){var e=this,t=e.chart,n=t.renderer,r=e.options,i=e.tickPositions,s=e.ticks,o=e.horiz,u=e.side,f=t.inverted&&!e.isZAxis?[1,0,3,2][u]:u,l,h,p=0,d,v=0,m=r.title,g=r.labels,y=0,b=t.axisOffset,t=t.clipOffset,w=[-1,1,1,-1][u],E=r.className,S=e.axisParent,N=this.tickSize("tick");l=e.hasData(),e.showAxis=h=l||T(r.showEmpty,!0),e.staggerLines=e.horiz&&g.staggerLines,e.axisGroup||(e.gridGroup=n.g("grid").attr({zIndex:r.gridZIndex||1}).addClass("highcharts-"+this.coll.toLowerCase()+"-grid "+(E||"")).add(S),e.axisGroup=n.g("axis").attr({zIndex:r.zIndex||2}).addClass("highcharts-"+this.coll.toLowerCase()+" "+(E||"")).add(S),e.labelGroup=n.g("axis-labels").attr({zIndex:g.zIndex||7}).addClass("highcharts-"+e.coll.toLowerCase()+"-labels "+(E||"")).add(S)),l||e.isLinked?(c(i,function(t,n){e.generateTick(t,n)}),e.renderUnsquish(),!1===g.reserveSpace||0!==u&&2!==u&&{1:"left",3:"right"}[u]!==e.labelAlign&&"center"!==e.labelAlign||c(i,function(e){y=Math.max(s[e].getLabelSize(),y)}),e.staggerLines&&(y*=e.staggerLines,e.labelOffset=y*(e.opposite?-1:1))):x(s,function(e,t){e.destroy(),delete s[t]}),m&&m.text&&!1!==m.enabled&&(e.addTitle(h),h&&!1!==m.reserveSpace&&(e.titleOffset=p=e.axisTitle.getBBox()[o?"height":"width"],d=m.offset,v=a(d)?0:T(m.margin,o?5:10))),e.renderLine(),e.offset=w*T(r.offset,b[u]),e.tickRotCorr=e.tickRotCorr||{x:0,y:0},n=0===u?-e.labelMetrics().h:2===u?e.tickRotCorr.y:0,v=Math.abs(y)+v,y&&(v=v-n+w*(o?T(g.y,e.tickRotCorr.y+8*w):g.x)),e.axisTitleMargin=T(d,v),b[u]=Math.max(b[u],e.axisTitleMargin+p+w*e.offset,v,l&&i.length&&N?N[0]+w*e.offset:0),i=2*Math.floor(e.axisLine.strokeWidth()/2),0<r.offset&&(i-=2*r.offset),t[f]=Math.max(t[f]||i,i)},getLinePath:function(e){var t=this.chart,n=this.opposite,r=this.offset,i=this.horiz,s=this.left+(n?this.width:0)+r,r=t.chartHeight-this.bottom-(n?this.height:0)+r;return n&&(e*=-1),t.renderer.crispLine(["M",i?this.left:s,i?r:this.top,"L",i?t.chartWidth-this.right:s,i?r:t.chartHeight-this.bottom],e)},renderLine:function(){this.axisLine||(this.axisLine=this.chart.renderer.path().addClass("highcharts-axis-line").add(this.axisGroup),this.axisLine.attr({stroke:this.options.lineColor,"stroke-width":this.options.lineWidth,zIndex:7}))},getTitlePosition:function(){var e=this.horiz,t=this.left,n=this.top,r=this.len,i=this.options.title,s=e?t:n,o=this.opposite,u=this.offset,a=i.x||0,f=i.y||0,l=this.chart.renderer.fontMetrics(i.style&&i.style.fontSize,this.axisTitle).f,r={low:s+(e?0:r),middle:s+r/2,high:s+(e?r:0)}[i.align],t=(e?n+this.height:t)+(e?1:-1)*(o?-1:1)*this.axisTitleMargin+(2===this.side?l:0);return{x:e?r+a:t+(o?this.width:0)+u+a,y:e?t+f-(o?this.height:0)+u:r+f}},renderMinorTick:function(e){var t=this.chart.hasRendered&&b(this.oldMin),n=this.minorTicks;n[e]||(n[e]=new L(this,e,"minor")),t&&n[e].isNew&&n[e].render(null,!0),n[e].render(null,!1,1)},renderTick:function(e,t){var n=this.isLinked,r=this.ticks,i=this.chart.hasRendered&&b(this.oldMin);if(!n||e>=this.min&&e<=this.max)r[e]||(r[e]=new L(this,e)),i&&r[e].isNew&&r[e].render(t,!0,.1),r[e].render(t)},render:function(){var t=this,r=t.chart,i=t.options,s=t.isLog,o=t.lin2log,u=t.isLinked,a=t.tickPositions,f=t.axisTitle,l=t.ticks,h=t.minorTicks,p=t.alternateBands,d=i.stackLabels,v=i.alternateGridColor,m=t.tickmarkOffset,g=t.axisLine,y=t.showAxis,w=n(r.renderer.globalAnimation),E,S;t.labelEdge.length=0,t.overlap=!1,c([l,h,p],function(e){x(e,function(e){e.isActive=!1})});if(t.hasData()||u)t.minorTickInterval&&!t.categories&&c(t.getMinorTickPositions(),function(e){t.renderMinorTick(e)}),a.length&&(c(a,function(e,n){t.renderTick(e,n)}),m&&(0===t.min||t.single)&&(l[-1]||(l[-1]=new L(t,-1,null,!0)),l[-1].render(-1))),v&&c(a,function(n,i){S=void 0!==a[i+1]?a[i+1]+m:t.max-m,0===i%2&&n<t.max&&S<=t.max+(r.polar?-m:m)&&(p[n]||(p[n]=new e.PlotLineOrBand(t)),E=n+m,p[n].options={from:s?o(E):E,to:s?o(S):S,color:v},p[n].render(),p[n].isActive=!0)}),t._addedPlotLB||(c((i.plotLines||[]).concat(i.plotBands||[]),function(e){t.addPlotBandOrLine(e)}),t._addedPlotLB=!0);c([l,h,p],function(e){var t,n=[],i=w.duration;x(e,function(e,t){e.isActive||(e.render(t,!1,0),e.isActive=!1,n.push(t))}),k(function(){for(t=n.length;t--;)e[n[t]]&&!e[n[t]].isActive&&(e[n[t]].destroy(),delete e[n[t]])},e!==p&&r.hasRendered&&i?i:0)}),g&&(g[g.isPlaced?"animate":"attr"]({d:this.getLinePath(g.strokeWidth())}),g.isPlaced=!0,g[y?"show":"hide"](!0)),f&&y&&(i=t.getTitlePosition(),b(i.y)?(f[f.isNew?"attr":"animate"](i),f.isNew=!1):(f.attr("y",-9999),f.isNew=!0)),d&&d.enabled&&t.renderStackTotals(),t.isDirty=!1},redraw:function(){this.visible&&(this.render(),c(this.plotLinesAndBands,function(e){e.render()})),c(this.series,function(e){e.isDirty=!0})},keepProps:"extKey hcEvents names series userMax userMin".split(" "),destroy:function(e){var t=this,n=t.stacks,r=t.plotLinesAndBands,i;e||N(t),x(n,function(e,t){l(e),n[t]=null}),c([t.ticks,t.minorTicks,t.alternateBands],function(e){l(e)});if(r)for(e=r.length;e--;)r[e].destroy();c("stackTotalGroup axisLine axisTitle axisGroup gridGroup labelGroup cross".split(" "),function(e){t[e]&&(t[e]=t[e].destroy())});for(i in t.plotLinesAndBandsGroups)t.plotLinesAndBandsGroups[i]=t.plotLinesAndBandsGroups[i].destroy();x(t,function(e,n){-1===g(n,t.keepProps)&&delete t[n]})},drawCrosshair:function(e,t){var n,r=this.crosshair,i=T(r.snap,!0),o,u=this.cross;e||(e=this.cross&&this.cross.e),this.crosshair&&!1!==(a(t)||!i)?(i?a(t)&&(o=this.isXAxis?t.plotX:this.len-t.plotY):o=e&&(this.horiz?e.chartX-this.pos:this.len-e.chartY+this.pos),a(o)&&(n=this.getPlotLinePath(t&&(this.isXAxis?t.x:T(t.stackY,t.y)),null,null,null,o)||null),a(n)?(t=this.categories&&!this.isRadial,u||(this.cross=u=this.chart.renderer.path().addClass("highcharts-crosshair highcharts-crosshair-"+(t?"category ":"thin ")+r.className).attr({zIndex:T(r.zIndex,2)}).add(),u.attr({stroke:r.color||(t?s("#ccd6eb").setOpacity(.25).get():"#cccccc"),"stroke-width":T(r.width,1)}),r.dashStyle&&u.attr({dashstyle:r.dashStyle})),u.show().attr({d:n}),t&&!r.width&&u.attr({"stroke-width":this.transA}),this.cross.e=e):this.hideCrosshair()):this.hideCrosshair()},hideCrosshair:function(){this.cross&&this.cross.hide()}}),e.Axis=A}(e);return function(e){var t=e.Axis,n=e.Date,r=e.dateFormat,i=e.defaultOptions,s=e.defined,o=e.each,u=e.extend,a=e.getMagnitude,f=e.getTZOffset,l=e.normalizeTickInterval,c=e.pick,h=e.timeUnits;t.prototype.getTimeTicks=function(e,t,a,l){var p=[],d={},y=i.global.useUTC,b,w=new n(t-Math.max(f(t),f(a))),E=n.hcMakeTime,S=e.unitRange,x=e.count,T;if(s(t)){w[n.hcSetMilliseconds](S>=h.second?0:x*Math.floor(w.getMilliseconds()/x)),S>=h.second&&w[n.hcSetSeconds](S>=h.minute?0:x*Math.floor(w.getSeconds()/x)),S>=h.minute&&w[n.hcSetMinutes](S>=h.hour?0:x*Math.floor(w[n.hcGetMinutes]()/x)),S>=h.hour&&w[n.hcSetHours](S>=h.day?0:x*Math.floor(w[n.hcGetHours]()/x)),S>=h.day&&w[n.hcSetDate](S>=h.month?1:x*Math.floor(w[n.hcGetDate]()/x)),S>=h.month&&(w[n.hcSetMonth](S>=h.year?0:x*Math.floor(w[n.hcGetMonth]()/x)),b=w[n.hcGetFullYear]()),S>=h.year&&w[n.hcSetFullYear](b-b%x),S===h.week&&w[n.hcSetDate](w[n.hcGetDate]()-w[n.hcGetDay]()+c(l,1)),b=w[n.hcGetFullYear](),l=w[n.hcGetMonth]();var N=w[n.hcGetDate](),C=w[n.hcGetHours]();if(n.hcTimezoneOffset||n.hcGetTimezoneOffset)T=(!y||!!n.hcGetTimezoneOffset)&&(a-t>4*h.month||f(t)!==f(a)),w=w.getTime(),w=new n(w+f(w));y=w.getTime();for(t=1;y<a;)p.push(y),y=S===h.year?E(b+t*x,0):S===h.month?E(b,l+t*x):!T||S!==h.day&&S!==h.week?T&&S===h.hour?E(b,l,N,C+t*x):y+S*x:E(b,l,N+t*x*(S===h.day?1:7)),t++;p.push(y),S<=h.hour&&1e4>p.length&&o(p,function(e){0===e%18e5&&"000000000"===r("%H%M%S%L",e)&&(d[e]="day")})}return p.info=u(e,{higherRanks:d,totalRange:S*x}),p},t.prototype.normalizeTimeTickInterval=function(e,t){var n=t||[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1,2]],["week",[1,2]],["month",[1,2,3,4,6]],["year",null]];t=n[n.length-1];var r=h[t[0]],i=t[1],s;for(s=0;s<n.length&&!(t=n[s],r=h[t[0]],i=t[1],n[s+1]&&e<=(r*i[i.length-1]+h[n[s+1][0]])/2);s++);return r===h.year&&e<5*r&&(i=[1,2,5]),e=l(e/r,i,"year"===t[0]?Math.max(a(e/r),1):1),{unitRange:r,count:e,unitName:t[0]}}}(e),function(e){var t=e.Axis,n=e.getMagnitude,r=e.map,i=e.normalizeTickInterval,s=e.pick;t.prototype.getLogTickPositions=function(e,t,o,u){var a=this.options,f=this.len,l=this.lin2log,c=this.log2lin,h=[];u||(this._minorAutoInterval=null);if(.5<=e)e=Math.round(e),h=this.getLinearTickPositions(e,t,o);else if(.08<=e)for(var f=Math.floor(t),p,d,v,g,y,a=.3<e?[1,2,4]:.15<e?[1,2,4,6,8]:[1,2,3,4,5,6,7,8,9];f<o+1&&!y;f++)for(d=a.length,p=0;p<d&&!y;p++)v=c(l(f)*a[p]),v>t&&(!u||g<=o)&&void 0!==g&&h.push(g),g>o&&(y=!0),g=v;else t=l(t),o=l(o),e=a[u?"minorTickInterval":"tickInterval"],e=s("auto"===e?null:e,this._minorAutoInterval,a.tickPixelInterval/(u?5:1)*(o-t)/((u?f/this.tickPositions.length:f)||1)),e=i(e,null,n(e)),h=r(this.getLinearTickPositions(e,t,o),c),u||(this._minorAutoInterval=e/5);return u||(this.tickInterval=e),h},t.prototype.log2lin=function(e){return Math.log(e)/Math.LN10},t.prototype.lin2log=function(e){return Math.pow(10,e)}}(e),function(e,t){var n=e.arrayMax,r=e.arrayMin,i=e.defined,s=e.destroyObjectProperties,o=e.each,u=e.erase,a=e.merge,f=e.pick;e.PlotLineOrBand=function(e,t){this.axis=e,t&&(this.options=t,this.id=t.id)},e.PlotLineOrBand.prototype={render:function(){var t=this,n=t.axis,r=n.horiz,s=t.options,o=s.label,u=t.label,l=s.to,c=s.from,h=s.value,p=i(c)&&i(l),d=i(h),m=t.svgElem,g=!m,y=[],b=s.color,w=f(s.zIndex,0),E=s.events,y={"class":"highcharts-plot-"+(p?"band ":"line ")+(s.className||"")},S={},x=n.chart.renderer,T=p?"bands":"lines",N=n.log2lin;n.isLog&&(c=N(c),l=N(l),h=N(h)),d?(y={stroke:b,"stroke-width":s.width},s.dashStyle&&(y.dashstyle=s.dashStyle)):p&&(b&&(y.fill=b),s.borderWidth&&(y.stroke=s.borderColor,y["stroke-width"]=s.borderWidth)),S.zIndex=w,T+="-"+w,(b=n.plotLinesAndBandsGroups[T])||(n.plotLinesAndBandsGroups[T]=b=x.g("plot-"+T).attr(S).add()),g&&(t.svgElem=m=x.path().attr(y).add(b));if(d)y=n.getPlotLinePath(h,m.strokeWidth());else{if(!p)return;y=n.getPlotBandPath(c,l,s)}return g&&y&&y.length?(m.attr({d:y}),E&&e.objectEach(E,function(e,n){m.on(n,function(e){E[n].apply(t,[e])})})):m&&(y?(m.show(),m.animate({d:y})):(m.hide(),u&&(t.label=u=u.destroy()))),o&&i(o.text)&&y&&y.length&&0<n.width&&0<n.height&&!y.flat?(o=a({align:r&&p&&"center",x:r?!p&&4:10,verticalAlign:!r&&p&&"middle",y:r?p?16:10:p?6:-4,rotation:r&&!p&&90},o),this.renderLabel(o,y,p,w)):u&&u.hide(),t},renderLabel:function(e,t,i,s){var o=this.label,u=this.axis.chart.renderer;o||(o={align:e.textAlign||e.align,rotation:e.rotation,"class":"highcharts-plot-"+(i?"band":"line")+"-label "+(e.className||"")},o.zIndex=s,this.label=o=u.text(e.text,0,0,e.useHTML).attr(o).add(),o.css(e.style)),s=[t[1],t[4],i?t[6]:t[1]],t=[t[2],t[5],i?t[7]:t[2]],i=r(s),u=r(t),o.align(e,!1,{x:i,y:u,width:n(s)-i,height:n(t)-u}),o.show()},destroy:function(){u(this.axis.plotLinesAndBands,this),delete this.axis,s(this)}},e.extend(t.prototype,{getPlotBandPath:function(e,t){var n=this.getPlotLinePath(t,null,null,!0),r=this.getPlotLinePath(e,null,null,!0),i=this.horiz,s=1;return e=e<this.min&&t<this.min||e>this.max&&t>this.max,r&&n?(e&&(r.flat=r.toString()===n.toString(),s=0),r.push(i&&n[4]===r[4]?n[4]+s:n[4],i||n[5]!==r[5]?n[5]:n[5]+s,i&&n[1]===r[1]?n[1]+s:n[1],i||n[2]!==r[2]?n[2]:n[2]+s)):r=null,r},addPlotBand:function(e){return this.addPlotBandOrLine(e,"plotBands")},addPlotLine:function(e){return this.addPlotBandOrLine(e,"plotLines")},addPlotBandOrLine:function(t,n){var r=(new e.PlotLineOrBand(this,t)).render(),i=this.userOptions;return r&&(n&&(i[n]=i[n]||[],i[n].push(t)),this.plotLinesAndBands.push(r)),r},removePlotBandOrLine:function(e){for(var t=this.plotLinesAndBands,n=this.options,r=this.userOptions,i=t.length;i--;)t[i].id===e&&t[i].destroy();o([n.plotLines||[],r.plotLines||[],n.plotBands||[],r.plotBands||[]],function(t){for(i=t.length;i--;)t[i].id===e&&u(t,t[i])})},removePlotBand:function(e){this.removePlotBandOrLine(e)},removePlotLine:function(e){this.removePlotBandOrLine(e)}})}(e,t),function(e){var t=e.dateFormat,n=e.each,r=e.extend,i=e.format,s=e.isNumber,o=e.map,u=e.merge,a=e.pick,f=e.splat,l=e.syncTimeout,c=e.timeUnits;e.Tooltip=function(){this.init.apply(this,arguments)},e.Tooltip.prototype={init:function(e,t){this.chart=e,this.options=t,this.crosshairs=[],this.now={x:0,y:0},this.isHidden=!0,this.split=t.split&&!e.inverted,this.shared=t.shared||this.split},cleanSplit:function(e){n(this.chart.series,function(t){var n=t&&t.tt;n&&(!n.isActive||e?t.tt=n.destroy():n.isActive=!1)})},getLabel:function(){var e=this.chart.renderer,t=this.options;return this.label||(this.split?this.label=e.g("tooltip"):(this.label=e.label("",0,0,t.shape||"callout",null,null,t.useHTML,null,"tooltip").attr({padding:t.padding,r:t.borderRadius}),this.label.attr({fill:t.backgroundColor,"stroke-width":t.borderWidth}).css(t.style).shadow(t.shadow)),this.label.attr({zIndex:8}).add()),this.label},update:function(e){this.destroy(),u(!0,this.chart.options.tooltip.userOptions,e),this.init(this.chart,u(!0,this.options,e))},destroy:function(){this.label&&(this.label=this.label.destroy()),this.split&&this.tt&&(this.cleanSplit(this.chart,!0),this.tt=this.tt.destroy()),clearTimeout(this.hideTimer),clearTimeout(this.tooltipTimeout)},move:function(e,t,n,i){var s=this,o=s.now,u=!1!==s.options.animation&&!s.isHidden&&(1<Math.abs(e-o.x)||1<Math.abs(t-o.y)),a=s.followPointer||1<s.len;r(o,{x:u?(2*o.x+e)/3:e,y:u?(o.y+t)/2:t,anchorX:a?void 0:u?(2*o.anchorX+n)/3:n,anchorY:a?void 0:u?(o.anchorY+i)/2:i}),s.getLabel().attr(o),u&&(clearTimeout(this.tooltipTimeout),this.tooltipTimeout=setTimeout(function(){s&&s.move(e,t,n,i)},32))},hide:function(e){var t=this;clearTimeout(this.hideTimer),e=a(e,this.options.hideDelay,500),this.isHidden||(this.hideTimer=l(function(){t.getLabel()[e?"fadeOut":"hide"](),t.isHidden=!0},e))},getAnchor:function(e,t){var r,i=this.chart,s=i.inverted,u=i.plotTop,a=i.plotLeft,l=0,c=0,h,p;return e=f(e),r=e[0].tooltipPos,this.followPointer&&t&&(void 0===t.chartX&&(t=i.pointer.normalize(t)),r=[t.chartX-i.plotLeft,t.chartY-u]),r||(n(e,function(e){h=e.series.yAxis,p=e.series.xAxis,l+=e.plotX+(!s&&p?p.left-a:0),c+=(e.plotLow?(e.plotLow+e.plotHigh)/2:e.plotY)+(!s&&h?h.top-u:0)}),l/=e.length,c/=e.length,r=[s?i.plotWidth-c:l,this.shared&&!s&&1<e.length&&t?t.chartY-u:s?i.plotHeight-l:c]),o(r,Math.round)},getPosition:function(e,t,n){var r=this.chart,i=this.distance,s={},o=n.h||0,u,f=["y",r.chartHeight,t,n.plotY+r.plotTop,r.plotTop,r.plotTop+r.plotHeight],l=["x",r.chartWidth,e,n.plotX+r.plotLeft,r.plotLeft,r.plotLeft+r.plotWidth],c=!this.followPointer&&a(n.ttBelow,!r.inverted==!!n.negative),h=function(e,t,n,r,u,a){var f=n<r-i,l=r+i+n<t,h=r-i-n;r+=i;if(c&&l)s[e]=r;else if(!c&&f)s[e]=h;else if(f)s[e]=Math.min(a-n,0>h-o?h:h-o);else{if(!l)return!1;s[e]=Math.max(u,r+o+n>t?r:r+o)}},p=function(e,t,n,r){var o;return r<i||r>t-i?o=!1:s[e]=r<n/2?1:r>t-n/2?t-n-2:r-n/2,o},d=function(e){var t=f;f=l,l=t,u=e},v=function(){!1!==h.apply(0,f)?!1!==p.apply(0,l)||u||(d(!0),v()):u?s.x=s.y=0:(d(!0),v())};return(r.inverted||1<this.len)&&d(),v(),s},defaultFormatter:function(e){var t=this.points||f(this),n;return n=[e.tooltipFooterHeaderFormatter(t[0])],n=n.concat(e.bodyFormatter(t)),n.push(e.tooltipFooterHeaderFormatter(t[0],!0)),n},refresh:function(e,t){var r,i=this.options,s,o=e,u,l={},c=[];r=i.formatter||this.defaultFormatter;var l=this.shared,h;clearTimeout(this.hideTimer),this.followPointer=f(o)[0].series.tooltipOptions.followPointer,u=this.getAnchor(o,t),t=u[0],s=u[1],!l||o.series&&o.series.noSharedTooltip?l=o.getLabelConfig():(n(o,function(e){e.setState("hover"),c.push(e.getLabelConfig())}),l={x:o[0].category,y:o[0].y},l.points=c,o=o[0]),this.len=c.length,l=r.call(l,this),h=o.series,this.distance=a(h.tooltipOptions.distance,16),!1===l?this.hide():(r=this.getLabel(),this.isHidden&&r.attr({opacity:1}).show(),this.split?this.renderSplit(l,e):(i.style.width||r.css({width:this.chart.spacingBox.width}),r.attr({text:l&&l.join?l.join(""):l}),r.removeClass(/highcharts-color-[\d]+/g).addClass("highcharts-color-"+a(o.colorIndex,h.colorIndex)),r.attr({stroke:i.borderColor||o.color||h.color||"#666666"}),this.updatePosition({plotX:t,plotY:s,negative:o.negative,ttBelow:o.ttBelow,h:u[2]||0})),this.isHidden=!1)},renderSplit:function(t,r){var i=this,s=[],o=this.chart,u=o.renderer,f=!0,l=this.options,c,h=this.getLabel();n(t.slice(0,r.length+1),function(e,t){t=r[t-1]||{isHeader:!0,plotX:r[0].plotX};var n=t.series||i,p=n.tt,v=t.series||{},y="highcharts-color-"+a(t.colorIndex,v.colorIndex,"none");p||(n.tt=p=u.label(null,null,null,"callout").addClass("highcharts-tooltip-box "+y).attr({padding:l.padding,r:l.borderRadius,fill:l.backgroundColor,stroke:t.color||v.color||"#333333","stroke-width":l.borderWidth}).add(h)),p.isActive=!0,p.attr({text:e}),p.css(l.style),e=p.getBBox(),v=e.width+p.strokeWidth(),t.isHeader?(c=e.height,v=Math.max(0,Math.min(t.plotX+o.plotLeft-v/2,o.chartWidth-v))):v=t.plotX+o.plotLeft-a(l.distance,16)-v,0>v&&(f=!1),e=(t.series&&t.series.yAxis&&t.series.yAxis.pos)+(t.plotY||0),e-=o.plotTop,s.push({target:t.isHeader?o.plotHeight+c:e,rank:t.isHeader?1:0,size:n.tt.getBBox().height+1,point:t,x:v,tt:p})}),this.cleanSplit(),e.distribute(s,o.plotHeight+c),n(s,function(e){var t=e.point,n=t.series;e.tt.attr({visibility:void 0===e.pos?"hidden":"inherit",x:f||t.isHeader?e.x:t.plotX+o.plotLeft+a(l.distance,16),y:e.pos+o.plotTop,anchorX:t.isHeader?t.plotX+o.plotLeft:t.plotX+n.xAxis.pos,anchorY:t.isHeader?e.pos+o.plotTop-15:t.plotY+n.yAxis.pos})})},updatePosition:function(e){var t=this.chart,n=this.getLabel(),n=(this.options.positioner||this.getPosition).call(this,n.width,n.height,e);this.move(Math.round(n.x),Math.round(n.y||0),e.plotX+t.plotLeft,e.plotY+t.plotTop)},getDateFormat:function(e,n,r,i){var s=t("%m-%d %H:%M:%S.%L",n),o,u,a={millisecond:15,second:12,minute:9,hour:6,day:3},f="millisecond";for(u in c){if(e===c.week&&+t("%w",n)===r&&"00:00:00.000"===s.substr(6)){u="week";break}if(c[u]>e){u=f;break}if(a[u]&&s.substr(a[u])!=="01-01 00:00:00.000".substr(a[u]))break;"week"!==u&&(f=u)}return u&&(o=i[u]),o},getXDateFormat:function(e,t,n){t=t.dateTimeLabelFormats;var r=n&&n.closestPointRange;return(r?this.getDateFormat(r,e.x,n.options.startOfWeek,t):t.day)||t.year},tooltipFooterHeaderFormatter:function(e,t){var n=t?"footer":"header";t=e.series;var r=t.tooltipOptions,o=r.xDateFormat,u=t.xAxis,a=u&&"datetime"===u.options.type&&s(e.key),n=r[n+"Format"];return a&&!o&&(o=this.getXDateFormat(e,r,u)),a&&o&&(n=n.replace("{point.key}","{point.key:"+o+"}")),i(n,{point:e,series:t})},bodyFormatter:function(e){return o(e,function(e){var t=e.series.tooltipOptions;return(t.pointFormatter||e.point.tooltipFormatter).call(e.point,t.pointFormat)})}}}(e),function(e){var t=e.addEvent,n=e.attr,r=e.charts,i=e.color,s=e.css,o=e.defined,u=e.doc,a=e.each,f=e.extend,l=e.fireEvent,c=e.offset,h=e.pick,p=e.removeEvent,d=e.splat,v=e.Tooltip,m=e.win;e.Pointer=function(e,t){this.init(e,t)},e.Pointer.prototype={init:function(e,t){this.options=t,this.chart=e,this.runChartClick=t.chart.events&&!!t.chart.events.click,this.pinchDown=[],this.lastValidTouch={},v&&t.tooltip.enabled&&(e.tooltip=new v(e,t.tooltip),this.followTouchMove=h(t.tooltip.followTouchMove,!0)),this.setDOMEvents()},zoomOption:function(e){var t=this.chart,n=t.options.chart,r=n.zoomType||"",t=t.inverted;/touch/.test(e.type)&&(r=h(n.pinchType,r)),this.zoomX=e=/x/.test(r),this.zoomY=r=/y/.test(r),this.zoomHor=e&&!t||r&&t,this.zoomVert=r&&!t||e&&t,this.hasZoom=e||r},normalize:function(e,t){var n,r;return e=e||m.event,e.target||(e.target=e.srcElement),r=e.touches?e.touches.length?e.touches.item(0):e.changedTouches[0]:e,t||(this.chartPosition=t=c(this.chart.container)),void 0===r.pageX?(n=Math.max(e.x,e.clientX-t.left),t=e.y):(n=r.pageX-t.left,t=r.pageY-t.top),f(e,{chartX:Math.round(n),chartY:Math.round(t)})},getCoordinates:function(e){var t={xAxis:[],yAxis:[]};return a(this.chart.axes,function(n){t[n.isXAxis?"xAxis":"yAxis"].push({axis:n,value:n.toValue(e[n.horiz?"chartX":"chartY"])})}),t},getKDPoints:function(e,t,n){var r=[],i,s,o;a(e,function(e){i=e.noSharedTooltip&&t,s=!t&&e.directTouch,e.visible&&!s&&h(e.options.enableMouseTracking,!0)&&(o=e.searchPoint(n,!i&&0>e.options.findNearestPointBy.indexOf("y")))&&o.series&&r.push(o)}),r.sort(function(e,n){var r=e.distX-n.distX,i=e.dist-n.dist,s=(n.series.group&&n.series.group.zIndex)-(e.series.group&&e.series.group.zIndex);return 0!==r&&t?r:0!==i?i:0!==s?s:e.series.index>n.series.index?-1:1});if(t&&r[0]&&!r[0].series.noSharedTooltip)for(e=r.length;e--;)(r[e].x!==r[0].x||r[e].series.noSharedTooltip)&&r.splice(e,1);return r},getPointFromEvent:function(e){e=e.target;for(var t;e&&!t;)t=e.point,e=e.parentNode;return t},getChartCoordinatesFromPoint:function(e,t){var n=e.series,r=n.xAxis,n=n.yAxis;if(r&&n)return t?{chartX:r.len+r.pos-e.clientX,chartY:n.len+n.pos-e.plotY}:{chartX:e.clientX+r.pos,chartY:e.plotY+n.pos}},getHoverData:function(t,n,r,i,s,o){var u=t,a=n,u=s?r:[a];i=!!i&&!!t,n=a&&!a.stickyTracking;var f=function(e,t){return 0===t},l;return i?f=function(e){return e===t}:n?f=function(e){return e.series===a}:u=e.grep(r,function(e){return e.stickyTracking}),l=i&&!s?[t]:this.getKDPoints(u,s,o),a=(u=e.find(l,f))&&u.series,i||n||!s||(l=this.getKDPoints(r,s,o)),l.sort(function(e,t){return e.series.index-t.series.index}),{hoverPoint:u,hoverSeries:a,hoverPoints:l}},runPointActions:function(n,i){var s=this.chart,o=s.tooltip,f=o?o.shared:!1,l=i||s.hoverPoint,c=l&&l.series||s.hoverSeries;i=this.getHoverData(l,c,s.series,!!i||c&&c.directTouch&&this.isDirectTouch,f,n);var p,d,l=i.hoverPoint;p=(c=i.hoverSeries)&&c.tooltipOptions.followPointer,d=(f=f&&l&&!l.series.noSharedTooltip)?i.hoverPoints:l?[l]:[],l&&(l!==s.hoverPoint||o&&o.isHidden)?(a(s.hoverPoints||[],function(t){-1===e.inArray(t,d)&&t.setState()}),a(d||[],function(e){e.setState("hover")}),s.hoverSeries!==c&&c.onMouseOver(),s.hoverPoint&&s.hoverPoint.firePointEvent("mouseOut"),l.firePointEvent("mouseOver"),s.hoverPoints=d,s.hoverPoint=l,o&&o.refresh(f?d:l,n)):p&&o&&!o.isHidden&&(c=o.getAnchor([{}],n),o.updatePosition({plotX:c[0],plotY:c[1]})),this.unDocMouseMove||(this.unDocMouseMove=t(u,"mousemove",function(t){var n=r[e.hoverChartIndex];n&&n.pointer.onDocumentMouseMove(t)})),a(s.axes,function(t){h(t.crosshair.snap,!0)?e.find(d,function(e){return e.series[t.coll]===t})?t.drawCrosshair(n,l):t.hideCrosshair():t.drawCrosshair(n)})},reset:function(e,t){var n=this.chart,r=n.hoverSeries,i=n.hoverPoint,s=n.hoverPoints,o=n.tooltip,u=o&&o.shared?s:i;e&&u&&a(d(u),function(t){t.series.isCartesian&&void 0===t.plotX&&(e=!1)}),e?o&&u&&(o.refresh(u),i&&(i.setState(i.state,!0),a(n.axes,function(e){e.crosshair&&e.drawCrosshair(null,i)}))):(i&&i.onMouseOut(),s&&a(s,function(e){e.setState()}),r&&r.onMouseOut(),o&&o.hide(t),this.unDocMouseMove&&(this.unDocMouseMove=this.unDocMouseMove()),a(n.axes,function(e){e.hideCrosshair()}),this.hoverX=n.hoverPoints=n.hoverPoint=null)},scaleGroups:function(e,t){var n=this.chart,r;a(n.series,function(i){r=e||i.getPlotBox(),i.xAxis&&i.xAxis.zoomEnabled&&i.group&&(i.group.attr(r),i.markerGroup&&(i.markerGroup.attr(r),i.markerGroup.clip(t?n.clipRect:null)),i.dataLabelsGroup&&i.dataLabelsGroup.attr(r))}),n.clipRect.attr(t||n.clipBox)},dragStart:function(e){var t=this.chart;t.mouseIsDown=e.type,t.cancelClick=!1,t.mouseDownX=this.mouseDownX=e.chartX,t.mouseDownY=this.mouseDownY=e.chartY},drag:function(e){var t=this.chart,n=t.options.chart,r=e.chartX,s=e.chartY,o=this.zoomHor,u=this.zoomVert,a=t.plotLeft,f=t.plotTop,l=t.plotWidth,c=t.plotHeight,h,p=this.selectionMarker,d=this.mouseDownX,v=this.mouseDownY,m=n.panKey&&e[n.panKey+"Key"];p&&p.touch||(r<a?r=a:r>a+l&&(r=a+l),s<f?s=f:s>f+c&&(s=f+c),this.hasDragged=Math.sqrt(Math.pow(d-r,2)+Math.pow(v-s,2)),10<this.hasDragged&&(h=t.isInsidePlot(d-a,v-f),t.hasCartesianSeries&&(this.zoomX||this.zoomY)&&h&&!m&&!p&&(this.selectionMarker=p=t.renderer.rect(a,f,o?1:l,u?1:c,0).attr({fill:n.selectionMarkerFill||i("#335cad").setOpacity(.25).get(),"class":"highcharts-selection-marker",zIndex:7}).add()),p&&o&&(r-=d,p.attr({width:Math.abs(r),x:(0<r?0:r)+d})),p&&u&&(r=s-v
,p.attr({height:Math.abs(r),y:(0<r?0:r)+v})),h&&!p&&n.panning&&t.pan(e,n.panning)))},drop:function(e){var t=this,n=this.chart,r=this.hasPinched;if(this.selectionMarker){var i={originalEvent:e,xAxis:[],yAxis:[]},u=this.selectionMarker,c=u.attr?u.attr("x"):u.x,h=u.attr?u.attr("y"):u.y,p=u.attr?u.attr("width"):u.width,d=u.attr?u.attr("height"):u.height,v;if(this.hasDragged||r)a(n.axes,function(n){if(n.zoomEnabled&&o(n.min)&&(r||t[{xAxis:"zoomX",yAxis:"zoomY"}[n.coll]])){var s=n.horiz,u="touchend"===e.type?n.minPixelPadding:0,a=n.toValue((s?c:h)+u),s=n.toValue((s?c+p:h+d)-u);i[n.coll].push({axis:n,min:Math.min(a,s),max:Math.max(a,s)}),v=!0}}),v&&l(n,"selection",i,function(e){n.zoom(f(e,r?{animation:!1}:null))});this.selectionMarker=this.selectionMarker.destroy(),r&&this.scaleGroups()}n&&(s(n.container,{cursor:n._cursor}),n.cancelClick=10<this.hasDragged,n.mouseIsDown=this.hasDragged=this.hasPinched=!1,this.pinchDown=[])},onContainerMouseDown:function(e){e=this.normalize(e),this.zoomOption(e),e.preventDefault&&e.preventDefault(),this.dragStart(e)},onDocumentMouseUp:function(t){r[e.hoverChartIndex]&&r[e.hoverChartIndex].pointer.drop(t)},onDocumentMouseMove:function(e){var t=this.chart,n=this.chartPosition;e=this.normalize(e,n),!n||this.inClass(e.target,"highcharts-tracker")||t.isInsidePlot(e.chartX-t.plotLeft,e.chartY-t.plotTop)||this.reset()},onContainerMouseLeave:function(t){var n=r[e.hoverChartIndex];n&&(t.relatedTarget||t.toElement)&&(n.pointer.reset(),n.pointer.chartPosition=null)},onContainerMouseMove:function(t){var n=this.chart;o(e.hoverChartIndex)&&r[e.hoverChartIndex]&&r[e.hoverChartIndex].mouseIsDown||(e.hoverChartIndex=n.index),t=this.normalize(t),t.returnValue=!1,"mousedown"===n.mouseIsDown&&this.drag(t),!this.inClass(t.target,"highcharts-tracker")&&!n.isInsidePlot(t.chartX-n.plotLeft,t.chartY-n.plotTop)||n.openMenu||this.runPointActions(t)},inClass:function(e,t){for(var r;e;){if(r=n(e,"class")){if(-1!==r.indexOf(t))return!0;if(-1!==r.indexOf("highcharts-container"))return!1}e=e.parentNode}},onTrackerMouseOut:function(e){var t=this.chart.hoverSeries;e=e.relatedTarget||e.toElement,this.isDirectTouch=!1,!t||!e||t.stickyTracking||this.inClass(e,"highcharts-tooltip")||this.inClass(e,"highcharts-series-"+t.index)&&this.inClass(e,"highcharts-tracker")||t.onMouseOut()},onContainerClick:function(e){var t=this.chart,n=t.hoverPoint,r=t.plotLeft,i=t.plotTop;e=this.normalize(e),t.cancelClick||(n&&this.inClass(e.target,"highcharts-tracker")?(l(n.series,"click",f(e,{point:n})),t.hoverPoint&&n.firePointEvent("click",e)):(f(e,this.getCoordinates(e)),t.isInsidePlot(e.chartX-r,e.chartY-i)&&l(t,"click",e)))},setDOMEvents:function(){var n=this,r=n.chart.container;r.onmousedown=function(e){n.onContainerMouseDown(e)},r.onmousemove=function(e){n.onContainerMouseMove(e)},r.onclick=function(e){n.onContainerClick(e)},t(r,"mouseleave",n.onContainerMouseLeave),1===e.chartCount&&t(u,"mouseup",n.onDocumentMouseUp),e.hasTouch&&(r.ontouchstart=function(e){n.onContainerTouchStart(e)},r.ontouchmove=function(e){n.onContainerTouchMove(e)},1===e.chartCount&&t(u,"touchend",n.onDocumentTouchEnd))},destroy:function(){var t=this;t.unDocMouseMove&&t.unDocMouseMove(),p(t.chart.container,"mouseleave",t.onContainerMouseLeave),e.chartCount||(p(u,"mouseup",t.onDocumentMouseUp),p(u,"touchend",t.onDocumentTouchEnd)),clearInterval(t.tooltipTimeout),e.objectEach(t,function(e,n){t[n]=null})}}}(e),function(e){var t=e.charts,n=e.each,r=e.extend,i=e.map,s=e.noop,o=e.pick;r(e.Pointer.prototype,{pinchTranslate:function(e,t,n,r,i,s){this.zoomHor&&this.pinchTranslateDirection(!0,e,t,n,r,i,s),this.zoomVert&&this.pinchTranslateDirection(!1,e,t,n,r,i,s)},pinchTranslateDirection:function(e,t,n,r,i,s,o,u){var a=this.chart,f=e?"x":"y",l=e?"X":"Y",c="chart"+l,h=e?"width":"height",p=a["plot"+(e?"Left":"Top")],d,v,m=u||1,g=a.inverted,y=a.bounds[e?"h":"v"],b=1===t.length,w=t[0][c],E=n[0][c],S=!b&&t[1][c],x=!b&&n[1][c],T;n=function(){!b&&20<Math.abs(w-S)&&(m=u||Math.abs(E-x)/Math.abs(w-S)),v=(p-E)/m+w,d=a["plot"+(e?"Width":"Height")]/m},n(),t=v,t<y.min?(t=y.min,T=!0):t+d>y.max&&(t=y.max-d,T=!0),T?(E-=.8*(E-o[f][0]),b||(x-=.8*(x-o[f][1])),n()):o[f]=[E,x],g||(s[f]=v-p,s[h]=d),s=g?1/m:m,i[h]=d,i[f]=t,r[g?e?"scaleY":"scaleX":"scale"+l]=m,r["translate"+l]=s*p+(E-s*w)},pinch:function(e){var t=this,u=t.chart,a=t.pinchDown,f=e.touches,l=f.length,c=t.lastValidTouch,h=t.hasZoom,p=t.selectionMarker,d={},v=1===l&&(t.inClass(e.target,"highcharts-tracker")&&u.runTrackerClick||t.runChartClick),y={};1<l&&(t.initiated=!0),h&&t.initiated&&!v&&e.preventDefault(),i(f,function(e){return t.normalize(e)}),"touchstart"===e.type?(n(f,function(e,t){a[t]={chartX:e.chartX,chartY:e.chartY}}),c.x=[a[0].chartX,a[1]&&a[1].chartX],c.y=[a[0].chartY,a[1]&&a[1].chartY],n(u.axes,function(e){if(e.zoomEnabled){var t=u.bounds[e.horiz?"h":"v"],n=e.minPixelPadding,r=e.toPixels(o(e.options.min,e.dataMin)),i=e.toPixels(o(e.options.max,e.dataMax)),s=Math.max(r,i);t.min=Math.min(e.pos,Math.min(r,i)-n),t.max=Math.max(e.pos+e.len,s+n)}}),t.res=!0):t.followTouchMove&&1===l?this.runPointActions(t.normalize(e)):a.length&&(p||(t.selectionMarker=p=r({destroy:s,touch:!0},u.plotBox)),t.pinchTranslate(a,f,d,p,y,c),t.hasPinched=h,t.scaleGroups(d,y),t.res&&(t.res=!1,this.reset(!1,0)))},touch:function(t,n){var r=this.chart,i,s;r.index!==e.hoverChartIndex&&this.onContainerMouseLeave({relatedTarget:!0}),e.hoverChartIndex=r.index,1===t.touches.length?(t=this.normalize(t),(s=r.isInsidePlot(t.chartX-r.plotLeft,t.chartY-r.plotTop))&&!r.openMenu?(n&&this.runPointActions(t),"touchmove"===t.type&&(n=this.pinchDown,i=n[0]?4<=Math.sqrt(Math.pow(n[0].chartX-t.chartX,2)+Math.pow(n[0].chartY-t.chartY,2)):!1),o(i,!0)&&this.pinch(t)):n&&this.reset()):2===t.touches.length&&this.pinch(t)},onContainerTouchStart:function(e){this.zoomOption(e),this.touch(e,!0)},onContainerTouchMove:function(e){this.touch(e)},onDocumentTouchEnd:function(n){t[e.hoverChartIndex]&&t[e.hoverChartIndex].pointer.drop(n)}})}(e),function(e){var t=e.addEvent,n=e.charts,r=e.css,i=e.doc,s=e.extend,o=e.noop,u=e.Pointer,a=e.removeEvent,f=e.win,l=e.wrap;if(!e.hasTouch&&(f.PointerEvent||f.MSPointerEvent)){var c={},h=!!f.PointerEvent,p=function(){var t=[];return t.item=function(e){return this[e]},e.objectEach(c,function(e){t.push({pageX:e.pageX,pageY:e.pageY,target:e.target})}),t},d=function(t,r,i,s){"touch"!==t.pointerType&&t.pointerType!==t.MSPOINTER_TYPE_TOUCH||!n[e.hoverChartIndex]||(s(t),s=n[e.hoverChartIndex].pointer,s[r]({type:i,target:t.currentTarget,preventDefault:o,touches:p()}))};s(u.prototype,{onContainerPointerDown:function(e){d(e,"onContainerTouchStart","touchstart",function(e){c[e.pointerId]={pageX:e.pageX,pageY:e.pageY,target:e.currentTarget}})},onContainerPointerMove:function(e){d(e,"onContainerTouchMove","touchmove",function(e){c[e.pointerId]={pageX:e.pageX,pageY:e.pageY},c[e.pointerId].target||(c[e.pointerId].target=e.currentTarget)})},onDocumentPointerUp:function(e){d(e,"onDocumentTouchEnd","touchend",function(e){delete c[e.pointerId]})},batchMSEvents:function(e){e(this.chart.container,h?"pointerdown":"MSPointerDown",this.onContainerPointerDown),e(this.chart.container,h?"pointermove":"MSPointerMove",this.onContainerPointerMove),e(i,h?"pointerup":"MSPointerUp",this.onDocumentPointerUp)}}),l(u.prototype,"init",function(e,t,n){e.call(this,t,n),this.hasZoom&&r(t.container,{"-ms-touch-action":"none","touch-action":"none"})}),l(u.prototype,"setDOMEvents",function(e){e.apply(this),(this.hasZoom||this.followTouchMove)&&this.batchMSEvents(t)}),l(u.prototype,"destroy",function(e){this.batchMSEvents(a),e.call(this)})}}(e),function(e){var t=e.addEvent,n=e.css,r=e.discardElement,i=e.defined,s=e.each,o=e.isFirefox,u=e.marginNames,a=e.merge,f=e.pick,l=e.setAnimation,c=e.stableSort,h=e.win,p=e.wrap;e.Legend=function(e,t){this.init(e,t)},e.Legend.prototype={init:function(e,n){this.chart=e,this.setOptions(n),n.enabled&&(this.render(),t(this.chart,"endResize",function(){this.legend.positionCheckboxes()}))},setOptions:function(e){var t=f(e.padding,8);this.options=e,this.itemStyle=e.itemStyle,this.itemHiddenStyle=a(this.itemStyle,e.itemHiddenStyle),this.itemMarginTop=e.itemMarginTop||0,this.padding=t,this.initialItemY=t-5,this.itemHeight=this.maxItemWidth=0,this.symbolWidth=f(e.symbolWidth,16),this.pages=[]},update:function(e,t){var n=this.chart;this.setOptions(a(!0,this.options,e)),this.destroy(),n.isDirtyLegend=n.isDirtyBox=!0,f(t,!0)&&n.redraw()},colorizeItem:function(t,n){t.legendGroup[n?"removeClass":"addClass"]("highcharts-legend-item-hidden");var r=this.options,i=t.legendItem,s=t.legendLine,o=t.legendSymbol,u=this.itemHiddenStyle.color,r=n?r.itemStyle.color:u,a=n?t.color||u:u,f=t.options&&t.options.marker,l={fill:a};i&&i.css({fill:r,color:r}),s&&s.attr({stroke:a}),o&&(f&&o.isMarker&&(l=t.pointAttribs(),n||e.objectEach(l,function(e,t){l[t]=u})),o.attr(l))},positionItem:function(e){var t=this.options,n=t.symbolPadding,t=!t.rtl,r=e._legendItemPos,i=r[0],r=r[1],s=e.checkbox;(e=e.legendGroup)&&e.element&&e.translate(t?i:this.legendWidth-i-2*n-4,r),s&&(s.x=i,s.y=r)},destroyItem:function(e){var t=e.checkbox;s(["legendItem","legendLine","legendSymbol","legendGroup"],function(t){e[t]&&(e[t]=e[t].destroy())}),t&&r(e.checkbox)},destroy:function(){function e(e){this[e]&&(this[e]=this[e].destroy())}s(this.getAllItems(),function(t){s(["legendItem","legendGroup"],e,t)}),s("clipRect up down pager nav box title group".split(" "),e,this),this.display=null},positionCheckboxes:function(e){var t=this.group&&this.group.alignAttr,r,i=this.clipHeight||this.legendHeight,o=this.titleHeight;t&&(r=t.translateY,s(this.allItems,function(s){var u=s.checkbox,a;u&&(a=r+o+u.y+(e||0)+3,n(u,{left:t.translateX+s.checkboxOffset+u.x-20+"px",top:a+"px",display:a>r-6&&a<r+i-6?"":"none"}))}))},renderTitle:function(){var e=this.options,t=this.padding,n=e.title,r=0;n.text&&(this.title||(this.title=this.chart.renderer.label(n.text,t-3,t-4,null,null,null,e.useHTML,null,"legend-title").attr({zIndex:1}).css(n.style).add(this.group)),e=this.title.getBBox(),r=e.height,this.offsetWidth=e.width,this.contentGroup.attr({translateY:r})),this.titleHeight=r},setText:function(t){var n=this.options;t.legendItem.attr({text:n.labelFormat?e.format(n.labelFormat,t):n.labelFormatter.call(t)})},renderItem:function(e){var t=this.chart,n=t.renderer,r=this.options,i="horizontal"===r.layout,s=this.symbolWidth,o=r.symbolPadding,u=this.itemStyle,l=this.itemHiddenStyle,c=this.padding,h=i?f(r.itemDistance,20):0,p=!r.rtl,d=r.width,m=r.itemMarginBottom||0,g=this.itemMarginTop,y=e.legendItem,b=!e.series,w=!b&&e.series.drawLegendSymbol?e.series:e,E=w.options,S=this.createCheckboxForItem&&E&&E.showCheckbox,E=s+o+h+(S?20:0),x=r.useHTML,T=e.options.className;y||(e.legendGroup=n.g("legend-item").addClass("highcharts-"+w.type+"-series highcharts-color-"+e.colorIndex+(T?" "+T:"")+(b?" highcharts-series-"+e.index:"")).attr({zIndex:1}).add(this.scrollGroup),e.legendItem=y=n.text("",p?s+o:-o,this.baseline||0,x).css(a(e.visible?u:l)).attr({align:p?"left":"right",zIndex:2}).add(e.legendGroup),this.baseline||(s=u.fontSize,this.fontMetrics=n.fontMetrics(s,y),this.baseline=this.fontMetrics.f+3+g,y.attr("y",this.baseline)),this.symbolHeight=r.symbolHeight||this.fontMetrics.f,w.drawLegendSymbol(this,e),this.setItemEvents&&this.setItemEvents(e,y,x),S&&this.createCheckboxForItem(e)),this.colorizeItem(e,e.visible),u.width||y.css({width:(r.itemWidth||t.spacingBox.width)-E}),this.setText(e),n=y.getBBox(),u=e.checkboxOffset=r.itemWidth||e.legendItemWidth||n.width+E,this.itemHeight=n=Math.round(e.legendItemHeight||n.height||this.symbolHeight),i&&this.itemX-c+u>(d||t.spacingBox.width-2*c-r.x)&&(this.itemX=c,this.itemY+=g+this.lastLineHeight+m,this.lastLineHeight=0),this.maxItemWidth=Math.max(this.maxItemWidth,u),this.lastItemY=g+this.itemY+m,this.lastLineHeight=Math.max(n,this.lastLineHeight),e._legendItemPos=[this.itemX,this.itemY],i?this.itemX+=u:(this.itemY+=g+n+m,this.lastLineHeight=n),this.offsetWidth=d||Math.max((i?this.itemX-c-h:u)+c,this.offsetWidth)},getAllItems:function(){var e=[];return s(this.chart.series,function(t){var n=t&&t.options;t&&f(n.showInLegend,i(n.linkedTo)?!1:void 0,!0)&&(e=e.concat(t.legendItems||("point"===n.legendType?t.data:t)))}),e},adjustMargins:function(e,t){var n=this.chart,r=this.options,o=r.align.charAt(0)+r.verticalAlign.charAt(0)+r.layout.charAt(0);r.floating||s([/(lth|ct|rth)/,/(rtv|rm|rbv)/,/(rbh|cb|lbh)/,/(lbv|lm|ltv)/],function(s,a){s.test(o)&&!i(e[a])&&(n[u[a]]=Math.max(n[u[a]],n.legend[(a+1)%2?"legendHeight":"legendWidth"]+[1,-1,-1,1][a]*r[a%2?"x":"y"]+f(r.margin,12)+t[a]))})},render:function(){var e=this,t=e.chart,n=t.renderer,r=e.group,i,o,u,f,l=e.box,h=e.options,p=e.padding;e.itemX=p,e.itemY=e.initialItemY,e.offsetWidth=0,e.lastItemY=0,r||(e.group=r=n.g("legend").attr({zIndex:7}).add(),e.contentGroup=n.g().attr({zIndex:1}).add(r),e.scrollGroup=n.g().add(e.contentGroup)),e.renderTitle(),i=e.getAllItems(),c(i,function(e,t){return(e.options&&e.options.legendIndex||0)-(t.options&&t.options.legendIndex||0)}),h.reversed&&i.reverse(),e.allItems=i,e.display=o=!!i.length,e.lastLineHeight=0,s(i,function(t){e.renderItem(t)}),u=(h.width||e.offsetWidth)+p,f=e.lastItemY+e.lastLineHeight+e.titleHeight,f=e.handleOverflow(f),f+=p,l||(e.box=l=n.rect().addClass("highcharts-legend-box").attr({r:h.borderRadius}).add(r),l.isNew=!0),l.attr({stroke:h.borderColor,"stroke-width":h.borderWidth||0,fill:h.backgroundColor||"none"}).shadow(h.shadow),0<u&&0<f&&(l[l.isNew?"attr":"animate"](l.crisp({x:0,y:0,width:u,height:f},l.strokeWidth())),l.isNew=!1),l[o?"show":"hide"](),e.legendWidth=u,e.legendHeight=f,s(i,function(t){e.positionItem(t)}),o&&r.align(a(h,{width:u,height:f}),!0,"spacingBox"),t.isResizing||this.positionCheckboxes()},handleOverflow:function(e){var t=this,n=this.chart,r=n.renderer,i=this.options,o=i.y,u=this.padding,n=n.spacingBox.height+("top"===i.verticalAlign?-o:o)-u,o=i.maxHeight,a,l=this.clipRect,c=i.navigation,h=f(c.animation,!0),p=c.arrowSize||12,d=this.nav,g=this.pages,y,b=this.allItems,w=function(e){"number"==typeof e?l.attr({height:e}):l&&(t.clipRect=l.destroy(),t.contentGroup.clip()),t.contentGroup.div&&(t.contentGroup.div.style.clip=e?"rect("+u+"px,9999px,"+(u+e)+"px,0)":"auto")};return"horizontal"!==i.layout||"middle"===i.verticalAlign||i.floating||(n/=2),o&&(n=Math.min(n,o)),g.length=0,e>n&&!1!==c.enabled?(this.clipHeight=a=Math.max(n-20-this.titleHeight-u,0),this.currentPage=f(this.currentPage,1),this.fullHeight=e,s(b,function(e,t){var n=e._legendItemPos[1];e=Math.round(e.legendItem.getBBox().height);var r=g.length;if(!r||n-g[r-1]>a&&(y||n)!==g[r-1])g.push(y||n),r++;t===b.length-1&&n+e-g[r-1]>a&&g.push(n),n!==y&&(y=n)}),l||(l=t.clipRect=r.clipRect(0,u,9999,0),t.contentGroup.clip(l)),w(a),d||(this.nav=d=r.g().attr({zIndex:1}).add(this.group),this.up=r.symbol("triangle",0,0,p,p).on("click",function(){t.scroll(-1,h)}).add(d),this.pager=r.text("",15,10).addClass("highcharts-legend-navigation").css(c.style).add(d),this.down=r.symbol("triangle-down",0,0,p,p).on("click",function(){t.scroll(1,h)}).add(d)),t.scroll(0),e=n):d&&(w(),this.nav=d.destroy(),this.scrollGroup.attr({translateY:1}),this.clipHeight=0),e},scroll:function(e,t){var n=this.pages,r=n.length;e=this.currentPage+e;var i=this.clipHeight,s=this.options.navigation,o=this.pager,u=this.padding;e>r&&(e=r),0<e&&(void 0!==t&&l(t,this.chart),this.nav.attr({translateX:u,translateY:i+this.padding+7+this.titleHeight,visibility:"visible"}),this.up.attr({"class":1===e?"highcharts-legend-nav-inactive":"highcharts-legend-nav-active"}),o.attr({text:e+"/"+r}),this.down.attr({x:18+this.pager.getBBox().width,"class":e===r?"highcharts-legend-nav-inactive":"highcharts-legend-nav-active"}),this.up.attr({fill:1===e?s.inactiveColor:s.activeColor}).css({cursor:1===e?"default":"pointer"}),this.down.attr({fill:e===r?s.inactiveColor:s.activeColor}).css({cursor:e===r?"default":"pointer"}),t=-n[e-1]+this.initialItemY,this.scrollGroup.animate({translateY:t}),this.currentPage=e,this.positionCheckboxes(t))}},e.LegendSymbolMixin={drawRectangle:function(e,t){var n=e.symbolHeight,r=e.options.squareSymbol;t.legendSymbol=this.chart.renderer.rect(r?(e.symbolWidth-n)/2:0,e.baseline-n+1,r?n:e.symbolWidth,n,f(e.options.symbolRadius,n/2)).addClass("highcharts-point").attr({zIndex:3}).add(t.legendGroup)},drawLineMarker:function(e){var t=this.options,n=t.marker,r=e.symbolWidth,i=e.symbolHeight,s=i/2,o=this.chart.renderer,u=this.legendGroup;e=e.baseline-Math.round(.3*e.fontMetrics.b);var l;l={"stroke-width":t.lineWidth||0},t.dashStyle&&(l.dashstyle=t.dashStyle),this.legendLine=o.path(["M",0,e,"L",r,e]).addClass("highcharts-graph").attr(l).add(u),n&&!1!==n.enabled&&(t=Math.min(f(n.radius,s),s),0===this.symbol.indexOf("url")&&(n=a(n,{width:i,height:i}),t=0),this.legendSymbol=n=o.symbol(this.symbol,r/2-t,e-t,2*t,2*t,n).addClass("highcharts-point").add(u),n.isMarker=!0)}},(/Trident\/7\.0/.test(h.navigator.userAgent)||o)&&p(e.Legend.prototype,"positionItem",function(e,t){var n=this,r=function(){t._legendItemPos&&e.call(n,t)};r(),setTimeout(r)})}(e),function(e){var t=e.addEvent,n=e.animate,r=e.animObject,i=e.attr,s=e.doc,o=e.Axis,u=e.createElement,a=e.defaultOptions,f=e.discardElement,l=e.charts,c=e.css,h=e.defined,p=e.each,d=e.extend,v=e.find,m=e.fireEvent,g=e.getStyle,y=e.grep,b=e.isNumber,w=e.isObject,E=e.isString,S=e.Legend,x=e.marginNames,T=e.merge,N=e.objectEach,C=e.Pointer,k=e.pick,L=e.pInt,A=e.removeEvent,O=e.seriesTypes,M=e.splat,_=e.svg,D=e.syncTimeout,P=e.win,H=e.Renderer,B=e.Chart=function(){this.getArgs.apply(this,arguments)};e.chart=function(e,t,n){return new B(e,t,n)},d(B.prototype,{callbacks:[],getArgs:function(){var e=[].slice.call(arguments);if(E(e[0])||e[0].nodeName)this.renderTo=e.shift();this.init(e[0],e[1])},init:function(n,r){var i,s,o=n.series,u=n.plotOptions||{};n.series=null,i=T(a,n);for(s in i.plotOptions)i.plotOptions[s].tooltip=u[s]&&T(u[s].tooltip)||void 0;i.tooltip.userOptions=n.chart&&n.chart.forExport&&n.tooltip.userOptions||n.tooltip,i.series=n.series=o,this.userOptions=n,n=i.chart,s=n.events,this.margin=[],this.spacing=[],this.bounds={h:{},v:{}},this.callback=r,this.isResizing=0,this.options=i,this.axes=[],this.series=[],this.hasCartesianSeries=n.showAxes;var f=this;f.index=l.length,l.push(f),e.chartCount++,s&&N(s,function(e,n){t(f,n,e)}),f.xAxis=[],f.yAxis=[],f.pointCount=f.colorCounter=f.symbolCounter=0,f.firstRender()},initSeries:function(t){var n=this.options.chart;return(n=O[t.type||n.type||n.defaultSeriesType])||e.error(17,!0),n=new n,n.init(this,t),n},orderSeries:function(e){var t=this.series;for(e=e||0;e<t.length;e++)t[e]&&(t[e].index=e,t[e].name=t[e].name||"Series "+(t[e].index+1))},isInsidePlot:function(e,t,n){var r=n?t:e;return e=n?e:t,0<=r&&r<=this.plotWidth&&0<=e&&e<=this.plotHeight},redraw:function(t){var n=this.axes,r=this.series,i=this.pointer,s=this.legend,o=this.isDirtyLegend,u,a,f=this.hasCartesianSeries,l=this.isDirtyBox,c,h=this.renderer,v=h.isHidden(),g=[];this.setResponsive&&this.setResponsive(!1),e.setAnimation(t,this),v&&this.temporaryDisplay(),this.layOutTitles();for(t=r.length;t--;)if(c=r[t],c.options.stacking&&(u=!0,c.isDirty)){a=!0;break}if(a)for(t=r.length;t--;)c=r[t],c.options.stacking&&(c.isDirty=!0);p(r,function(e){e.isDirty&&"point"===e.options.legendType&&(e.updateTotals&&e.updateTotals(),o=!0),e.isDirtyData&&m(e,"updatedData")}),o&&s.options.enabled&&(s.render(),this.isDirtyLegend=!1),u&&this.getStacks(),f&&p(n,function(e){e.updateNames(),e.setScale()}),this.getMargins(),f&&(p(n,function(e){e.isDirty&&(l=!0)}),p(n,function(e){var t=e.min+","+e.max;e.extKey!==t&&(e.extKey=t,g.push(function(){m(e,"afterSetExtremes",d(e.eventArgs,e.getExtremes())),delete e.eventArgs})),(l||u)&&e.redraw()})),l&&this.drawChartBox(),m(this,"predraw"),p(r,function(e){(l||e.isDirty)&&e.visible&&e.redraw(),e.isDirtyData=!1}),i&&i.reset(!0),h.draw(),m(this,"redraw"),m(this,"render"),v&&this.temporaryDisplay(!0),p(g,function(e){e.call()})},get:function(e){function t(t){return t.id===e||t.options&&t.options.id===e}var n,r=this.series,i;n=v(this.axes,t)||v(this.series,t);for(i=0;!n&&i<r.length;i++)n=v(r[i].points||[],t);return n},getAxes:function(){var e=this,t=this.options,n=t.xAxis=M(t.xAxis||{}),t=t.yAxis=M(t.yAxis||{});p(n,function(e,t){e.index=t,e.isX=!0}),p(t,function(e,t){e.index=t}),n=n.concat(t),p(n,function(t){new o(e,t)})},getSelectedPoints:function(){var e=[];return p(this.series,function(t){e=e.concat(y(t.data||[],function(e){return e.selected}))}),e},getSelectedSeries:function(){return y(this.series,function(e){return e.selected})},setTitle:function(e,t,n){var r=this,i=r.options,s;s=i.title=T({style:{color:"#333333",fontSize:i.isStock?"16px":"18px"}},i.title,e),i=i.subtitle=T({style:{color:"#666666"}},i.subtitle,t),p([["title",e,s],["subtitle",t,i]],function(e,t){var n=e[0],i=r[n],s=e[1];e=e[2],i&&s&&(r[n]=i=i.destroy()),e&&e.text&&!i&&(r[n]=r.renderer.text(e.text,0,0,e.useHTML).attr({align:e.align,"class":"highcharts-"+n,zIndex:e.zIndex||4}).add(),r[n].update=function(e){r.setTitle(!t&&e,t&&e)},r[n].css(e.style))}),r.layOutTitles(n)},layOutTitles:function(e){var t=0,n,r=this.renderer,i=this.spacingBox;p(["title","subtitle"],function(e){var n=this[e],s=this.options[e];e="title"===e?-3:s.verticalAlign?0:t+2;var o;n&&(o=s.style.fontSize,o=r.fontMetrics(o,n).b,n.css({width:(s.width||i.width+s.widthAdjust)+"px"}).align(d({y:e+o},s),!1,"spacingBox"),s.floating||s.verticalAlign||(t=Math.ceil(t+n.getBBox(s.useHTML).height)))},this),n=this.titleOffset!==t,this.titleOffset=t,!this.isDirtyBox&&n&&(this.isDirtyBox=n,this.hasRendered&&k(e,!0)&&this.isDirtyBox&&this.redraw())},getChartSize:function(){var t=this.options.chart,n=t.width,t=t.height,r=this.renderTo;h(n)||(this.containerWidth=g(r,"width")),h(t)||(this.containerHeight=g(r,"height")),this.chartWidth=Math.max(0,n||this.containerWidth||600),this.chartHeight=Math.max(0,e.relativeLength(t,this.chartWidth)||this.containerHeight||400)},temporaryDisplay:function(t){var n=this.renderTo;if(t)for(;n&&n.style;)n.hcOrigStyle&&(e.css(n,n.hcOrigStyle),delete n.hcOrigStyle),n=n.parentNode;else for(;n&&n.style;)"none"===g(n,"display",!1)&&(n.hcOrigStyle={display:n.style.display,height:n.style.height,overflow:n.style.overflow},t={display:"block",overflow:"hidden"},n!==this.renderTo&&(t.height=0),e.css(n,t),n.style.setProperty&&n.style.setProperty("display","block","important")),n=n.parentNode},setClassName:function(e){this.container.className="highcharts-container "+(e||"")},getContainer:function(){var t,n=this.options,r=n.chart,o,a;t=this.renderTo;var f=e.uniqueKey(),c;t||(this.renderTo=t=r.renderTo),E(t)&&(this.renderTo=t=s.getElementById(t)),t||e.error(13,!0),o=L(i(t,"data-highcharts-chart")),b(o)&&l[o]&&l[o].hasRendered&&l[o].destroy(),i(t,"data-highcharts-chart",this.index),t.innerHTML="",r.skipClone||t.offsetWidth||this.temporaryDisplay(),this.getChartSize(),o=this.chartWidth,a=this.chartHeight,c=d({position:"relative",overflow:"hidden",width:o+"px",height:a+"px",textAlign:"left",lineHeight:"normal",zIndex:0,"-webkit-tap-highlight-color":"rgba(0,0,0,0)"},r.style),this.container=t=u("div",{id:f},c,t),this._cursor=t.style.cursor,this.renderer=new(e[r.renderer]||H)(t,o,a,null,r.forExport,n.exporting&&n.exporting.allowHTML),this.setClassName(r.className),this.renderer.setStyle(r.style),this.renderer.chartIndex=this.index},getMargins:function(e){var t=this.spacing,n=this.margin,r=this.titleOffset;this.resetMargins(),r&&!h(n[0])&&(this.plotTop=Math.max(this.plotTop,r+this.options.title.margin+t[0])),this.legend.display&&this.legend.adjustMargins(n,t),this.extraMargin&&(this[this.extraMargin.type]=(this[this.extraMargin.type]||0)+this.extraMargin.value),this.extraTopMargin&&(this.plotTop+=this.extraTopMargin),e||this.getAxisMargins()},getAxisMargins:function(){var e=this,t=e.axisOffset=[0,0,0,0],n=e.margin;e.hasCartesianSeries&&p(e.axes,function(e){e.visible&&e.getOffset()}),p(x,function(r,i){h(n[i])||(e[r]+=t[i])}),e.setChartSize()},reflow:function(e){var t=this,n=t.options.chart,r=t.renderTo,i=h(n.width),o=n.width||g(r,"width"),n=n.height||g(r,"height"),r=e?e.target:P;if(!i&&!t.isPrinting&&o&&n&&(r===P||r===s)){if(o!==t.containerWidth||n!==t.containerHeight)clearTimeout(t.reflowTimeout),t.reflowTimeout=D(function(){t.container&&t.setSize(void 0,void 0,!1)},e?100:0);t.containerWidth=o,t.containerHeight=n}},initReflow:function(){var e=this,n;n=t(P,"resize",function(t){e.reflow(t)}),t(e,"destroy",n)},setSize:function(t,i,s){var o=this,u=o.renderer;o.isResizing+=1,e.setAnimation(s,o),o.oldChartHeight=o.chartHeight,o.oldChartWidth=o.chartWidth,void 0!==t&&(o.options.chart.width=t),void 0!==i&&(o.options.chart.height=i),o.getChartSize(),t=u.globalAnimation,(t?n:c)(o.container,{width:o.chartWidth+"px",height:o.chartHeight+"px"},t),o.setChartSize(!0),u.setSize(o.chartWidth,o.chartHeight,s),p(o.axes,function(e){e.isDirty=!0,e.setScale()}),o.isDirtyLegend=!0,o.isDirtyBox=!0,o.layOutTitles(),o.getMargins(),o.redraw(s),o.oldChartHeight=null,m(o,"resize"),D(function(){o&&m(o,"endResize",null,function(){--o.isResizing})},r(t).duration)},setChartSize:function(e){function t(e){return e=a[e]||0,Math.max(d||e,e)/2}var n=this.inverted,r=this.renderer,i=this.chartWidth,s=this.chartHeight,o=this.options.chart,u=this.spacing,a=this.clipOffset,f,l,c,h,d;this.plotLeft=f=Math.round(this.plotLeft),this.plotTop=l=Math.round(this.plotTop),this.plotWidth=c=Math.max(0,Math.round(i-f-this.marginRight)),this.plotHeight=h=Math.max(0,Math.round(s-l-this.marginBottom)),this.plotSizeX=n?h:c,this.plotSizeY=n?c:h,this.plotBorderWidth=o.plotBorderWidth||0,this.spacingBox=r.spacingBox={x:u[3],y:u[0],width:i-u[3]-u[1],height:s-u[0]-u[2]},this.plotBox=r.plotBox={x:f,y:l,width:c,height:h},d=2*Math.floor(this.plotBorderWidth/2),n=Math.ceil(t(3)),r=Math.ceil(t(0)),this.clipBox={x:n,y:r,width:Math.floor(this.plotSizeX-t(1)-n),height:Math.max(0,Math.floor(this.plotSizeY-t(2)-r))},e||p(this.axes,function(e){e.setAxisSize(),e.setAxisTranslation()})},resetMargins:function(){var e=this,t=e.options.chart;p(["margin","spacing"],function(n){var r=t[n],i=w(r)?r:[r,r,r,r];p(["Top","Right","Bottom","Left"],function(r,s){e[n][s]=k(t[n+r],i[s])})}),p(x,function(t,n){e[t]=k(e.margin[n],e.spacing[n])}),e.axisOffset=[0,0,0,0],e.clipOffset=[]},drawChartBox:function(){var e=this.options.chart,t=this.renderer,n=this.chartWidth,r=this.chartHeight,i=this.chartBackground,s=this.plotBackground,o=this.plotBorder,u,a=this.plotBGImage,f=e.backgroundColor,l=e.plotBackgroundColor,c=e.plotBackgroundImage,h,p=this.plotLeft,d=this.plotTop,v=this.plotWidth,m=this.plotHeight,g=this.plotBox,y=this.clipRect,b=this.clipBox,w="animate";i||(this.chartBackground=i=t.rect().addClass("highcharts-background").add(),w="attr"),u=e.borderWidth||0,h=u+(e.shadow?8:0),f={fill:f||"none"};if(u||i["stroke-width"])f.stroke=e.borderColor,f["stroke-width"]=u;i.attr(f).shadow(e.shadow),i[w]({x:h/2,y:h/2,width:n-h-u%2,height:r-h-u%2,r:e.borderRadius}),w="animate",s||(w="attr",this.plotBackground=s=t.rect().addClass("highcharts-plot-background").add()),s[w](g),s.attr({fill:l||"none"}).shadow(e.plotShadow),c&&(a?a.animate(g):this.plotBGImage=t.image(c,p,d,v,m).add()),y?y.animate({width:b.width,height:b.height}):this.clipRect=t.clipRect(b),w="animate",o||(w="attr",this.plotBorder=o=t.rect().addClass("highcharts-plot-border").attr({zIndex:1}).add()),o.attr({stroke:e.plotBorderColor,"stroke-width":e.plotBorderWidth||0,fill:"none"}),o[w](o.crisp({x:p,y:d,width:v,height:m},-o.strokeWidth())),this.isDirtyBox=!1},propFromSeries:function(){var e=this,t=e.options.chart,n,r=e.options.series,i,s;p(["inverted","angular","polar"],function(o){n=O[t.type||t.defaultSeriesType],s=t[o]||n&&n.prototype[o];for(i=r&&r.length;!s&&i--;)(n=O[r[i].type])&&n.prototype[o]&&(s=!0);e[o]=s})},linkSeries:function(){var e=this,t=e.series;p(t,function(e){e.linkedSeries.length=0}),p(t,function(t){var n=t.options.linkedTo;E(n)&&(n=":previous"===n?e.series[t.index-1]:e.get(n))&&n.linkedParent!==t&&(n.linkedSeries.push(t),t.linkedParent=n,t.visible=k(t.options.visible,n.options.visible,t.visible))})},renderSeries:function(){p(this.series,function(e){e.translate(),e.render()})},renderLabels:function(){var e=this,t=e.options.labels;t.items&&p(t.items,function(n){var r=d(t.style,n.style),i=L(r.left)+e.plotLeft,s=L(r.top)+e.plotTop+12;delete r.left,delete r.top,e.renderer.text(n.html,i,s).attr({zIndex:2}).css(r).add()})},render:function(){var e=this.axes,t=this.renderer,n=this.options,r,i,s;this.setTitle(),this.legend=new S(this,n.legend),this.getStacks&&this.getStacks(),this.getMargins(!0),this.setChartSize(),n=this.plotWidth,r=this.plotHeight-=21,p(e,function(e){e.setScale()}),this.getAxisMargins(),i=1.1<n/this.plotWidth,s=1.05<r/this.plotHeight;if(i||s)p(e,function(e){(e.horiz&&i||!e.horiz&&s)&&e.setTickInterval(!0)}),this.getMargins();this.drawChartBox(),this.hasCartesianSeries&&p(e,function(e){e.visible&&e.render()}),this.seriesGroup||(this.seriesGroup=t.g("series-group").attr({zIndex:3}).add()),this.renderSeries(),this.renderLabels(),this.addCredits(),this.setResponsive&&this.setResponsive(),this.hasRendered=!0},addCredits:function(e){var t=this;e=T(!0,this.options.credits,e),e.enabled&&!this.credits&&(this.credits=this.renderer.text(e.text+(this.mapCredits||""),0,0).addClass("highcharts-credits").on("click",function(){e.href&&(P.location.href=e.href)}).attr({align:e.position.align,zIndex:8}).css(e.style).add().align(e.position),this.credits.update=function(e){t.credits=t.credits.destroy(),t.addCredits(e)})},destroy:function(){var t=this,n=t.axes,r=t.series,i=t.container,s,o=i&&i.parentNode;m(t,"destroy"),t.renderer.forExport?e.erase(l,t):l[t.index]=void 0,e.chartCount--,t.renderTo.removeAttribute("data-highcharts-chart"),A(t);for(s=n.length;s--;)n[s]=n[s].destroy();this.scroller&&this.scroller.destroy&&this.scroller.destroy();for(s=r.length;s--;)r[s]=r[s].destroy();p("title subtitle chartBackground plotBackground plotBGImage plotBorder seriesGroup clipRect credits pointer rangeSelector legend resetZoomButton tooltip renderer".split(" "),function(e){var n=t[e];n&&n.destroy&&(t[e]=n.destroy())}),i&&(i.innerHTML="",A(i),o&&f(i)),N(t,function(e,n){delete t[n]})},isReadyToRender:function(){var e=this;return _||P!=P.top||"complete"===s.readyState?!0:(s.attachEvent("onreadystatechange",function(){s.detachEvent("onreadystatechange",e.firstRender),"complete"===s.readyState&&e.firstRender()}),!1)},firstRender:function(){var e=this,t=e.options;e.isReadyToRender()&&(e.getContainer(),m(e,"init"),e.resetMargins(),e.setChartSize(),e.propFromSeries(),e.getAxes(),p(t.series||[],function(t){e.initSeries(t)}),e.linkSeries(),m(e,"beforeRender"),C&&(e.pointer=new C(e,t)),e.render(),!e.renderer.imgCount&&e.onload&&e.onload(),e.temporaryDisplay(!0))},onload:function(){p([this.callback].concat(this.callbacks),function(e){e&&void 0!==this.index&&e.apply(this,[this])},this),m(this,"load"),m(this,"render"),h(this.index)&&!1!==this.options.chart.reflow&&this.initReflow(),this.onload=null}})}(e),function(e){var t,n=e.each,r=e.extend,i=e.erase,s=e.fireEvent,o=e.format,u=e.isArray,a=e.isNumber,f=e.pick,l=e.removeEvent;e.Point=t=function(){},e.Point.prototype={init:function(e,t,n){return this.series=e,this.color=e.color,this.applyOptions(t,n),e.options.colorByPoint?(t=e.options.colors||e.chart.options.colors,this.color=this.color||t[e.colorCounter],t=t.length,n=e.colorCounter,e.colorCounter++,e.colorCounter===t&&(e.colorCounter=0)):n=e.colorIndex,this.colorIndex=f(this.colorIndex,n),e.chart.pointCount++,this},applyOptions:function(e,n){var i=this.series,s=i.options.pointValKey||i.pointValKey;return e=t.prototype.optionsToObject.call(this,e),r(this,e),this.options=this.options?r(this.options,e):e,e.group&&delete this.group,s&&(this.y=this[s]),this.isNull=f(this.isValid&&!this.isValid(),null===this.x||!a(this.y,!0)),this.selected&&(this.state="select"),"name"in this&&void 0===n&&i.xAxis&&i.xAxis.hasNames&&(this.x=i.xAxis.nameToX(this)),void 0===this.x&&i&&(this.x=void 0===n?i.autoIncrement(this):n),this},optionsToObject:function(e){var t={},n=this.series,r=n.options.keys,i=r||n.pointArrayMap||["y"],s=i.length,o=0,f=0;if(a(e)||null===e)t[i[0]]=e;else if(u(e))for(!r&&e.length>s&&(n=typeof e[0],"string"===n?t.name=e[0]:"number"===n&&(t.x=e[0]),o++);f<s;)r&&void 0===e[o]||(t[i[f]]=e[o]),o++,f++;else"object"==typeof e&&(t=e,e.dataLabels&&(n._hasPointLabels=!0),e.marker&&(n._hasPointMarkers=!0));return t},getClassName:function(){return"highcharts-point"+(this.selected?" highcharts-point-select":"")+(this.negative?" highcharts-negative":"")+(this.isNull?" highcharts-null-point":"")+(void 0!==this.colorIndex?" highcharts-color-"+this.colorIndex:"")+(this.options.className?" "+this.options.className:"")+(this.zone&&this.zone.className?" "+this.
zone.className.replace("highcharts-negative",""):"")},getZone:function(){var e=this.series,t=e.zones,e=e.zoneAxis||"y",n=0,r;for(r=t[n];this[e]>=r.value;)r=t[++n];return r&&r.color&&!this.options.color&&(this.color=r.color),r},destroy:function(){var e=this.series.chart,t=e.hoverPoints,n;e.pointCount--,t&&(this.setState(),i(t,this),t.length||(e.hoverPoints=null)),this===e.hoverPoint&&this.onMouseOut();if(this.graphic||this.dataLabel)l(this),this.destroyElements();this.legendItem&&e.legend.destroyItem(this);for(n in this)this[n]=null},destroyElements:function(){for(var e=["graphic","dataLabel","dataLabelUpper","connector","shadowGroup"],t,n=6;n--;)t=e[n],this[t]&&(this[t]=this[t].destroy())},getLabelConfig:function(){return{x:this.category,y:this.y,color:this.color,colorIndex:this.colorIndex,key:this.name||this.category,series:this.series,point:this,percentage:this.percentage,total:this.total||this.stackTotal}},tooltipFormatter:function(e){var t=this.series,r=t.tooltipOptions,i=f(r.valueDecimals,""),s=r.valuePrefix||"",u=r.valueSuffix||"";return n(t.pointArrayMap||["y"],function(t){t="{point."+t;if(s||u)e=e.replace(t+"}",s+t+"}"+u);e=e.replace(t+"}",t+":,."+i+"f}")}),o(e,{point:this,series:this.series})},firePointEvent:function(e,t,n){var r=this,i=this.series.options;(i.point.events[e]||r.options&&r.options.events&&r.options.events[e])&&this.importEvents(),"click"===e&&i.allowPointSelect&&(n=function(e){r.select&&r.select(null,e.ctrlKey||e.metaKey||e.shiftKey)}),s(this,e,t,n)},visible:!0}}(e),function(e){var t=e.addEvent,n=e.animObject,r=e.arrayMax,i=e.arrayMin,s=e.correctFloat,o=e.Date,u=e.defaultOptions,a=e.defaultPlotOptions,f=e.defined,l=e.each,c=e.erase,h=e.extend,p=e.fireEvent,d=e.grep,v=e.isArray,m=e.isNumber,g=e.isString,y=e.merge,b=e.objectEach,w=e.pick,E=e.removeEvent,S=e.splat,x=e.SVGElement,T=e.syncTimeout,N=e.win;e.Series=e.seriesType("line",null,{lineWidth:2,allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},marker:{lineWidth:0,lineColor:"#ffffff",radius:4,states:{hover:{animation:{duration:50},enabled:!0,radiusPlus:2,lineWidthPlus:1},select:{fillColor:"#cccccc",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:{align:"center",formatter:function(){return null===this.y?"":e.numberFormat(this.y,-1)},style:{fontSize:"11px",fontWeight:"bold",color:"contrast",textOutline:"1px contrast"},verticalAlign:"bottom",x:0,y:0,padding:5},cropThreshold:300,pointRange:0,softThreshold:!0,states:{hover:{animation:{duration:50},lineWidthPlus:1,marker:{},halo:{size:10,opacity:.25}},select:{marker:{}}},stickyTracking:!0,turboThreshold:1e3,findNearestPointBy:"x"},{isCartesian:!0,pointClass:e.Point,sorted:!0,requireSorting:!0,directTouch:!1,axisTypes:["xAxis","yAxis"],colorCounter:0,parallelArrays:["x","y"],coll:"series",init:function(e,n){var r=this,i,s=e.series,o;r.chart=e,r.options=n=r.setOptions(n),r.linkedSeries=[],r.bindAxes(),h(r,{name:n.name,state:"",visible:!1!==n.visible,selected:!0===n.selected}),i=n.events,b(i,function(e,n){t(r,n,e)});if(i&&i.click||n.point&&n.point.events&&n.point.events.click||n.allowPointSelect)e.runTrackerClick=!0;r.getColor(),r.getSymbol(),l(r.parallelArrays,function(e){r[e+"Data"]=[]}),r.setData(n.data,!1),r.isCartesian&&(e.hasCartesianSeries=!0),s.length&&(o=s[s.length-1]),r._i=w(o&&o._i,-1)+1,e.orderSeries(this.insert(s))},insert:function(e){var t=this.options.index,n;if(m(t)){for(n=e.length;n--;)if(t>=w(e[n].options.index,e[n]._i)){e.splice(n+1,0,this);break}-1===n&&e.unshift(this),n+=1}else e.push(this);return w(n,e.length-1)},bindAxes:function(){var t=this,n=t.options,r=t.chart,i;l(t.axisTypes||[],function(s){l(r[s],function(e){i=e.options;if(n[s]===i.index||void 0!==n[s]&&n[s]===i.id||void 0===n[s]&&0===i.index)t.insert(e.series),t[s]=e,e.isDirty=!0}),t[s]||t.optionalAxis===s||e.error(18,!0)})},updateParallelArrays:function(e,t){var n=e.series,r=arguments,i=m(t)?function(r){var i="y"===r&&n.toYData?n.toYData(e):e[r];n[r+"Data"][t]=i}:function(e){Array.prototype[t].apply(n[e+"Data"],Array.prototype.slice.call(r,2))};l(n.parallelArrays,i)},autoIncrement:function(){var e=this.options,t=this.xIncrement,n,r=e.pointIntervalUnit,t=w(t,e.pointStart,0);return this.pointInterval=n=w(this.pointInterval,e.pointInterval,1),r&&(e=new o(t),"day"===r?e=+e[o.hcSetDate](e[o.hcGetDate]()+n):"month"===r?e=+e[o.hcSetMonth](e[o.hcGetMonth]()+n):"year"===r&&(e=+e[o.hcSetFullYear](e[o.hcGetFullYear]()+n)),n=e-t),this.xIncrement=t+n,t},setOptions:function(e){var t=this.chart,n=t.options,r=n.plotOptions,i=(t.userOptions||{}).plotOptions||{},s=r[this.type];return this.userOptions=e,t=y(s,r.series,e),this.tooltipOptions=y(u.tooltip,u.plotOptions.series&&u.plotOptions.series.tooltip,u.plotOptions[this.type].tooltip,n.tooltip.userOptions,r.series&&r.series.tooltip,r[this.type].tooltip,e.tooltip),this.stickyTracking=w(e.stickyTracking,i[this.type]&&i[this.type].stickyTracking,i.series&&i.series.stickyTracking,this.tooltipOptions.shared&&!this.noSharedTooltip?!0:t.stickyTracking),null===s.marker&&delete t.marker,this.zoneAxis=t.zoneAxis,e=this.zones=(t.zones||[]).slice(),!t.negativeColor&&!t.negativeFillColor||t.zones||e.push({value:t[this.zoneAxis+"Threshold"]||t.threshold||0,className:"highcharts-negative",color:t.negativeColor,fillColor:t.negativeFillColor}),e.length&&f(e[e.length-1].value)&&e.push({color:this.color,fillColor:this.fillColor}),t},getCyclic:function(e,t,n){var r,i=this.chart,s=this.userOptions,o=e+"Index",u=e+"Counter",a=n?n.length:w(i.options.chart[e+"Count"],i[e+"Count"]);t||(r=w(s[o],s["_"+o]),f(r)||(i.series.length||(i[u]=0),s["_"+o]=r=i[u]%a,i[u]+=1),n&&(t=n[r])),void 0!==r&&(this[o]=r),this[e]=t},getColor:function(){this.options.colorByPoint?this.options.color=null:this.getCyclic("color",this.options.color||a[this.type].color,this.chart.options.colors)},getSymbol:function(){this.getCyclic("symbol",this.options.marker.symbol,this.chart.options.symbols)},drawLegendSymbol:e.LegendSymbolMixin.drawLineMarker,setData:function(t,n,r,i){var s=this,o=s.points,u=o&&o.length||0,a,f=s.options,c=s.chart,h=null,p=s.xAxis,d=f.turboThreshold,y=this.xData,b=this.yData,E=(a=s.pointArrayMap)&&a.length;t=t||[],a=t.length,n=w(n,!0);if(!1!==i&&a&&u===a&&!s.cropped&&!s.hasGroupedData&&s.visible)l(t,function(e,t){o[t].update&&e!==f.data[t]&&o[t].update(e,!1,null,!1)});else{s.xIncrement=null,s.colorCounter=0,l(this.parallelArrays,function(e){s[e+"Data"].length=0});if(d&&a>d){for(r=0;null===h&&r<a;)h=t[r],r++;if(m(h))for(r=0;r<a;r++)y[r]=this.autoIncrement(),b[r]=t[r];else if(v(h))if(E)for(r=0;r<a;r++)h=t[r],y[r]=h[0],b[r]=h.slice(1,E+1);else for(r=0;r<a;r++)h=t[r],y[r]=h[0],b[r]=h[1];else e.error(12)}else for(r=0;r<a;r++)void 0!==t[r]&&(h={series:s},s.pointClass.prototype.applyOptions.apply(h,[t[r]]),s.updateParallelArrays(h,r));g(b[0])&&e.error(14,!0),s.data=[],s.options.data=s.userOptions.data=t;for(r=u;r--;)o[r]&&o[r].destroy&&o[r].destroy();p&&(p.minRange=p.userMinRange),s.isDirty=c.isDirtyBox=!0,s.isDirtyData=!!o,r=!1}"point"===f.legendType&&(this.processData(),this.generatePoints()),n&&c.redraw(r)},processData:function(t){var n=this.xData,r=this.yData,i=n.length,s;s=0;var o,u,a=this.xAxis,f,l=this.options;f=l.cropThreshold;var c=this.getExtremesFromAll||l.getExtremesFromAll,h=this.isCartesian,l=a&&a.val2lin,p=a&&a.isLog,d,v;if(h&&!this.isDirty&&!a.isDirty&&!this.yAxis.isDirty&&!t)return!1;a&&(t=a.getExtremes(),d=t.min,v=t.max);if(h&&this.sorted&&!c&&(!f||i>f||this.forceCrop))if(n[i-1]<d||n[0]>v)n=[],r=[];else if(n[0]<d||n[i-1]>v)s=this.cropData(this.xData,this.yData,d,v),n=s.xData,r=s.yData,s=s.start,o=!0;for(f=n.length||1;--f;)i=p?l(n[f])-l(n[f-1]):n[f]-n[f-1],0<i&&(void 0===u||i<u)?u=i:0>i&&this.requireSorting&&e.error(15);this.cropped=o,this.cropStart=s,this.processedXData=n,this.processedYData=r,this.closestPointRange=u},cropData:function(e,t,n,r){var i=e.length,s=0,o=i,u=w(this.cropShoulder,1),a;for(a=0;a<i;a++)if(e[a]>=n){s=Math.max(0,a-u);break}for(n=a;n<i;n++)if(e[n]>r){o=n+u;break}return{xData:e.slice(s,o),yData:t.slice(s,o),start:s,end:o}},generatePoints:function(){var e=this.options,t=e.data,n=this.data,r,i=this.processedXData,s=this.processedYData,o=this.pointClass,u=i.length,a=this.cropStart||0,f,l=this.hasGroupedData,e=e.keys,c,h=[],p;n||l||(n=[],n.length=t.length,n=this.data=n),e&&l&&(this.options.keys=!1);for(p=0;p<u;p++)f=a+p,l?(c=(new o).init(this,[i[p]].concat(S(s[p]))),c.dataGroup=this.groupMap[p]):(c=n[f])||void 0===t[f]||(n[f]=c=(new o).init(this,t[f],i[p])),c&&(c.index=f,h[p]=c);this.options.keys=e;if(n&&(u!==(r=n.length)||l))for(p=0;p<r;p++)p!==a||l||(p+=u),n[p]&&(n[p].destroyElements(),n[p].plotX=void 0);this.data=n,this.points=h},getExtremes:function(e){var t=this.yAxis,n=this.processedXData,s,o=[],u=0;s=this.xAxis.getExtremes();var a=s.min,f=s.max,l,c,h,p;e=e||this.stackedYData||this.processedYData||[],s=e.length;for(p=0;p<s;p++)if(c=n[p],h=e[p],l=(m(h,!0)||v(h))&&(!t.positiveValuesOnly||h.length||0<h),c=this.getExtremesFromAll||this.options.getExtremesFromAll||this.cropped||(n[p]||c)>=a&&(n[p]||c)<=f,l&&c)if(l=h.length)for(;l--;)null!==h[l]&&(o[u++]=h[l]);else o[u++]=h;this.dataMin=i(o),this.dataMax=r(o)},translate:function(){this.processedXData||this.processData(),this.generatePoints();var e=this.options,t=e.stacking,n=this.xAxis,r=n.categories,i=this.yAxis,o=this.points,u=o.length,a=!!this.modifyValue,l=e.pointPlacement,c="between"===l||m(l),h=e.threshold,p=e.startFromThreshold?h:0,d,v,g,y,b=Number.MAX_VALUE;"between"===l&&(l=.5),m(l)&&(l*=w(e.pointRange||n.pointRange));for(e=0;e<u;e++){var E=o[e],S=E.x,x=E.y;v=E.low;var T=t&&i.stacks[(this.negStacks&&x<(p?0:h)?"-":"")+this.stackKey],N;i.positiveValuesOnly&&null!==x&&0>=x&&(E.isNull=!0),E.plotX=d=s(Math.min(Math.max(-1e5,n.translate(S,0,0,0,1,l,"flags"===this.type)),1e5)),t&&this.visible&&!E.isNull&&T&&T[S]&&(y=this.getStackIndicator(y,S,this.index),N=T[S],x=N.points[y.key],v=x[0],x=x[1],v===p&&y.key===T[S].base&&(v=w(h,i.min)),i.positiveValuesOnly&&0>=v&&(v=null),E.total=E.stackTotal=N.total,E.percentage=N.total&&E.y/N.total*100,E.stackY=x,N.setOffset(this.pointXOffset||0,this.barW||0)),E.yBottom=f(v)?i.translate(v,0,1,0,1):null,a&&(x=this.modifyValue(x,E)),E.plotY=v="number"==typeof x&&Infinity!==x?Math.min(Math.max(-1e5,i.translate(x,0,1,0,1)),1e5):void 0,E.isInside=void 0!==v&&0<=v&&v<=i.len&&0<=d&&d<=n.len,E.clientX=c?s(n.translate(S,0,0,0,1,l)):d,E.negative=E.y<(h||0),E.category=r&&void 0!==r[E.x]?r[E.x]:E.x,E.isNull||(void 0!==g&&(b=Math.min(b,Math.abs(d-g))),g=d),E.zone=this.zones.length&&E.getZone()}this.closestPointRangePx=b},getValidPoints:function(e,t){var n=this.chart;return d(e||this.points||[],function(e){return t&&!n.isInsidePlot(e.plotX,e.plotY,n.inverted)?!1:!e.isNull})},setClip:function(e){var t=this.chart,n=this.options,r=t.renderer,i=t.inverted,s=this.clipBox,o=s||t.clipBox,u=this.sharedClipKey||["_sharedClip",e&&e.duration,e&&e.easing,o.height,n.xAxis,n.yAxis].join(),a=t[u],f=t[u+"m"];a||(e&&(o.width=0,t[u+"m"]=f=r.clipRect(-99,i?-t.plotLeft:-t.plotTop,99,i?t.chartWidth:t.chartHeight)),t[u]=a=r.clipRect(o),a.count={length:0}),e&&!a.count[this.index]&&(a.count[this.index]=!0,a.count.length+=1),!1!==n.clip&&(this.group.clip(e||s?a:t.clipRect),this.markerGroup.clip(f),this.sharedClipKey=u),e||(a.count[this.index]&&(delete a.count[this.index],--a.count.length),0===a.count.length&&u&&t[u]&&(s||(t[u]=t[u].destroy()),t[u+"m"]&&(t[u+"m"]=t[u+"m"].destroy())))},animate:function(e){var t=this.chart,r=n(this.options.animation),i;e?this.setClip(r):(i=this.sharedClipKey,(e=t[i])&&e.animate({width:t.plotSizeX},r),t[i+"m"]&&t[i+"m"].animate({width:t.plotSizeX+99},r),this.animate=null)},afterAnimate:function(){this.setClip(),p(this,"afterAnimate")},drawPoints:function(){var e=this.points,t=this.chart,n,r,i,s,o=this.options.marker,u,a,f,l,c=this[this.specialGroup]||this.markerGroup,h=w(o.enabled,this.xAxis.isRadial?!0:null,this.closestPointRangePx>=2*o.radius);if(!1!==o.enabled||this._hasPointMarkers)for(r=0;r<e.length;r++)i=e[r],n=i.plotY,s=i.graphic,u=i.marker||{},a=!!i.marker,f=h&&void 0===u.enabled||u.enabled,l=i.isInside,f&&m(n)&&null!==i.y?(n=w(u.symbol,this.symbol),i.hasImage=0===n.indexOf("url"),f=this.markerAttribs(i,i.selected&&"select"),s?s[l?"show":"hide"](!0).animate(f):l&&(0<f.width||i.hasImage)&&(i.graphic=s=t.renderer.symbol(n,f.x,f.y,f.width,f.height,a?u:o).add(c)),s&&s.attr(this.pointAttribs(i,i.selected&&"select")),s&&s.addClass(i.getClassName(),!0)):s&&(i.graphic=s.destroy())},markerAttribs:function(e,t){var n=this.options.marker,r=e.marker||{},i=w(r.radius,n.radius);return t&&(n=n.states[t],t=r.states&&r.states[t],i=w(t&&t.radius,n&&n.radius,i+(n&&n.radiusPlus||0))),e.hasImage&&(i=0),e={x:Math.floor(e.plotX)-i,y:e.plotY-i},i&&(e.width=e.height=2*i),e},pointAttribs:function(e,t){var n=this.options.marker,r=e&&e.options,i=r&&r.marker||{},s=this.color,o=r&&r.color,u=e&&e.color,r=w(i.lineWidth,n.lineWidth);return e=e&&e.zone&&e.zone.color,s=o||e||u||s,e=i.fillColor||n.fillColor||s,s=i.lineColor||n.lineColor||s,t&&(n=n.states[t],t=i.states&&i.states[t]||{},r=w(t.lineWidth,n.lineWidth,r+w(t.lineWidthPlus,n.lineWidthPlus,0)),e=t.fillColor||n.fillColor||e,s=t.lineColor||n.lineColor||s),{stroke:s,"stroke-width":r,fill:e}},destroy:function(){var e=this,t=e.chart,n=/AppleWebKit\/533/.test(N.navigator.userAgent),r,i,s=e.data||[],o,u;p(e,"destroy"),E(e),l(e.axisTypes||[],function(t){(u=e[t])&&u.series&&(c(u.series,e),u.isDirty=u.forceRedraw=!0)}),e.legendItem&&e.chart.legend.destroyItem(e);for(i=s.length;i--;)(o=s[i])&&o.destroy&&o.destroy();e.points=null,clearTimeout(e.animationTimeout),b(e,function(e,t){e instanceof x&&!e.survive&&(r=n&&"group"===t?"hide":"destroy",e[r]())}),t.hoverSeries===e&&(t.hoverSeries=null),c(t.series,e),t.orderSeries(),b(e,function(t,n){delete e[n]})},getGraphPath:function(e,t,n){var r=this,i=r.options,s=i.step,o,u=[],a=[],c;return e=e||r.points,(o=e.reversed)&&e.reverse(),(s={right:1,center:2}[s]||s&&3)&&o&&(s=4-s),!i.connectNulls||t||n||(e=this.getValidPoints(e)),l(e,function(o,l){var h=o.plotX,p=o.plotY,d=e[l-1];(o.leftCliff||d&&d.rightCliff)&&!n&&(c=!0),o.isNull&&!f(t)&&0<l?c=!i.connectNulls:o.isNull&&!t?c=!0:(0===l||c?l=["M",o.plotX,o.plotY]:r.getPointSpline?l=r.getPointSpline(e,o,l):s?(l=1===s?["L",d.plotX,p]:2===s?["L",(d.plotX+h)/2,d.plotY,"L",(d.plotX+h)/2,p]:["L",h,d.plotY],l.push("L",h,p)):l=["L",h,p],a.push(o.x),s&&a.push(o.x),u.push.apply(u,l),c=!1)}),u.xMap=a,r.graphPath=u},drawGraph:function(){var e=this,t=this.options,n=(this.gappedPath||this.getGraphPath).call(this),r=[["graph","highcharts-graph",t.lineColor||this.color,t.dashStyle]];l(this.zones,function(n,i){r.push(["zone-graph-"+i,"highcharts-graph highcharts-zone-graph-"+i+" "+(n.className||""),n.color||e.color,n.dashStyle||t.dashStyle])}),l(r,function(r,i){var s=r[0],o=e[s];o?(o.endX=n.xMap,o.animate({d:n})):n.length&&(e[s]=e.chart.renderer.path(n).addClass(r[1]).attr({zIndex:1}).add(e.group),o={stroke:r[2],"stroke-width":t.lineWidth,fill:e.fillGraph&&e.color||"none"},r[3]?o.dashstyle=r[3]:"square"!==t.linecap&&(o["stroke-linecap"]=o["stroke-linejoin"]="round"),o=e[s].attr(o).shadow(2>i&&t.shadow)),o&&(o.startX=n.xMap,o.isArea=n.isArea)})},applyZones:function(){var e=this,t=this.chart,n=t.renderer,r=this.zones,i,s,o=this.clips||[],u,a=this.graph,f=this.area,c=Math.max(t.chartWidth,t.chartHeight),h=this[(this.zoneAxis||"y")+"Axis"],p,d,v=t.inverted,m,g,y,b,E=!1;r.length&&(a||f)&&h&&void 0!==h.min&&(d=h.reversed,m=h.horiz,a&&a.hide(),f&&f.hide(),p=h.getExtremes(),l(r,function(r,l){i=d?m?t.plotWidth:0:m?0:h.toPixels(p.min),i=Math.min(Math.max(w(s,i),0),c),s=Math.min(Math.max(Math.round(h.toPixels(w(r.value,p.max),!0)),0),c),E&&(i=s=h.toPixels(p.max)),g=Math.abs(i-s),y=Math.min(i,s),b=Math.max(i,s),h.isXAxis?(u={x:v?b:y,y:0,width:g,height:c},m||(u.x=t.plotHeight-u.x)):(u={x:0,y:v?b:y,width:c,height:g},m&&(u.y=t.plotWidth-u.y)),v&&n.isVML&&(u=h.isXAxis?{x:0,y:d?y:b,height:u.width,width:t.chartWidth}:{x:u.y-t.plotLeft-t.spacingBox.x,y:0,width:u.height,height:t.chartHeight}),o[l]?o[l].animate(u):(o[l]=n.clipRect(u),a&&e["zone-graph-"+l].clip(o[l]),f&&e["zone-area-"+l].clip(o[l])),E=r.value>p.max}),this.clips=o)},invertGroups:function(e){function n(){l(["group","markerGroup"],function(t){r[t]&&(i.renderer.isVML&&r[t].attr({width:r.yAxis.len,height:r.xAxis.len}),r[t].width=r.yAxis.len,r[t].height=r.xAxis.len,r[t].invert(e))})}var r=this,i=r.chart,s;r.xAxis&&(s=t(i,"resize",n),t(r,"destroy",s),n(e),r.invertGroups=n)},plotGroup:function(e,t,n,r,i){var s=this[e],o=!s;return o&&(this[e]=s=this.chart.renderer.g().attr({zIndex:r||.1}).add(i)),s.addClass("highcharts-"+t+" highcharts-series-"+this.index+" highcharts-"+this.type+"-series highcharts-color-"+this.colorIndex+" "+(this.options.className||""),!0),s.attr({visibility:n})[o?"attr":"animate"](this.getPlotBox()),s},getPlotBox:function(){var e=this.chart,t=this.xAxis,n=this.yAxis;return e.inverted&&(t=n,n=this.xAxis),{translateX:t?t.left:e.plotLeft,translateY:n?n.top:e.plotTop,scaleX:1,scaleY:1}},render:function(){var e=this,t=e.chart,r,i=e.options,s=!!e.animate&&t.renderer.isSVG&&n(i.animation).duration,o=e.visible?"inherit":"hidden",u=i.zIndex,a=e.hasRendered,f=t.seriesGroup,l=t.inverted;r=e.plotGroup("group","series",o,u,f),e.markerGroup=e.plotGroup("markerGroup","markers",o,u,f),s&&e.animate(!0),r.inverted=e.isCartesian?l:!1,e.drawGraph&&(e.drawGraph(),e.applyZones()),e.drawDataLabels&&e.drawDataLabels(),e.visible&&e.drawPoints(),e.drawTracker&&!1!==e.options.enableMouseTracking&&e.drawTracker(),e.invertGroups(l),!1===i.clip||e.sharedClipKey||a||r.clip(t.clipRect),s&&e.animate(),a||(e.animationTimeout=T(function(){e.afterAnimate()},s)),e.isDirty=!1,e.hasRendered=!0},redraw:function(){var e=this.chart,t=this.isDirty||this.isDirtyData,n=this.group,r=this.xAxis,i=this.yAxis;n&&(e.inverted&&n.attr({width:e.plotWidth,height:e.plotHeight}),n.animate({translateX:w(r&&r.left,e.plotLeft),translateY:w(i&&i.top,e.plotTop)})),this.translate(),this.render(),t&&delete this.kdTree},kdAxisArray:["clientX","plotY"],searchPoint:function(e,t){var n=this.xAxis,r=this.yAxis,i=this.chart.inverted;return this.searchKDTree({clientX:i?n.len-e.chartY+n.pos:e.chartX-n.pos,plotY:i?r.len-e.chartX+r.pos:e.chartY-r.pos},t)},buildKDTree:function(){function e(n,r,i){var s,o;if(o=n&&n.length)return s=t.kdAxisArray[r%i],n.sort(function(e,t){return e[s]-t[s]}),o=Math.floor(o/2),{point:n[o],left:e(n.slice(0,o),r+1,i),right:e(n.slice(o+1),r+1,i)}}this.buildingKdTree=!0;var t=this,n=-1<t.options.findNearestPointBy.indexOf("y")?2:1;delete t.kdTree,T(function(){t.kdTree=e(t.getValidPoints(null,!t.directTouch),n,n),t.buildingKdTree=!1},t.options.kdNow?0:1)},searchKDTree:function(e,t){function n(e,t,u,a){var l=t.point,c=r.kdAxisArray[u%a],h,p,d=l;return p=f(e[i])&&f(l[i])?Math.pow(e[i]-l[i],2):null,h=f(e[s])&&f(l[s])?Math.pow(e[s]-l[s],2):null,h=(p||0)+(h||0),l.dist=f(h)?Math.sqrt(h):Number.MAX_VALUE,l.distX=f(p)?Math.sqrt(p):Number.MAX_VALUE,c=e[c]-l[c],h=0>c?"left":"right",p=0>c?"right":"left",t[h]&&(h=n(e,t[h],u+1,a),d=h[o]<d[o]?h:l),t[p]&&Math.sqrt(c*c)<d[o]&&(e=n(e,t[p],u+1,a),d=e[o]<d[o]?e:d),d}var r=this,i=this.kdAxisArray[0],s=this.kdAxisArray[1],o=t?"distX":"dist";t=-1<r.options.findNearestPointBy.indexOf("y")?2:1,this.kdTree||this.buildingKdTree||this.buildKDTree();if(this.kdTree)return n(e,this.kdTree,t,t)}})}(e),function(e){function t(e,t,n,r,i){var s=e.chart.inverted;this.axis=e,this.isNegative=n,this.options=t,this.x=r,this.total=null,this.points={},this.stack=i,this.rightCliff=this.leftCliff=0,this.alignOptions={align:t.align||(s?n?"left":"right":"center"),verticalAlign:t.verticalAlign||(s?"middle":n?"bottom":"top"),y:l(t.y,s?4:n?14:-6),x:l(t.x,s?n?-6:6:0)},this.textAlign=t.textAlign||(s?n?"right":"left":"center")}var n=e.Axis,r=e.Chart,i=e.correctFloat,s=e.defined,o=e.destroyObjectProperties,u=e.each,a=e.format,f=e.objectEach,l=e.pick;e=e.Series,t.prototype={destroy:function(){o(this,this.axis)},render:function(e){var t=this.options,n=t.format,n=n?a(n,this):t.formatter.call(this);this.label?this.label.attr({text:n,visibility:"hidden"}):this.label=this.axis.chart.renderer.text(n,null,null,t.useHTML).css(t.style).attr({align:this.textAlign,rotation:t.rotation,visibility:"hidden"}).add(e)},setOffset:function(e,t){var n=this.axis,r=n.chart,i=r.inverted,s=n.reversed,s=this.isNegative&&!s||!this.isNegative&&s,o=n.translate(n.usePercentage?100:this.total,0,0,0,1),n=n.translate(0),n=Math.abs(o-n);e=r.xAxis[0].translate(this.x)+e;var u=r.plotHeight,i={x:i?s?o:o-n:e,y:i?u-e-t:s?u-o-n:u-o,width:i?n:t,height:i?t:n};if(t=this.label)t.align(this.alignOptions,null,i),i=t.alignAttr,t[!1===this.options.crop||r.isInsidePlot(i.x,i.y)?"show":"hide"](!0)}},r.prototype.getStacks=function(){var e=this;u(e.yAxis,function(e){e.stacks&&e.hasVisibleSeries&&(e.oldStacks=e.stacks)}),u(e.series,function(t){!t.options.stacking||!0!==t.visible&&!1!==e.options.chart.ignoreHiddenSeries||(t.stackKey=t.type+l(t.options.stack,""))})},n.prototype.buildStacks=function(){var e=this.series,t,n=l(this.options.reversedStacks,!0),r=e.length,i;if(!this.isXAxis){this.usePercentage=!1;for(i=r;i--;)e[n?i:r-i-1].setStackedPoints();for(i=r;i--;)t=e[n?i:r-i-1],t.setStackCliffs&&t.setStackCliffs();if(this.usePercentage)for(i=0;i<r;i++)e[i].setPercentStacks()}},n.prototype.renderStackTotals=function(){var e=this.chart,t=e.renderer,n=this.stacks,r=this.stackTotalGroup;r||(this.stackTotalGroup=r=t.g("stack-labels").attr({visibility:"visible",zIndex:6}).add()),r.translate(e.plotLeft,e.plotTop),f(n,function(e){f(e,function(e){e.render(r)})})},n.prototype.resetStacks=function(){var e=this,t=e.stacks;e.isXAxis||f(t,function(t){f(t,function(n,r){n.touched<e.stacksTouched?(n.destroy(),delete t[r]):(n.total=null,n.cum=null)})})},n.prototype.cleanStacks=function(){var e;this.isXAxis||(this.oldStacks&&(e=this.stacks=this.oldStacks),f(e,function(e){f(e,function(e){e.cum=e.total})}))},e.prototype.setStackedPoints=function(){if(this.options.stacking&&(!0===this.visible||!1===this.chart.options.chart.ignoreHiddenSeries)){var e=this.processedXData,n=this.processedYData,r=[],o=n.length,u=this.options,a=u.threshold,f=u.startFromThreshold?a:0,c=u.stack,u=u.stacking,h=this.stackKey,p="-"+h,d=this.negStacks,v=this.yAxis,g=v.stacks,y=v.oldStacks,b,w,E,S,x,T,N;v.stacksTouched+=1;for(x=0;x<o;x++)T=e[x],N=n[x],b=this.getStackIndicator(b,T,this.index),S=b.key,E=(w=d&&N<(f?0:a))?p:h,g[E]||(g[E]={}),g[E][T]||(y[E]&&y[E][T]?(g[E][T]=y[E][T],g[E][T].total=null):g[E][T]=new t(v,v.options.stackLabels,w,T,c)),E=g[E][T],null!==N&&(E.points[S]=E.points[this.index]=[l(E.cum,f)],s(E.cum)||(E.base=S),E.touched=v.stacksTouched,0<b.index&&!1===this.singleStacks&&(E.points[S][0]=E.points[this.index+","+T+",0"][0])),"percent"===u?(w=w?h:p,d&&g[w]&&g[w][T]?(w=g[w][T],E.total=w.total=Math.max(w.total,E.total)+Math.abs(N)||0):E.total=i(E.total+(Math.abs(N)||0))):E.total=i(E.total+(N||0)),E.cum=l(E.cum,f)+(N||0),null!==N&&(E.points[S].push(E.cum),r[x]=E.cum);"percent"===u&&(v.usePercentage=!0),this.stackedYData=r,v.oldStacks={}}},e.prototype.setPercentStacks=function(){var e=this,t=e.stackKey,n=e.yAxis.stacks,r=e.processedXData,s;u([t,"-"+t],function(t){for(var o=r.length,u,a;o--;)if(u=r[o],s=e.getStackIndicator(s,u,e.index,t),u=(a=n[t]&&n[t][u])&&a.points[s.key])a=a.total?100/a.total:0,u[0]=i(u[0]*a),u[1]=i(u[1]*a),e.stackedYData[o]=u[1]})},e.prototype.getStackIndicator=function(e,t,n,r){return!s(e)||e.x!==t||r&&e.key!==r?e={x:t,index:0,key:r}:e.index++,e.key=[n,t,e.index].join(),e}}(e),function(e){var t=e.addEvent,n=e.animate,r=e.Axis,i=e.createElement,s=e.css,o=e.defined,u=e.each,a=e.erase,f=e.extend,l=e.fireEvent,c=e.inArray,h=e.isNumber,p=e.isObject,d=e.isArray,v=e.merge,m=e.objectEach,g=e.pick,y=e.Point,b=e.Series,w=e.seriesTypes,E=e.setAnimation,S=e.splat;f(e.Chart.prototype,{addSeries:function(e,t,n){var r,i=this;return e&&(t=g(t,!0),l(i,"addSeries",{options:e},function(){r=i.initSeries(e),i.isDirtyLegend=!0,i.linkSeries(),t&&i.redraw(n)})),r},addAxis:function(e,t,n,i){var s=t?"xAxis":"yAxis",o=this.options;e=v(e,{index:this[s].length,isX:t}),new r(this,e),o[s]=S(o[s]||{}),o[s].push(e),g(n,!0)&&this.redraw(i)},showLoading:function(e){var r=this,o=r.options,u=r.loadingDiv,a=o.loading,l=function(){u&&s(u,{left:r.plotLeft+"px",top:r.plotTop+"px",width:r.plotWidth+"px",height:r.plotHeight+"px"})};u||(r.loadingDiv=u=i("div",{className:"highcharts-loading highcharts-loading-hidden"},null,r.container),r.loadingSpan=i("span",{className:"highcharts-loading-inner"},null,u),t(r,"redraw",l)),u.className="highcharts-loading",r.loadingSpan.innerHTML=e||o.lang.loading,s(u,f(a.style,{zIndex:10})),s(r.loadingSpan,a.labelStyle),r.loadingShown||(s(u,{opacity:0,display:""}),n(u,{opacity:a.style.opacity||.5},{duration:a.showDuration||0})),r.loadingShown=!0,l()},hideLoading:function(){var e=this.options,t=this.loadingDiv;t&&(t.className="highcharts-loading highcharts-loading-hidden",n(t,{opacity:0},{duration:e.loading.hideDuration||100,complete:function(){s(t,{display:"none"})}})),this.loadingShown=!1},propsRequireDirtyBox:"backgroundColor borderColor borderWidth margin marginTop marginRight marginBottom marginLeft spacing spacingTop spacingRight spacingBottom spacingLeft borderRadius plotBackgroundColor plotBackgroundImage plotBorderColor plotBorderWidth plotShadow shadow".split(" "),propsRequireUpdateSeries:"chart.inverted chart.polar chart.ignoreHiddenSeries chart.type colors plotOptions tooltip".split(" "),update:function(e,t){var n=this,r={credits:"addCredits",title:"setTitle",subtitle:"setSubtitle"},i=e.chart,s,a;if(i){v(!0,n.options.chart,i),"className"in i&&n.setClassName(i.className);if("inverted"in i||"polar"in i)n.propFromSeries(),s=!0;"alignTicks"in i&&(s=!0),m(i,function(e,t){-1!==c("chart."+t,n.propsRequireUpdateSeries)&&(a=!0),-1!==c(t,n.propsRequireDirtyBox)&&(n.isDirtyBox=!0)}),"style"in i&&n.renderer.setStyle(i.style)}e.colors&&(this.options.colors=e.colors),e.plotOptions&&v(!0,this.options.plotOptions,e.plotOptions),m(e,function(e,t){n[t]&&"function"==typeof n[t].update?n[t].update(e,!1):"function"==typeof n[r[t]]&&n[r[t]](e),"chart"!==t&&-1!==c(t,n.propsRequireUpdateSeries)&&(a=!0)}),u("xAxis yAxis zAxis series colorAxis pane".split(" "),function(t){e[t]&&u(S(e[t]),function(e,r){(r=o(e.id)&&n.get(e.id)||n[t][r])&&r.coll===t&&r.update(e,!1)})}),s&&u(n.axes,function(e){e.update({},!1)}),a&&u(n.series,function(e){e.update({},!1)}),e.loading&&v(!0,n.options.loading,e.loading),s=i&&i.width,i=i&&i.height,h(s)&&s!==n.chartWidth||h(i)&&i!==n.chartHeight?n.setSize(s,i):g(t,!0)&&n.redraw()},setSubtitle:function(e){this.setTitle(void 0,e)}}),f(y.prototype,{update:function(e,t,n,r){function i(){s.applyOptions(e),null===s.y&&u&&(s.graphic=u.destroy()),p(e,!0)&&(u&&u.element&&e&&e.marker&&e.marker.symbol&&(s.graphic=u.destroy()),e&&e.dataLabels&&s.dataLabel&&(s.dataLabel=s.dataLabel.destroy())),a=s.index,o.updateParallelArrays(s,a),l.data[a]=p(l.data[a],!0)||p(e,!0)?s.options:e,o.isDirty=o.isDirtyData=!0,!o.fixedBox&&o.hasCartesianSeries&&(f.isDirtyBox=!0),"point"===l.legendType&&(f.isDirtyLegend=!0),t&&f.redraw(n)}var s=this,o=s.series,u=s.graphic,a,f=o.chart,l=o.options;t=g(t,!0),!1===r?i():s.firePointEvent("update",{options:e},i)},remove:function(e,t){this.series.removePoint(c(this,this.series.data),e,t)}}),f(b.prototype,{addPoint:function(e,t,n,r){var i=this.options,s=this.data,o=this.chart,u=this.xAxis,u=u&&u.hasNames&&u.names,a=i.data,f,l,c=this.xData,h,p;t=g(t,!0),f={series:this},this.pointClass.prototype.applyOptions.apply(f,[e]),p=f.x,h=c.length;if(this.requireSorting&&p<c[h-1])for(l=!0;h&&c[h-1]>p;)h--;this.updateParallelArrays(f,"splice",h,0,0),this.updateParallelArrays(f,h),u&&f.name&&(u[p]=f.name),a.splice(h,0,e),l&&(this.data.splice(h,0,null),this.processData()),"point"===i.legendType&&this.generatePoints(),n&&(s[0]&&s[0].remove?s[0].remove(!1):(s.shift(),this.updateParallelArrays(f,"shift"),a.shift())),this.isDirtyData=this.isDirty=!0,t&&o.redraw(r)},removePoint:function(e,t,n){var r=this,i=r.data,s=i[e],o=r.points,u=r.chart,a=function(){o&&o.length===i.length&&o.splice(e,1),i.splice(e,1),r.options.data.splice(e,1),r.updateParallelArrays(s||{series:r},"splice",e,1),s&&s.destroy(),r.isDirty=!0,r.isDirtyData=!0,t&&u.redraw()};E(n,u),t=g(t,!0),s?s.firePointEvent("remove",null,a):a()},remove:function(e,t,n){function r(){i.destroy(),s.isDirtyLegend=s.isDirtyBox=!0,s.linkSeries(),g(e,!0)&&s.redraw(t)}var i=this,s=i.chart;!1!==n?l(i,"remove",null,r):r()},update:function(e,t){var n=this,r=n.chart,i=n.userOptions,s=n.oldType||n.type,o=e.type||i.type||r.options.chart.type,a=w[s].prototype,l=["group","markerGroup","dataLabelsGroup"],c;if(Object.keys&&"data"===Object.keys(e).toString())return this.setData(e.data,t);if(o&&o!==s||void 0!==e.zIndex)l.length=0;u(l,function(e){l[e]=n[e],delete n[e]}),e=v(i,{animation:!1,index:n.index,pointStart:n.xData[0]},{data:n.options.data},e),n.remove(!1,null,!1);for(c in a)n[c]=void 0;f(n,w[o||s].prototype),u(l,function(e){n[e]=l[e]}),n.init(r,e),n.oldType=s,r.linkSeries(),g(t,!0)&&r.redraw(!1)}}),f(r.prototype,{update:function(e,t){var n=this.chart;e=n.options[this.coll][this.options.index]=v(this.userOptions,e),this.destroy(!0),this.init(n,f(e,{events:void 0})),n.isDirtyBox=!0,g(t,!0)&&n.redraw()},remove:function(e){for(var t=this.chart,n=this.coll,r=this.series,i=r.length;i--;)r[i]&&r[i].remove(!1);a(t.axes,this),a(t[n],this),d(t.options[n])?t.options[n].splice(this.options.index,1):delete t.options[n],u(t[n],function(e,t){e.options.index=t}),this.destroy(),t.isDirtyBox=!0,g(e,!0)&&t.redraw()},setTitle:function(e,t){this.update({title:e},t)},setCategories:function(e,t){this.update({categories:e},t)}})}(e),function(e){var t=e.color,n=e.each,r=e.map,i=e.pick,s=e.Series,o=e.seriesType;o("area","line",{softThreshold:!1,threshold:0},{singleStacks:!1,getStackPoints:function(){var t=[],s=[],o=this.xAxis,u=this.yAxis,f=u.stacks[this.stackKey],l={},c=this.points,h=this.index,p=u.series,d=p.length,v,m=i(u.options.reversedStacks,!0)?1:-1,g;if(this.options.stacking){for(g=0;g<c.length;g++)l[c[g].x]=c[g];e.objectEach(f,function(e,t){null!==e.total&&s.push(t)}),s.sort(function(e,t){return e-t}),v=r(p,function(){return this.visible}),n(s,function(e,r){var i=0,a,c;if(l[e]&&!l[e].isNull)t.push(l[e]),n([-1,1],function(t){var n=1===t?"rightNull":"leftNull",i=0,o=f[s[r+t]];if(o)for(g=h;0<=g&&g<d;)a=o.points[g],a||(g===h?l[e][n]=!0:v[g]&&(c=f[e].points[g])&&(i-=c[1]-c[0])),g+=m;l[e][1===t?"rightCliff":"leftCliff"]=i});else{for(g=h;0<=g&&g<d;){if(a=f[e].points[g]){i=a[1];break}g+=m}i=u.translate(i,0,1,0,1),t.push({isNull:!0,plotX:o.translate(e,0,0,0,1),x:e,plotY:i,yBottom:i})}})}return t},getGraphPath:function(e){var t=s.prototype.getGraphPath,n=this.options,r=n.stacking,o=this.yAxis,u,a,f=[],l=[],c=this.index,h,p=o.stacks[this.stackKey],d=n.threshold,v=o.getThreshold(n.threshold),g,n=n.connectNulls||"percent"===r,y=function(t,n,i){var s=e[t];t=r&&p[s.x].points[c];var u=s[i+"Null"]||0;i=s[i+"Cliff"]||0;var a,m,s=!0;i||u?(a=(u?t[0]:t[1])+i,m=t[0]+i,s=!!u):!r&&e[n]&&e[n].isNull&&(a=m=d),void 0!==a&&(l.push({plotX:h,plotY:null===a?v:o.getThreshold(a),isNull:s,isCliff:!0}),f.push({plotX:h,plotY:null===m?v:o.getThreshold(m),doCurve:!1}))};e=e||this.points,r&&(e=this.getStackPoints());for(u=0;u<e.length;u++)if(a=e[u].isNull,h=i(e[u].rectPlotX,e[u].plotX),g=i(e[u].yBottom,v),!a||n)n||y(u,u-1,"left"),a&&!r&&n||(l.push(e[u]),f.push({x:u,plotX:h,plotY:g})),n||y(u,u+1,"right");return u=t.call(this,l,!0,!0),f.reversed=!0,a=t.call(this,f,!0,!0),a.length&&(a[0]="L"),a=u.concat(a),t=t.call(this,l,!1,n),a.xMap=u.xMap,this.areaPath=a,t},drawGraph:function(){this.areaPath=[],s.prototype.drawGraph.apply(this);var e=this,r=this.areaPath,o=this.options,u=[["area","highcharts-area",this.color,o.fillColor]];n(this.zones,function(t,n){u.push(["zone-area-"+n,"highcharts-area highcharts-zone-area-"+n+" "+t.className,t.color||e.color,t.fillColor||o.fillColor])}),n(u,function(n){var s=n[0],u=e[s];u?(u.endX=r.xMap,u.animate({d:r})):(u=e[s]=e.chart.renderer.path(r).addClass(n[1]).attr({fill:i(n[3],t(n[2]).setOpacity(i(o.fillOpacity,.75)).get()),zIndex:0}).add(e.group),u.isArea=!0),u.startX=r.xMap,u.shiftUnit=o.step?2:1})},drawLegendSymbol:e.LegendSymbolMixin.drawRectangle})}(e),function(e){var t=e.pick;e=e.seriesType,e("spline","line",{},{getPointSpline:function(e,n,r){var i=n.plotX,s=n.plotY,o=e[r-1];r=e[r+1];var u,a,f,l;if(o&&!o.isNull&&!1!==o.doCurve&&!n.isCliff&&r&&!r.isNull&&!1!==r.doCurve&&!n.isCliff){e=o.plotY,f=r.plotX,r=r.plotY;var c=0;u=(1.5*i+o.plotX)/2.5,a=(1.5*s+e)/2.5,f=(1.5*i+f)/2.5,l=(1.5*s+r)/2.5,f!==u&&(c=(l-a)*(f-i)/(f-u)+s-l),a+=c,l+=c,a>e&&a>s?(a=Math.max(e,s),l=2*s-a):a<e&&a<s&&(a=Math.min(e,s),l=2*s-a),l>r&&l>s?(l=Math.max(r,s),a=2*s-l):l<r&&l<s&&(l=Math.min(r,s),a=2*s-l),n.rightContX=
f,n.rightContY=l}return n=["C",t(o.rightContX,o.plotX),t(o.rightContY,o.plotY),t(u,i),t(a,s),i,s],o.rightContX=o.rightContY=null,n}})}(e),function(e){var t=e.seriesTypes.area.prototype,n=e.seriesType;n("areaspline","spline",e.defaultPlotOptions.area,{getStackPoints:t.getStackPoints,getGraphPath:t.getGraphPath,setStackCliffs:t.setStackCliffs,drawGraph:t.drawGraph,drawLegendSymbol:e.LegendSymbolMixin.drawRectangle})}(e),function(e){var t=e.animObject,n=e.color,r=e.each,i=e.extend,s=e.isNumber,o=e.merge,u=e.pick,a=e.Series,f=e.seriesType,l=e.svg;f("column","line",{borderRadius:0,crisp:!0,groupPadding:.2,marker:null,pointPadding:.1,minPointLength:0,cropThreshold:50,pointRange:null,states:{hover:{halo:!1,brightness:.1,shadow:!1},select:{color:"#cccccc",borderColor:"#000000",shadow:!1}},dataLabels:{align:null,verticalAlign:null,y:null},softThreshold:!1,startFromThreshold:!0,stickyTracking:!1,tooltip:{distance:6},threshold:0,borderColor:"#ffffff"},{cropShoulder:0,directTouch:!0,trackerGroups:["group","dataLabelsGroup"],negStacks:!0,init:function(){a.prototype.init.apply(this,arguments);var e=this,t=e.chart;t.hasRendered&&r(t.series,function(t){t.type===e.type&&(t.isDirty=!0)})},getColumnMetrics:function(){var e=this,t=e.options,n=e.xAxis,i=e.yAxis,s=n.reversed,o,a={},f=0;!1===t.grouping?f=1:r(e.chart.series,function(t){var n=t.options,r=t.yAxis,s;t.type!==e.type||!t.visible&&e.chart.options.chart.ignoreHiddenSeries||i.len!==r.len||i.pos!==r.pos||(n.stacking?(o=t.stackKey,void 0===a[o]&&(a[o]=f++),s=a[o]):!1!==n.grouping&&(s=f++),t.columnIndex=s)});var l=Math.min(Math.abs(n.transA)*(n.ordinalSlope||t.pointRange||n.closestPointRange||n.tickInterval||1),n.len),c=l*t.groupPadding,h=(l-2*c)/(f||1),t=Math.min(t.maxPointWidth||n.len,u(t.pointWidth,h*(1-2*t.pointPadding)));return e.columnMetrics={width:t,offset:(h-t)/2+(c+((e.columnIndex||0)+(s?1:0))*h-l/2)*(s?-1:1)},e.columnMetrics},crispCol:function(e,t,n,r){var i=this.chart,s=this.borderWidth,o=-(s%2?.5:0),s=s%2?.5:1;return i.inverted&&i.renderer.isVML&&(s+=1),this.options.crisp&&(n=Math.round(e+n)+o,e=Math.round(e)+o,n-=e),r=Math.round(t+r)+s,o=.5>=Math.abs(t)&&.5<r,t=Math.round(t)+s,r-=t,o&&r&&(--t,r+=1),{x:e,y:t,width:n,height:r}},translate:function(){var e=this,t=e.chart,n=e.options,i=e.dense=2>e.closestPointRange*e.xAxis.transA,i=e.borderWidth=u(n.borderWidth,i?0:1),s=e.yAxis,o=e.translatedThreshold=s.getThreshold(n.threshold),f=u(n.minPointLength,5),l=e.getColumnMetrics(),c=l.width,h=e.barW=Math.max(c,1+2*i),p=e.pointXOffset=l.offset;t.inverted&&(o-=.5),n.pointPadding&&(h=Math.ceil(h)),a.prototype.translate.apply(e),r(e.points,function(n){var r=u(n.yBottom,o),i=999+Math.abs(r),i=Math.min(Math.max(-i,n.plotY),s.len+i),a=n.plotX+p,l=h,d=Math.min(i,r),g,y=Math.max(i,r)-d;Math.abs(y)<f&&f&&(y=f,g=!s.reversed&&!n.negative||s.reversed&&n.negative,d=Math.abs(d-o)>f?r-f:o-(g?f:0)),n.barX=a,n.pointWidth=c,n.tooltipPos=t.inverted?[s.len+s.pos-t.plotLeft-i,e.xAxis.len-a-l/2,y]:[a+l/2,i+s.pos-t.plotTop,y],n.shapeType="rect",n.shapeArgs=e.crispCol.apply(e,n.isNull?[a,o,l,0]:[a,d,l,y])})},getSymbol:e.noop,drawLegendSymbol:e.LegendSymbolMixin.drawRectangle,drawGraph:function(){this.group[this.dense?"addClass":"removeClass"]("highcharts-dense-data")},pointAttribs:function(e,t){var r=this.options,i,s=this.pointAttrToOptions||{};i=s.stroke||"borderColor";var u=s["stroke-width"]||"borderWidth",a=e&&e.color||this.color,f=e[i]||r[i]||this.color||a,l=e[u]||r[u]||this[u]||0,s=r.dashStyle;return e&&this.zones.length&&(a=e.getZone(),a=e.options.color||a&&a.color||this.color),t&&(e=o(r.states[t],e.options.states&&e.options.states[t]||{}),t=e.brightness,a=e.color||void 0!==t&&n(a).brighten(e.brightness).get()||a,f=e[i]||f,l=e[u]||l,s=e.dashStyle||s),i={fill:a,stroke:f,"stroke-width":l},r.borderRadius&&(i.r=r.borderRadius),s&&(i.dashstyle=s),i},drawPoints:function(){var e=this,t=this.chart,n=e.options,i=t.renderer,u=n.animationLimit||250,a;r(e.points,function(r){var f=r.graphic;s(r.plotY)&&null!==r.y?(a=r.shapeArgs,f?f[t.pointCount<u?"animate":"attr"](o(a)):r.graphic=f=i[r.shapeType](a).add(r.group||e.group),f.attr(e.pointAttribs(r,r.selected&&"select")).shadow(n.shadow,null,n.stacking&&!n.borderRadius),f.addClass(r.getClassName(),!0)):f&&(r.graphic=f.destroy())})},animate:function(e){var n=this,r=this.yAxis,s=n.options,o=this.chart.inverted,u={};l&&(e?(u.scaleY=.001,e=Math.min(r.pos+r.len,Math.max(r.pos,r.toPixels(s.threshold))),o?u.translateX=e-r.len:u.translateY=e,n.group.attr(u)):(u[o?"translateX":"translateY"]=r.pos,n.group.animate(u,i(t(n.options.animation),{step:function(e,t){n.group.attr({scaleY:Math.max(.001,t.pos)})}})),n.animate=null))},remove:function(){var e=this,t=e.chart;t.hasRendered&&r(t.series,function(t){t.type===e.type&&(t.isDirty=!0)}),a.prototype.remove.apply(e,arguments)}})}(e),function(e){e=e.seriesType,e("bar","column",null,{inverted:!0})}(e),function(e){var t=e.Series;e=e.seriesType,e("scatter","line",{lineWidth:0,findNearestPointBy:"xy",marker:{enabled:!0},tooltip:{headerFormat:'<span style="color:{point.color}">\u25cf</span> <span style="font-size: 0.85em"> {series.name}</span><br/>',pointFormat:"x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>"}},{sorted:!1,requireSorting:!1,noSharedTooltip:!0,trackerGroups:["group","markerGroup","dataLabelsGroup"],takeOrdinalPosition:!1,drawGraph:function(){this.options.lineWidth&&t.prototype.drawGraph.call(this)}})}(e),function(e){var t=e.pick,n=e.relativeLength;e.CenteredSeriesMixin={getCenter:function(){var e=this.options,r=this.chart,i=2*(e.slicedOffset||0),s=r.plotWidth-2*i,r=r.plotHeight-2*i,o=e.center,o=[t(o[0],"50%"),t(o[1],"50%"),e.size||"100%",e.innerSize||0],u=Math.min(s,r),a,f;for(a=0;4>a;++a)f=o[a],e=2>a||2===a&&/%$/.test(f),o[a]=n(f,[s,r,u,o[2]][a])+(e?i:0);return o[3]>o[2]&&(o[3]=o[2]),o}}}(e),function(e){var t=e.addEvent,n=e.defined,r=e.each,i=e.extend,s=e.inArray,o=e.noop,u=e.pick,a=e.Point,f=e.Series,l=e.seriesType,c=e.setAnimation;l("pie","line",{center:[null,null],clip:!1,colorByPoint:!0,dataLabels:{distance:30,enabled:!0,formatter:function(){return this.point.isNull?void 0:this.point.name},x:0},ignoreHiddenPoint:!0,legendType:"point",marker:null,size:null,showInLegend:!1,slicedOffset:10,stickyTracking:!1,tooltip:{followPointer:!0},borderColor:"#ffffff",borderWidth:1,states:{hover:{brightness:.1,shadow:!1}}},{isCartesian:!1,requireSorting:!1,directTouch:!0,noSharedTooltip:!0,trackerGroups:["group","dataLabelsGroup"],axisTypes:[],pointAttribs:e.seriesTypes.column.prototype.pointAttribs,animate:function(e){var t=this,n=t.points,i=t.startAngleRad;e||(r(n,function(e){var n=e.graphic,r=e.shapeArgs;n&&(n.attr({r:e.startR||t.center[3]/2,start:i,end:i}),n.animate({r:r.r,start:r.start,end:r.end},t.options.animation))}),t.animate=null)},updateTotals:function(){var e,t=0,n=this.points,r=n.length,i,s=this.options.ignoreHiddenPoint;for(e=0;e<r;e++)i=n[e],t+=s&&!i.visible?0:i.isNull?0:i.y;this.total=t;for(e=0;e<r;e++)i=n[e],i.percentage=0<t&&(i.visible||!s)?i.y/t*100:0,i.total=t},generatePoints:function(){f.prototype.generatePoints.call(this),this.updateTotals()},translate:function(e){this.generatePoints();var t=0,n=this.options,r=n.slicedOffset,i=r+(n.borderWidth||0),s,o,a,f=n.startAngle||0,l=this.startAngleRad=Math.PI/180*(f-90),f=(this.endAngleRad=Math.PI/180*(u(n.endAngle,f+360)-90))-l,c=this.points,h,p=n.dataLabels.distance,n=n.ignoreHiddenPoint,d,v=c.length,m;e||(this.center=e=this.getCenter()),this.getX=function(t,n,r){return a=Math.asin(Math.min((t-e[1])/(e[2]/2+r.labelDistance),1)),e[0]+(n?-1:1)*Math.cos(a)*(e[2]/2+r.labelDistance)};for(d=0;d<v;d++){m=c[d],m.labelDistance=u(m.options.dataLabels&&m.options.dataLabels.distance,p),this.maxLabelDistance=Math.max(this.maxLabelDistance||0,m.labelDistance),s=l+t*f;if(!n||m.visible)t+=m.percentage/100;o=l+t*f,m.shapeType="arc",m.shapeArgs={x:e[0],y:e[1],r:e[2]/2,innerR:e[3]/2,start:Math.round(1e3*s)/1e3,end:Math.round(1e3*o)/1e3},a=(o+s)/2,a>1.5*Math.PI?a-=2*Math.PI:a<-Math.PI/2&&(a+=2*Math.PI),m.slicedTranslation={translateX:Math.round(Math.cos(a)*r),translateY:Math.round(Math.sin(a)*r)},o=Math.cos(a)*e[2]/2,h=Math.sin(a)*e[2]/2,m.tooltipPos=[e[0]+.7*o,e[1]+.7*h],m.half=a<-Math.PI/2||a>Math.PI/2?1:0,m.angle=a,s=Math.min(i,m.labelDistance/5),m.labelPos=[e[0]+o+Math.cos(a)*m.labelDistance,e[1]+h+Math.sin(a)*m.labelDistance,e[0]+o+Math.cos(a)*s,e[1]+h+Math.sin(a)*s,e[0]+o,e[1]+h,0>m.labelDistance?"center":m.half?"right":"left",a]}},drawGraph:null,drawPoints:function(){var e=this,t=e.chart.renderer,n,s,o,u,a=e.options.shadow;a&&!e.shadowGroup&&(e.shadowGroup=t.g("shadow").add(e.group)),r(e.points,function(r){if(!r.isNull){s=r.graphic,u=r.shapeArgs,n=r.getTranslate();var f=r.shadowGroup;a&&!f&&(f=r.shadowGroup=t.g("shadow").add(e.shadowGroup)),f&&f.attr(n),o=e.pointAttribs(r,r.selected&&"select"),s?s.setRadialReference(e.center).attr(o).animate(i(u,n)):(r.graphic=s=t[r.shapeType](u).setRadialReference(e.center).attr(n).add(e.group),r.visible||s.attr({visibility:"hidden"}),s.attr(o).attr({"stroke-linejoin":"round"}).shadow(a,f)),s.addClass(r.getClassName())}})},searchPoint:o,sortByAngle:function(e,t){e.sort(function(e,n){return void 0!==e.angle&&(n.angle-e.angle)*t})},drawLegendSymbol:e.LegendSymbolMixin.drawRectangle,getCenter:e.CenteredSeriesMixin.getCenter,getSymbol:o},{init:function(){a.prototype.init.apply(this,arguments);var e=this,n;return e.name=u(e.name,"Slice"),n=function(t){e.slice("select"===t.type)},t(e,"select",n),t(e,"unselect",n),e},isValid:function(){return e.isNumber(this.y,!0)&&0<=this.y},setVisible:function(e,t){var n=this,i=n.series,o=i.chart,a=i.options.ignoreHiddenPoint;t=u(t,a),e!==n.visible&&(n.visible=n.options.visible=e=void 0===e?!n.visible:e,i.options.data[s(n,i.data)]=n.options,r(["graphic","dataLabel","connector","shadowGroup"],function(t){n[t]&&n[t][e?"show":"hide"](!0)}),n.legendItem&&o.legend.colorizeItem(n,e),e||"hover"!==n.state||n.setState(""),a&&(i.isDirty=!0),t&&o.redraw())},slice:function(e,t,r){var i=this.series;c(r,i.chart),u(t,!0),this.sliced=this.options.sliced=n(e)?e:!this.sliced,i.options.data[s(this,i.data)]=this.options,this.graphic.animate(this.getTranslate()),this.shadowGroup&&this.shadowGroup.animate(this.getTranslate())},getTranslate:function(){return this.sliced?this.slicedTranslation:{translateX:0,translateY:0}},haloPath:function(e){var t=this.shapeArgs;return this.sliced||!this.visible?[]:this.series.chart.renderer.symbols.arc(t.x,t.y,t.r+e,t.r+e,{innerR:this.shapeArgs.r,start:t.start,end:t.end})}})}(e),function(e){var t=e.addEvent,n=e.arrayMax,r=e.defined,i=e.each,s=e.extend,o=e.format,u=e.map,a=e.merge,f=e.noop,l=e.pick,c=e.relativeLength,h=e.Series,p=e.seriesTypes,d=e.stableSort;e.distribute=function(e,t){function n(e,t){return e.target-t.target}var r,s=!0,o=e,a=[],f;f=0;for(r=e.length;r--;)f+=e[r].size;if(f>t){d(e,function(e,t){return(t.rank||0)-(e.rank||0)});for(f=r=0;f<=t;)f+=e[r].size,r++;a=e.splice(r-1,e.length)}d(e,n);for(e=u(e,function(e){return{size:e.size,targets:[e.target]}});s;){for(r=e.length;r--;)s=e[r],f=(Math.min.apply(0,s.targets)+Math.max.apply(0,s.targets))/2,s.pos=Math.min(Math.max(0,f-s.size/2),t-s.size);r=e.length;for(s=!1;r--;)0<r&&e[r-1].pos+e[r-1].size>e[r].pos&&(e[r-1].size+=e[r].size,e[r-1].targets=e[r-1].targets.concat(e[r].targets),e[r-1].pos+e[r-1].size>t&&(e[r-1].pos=t-e[r-1].size),e.splice(r,1),s=!0)}r=0,i(e,function(e){var t=0;i(e.targets,function(){o[r].pos=e.pos+t,t+=o[r].size,r++})}),o.push.apply(o,a),d(o,n)},h.prototype.drawDataLabels=function(){var n=this,s=n.options,u=s.dataLabels,f=n.points,c,h,p=n.hasRendered||0,d,v,m=l(u.defer,!!s.animation),y=n.chart.renderer;if(u.enabled||n._hasPointLabels)n.dlProcessOptions&&n.dlProcessOptions(u),v=n.plotGroup("dataLabelsGroup","data-labels",m&&!p?"hidden":"visible",u.zIndex||6),m&&(v.attr({opacity:+p}),p||t(n,"afterAnimate",function(){n.visible&&v.show(!0),v[s.animation?"animate":"attr"]({opacity:1},{duration:200})})),h=u,i(f,function(t){var i,f=t.dataLabel,p,m,w=t.connector,E=!f,S;c=t.dlOptions||t.options&&t.options.dataLabels;if(i=l(c&&c.enabled,h.enabled)&&null!==t.y)u=a(h,c),p=t.getLabelConfig(),d=u.format?o(u.format,p):u.formatter.call(p,u),S=u.style,p=u.rotation,S.color=l(u.color,S.color,n.color,"#000000"),"contrast"===S.color&&(t.contrastColor=y.getContrast(t.color||n.color),S.color=u.inside||0>l(t.labelDistance,u.distance)||s.stacking?t.contrastColor:"#000000"),s.cursor&&(S.cursor=s.cursor),m={fill:u.backgroundColor,stroke:u.borderColor,"stroke-width":u.borderWidth,r:u.borderRadius||0,rotation:p,padding:u.padding,zIndex:1},e.objectEach(m,function(e,t){void 0===e&&delete m[t]});!f||i&&r(d)?i&&r(d)&&(f?m.text=d:(f=t.dataLabel=y[p?"text":"label"](d,0,-9999,u.shape,null,null,u.useHTML,null,"data-label"),f.addClass("highcharts-data-label-color-"+t.colorIndex+" "+(u.className||"")+(u.useHTML?"highcharts-tracker":""))),f.attr(m),f.css(S).shadow(u.shadow),f.added||f.add(v),n.alignDataLabel(t,f,u,null,E)):(t.dataLabel=f=f.destroy(),w&&(t.connector=w.destroy()))})},h.prototype.alignDataLabel=function(e,t,n,r,i){var o=this.chart,u=o.inverted,a=l(e.plotX,-9999),f=l(e.plotY,-9999),c=t.getBBox(),h,p=n.rotation,d=n.align,v=this.visible&&(e.series.forceDL||o.isInsidePlot(a,Math.round(f),u)||r&&o.isInsidePlot(a,u?r.x+1:r.y+r.height-1,u)),g="justify"===l(n.overflow,"justify");v&&(h=n.style.fontSize,h=o.renderer.fontMetrics(h,t).b,r=s({x:u?o.plotWidth-f:a,y:Math.round(u?o.plotHeight-a:f),width:0,height:0},r),s(n,{width:c.width,height:c.height}),p?(g=!1,a=o.renderer.rotCorr(h,p),a={x:r.x+n.x+r.width/2+a.x,y:r.y+n.y+{top:0,middle:.5,bottom:1}[n.verticalAlign]*r.height},t[i?"attr":"animate"](a).attr({align:d}),f=(p+720)%360,f=180<f&&360>f,"left"===d?a.y-=f?c.height:0:"center"===d?(a.x-=c.width/2,a.y-=c.height/2):"right"===d&&(a.x-=c.width,a.y-=f?0:c.height)):(t.align(n,null,r),a=t.alignAttr),g?e.isLabelJustified=this.justifyDataLabel(t,n,a,c,r,i):l(n.crop,!0)&&(v=o.isInsidePlot(a.x,a.y)&&o.isInsidePlot(a.x+c.width,a.y+c.height)),n.shape&&!p)&&t[i?"attr":"animate"]({anchorX:u?o.plotWidth-e.plotY:e.plotX,anchorY:u?o.plotHeight-e.plotX:e.plotY}),v||(t.attr({y:-9999}),t.placed=!1)},h.prototype.justifyDataLabel=function(e,t,n,r,i,s){var o=this.chart,u=t.align,a=t.verticalAlign,f,l,c=e.box?0:e.padding||0;return f=n.x+c,0>f&&("right"===u?t.align="left":t.x=-f,l=!0),f=n.x+r.width-c,f>o.plotWidth&&("left"===u?t.align="right":t.x=o.plotWidth-f,l=!0),f=n.y+c,0>f&&("bottom"===a?t.verticalAlign="top":t.y=-f,l=!0),f=n.y+r.height-c,f>o.plotHeight&&("top"===a?t.verticalAlign="bottom":t.y=o.plotHeight-f,l=!0),l&&(e.placed=!s,e.align(t,null,i)),l},p.pie&&(p.pie.prototype.drawDataLabels=function(){var t=this,s=t.data,o,u=t.chart,a=t.options.dataLabels,f=l(a.connectorPadding,10),c=l(a.connectorWidth,1),p=u.plotWidth,d=u.plotHeight,v,m=t.center,g=m[2]/2,y=m[1],b,w,E,S,x=[[],[]],T,N,C,k,L=[0,0,0,0];t.visible&&(a.enabled||t._hasPointLabels)&&(i(s,function(e){e.dataLabel&&e.visible&&e.dataLabel.shortened&&(e.dataLabel.attr({width:"auto"}).css({width:"auto",textOverflow:"clip"}),e.dataLabel.shortened=!1)}),h.prototype.drawDataLabels.apply(t),i(s,function(e){e.dataLabel&&e.visible&&(x[e.half].push(e),e.dataLabel._pos=null)}),i(x,function(n,s){var l,c,h=n.length,v=[],x;if(h)for(t.sortByAngle(n,s-.5),0<t.maxLabelDistance&&(l=Math.max(0,y-g-t.maxLabelDistance),c=Math.min(y+g+t.maxLabelDistance,u.plotHeight),i(n,function(e){0<e.labelDistance&&e.dataLabel&&(e.top=Math.max(0,y-g-e.labelDistance),e.bottom=Math.min(y+g+e.labelDistance,u.plotHeight),x=e.dataLabel.getBBox().height||21,e.positionsIndex=v.push({target:e.labelPos[1]-e.top+x/2,size:x,rank:e.y})-1)}),e.distribute(v,c+x-l)),k=0;k<h;k++)o=n[k],c=o.positionsIndex,E=o.labelPos,b=o.dataLabel,C=!1===o.visible?"hidden":"inherit",l=E[1],v&&r(v[c])?void 0===v[c].pos?C="hidden":(S=v[c].size,N=o.top+v[c].pos):N=l,delete o.positionIndex,T=a.justify?m[0]+(s?-1:1)*(g+o.labelDistance):t.getX(N<o.top+2||N>o.bottom-2?l:N,s,o),b._attr={visibility:C,align:E[6]},b._pos={x:T+a.x+({left:f,right:-f}[E[6]]||0),y:N+a.y-10},E.x=T,E.y=N,w=b.getBBox().width,l=null,T-w<f?(l=Math.round(w-T+f),L[3]=Math.max(l,L[3])):T+w>p-f&&(l=Math.round(T+w-p+f),L[1]=Math.max(l,L[1])),0>N-S/2?L[0]=Math.max(Math.round(-N+S/2),L[0]):N+S/2>d&&(L[2]=Math.max(Math.round(N+S/2-d),L[2])),b.sideOverflow=l}),0===n(L)||this.verifyDataLabelOverflow(L))&&(this.placeDataLabels(),c&&i(this.points,function(e){var n;v=e.connector;if((b=e.dataLabel)&&b._pos&&e.visible&&0<e.labelDistance){C=b._attr.visibility;if(n=!v)e.connector=v=u.renderer.path().addClass("highcharts-data-label-connector highcharts-color-"+e.colorIndex).add(t.dataLabelsGroup),v.attr({"stroke-width":c,stroke:a.connectorColor||e.color||"#666666"});v[n?"attr":"animate"]({d:t.connectorPath(e.labelPos)}),v.attr("visibility",C)}else v&&(e.connector=v.destroy())}))},p.pie.prototype.connectorPath=function(e){var t=e.x,n=e.y;return l(this.options.dataLabels.softConnector,!0)?["M",t+("left"===e[6]?5:-5),n,"C",t,n,2*e[2]-e[4],2*e[3]-e[5],e[2],e[3],"L",e[4],e[5]]:["M",t+("left"===e[6]?5:-5),n,"L",e[2],e[3],"L",e[4],e[5]]},p.pie.prototype.placeDataLabels=function(){i(this.points,function(e){var t=e.dataLabel;t&&e.visible&&((e=t._pos)?(t.sideOverflow&&(t._attr.width=t.getBBox().width-t.sideOverflow,t.css({width:t._attr.width+"px",textOverflow:"ellipsis"}),t.shortened=!0),t.attr(t._attr),t[t.moved?"animate":"attr"](e),t.moved=!0):t&&t.attr({y:-9999}))},this)},p.pie.prototype.alignDataLabel=f,p.pie.prototype.verifyDataLabelOverflow=function(e){var t=this.center,n=this.options,r=n.center,i=n.minSize||80,s,o=null!==n.size;return o||(null!==r[0]?s=Math.max(t[2]-Math.max(e[1],e[3]),i):(s=Math.max(t[2]-e[1]-e[3],i),t[0]+=(e[3]-e[1])/2),null!==r[1]?s=Math.max(Math.min(s,t[2]-Math.max(e[0],e[2])),i):(s=Math.max(Math.min(s,t[2]-e[0]-e[2]),i),t[1]+=(e[0]-e[2])/2),s<t[2]?(t[2]=s,t[3]=Math.min(c(n.innerSize||0,s),s),this.translate(t),this.drawDataLabels&&this.drawDataLabels()):o=!0),o}),p.column&&(p.column.prototype.alignDataLabel=function(e,t,n,r,i){var s=this.chart.inverted,o=e.series,u=e.dlBox||e.shapeArgs,f=l(e.below,e.plotY>l(this.translatedThreshold,o.yAxis.len)),c=l(n.inside,!!this.options.stacking);u&&(r=a(u),0>r.y&&(r.height+=r.y,r.y=0),u=r.y+r.height-o.yAxis.len,0<u&&(r.height-=u),s&&(r={x:o.yAxis.len-r.y-r.height,y:o.xAxis.len-r.x-r.width,width:r.height,height:r.width}),c||(s?(r.x+=f?0:r.width,r.width=0):(r.y+=f?r.height:0,r.height=0))),n.align=l(n.align,!s||c?"center":f?"right":"left"),n.verticalAlign=l(n.verticalAlign,s||c?"middle":f?"top":"bottom"),h.prototype.alignDataLabel.call(this,e,t,n,r,i),e.isLabelJustified&&e.contrastColor&&e.dataLabel.css({color:e.contrastColor})})}(e),function(e){var t=e.Chart,n=e.each,r=e.pick,i=e.addEvent;t.prototype.callbacks.push(function(e){function t(){var t=[];n(e.series||[],function(e){var i=e.options.dataLabels,s=e.dataLabelCollections||["dataLabel"];(i.enabled||e._hasPointLabels)&&!i.allowOverlap&&e.visible&&n(s,function(i){n(e.points,function(e){e[i]&&(e[i].labelrank=r(e.labelrank,e.shapeArgs&&e.shapeArgs.height),t.push(e[i]))})})}),e.hideOverlappingLabels(t)}t(),i(e,"redraw",t)}),t.prototype.hideOverlappingLabels=function(e){var t=e.length,r,i,s,o,u,a,f,l,c,h=function(e,t,n,r,i,s,o,u){return!(i>e+n||i+o<e||s>t+r||s+u<t)};for(i=0;i<t;i++)if(r=e[i])r.oldOpacity=r.opacity,r.newOpacity=1;e.sort(function(e,t){return(t.labelrank||0)-(e.labelrank||0)});for(i=0;i<t;i++)for(s=e[i],r=i+1;r<t;++r)if(o=e[r],s&&o&&s!==o&&s.placed&&o.placed&&0!==s.newOpacity&&0!==o.newOpacity&&(u=s.alignAttr,a=o.alignAttr,f=s.parentGroup,l=o.parentGroup,c=2*(s.box?0:s.padding),u=h(u.x+f.translateX,u.y+f.translateY,s.width-c,s.height-c,a.x+l.translateX,a.y+l.translateY,o.width-c,o.height-c)))(s.labelrank<o.labelrank?s:o).newOpacity=0;n(e,function(e){var t,n;e&&(n=e.newOpacity,e.oldOpacity!==n&&e.placed&&(n?e.show(!0):t=function(){e.hide()},e.alignAttr.opacity=n,e[e.isOld?"animate":"attr"](e.alignAttr,null,t)),e.isOld=!0)})}}(e),function(e){var t=e.addEvent,n=e.Chart,r=e.createElement,i=e.css,s=e.defaultOptions,o=e.defaultPlotOptions,u=e.each,a=e.extend,f=e.fireEvent,l=e.hasTouch,c=e.inArray,h=e.isObject,p=e.Legend,d=e.merge,v=e.pick,m=e.Point,g=e.Series,y=e.seriesTypes,b=e.svg,w;w=e.TrackerMixin={drawTrackerPoint:function(){var e=this,t=e.chart.pointer,n=function(e){var n=t.getPointFromEvent(e);void 0!==n&&(t.isDirectTouch=!0,n.onMouseOver(e))};u(e.points,function(e){e.graphic&&(e.graphic.element.point=e),e.dataLabel&&(e.dataLabel.div?e.dataLabel.div.point=e:e.dataLabel.element.point=e)}),e._hasTracking||(u(e.trackerGroups,function(r){e[r]&&(e[r].addClass("highcharts-tracker").on("mouseover",n).on("mouseout",function(e){t.onTrackerMouseOut(e)}),l&&e[r].on("touchstart",n),e.options.cursor&&e[r].css(i).css({cursor:e.options.cursor}))}),e._hasTracking=!0)},drawTrackerGraph:function(){var e=this,t=e.options,n=t.trackByArea,r=[].concat(n?e.areaPath:e.graphPath),i=r.length,s=e.chart,o=s.pointer,a=s.renderer,f=s.options.tooltip.snap,c=e.tracker,h,p=function(){s.hoverSeries!==e&&e.onMouseOver()},d="rgba(192,192,192,"+(b?1e-4:.002)+")";if(i&&!n)for(h=i+1;h--;)"M"===r[h]&&r.splice(h+1,0,r[h+1]-f,r[h+2],"L"),(h&&"M"===r[h]||h===i)&&r.splice(h,0,"L",r[h-2]+f,r[h-1]);c?c.attr({d:r}):e.graph&&(e.tracker=a.path(r).attr({"stroke-linejoin":"round",visibility:e.visible?"visible":"hidden",stroke:d,fill:n?d:"none","stroke-width":e.graph.strokeWidth()+(n?0:2*f),zIndex:2}).add(e.group),u([e.tracker,e.markerGroup],function(e){e.addClass("highcharts-tracker").on("mouseover",p).on("mouseout",function(e){o.onTrackerMouseOut(e)}),t.cursor&&e.css({cursor:t.cursor}),l&&e.on("touchstart",p)}))}},y.column&&(y.column.prototype.drawTracker=w.drawTrackerPoint),y.pie&&(y.pie.prototype.drawTracker=w.drawTrackerPoint),y.scatter&&(y.scatter.prototype.drawTracker=w.drawTrackerPoint),a(p.prototype,{setItemEvents:function(e,t,n){var r=this,i=r.chart.renderer.boxWrapper,s="highcharts-legend-"+(e.series?"point":"series")+"-active";(n?t:e.legendGroup).on("mouseover",function(){e.setState("hover"),i.addClass(s),t.css(r.options.itemHoverStyle)}).on("mouseout",function(){t.css(d(e.visible?r.itemStyle:r.itemHiddenStyle)),i.removeClass(s),e.setState()}).on("click",function(t){var n=function(){e.setVisible&&e.setVisible()};t={browserEvent:t},e.firePointEvent?e.firePointEvent("legendItemClick",t,n):f(e,"legendItemClick",t,n)})},createCheckboxForItem:function(e){e.checkbox=r("input",{type:"checkbox",checked:e.selected,defaultChecked:e.selected},this.options.itemCheckboxStyle,this.chart.container),t(e.checkbox,"click",function(t){f(e.series||e,"checkboxClick",{checked:t.target.checked,item:e},function(){e.select()})})}}),s.legend.itemStyle.cursor="pointer",a(n.prototype,{showResetZoom:function(){var e=this,t=s.lang,n=e.options.chart.resetZoomButton,r=n.theme,i=r.states,o="chart"===n.relativeTo?null:"plotBox";this.resetZoomButton=e.renderer.button(t.resetZoom,null,null,function(){e.zoomOut()},r,i&&i.hover).attr({align:n.position.align,title:t.resetZoomTitle}).addClass("highcharts-reset-zoom").add().align(n.position,!1,o)},zoomOut:function(){var e=this;f(e,"selection",{resetSelection:!0},function(){e.zoom()})},zoom:function(e){var t,n=this.pointer,r=!1,i;!e||e.resetSelection?u(this.axes,function(e){t=e.zoom()}):u(e.xAxis.concat(e.yAxis),function(e){var i=e.axis;n[i.isXAxis?"zoomX":"zoomY"]&&(t=i.zoom(e.min,e.max),i.displayBtn&&(r=!0))}),i=this.resetZoomButton,r&&!i?this.showResetZoom():!r&&h(i)&&(this.resetZoomButton=i.destroy()),t&&this.redraw(v(this.options.chart.animation,e&&e.animation,100>this.pointCount))},pan:function(e,t){var n=this,r=n.hoverPoints,s;r&&u(r,function(e){e.setState()}),u("xy"===t?[1,0]:[1],function(t){t=n[t?"xAxis":"yAxis"][0];var r=t.horiz,i=e[r?"chartX":"chartY"],r=r?"mouseDownX":"mouseDownY",o=n[r],u=(t.pointRange||0)/2,a=t.getExtremes(),f=t.toValue(o-i,!0)+u,u=t.toValue(o+t.len-i,!0)-u,l=u<f,o=l?u:f,f=l?f:u,u=Math.min(a.dataMin,t.toValue(t.toPixels(a.min)-t.minPixelPadding)),l=Math.max(a.dataMax,t.toValue(t.toPixels(a.max)+t.minPixelPadding)),c;c=u-o,0<c&&(f+=c,o=u),c=f-l,0<c&&(f=l,o-=c),t.series.length&&o!==a.min&&f!==a.max&&(t.setExtremes(o,f,!1,!1,{trigger:"pan"}),s=!0),n[r]=i}),s&&n.redraw(!1),i(n.container,{cursor:"move"})}}),a(m.prototype,{select:function(e,t){var n=this,r=n.series,i=r.chart;e=v(e,!n.selected),n.firePointEvent(e?"select":"unselect",{accumulate:t},function(){n.selected=n.options.selected=e,r.options.data[c(n,r.data)]=n.options,n.setState(e&&"select"),t||u(i.getSelectedPoints(),function(e){e.selected&&e!==n&&(e.selected=e.options.selected=!1,r.options.data[c(e,r.data)]=e.options,e.setState(""),e.firePointEvent("unselect"))})})},onMouseOver:function(e){var t=this.series.chart,n=t.pointer;e=e?n.normalize(e):n.getChartCoordinatesFromPoint(this,t.inverted),n.runPointActions(e,this)},onMouseOut:function(){var e=this.series.chart;this.firePointEvent("mouseOut"),u(e.hoverPoints||[],function(e){e.setState()}),e.hoverPoints=e.hoverPoint=null},importEvents:function(){if(!this.hasImportedEvents){var n=this,r=d(n.series.options.point,n.options).events;n.events=r,e.objectEach(r,function(e,r){t(n,r,e)}),this.hasImportedEvents=!0}},setState:function(e,t){var n=Math.floor(this.plotX),r=this.plotY,i=this.series,s=i.options.states[e]||{},u=o[i.type].marker&&i.options.marker,f=u&&!1===u.enabled,l=u&&u.states&&u.states[e]||{},c=!1===l.enabled,h=i.stateMarkerGraphic,p=this.marker||{},d=i.chart,m=i.halo,g,y=u&&i.markerAttribs;e=e||"",e===this.state&&!t||this.selected&&"select"!==e||!1===s.enabled||e&&(c||f&&!1===l.enabled)||e&&p.states&&p.states[e]&&!1===p.states[e].enabled||(y&&(g=i.markerAttribs(this,e)),this.graphic?(this.state&&this.graphic.removeClass("highcharts-point-"+this.state),e&&this.graphic.addClass("highcharts-point-"+e),this.graphic.attr(i.pointAttribs(this,e)),g&&this.graphic.animate(g,v(d.options.chart.animation,l.animation,u.animation)),h&&h.hide()):(e&&l&&(u=p.symbol||i.symbol,h&&h.currentSymbol!==u&&(h=h.destroy()),h?h[t?"animate":"attr"]({x:g.x,y:g.y}):u&&(i.stateMarkerGraphic=h=d.renderer.symbol(u,g.x,g.y,g.width,g.height).add(i.markerGroup),h.currentSymbol=u),h&&h.attr(i.pointAttribs(this,e))),h&&(h[e&&d.isInsidePlot(n,r,d.inverted)?"show":"hide"](),h.element.point=this)),(n=s.halo)&&n.size?(m||(i.halo=m=d.renderer.path().add((this.graphic||h).parentGroup)),m[t?"animate":"attr"]({d:this.haloPath(n.size)}),m.attr({"class":"highcharts-halo highcharts-color-"+v(this.colorIndex,i.colorIndex)}),m.point=this,m.attr(a({fill:this.color||i.color,"fill-opacity":n.opacity,zIndex:-1},n.attributes))):m&&m.point&&m.point.haloPath&&m.animate({d:m.point.haloPath(0)}),this.state=e)},haloPath:function(e){return this.series.chart.renderer.symbols.circle(Math.floor(this.plotX)-e,this.plotY-e,2*e,2*e)}}),a(g.prototype,{onMouseOver:function(){var e=this.chart,t=e.hoverSeries;t&&t!==this&&t.onMouseOut(),this.options.events.mouseOver&&f(this,"mouseOver"),this.setState("hover"),e.hoverSeries=this},onMouseOut:function(){var e=this.options,t=this.chart,n=t.tooltip,r=t.hoverPoint;t.hoverSeries=null,r&&r.onMouseOut(),this&&e.events.mouseOut&&f(this,"mouseOut"),!n||this.stickyTracking||n.shared&&!this.noSharedTooltip||n.hide(),this.setState()},setState:function(e){var t=this,n=t.options,r=t.graph,i=n.states,s=n.lineWidth,n=0;e=e||"";if(t.state!==e&&(u([t.group,t.markerGroup,t.dataLabelsGroup],function(n){n&&(t.state&&n.removeClass("highcharts-series-"+t.state),e&&n.addClass("highcharts-series-"+e))}),t.state=e,!i[e]||!1!==i[e].enabled)&&(e&&(s=i[e].lineWidth||s+(i[e].lineWidthPlus||0)),r&&!r.dashstyle))for(s={"stroke-width":s},r.animate(s,v(t.chart.options.chart.animation,i[e]&&i[e].animation));t["zone-graph-"+n];)t["zone-graph-"+n].attr(s),n+=1},setVisible:function(e,t){var n=this,r=n.chart,i=n.legendItem,s,o=r.options.chart.ignoreHiddenSeries,a=n.visible;s=(n.visible=e=n.options.visible=n.userOptions.visible=void 0===e?!a:e)?"show":"hide",u(["group","dataLabelsGroup","markerGroup","tracker","tt"],function(e){n[e]&&n[e][s]()}),(r.hoverSeries===n||(r.hoverPoint&&r.hoverPoint.series)===n)&&n.onMouseOut(),i&&r.legend.colorizeItem(n,e),n.isDirty=!0,n.options.stacking&&u(r.series,function(e){e.options.stacking&&e.visible&&(e.isDirty=!0)}),u(n.linkedSeries,function(t){t.setVisible(e,!1)}),o&&(r.isDirtyBox=!0),!1!==t&&r.redraw(),f(n,s)},show:function(){this.setVisible(!0)},hide:function(){this.setVisible(!1)},select:function(e){this.selected=e=void 0===e?!this.selected:e,this.checkbox&&(this.checkbox.checked=e),f(this,e?"select":"unselect")},drawTracker:w.drawTrackerGraph})}(e),function(e){var t=e.Chart,n=e.each,r=e.inArray,i=e.isArray,s=e.isObject,o=e.pick,u=e.splat;t.prototype.setResponsive=function(t){var r=this.options.responsive,i=[],s=this.currentResponsive;r&&r.rules&&n(r.rules,function(n){void 0===n._id&&(n._id=e.uniqueKey()),this.matchResponsiveRule(n,i,t)},this);var o=e.merge.apply(0,e.map(i,function(t){return e.find(r.rules,function(e){return e._id===t}).chartOptions})),i=i.toString()||void 0;i!==(s&&s.ruleIds)&&(s&&this.update(s.undoOptions,t),i?(this.currentResponsive={ruleIds:i,mergedOptions:o,undoOptions:this.currentOptions(o)},this.update(o,t)):this.currentResponsive=void 0)},t.prototype.matchResponsiveRule=function(e,t){var n=e.condition;(n.callback||function(){return this.chartWidth<=o(n.maxWidth,Number.MAX_VALUE)&&this.chartHeight<=o(n.maxHeight,Number.MAX_VALUE)&&this.chartWidth>=o(n.minWidth,0)&&this.chartHeight>=o(n.minHeight,0)}).call(this)&&t.push(e._id)},t.prototype.currentOptions=function(t){function n(t,o,f,l){var c;e.objectEach(t,function(e,a){if(!l&&-1<r(a,["series","xAxis","yAxis"]))for(t[a]=u(t[a]),f[a]=[],c=0;c<t[a].length;c++)o[a][c]&&(f[a][c]={},n(e[c],o[a][c],f[a][c],l+1));else s(e)?(f[a]=i(e)?[]:{},n(e,o[a]||{},f[a],l+1)):f[a]=o[a]||null})}var o={};return n(t,this.options,o,0),o}}(e),e}),function(e){"object"==typeof module&&module.exports?module.exports=e:e(Highcharts)}(function(e){(function(e){function t(e,t){this.init(e,t)}var n=e.CenteredSeriesMixin,r=e.each,i=e.extend,s=e.merge,o=e.splat;i(t.prototype,{coll:"pane",init:function(e,t){this.chart=t,this.background=[],t.pane.push(this),this.setOptions(e)},setOptions:function(e){this.options=s(this.defaultOptions,this.chart.angular?{background:{}}:void 0,e)},render:function(){var e=this.options,t=this.options.background,n=this.chart.renderer;this.group||(this.group=n.g("pane-group").attr({zIndex:e.zIndex||0}).add()),this.updateCenter();if(t)for(t=o(t),e=Math.max(t.length,this.background.length||0),n=0;n<e;n++)t[n]&&this.axis?this.renderBackground(s(this.defaultBackgroundOptions,t[n]),n):this.background[n]&&(this.background[n]=this.background[n].destroy(),this.background.splice(n,1))},renderBackground:function(e,t){var n="animate";this.background[t]||(this.background[t]=this.chart.renderer.path().add(this.group),n="attr"),this.background[t][n]({d:this.axis.getPlotBandPath(e.from,e.to,e)}).attr({fill:e.backgroundColor,stroke:e.borderColor,"stroke-width":e.borderWidth,"class":"highcharts-pane "+(e.className||"")})},defaultOptions:{center:["50%","50%"],size:"85%",startAngle:0},defaultBackgroundOptions:{shape:"circle",borderWidth:1,borderColor:"#cccccc",backgroundColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,"#ffffff"],[1,"#e6e6e6"]]},from:-Number.MAX_VALUE,innerRadius:0,to:Number.MAX_VALUE,outerRadius:"105%"},updateCenter:function(e){this.center=(e||this.axis||{}).center=n.getCenter.call(this)},update:function(e,t){s(!0,this.options,e),this.setOptions(this.options),this.render(),r(this.chart.axes,function(e){e.pane===this&&(e.pane=null,e.update({},t))},this)}}),e.Pane=t})(e),function(e){var t=e.each,n=e.extend,r=e.map,i=e.merge,s=e.noop,o=e.pick,u=e.pInt,a=e.wrap,f,l,c=e.Axis.prototype;e=e.Tick.prototype,f={getOffset:s,redraw:function(){this.isDirty=!1},render:function(){this.isDirty=!1},setScale:s,setCategories:s,setTitle:s},l={defaultRadialGaugeOptions:{labels:{align:"center",x:0,y:null},minorGridLineWidth:0,minorTickInterval:"auto",minorTickLength:10,minorTickPosition:"inside",minorTickWidth:1,tickLength:10,tickPosition:"inside",tickWidth:2,title:{rotation:0},zIndex:2},defaultRadialXOptions:{gridLineWidth:1,labels:{align:null,distance:15,x:0,y:null},maxPadding:0,minPadding:0,showLastLabel:!1,tickLength:0},defaultRadialYOptions:{gridLineInterpolation:"circle",labels:{align:"right",x:-3,y:-2},showLastLabel:!1,title:{x:4,text:null,rotation:90}},setOptions:function(e){e=this.options=i(this.defaultOptions,this.defaultRadialOptions,e),e.plotBands||(e.plotBands=[])},getOffset:function(){c.getOffset.call(this),this.chart.axisOffset[this.side]=0},getLinePath:function(e,t){e=this.center;var n=this.chart,r=o(t,e[2]/2-this.offset);return this.isCircular||void 0!==t?t=this.chart.renderer.symbols.arc(this.left+e[0],this.top+e[1],r,r,{start:this.startAngleRad,end:this.endAngleRad,open:!0,innerR:0}):(t=this.postTranslate
(this.angleRad,r),t=["M",e[0]+n.plotLeft,e[1]+n.plotTop,"L",t.x,t.y]),t},setAxisTranslation:function(){c.setAxisTranslation.call(this),this.center&&(this.transA=this.isCircular?(this.endAngleRad-this.startAngleRad)/(this.max-this.min||1):this.center[2]/2/(this.max-this.min||1),this.minPixelPadding=this.isXAxis?this.transA*this.minPointOffset:0)},beforeSetTickPositions:function(){if(this.autoConnect=this.isCircular&&void 0===o(this.userMax,this.options.max)&&this.endAngleRad-this.startAngleRad===2*Math.PI)this.max+=this.categories&&1||this.pointRange||this.closestPointRange||0},setAxisSize:function(){c.setAxisSize.call(this),this.isRadial&&(this.pane.updateCenter(this),this.isCircular&&(this.sector=this.endAngleRad-this.startAngleRad),this.len=this.width=this.height=this.center[2]*o(this.sector,1)/2)},getPosition:function(e,t){return this.postTranslate(this.isCircular?this.translate(e):this.angleRad,o(this.isCircular?t:this.translate(e),this.center[2]/2)-this.offset)},postTranslate:function(e,t){var n=this.chart,r=this.center;return e=this.startAngleRad+e,{x:n.plotLeft+r[0]+Math.cos(e)*t,y:n.plotTop+r[1]+Math.sin(e)*t}},getPlotBandPath:function(e,t,n){var i=this.center,s=this.startAngleRad,a=i[2]/2,f=[o(n.outerRadius,"100%"),n.innerRadius,o(n.thickness,10)],l=Math.min(this.offset,0),c=/%$/,p,d=this.isCircular;return"polygon"===this.options.gridLineInterpolation?i=this.getPlotLinePath(e).concat(this.getPlotLinePath(t,!0)):(e=Math.max(e,this.min),t=Math.min(t,this.max),d||(f[0]=this.translate(e),f[1]=this.translate(t)),f=r(f,function(e){return c.test(e)&&(e=u(e,10)*a/100),e}),"circle"!==n.shape&&d?(e=s+this.translate(e),t=s+this.translate(t)):(e=-Math.PI/2,t=1.5*Math.PI,p=!0),f[0]-=l,f[2]-=l,i=this.chart.renderer.symbols.arc(this.left+i[0],this.top+i[1],f[0],f[0],{start:Math.min(e,t),end:Math.max(e,t),innerR:o(f[1],f[0]-f[2]),open:p})),i},getPlotLinePath:function(e,n){var r=this,i=r.center,s=r.chart,o=r.getPosition(e),u,a,f;return r.isCircular?f=["M",i[0]+s.plotLeft,i[1]+s.plotTop,"L",o.x,o.y]:"circle"===r.options.gridLineInterpolation?(e=r.translate(e))&&(f=r.getLinePath(0,e)):(t(s.xAxis,function(e){e.pane===r.pane&&(u=e)}),f=[],e=r.translate(e),i=u.tickPositions,u.autoConnect&&(i=i.concat([i[0]])),n&&(i=[].concat(i).reverse()),t(i,function(t,n){a=u.getPosition(t,e),f.push(n?"L":"M",a.x,a.y)})),f},getTitlePosition:function(){var e=this.center,t=this.chart,n=this.options.title;return{x:t.plotLeft+e[0]+(n.x||0),y:t.plotTop+e[1]-{high:.5,middle:.25,low:0}[n.align]*e[2]+(n.y||0)}}},a(c,"init",function(e,t,r){var s=t.angular,u=t.polar,a=r.isX,c=s&&a,h,v=t.options,m=this.pane=t.pane[r.pane||0],g=m.options;if(s){if(n(this,c?f:l),h=!a)this.defaultRadialOptions=this.defaultRadialGaugeOptions}else u&&(n(this,l),this.defaultRadialOptions=(h=a)?this.defaultRadialXOptions:i(this.defaultYAxisOptions,this.defaultRadialYOptions));s||u?(this.isRadial=!0,t.inverted=!1,v.chart.zoomType=null):this.isRadial=!1,h&&(m.axis=this),e.call(this,t,r),c||!s&&!u||(e=this.options,this.angleRad=(e.angle||0)*Math.PI/180,this.startAngleRad=(g.startAngle-90)*Math.PI/180,this.endAngleRad=(o(g.endAngle,g.startAngle+360)-90)*Math.PI/180,this.offset=e.offset||0,this.isCircular=h)}),a(c,"autoLabelAlign",function(e){if(!this.isRadial)return e.apply(this,[].slice.call(arguments,1))}),a(e,"getPosition",function(e,t,n,r,i){var s=this.axis;return s.getPosition?s.getPosition(n):e.call(this,t,n,r,i)}),a(e,"getLabelPosition",function(e,t,n,r,i,s,u,a,f){var l=this.axis,c=s.y,h=20,p=s.align,d=(l.translate(this.pos)+l.startAngleRad+Math.PI/2)/Math.PI*180%360;return l.isRadial?(e=l.getPosition(this.pos,l.center[2]/2+o(s.distance,-25)),"auto"===s.rotation?r.attr({rotation:d}):null===c&&(c=l.chart.renderer.fontMetrics(r.styles.fontSize).b-r.getBBox().height/2),null===p&&(l.isCircular?(this.label.getBBox().width>l.len*l.tickInterval/(l.max-l.min)&&(h=0),p=d>h&&d<180-h?"left":d>180+h&&d<360-h?"right":"center"):p="center",r.attr({align:p})),e.x+=s.x,e.y+=c):e=e.call(this,t,n,r,i,s,u,a,f),e}),a(e,"getMarkPath",function(e,t,n,r,i,s,o){var u=this.axis;return u.isRadial?(e=u.getPosition(this.pos,u.center[2]/2+r),t=["M",t,n,"L",e.x,e.y]):t=e.call(this,t,n,r,i,s,o),t})}(e),function(e){var t=e.each,n=e.noop,r=e.pick,i=e.Series,s=e.seriesType,o=e.seriesTypes;s("arearange","area",{lineWidth:1,marker:null,threshold:null,tooltip:{pointFormat:'<span style="color:{series.color}">\u25cf</span> {series.name}: <b>{point.low}</b> - <b>{point.high}</b><br/>'},trackByArea:!0,dataLabels:{align:null,verticalAlign:null,xLow:0,xHigh:0,yLow:0,yHigh:0},states:{hover:{halo:!1}}},{pointArrayMap:["low","high"],dataLabelCollections:["dataLabel","dataLabelUpper"],toYData:function(e){return[e.low,e.high]},pointValKey:"low",deferTranslatePolar:!0,highToXY:function(e){var t=this.chart,n=this.xAxis.postTranslate(e.rectPlotX,this.yAxis.len-e.plotHigh);e.plotHighX=n.x-t.plotLeft,e.plotHigh=n.y-t.plotTop},translate:function(){var e=this,n=e.yAxis,r=!!e.modifyValue;o.area.prototype.translate.apply(e),t(e.points,function(t){var i=t.low,s=t.high,o=t.plotY;null===s||null===i?t.isNull=!0:(t.plotLow=o,t.plotHigh=n.translate(r?e.modifyValue(s,t):s,0,1,0,1),r&&(t.yBottom=t.plotHigh))}),this.chart.polar&&t(this.points,function(t){e.highToXY(t)})},getGraphPath:function(e){var t=[],n=[],i,s=o.area.prototype.getGraphPath,u,a,l;l=this.options;var c=this.chart.polar&&!1!==l.connectEnds,h=l.connectNulls,p=l.step;e=e||this.points;for(i=e.length;i--;)u=e[i],u.isNull||c||h||e[i+1]&&!e[i+1].isNull||n.push({plotX:u.plotX,plotY:u.plotY,doCurve:!1}),a={polarPlotY:u.polarPlotY,rectPlotX:u.rectPlotX,yBottom:u.yBottom,plotX:r(u.plotHighX,u.plotX),plotY:u.plotHigh,isNull:u.isNull},n.push(a),t.push(a),u.isNull||c||h||e[i-1]&&!e[i-1].isNull||n.push({plotX:u.plotX,plotY:u.plotY,doCurve:!1});return e=s.call(this,e),p&&(!0===p&&(p="left"),l.step={left:"right",center:"center",right:"left"}[p]),t=s.call(this,t),n=s.call(this,n),l.step=p,l=[].concat(e,t),this.chart.polar||"M"!==n[0]||(n[0]="L"),this.graphPath=l,this.areaPath=this.areaPath.concat(e,n),l.isArea=!0,l.xMap=e.xMap,this.areaPath.xMap=e.xMap,l},drawDataLabels:function(){var e=this.data,t=e.length,n,r=[],s=i.prototype,o=this.options.dataLabels,u=o.align,a=o.verticalAlign,f=o.inside,l,c,h=this.chart.inverted;if(o.enabled||this._hasPointLabels){for(n=t;n--;)if(l=e[n])c=f?l.plotHigh<l.plotLow:l.plotHigh>l.plotLow,l.y=l.high,l._plotY=l.plotY,l.plotY=l.plotHigh,r[n]=l.dataLabel,l.dataLabel=l.dataLabelUpper,l.below=c,h?u||(o.align=c?"right":"left"):a||(o.verticalAlign=c?"top":"bottom"),o.x=o.xHigh,o.y=o.yHigh;s.drawDataLabels&&s.drawDataLabels.apply(this,arguments);for(n=t;n--;)if(l=e[n])c=f?l.plotHigh<l.plotLow:l.plotHigh>l.plotLow,l.dataLabelUpper=l.dataLabel,l.dataLabel=r[n],l.y=l.low,l.plotY=l._plotY,l.below=!c,h?u||(o.align=c?"left":"right"):a||(o.verticalAlign=c?"bottom":"top"),o.x=o.xLow,o.y=o.yLow;s.drawDataLabels&&s.drawDataLabels.apply(this,arguments)}o.align=u,o.verticalAlign=a},alignDataLabel:function(){o.column.prototype.alignDataLabel.apply(this,arguments)},setStackedPoints:n,getSymbol:n,drawPoints:n})}(e),function(e){var t=e.seriesType;t("areasplinerange","arearange",null,{getPointSpline:e.seriesTypes.spline.prototype.getPointSpline})}(e),function(e){var t=e.defaultPlotOptions,n=e.each,r=e.merge,i=e.noop,s=e.pick,o=e.seriesType,u=e.seriesTypes.column.prototype;o("columnrange","arearange",r(t.column,t.arearange,{lineWidth:1,pointRange:null}),{translate:function(){var e=this,t=e.yAxis,r=e.xAxis,i=r.startAngleRad,o,a=e.chart,f=e.xAxis.isRadial,l;u.translate.apply(e),n(e.points,function(n){var u=n.shapeArgs,h=e.options.minPointLength,p,v;n.plotHigh=l=t.translate(n.high,0,1,0,1),n.plotLow=n.plotY,v=l,p=s(n.rectPlotY,n.plotY)-l,Math.abs(p)<h?(h-=p,p+=h,v-=h/2):0>p&&(p*=-1,v-=p),f?(o=n.barX+i,n.shapeType="path",n.shapeArgs={d:e.polarArc(v+p,v,o,o+n.pointWidth)}):(u.height=p,u.y=v,n.tooltipPos=a.inverted?[t.len+t.pos-a.plotLeft-v-p/2,r.len+r.pos-a.plotTop-u.x-u.width/2,p]:[r.left-a.plotLeft+u.x+u.width/2,t.pos-a.plotTop+v+p/2,p])})},directTouch:!0,trackerGroups:["group","dataLabelsGroup"],drawGraph:i,crispCol:u.crispCol,drawPoints:u.drawPoints,drawTracker:u.drawTracker,getColumnMetrics:u.getColumnMetrics,animate:function(){return u.animate.apply(this,arguments)},polarArc:function(){return u.polarArc.apply(this,arguments)},pointAttribs:u.pointAttribs})}(e),function(e){var t=e.each,n=e.isNumber,r=e.merge,i=e.pick,s=e.pInt,o=e.Series,u=e.seriesType,a=e.TrackerMixin;u("gauge","line",{dataLabels:{enabled:!0,defer:!1,y:15,borderRadius:3,crop:!1,verticalAlign:"top",zIndex:2,borderWidth:1,borderColor:"#cccccc"},dial:{},pivot:{},tooltip:{headerFormat:""},showInLegend:!1},{angular:!0,directTouch:!0,drawGraph:e.noop,fixedBox:!0,forceDL:!0,noSharedTooltip:!0,trackerGroups:["group","dataLabelsGroup"],translate:function(){var e=this.yAxis,o=this.options,u=e.center;this.generatePoints(),t(this.points,function(t){var a=r(o.dial,t.dial),f=s(i(a.radius,80))*u[2]/200,l=s(i(a.baseLength,70))*f/100,c=s(i(a.rearLength,10))*f/100,h=a.baseWidth||3,d=a.topWidth||1,v=o.overshoot,g=e.startAngleRad+e.translate(t.y,null,null,null,!0);n(v)?(v=v/180*Math.PI,g=Math.max(e.startAngleRad-v,Math.min(e.endAngleRad+v,g))):!1===o.wrap&&(g=Math.max(e.startAngleRad,Math.min(e.endAngleRad,g))),g=180*g/Math.PI,t.shapeType="path",t.shapeArgs={d:a.path||["M",-c,-h/2,"L",l,-h/2,f,-d/2,f,d/2,l,h/2,-c,h/2,"z"],translateX:u[0],translateY:u[1],rotation:g},t.plotX=u[0],t.plotY=u[1]})},drawPoints:function(){var e=this,n=e.yAxis.center,s=e.pivot,o=e.options,u=o.pivot,a=e.chart.renderer;t(e.points,function(t){var n=t.graphic,i=t.shapeArgs,s=i.d,u=r(o.dial,t.dial);n?(n.animate(i),i.d=s):(t.graphic=a[t.shapeType](i).attr({rotation:i.rotation,zIndex:1}).addClass("highcharts-dial").add(e.group),t.graphic.attr({stroke:u.borderColor||"none","stroke-width":u.borderWidth||0,fill:u.backgroundColor||"#000000"}))}),s?s.animate({translateX:n[0],translateY:n[1]}):(e.pivot=a.circle(0,0,i(u.radius,5)).attr({zIndex:2}).addClass("highcharts-pivot").translate(n[0],n[1]).add(e.group),e.pivot.attr({"stroke-width":u.borderWidth||0,stroke:u.borderColor||"#cccccc",fill:u.backgroundColor||"#000000"}))},animate:function(e){var n=this;e||(t(n.points,function(e){var t=e.graphic;t&&(t.attr({rotation:180*n.yAxis.startAngleRad/Math.PI}),t.animate({rotation:e.shapeArgs.rotation},n.options.animation))}),n.animate=null)},render:function(){this.group=this.plotGroup("group","series",this.visible?"visible":"hidden",this.options.zIndex,this.chart.seriesGroup),o.prototype.render.call(this),this.group.clip(this.chart.clipRect)},setData:function(e,t){o.prototype.setData.call(this,e,!1),this.processData(),this.generatePoints(),i(t,!0)&&this.chart.redraw()},drawTracker:a&&a.drawTrackerPoint},{setState:function(e){this.state=e}})}(e),function(e){var t=e.each,n=e.noop,r=e.pick,i=e.seriesType,s=e.seriesTypes;i("boxplot","column",{threshold:null,tooltip:{pointFormat:'<span style="color:{point.color}">\u25cf</span> <b> {series.name}</b><br/>Maximum: {point.high}<br/>Upper quartile: {point.q3}<br/>Median: {point.median}<br/>Lower quartile: {point.q1}<br/>Minimum: {point.low}<br/>'},whiskerLength:"50%",fillColor:"#ffffff",lineWidth:1,medianWidth:2,states:{hover:{brightness:-0.3}},whiskerWidth:2},{pointArrayMap:["low","q1","median","q3","high"],toYData:function(e){return[e.low,e.q1,e.median,e.q3,e.high]},pointValKey:"high",pointAttribs:function(e){var t=this.options,n=e&&e.color||this.color;return{fill:e.fillColor||t.fillColor||n,stroke:t.lineColor||n,"stroke-width":t.lineWidth||0}},drawDataLabels:n,translate:function(){var e=this.yAxis,n=this.pointArrayMap;s.column.prototype.translate.apply(this),t(this.points,function(r){t(n,function(t){null!==r[t]&&(r[t+"Plot"]=e.translate(r[t],0,1,0,1))})})},drawPoints:function(){var e=this,n=e.options,i=e.chart.renderer,s,o,u,a,f,l,c=0,h,p,d,v,m=!1!==e.doQuartiles,g,y=e.options.whiskerLength;t(e.points,function(t){var E=t.graphic,S=E?"animate":"attr",x=t.shapeArgs,T={},N={},C={},L=t.color||e.color;void 0!==t.plotY&&(h=x.width,p=Math.floor(x.x),d=p+h,v=Math.round(h/2),s=Math.floor(m?t.q1Plot:t.lowPlot),o=Math.floor(m?t.q3Plot:t.lowPlot),u=Math.floor(t.highPlot),a=Math.floor(t.lowPlot),E||(t.graphic=E=i.g("point").add(e.group),t.stem=i.path().addClass("highcharts-boxplot-stem").add(E),y&&(t.whiskers=i.path().addClass("highcharts-boxplot-whisker").add(E)),m&&(t.box=i.path(void 0).addClass("highcharts-boxplot-box").add(E)),t.medianShape=i.path(void 0).addClass("highcharts-boxplot-median").add(E)),T.stroke=t.stemColor||n.stemColor||L,T["stroke-width"]=r(t.stemWidth,n.stemWidth,n.lineWidth),T.dashstyle=t.stemDashStyle||n.stemDashStyle,t.stem.attr(T),y&&(N.stroke=t.whiskerColor||n.whiskerColor||L,N["stroke-width"]=r(t.whiskerWidth,n.whiskerWidth,n.lineWidth),t.whiskers.attr(N)),m&&(E=e.pointAttribs(t),t.box.attr(E)),C.stroke=t.medianColor||n.medianColor||L,C["stroke-width"]=r(t.medianWidth,n.medianWidth,n.lineWidth),t.medianShape.attr(C),l=t.stem.strokeWidth()%2/2,c=p+v+l,t.stem[S]({d:["M",c,o,"L",c,u,"M",c,s,"L",c,a]}),m&&(l=t.box.strokeWidth()%2/2,s=Math.floor(s)+l,o=Math.floor(o)+l,p+=l,d+=l,t.box[S]({d:["M",p,o,"L",p,s,"L",d,s,"L",d,o,"L",p,o,"z"]})),y&&(l=t.whiskers.strokeWidth()%2/2,u+=l,a+=l,g=/%$/.test(y)?v*parseFloat(y)/100:y/2,t.whiskers[S]({d:["M",c-g,u,"L",c+g,u,"M",c-g,a,"L",c+g,a]})),f=Math.round(t.medianPlot),l=t.medianShape.strokeWidth()%2/2,f+=l,t.medianShape[S]({d:["M",p,f,"L",d,f]}))})},setStackedPoints:n})}(e),function(e){var t=e.each,n=e.noop,r=e.seriesType,i=e.seriesTypes;r("errorbar","boxplot",{color:"#000000",grouping:!1,linkedTo:":previous",tooltip:{pointFormat:'<span style="color:{point.color}">\u25cf</span> {series.name}: <b>{point.low}</b> - <b>{point.high}</b><br/>'},whiskerWidth:null},{type:"errorbar",pointArrayMap:["low","high"],toYData:function(e){return[e.low,e.high]},pointValKey:"high",doQuartiles:!1,drawDataLabels:i.arearange?function(){var e=this.pointValKey;i.arearange.prototype.drawDataLabels.call(this),t(this.data,function(t){t.y=t[e]})}:n,getColumnMetrics:function(){return this.linkedParent&&this.linkedParent.columnMetrics||i.column.prototype.getColumnMetrics.call(this)}})}(e),function(e){var t=e.correctFloat,n=e.isNumber,r=e.pick,i=e.Point,s=e.Series,o=e.seriesType,u=e.seriesTypes;o("waterfall","column",{dataLabels:{inside:!0},lineWidth:1,lineColor:"#333333",dashStyle:"dot",borderColor:"#333333",states:{hover:{lineWidthPlus:0}}},{pointValKey:"y",translate:function(){var e=this.options,n=this.yAxis,i,s,o,a,f,l,c,p,d,v,m=r(e.minPointLength,5),g=m/2,y=e.threshold,b=e.stacking,E;u.column.prototype.translate.apply(this),p=d=y,s=this.points,i=0;for(e=s.length;i<e;i++)o=s[i],c=this.processedYData[i],a=o.shapeArgs,f=b&&n.stacks[(this.negStacks&&c<y?"-":"")+this.stackKey],E=this.getStackIndicator(E,o.x,this.index),v=f?f[o.x].points[E.key]:[0,c],o.isSum?o.y=t(c):o.isIntermediateSum&&(o.y=t(c-d)),l=Math.max(p,p+o.y)+v[0],a.y=n.translate(l,0,1,0,1),o.isSum?(a.y=n.translate(v[1],0,1,0,1),a.height=Math.min(n.translate(v[0],0,1,0,1),n.len)-a.y):o.isIntermediateSum?(a.y=n.translate(v[1],0,1,0,1),a.height=Math.min(n.translate(d,0,1,0,1),n.len)-a.y,d=v[1]):(a.height=0<c?n.translate(p,0,1,0,1)-a.y:n.translate(p,0,1,0,1)-n.translate(p-c,0,1,0,1),p+=f&&f[o.x]?f[o.x].total:c),0>a.height&&(a.y+=a.height,a.height*=-1),o.plotY=a.y=Math.round(a.y)-this.borderWidth%2/2,a.height=Math.max(Math.round(a.height),.001),o.yBottom=a.y+a.height,a.height<=m&&!o.isNull?(a.height=m,a.y-=g,o.plotY=a.y,o.minPointLengthOffset=0>o.y?-g:g):o.minPointLengthOffset=0,a=o.plotY+(o.negative?a.height:0),this.chart.inverted?o.tooltipPos[0]=n.len-a:o.tooltipPos[1]=a},processData:function(e){var n=this.yData,r=this.options.data,i,o=n.length,u,a,f,l,c,h;a=u=f=l=this.options.threshold||0;for(h=0;h<o;h++)c=n[h],i=r&&r[h]?r[h]:{},"sum"===c||i.isSum?n[h]=t(a):"intermediateSum"===c||i.isIntermediateSum?n[h]=t(u):(a+=c,u+=c),f=Math.min(a,f),l=Math.max(a,l);s.prototype.processData.call(this,e),this.options.stacking||(this.dataMin=f,this.dataMax=l)},toYData:function(e){return e.isSum?0===e.x?null:"sum":e.isIntermediateSum?0===e.x?null:"intermediateSum":e.y},pointAttribs:function(e,t){var n=this.options.upColor;return n&&!e.options.color&&(e.color=0<e.y?n:null),e=u.column.prototype.pointAttribs.call(this,e,t),delete e.dashstyle,e},getGraphPath:function(){return["M",0,0]},getCrispPath:function(){var e=this.data,t=e.length,n=this.graph.strokeWidth()+this.borderWidth,n=Math.round(n)%2/2,r=this.yAxis.reversed,i=[],s,o,u;for(u=1;u<t;u++){o=e[u].shapeArgs,s=e[u-1].shapeArgs,o=["M",s.x+s.width,s.y+e[u-1].minPointLengthOffset+n,"L",o.x,s.y+e[u-1].minPointLengthOffset+n];if(0>e[u-1].y&&!r||0<e[u-1].y&&r)o[2]+=s.height,o[5]+=s.height;i=i.concat(o)}return i},drawGraph:function(){s.prototype.drawGraph.call(this),this.graph.attr({d:this.getCrispPath()})},setStackedPoints:function(){var e=this.options,t,n;s.prototype.setStackedPoints.apply(this,arguments),t=this.stackedYData?this.stackedYData.length:0;for(n=1;n<t;n++)e.data[n].isSum||e.data[n].isIntermediateSum||(this.stackedYData[n]+=this.stackedYData[n-1])},getExtremes:function(){if(this.options.stacking)return s.prototype.getExtremes.apply(this,arguments)}},{getClassName:function(){var e=i.prototype.getClassName.call(this);return this.isSum?e+=" highcharts-sum":this.isIntermediateSum&&(e+=" highcharts-intermediate-sum"),e},isValid:function(){return n(this.y,!0)||this.isSum||this.isIntermediateSum}})}(e),function(e){var t=e.Series,n=e.seriesType,r=e.seriesTypes;n("polygon","scatter",{marker:{enabled:!1,states:{hover:{enabled:!1}}},stickyTracking:!1,tooltip:{followPointer:!0,pointFormat:""},trackByArea:!0},{type:"polygon",getGraphPath:function(){for(var e=t.prototype.getGraphPath.call(this),n=e.length+1;n--;)(n===e.length||"M"===e[n])&&0<n&&e.splice(n,0,"z");return this.areaPath=e},drawGraph:function(){this.options.fillColor=this.color,r.area.prototype.drawGraph.call(this)},drawLegendSymbol:e.LegendSymbolMixin.drawRectangle,drawTracker:t.prototype.drawTracker,setStackedPoints:e.noop})}(e),function(e){var t=e.arrayMax,n=e.arrayMin,r=e.Axis,i=e.color,s=e.each,o=e.isNumber,u=e.noop,a=e.pick,f=e.pInt,l=e.Point,c=e.Series,h=e.seriesType,p=e.seriesTypes;h("bubble","scatter",{dataLabels:{formatter:function(){return this.point.z},inside:!0,verticalAlign:"middle"},marker:{lineColor:null,lineWidth:1,radius:null,states:{hover:{radiusPlus:0}},symbol:"circle"},minSize:8,maxSize:"20%",softThreshold:!1,states:{hover:{halo:{size:5}}},tooltip:{pointFormat:"({point.x}, {point.y}), Size: {point.z}"},turboThreshold:0,zThreshold:0,zoneAxis:"z"},{pointArrayMap:["y","z"],parallelArrays:["x","y","z"],trackerGroups:["group","dataLabelsGroup"],specialGroup:"group",bubblePadding:!0,zoneAxis:"z",directTouch:!0,pointAttribs:function(e,t){var n=a(this.options.marker.fillOpacity,.5);return e=c.prototype.pointAttribs.call(this,e,t),1!==n&&(e.fill=i(e.fill).setOpacity(n).get("rgba")),e},getRadii:function(e,t,n,r){var i,s,o,u=this.zData,a=[],f=this.options,l="width"!==f.sizeBy,c=f.zThreshold,h=t-e;s=0;for(i=u.length;s<i;s++)o=u[s],f.sizeByAbsoluteValue&&null!==o&&(o=Math.abs(o-c),t=Math.max(t-c,Math.abs(e-c)),e=0),null===o?o=null:o<e?o=n/2-1:(o=0<h?(o-e)/h:.5,l&&0<=o&&(o=Math.sqrt(o)),o=Math.ceil(n+o*(r-n))/2),a.push(o);this.radii=a},animate:function(e){var t=this.options.animation;e||(s(this.points,function(e){var n=e.graphic,r;n&&n.width&&(r={x:n.x,y:n.y,width:n.width,height:n.height},n.attr({x:e.plotX,y:e.plotY,width:1,height:1}),n.animate(r,t))}),this.animate=null)},translate:function(){var t,n=this.data,r,i,s=this.radii;p.scatter.prototype.translate.call(this);for(t=n.length;t--;)r=n[t],i=s?s[t]:0,o(i)&&i>=this.minPxSize/2?(r.marker=e.extend(r.marker,{radius:i,width:2*i,height:2*i}),r.dlBox={x:r.plotX-i,y:r.plotY-i,width:2*i,height:2*i}):r.shapeArgs=r.plotY=r.dlBox=void 0},alignDataLabel:p.column.prototype.alignDataLabel,buildKDTree:u,applyZones:u},{haloPath:function(e){return l.prototype.haloPath.call(this,0===e?0:(this.marker?this.marker.radius||0:0)+e)},ttBelow:!1}),r.prototype.beforePadding=function(){var e=this,r=this.len,i=this.chart,u=0,l=r,c=this.isXAxis,h=c?"xData":"yData",p=this.min,v={},g=Math.min(i.plotWidth,i.plotHeight),y=Number.MAX_VALUE,w=-Number.MAX_VALUE,E=this.max-p,S=r/E,x=[];s(this.series,function(r){var o=r.options;!r.bubblePadding||!r.visible&&i.options.chart.ignoreHiddenSeries||(e.allowZoomOutside=!0,x.push(r),c&&(s(["minSize","maxSize"],function(e){var t=o[e],n=/%$/.test(t),t=f(t);v[e]=n?g*t/100:t}),r.minPxSize=v.minSize,r.maxPxSize=Math.max(v.maxSize,v.minSize),r=r.zData,r.length&&(y=a(o.zMin,Math.min(y,Math.max(n(r),!1===o.displayNegative?o.zThreshold:-Number.MAX_VALUE))),w=a(o.zMax,Math.max(w,t(r))))))}),s(x,function(t){var n=t[h],r=n.length,i;c&&t.getRadii(y,w,t.minPxSize,t.maxPxSize);if(0<E)for(;r--;)o(n[r])&&e.dataMin<=n[r]&&n[r]<=e.dataMax&&(i=t.radii[r],u=Math.min((n[r]-p)*S-i,u),l=Math.max((n[r]-p)*S+i,l))}),x.length&&0<E&&!this.isLog&&(l-=r,S*=(r+u-l)/r,s([["min","userMin",u],["max","userMax",l]],function(t){void 0===a(e.options[t[0]],e[t[1]])&&(e[t[0]]+=t[2]/S)}))}}(e),function(e){function t(e,t){var n=this.chart,r=this.options.animation,i=this.group,s=this.markerGroup,o=this.xAxis.center,u=n.plotLeft,a=n.plotTop;n.polar?n.renderer.isSVG&&(!0===r&&(r={}),t?(e={translateX:o[0]+u,translateY:o[1]+a,scaleX:.001,scaleY:.001},i.attr(e),s&&s.attr(e)):(e={translateX:u,translateY:a,scaleX:1,scaleY:1},i.animate(e,r),s&&s.animate(e,r),this.animate=null)):e.call(this,t)}var n=e.each,r=e.pick,i=e.seriesTypes,s=e.wrap,o=e.Series.prototype,u=e.Pointer.prototype;o.searchPointByAngle=function(e){var t=this.chart,n=this.xAxis.pane.center;return this.searchKDTree({clientX:180+ -180/Math.PI*Math.atan2(e.chartX-n[0]-t.plotLeft,e.chartY-n[1]-t.plotTop)})},o.getConnectors=function(e,t,n,r){var i,s,o,u,a,f,l,c;return s=r?1:0,i=0<=t&&t<=e.length-1?t:0>t?e.length-1+t:0,t=0>i-1?e.length-(1+s):i-1,s=i+1>e.length-1?s:i+1,o=e[t],s=e[s],u=o.plotX,o=o.plotY,a=s.plotX,f=s.plotY,s=e[i].plotX,i=e[i].plotY,u=(1.5*s+u)/2.5,o=(1.5*i+o)/2.5,a=(1.5*s+a)/2.5,l=(1.5*i+f)/2.5,f=Math.sqrt(Math.pow(u-s,2)+Math.pow(o-i,2)),c=Math.sqrt(Math.pow(a-s,2)+Math.pow(l-i,2)),u=Math.atan2(o-i,u-s),l=Math.PI/2+(u+Math.atan2(l-i,a-s))/2,Math.abs(u-l)>Math.PI/2&&(l-=Math.PI),u=s+Math.cos(l)*f,o=i+Math.sin(l)*f,a=s+Math.cos(Math.PI+l)*c,l=i+Math.sin(Math.PI+l)*c,s={rightContX:a,rightContY:l,leftContX:u,leftContY:o,plotX:s,plotY:i},n&&(s.prevPointCont=this.getConnectors(e,t,!1,r)),s},s(o,"buildKDTree",function(e){this.chart.polar&&(this.kdByAngle?this.searchPoint=this.searchPointByAngle:this.options.findNearestPointBy="xy"),e.apply(this)}),o.toXY=function(e){var t,n=this.chart,r=e.plotX;t=e.plotY,e.rectPlotX=r,e.rectPlotY=t,t=this.xAxis.postTranslate(e.plotX,this.yAxis.len-t),e.plotX=e.polarPlotX=t.x-n.plotLeft,e.plotY=e.polarPlotY=t.y-n.plotTop,this.kdByAngle?(n=(r/Math.PI*180+this.xAxis.pane.options.startAngle)%360,0>n&&(n+=360),e.clientX=n):e.clientX=e.plotX},i.spline&&(s(i.spline.prototype,"getPointSpline",function(e,t,n,r){return this.chart.polar?r?(e=this.getConnectors(t,r,!0,this.connectEnds),e=["C",e.prevPointCont.rightContX,e.prevPointCont.rightContY,e.leftContX,e.leftContY,e.plotX,e.plotY]):e=["M",n.plotX,n.plotY]:e=e.call(this,t,n,r),e}),i.areasplinerange&&(i.areasplinerange.prototype.getPointSpline=i.spline.prototype.getPointSpline)),s(o,"translate",function(e){var t=this.chart;e.call(this);if(t.polar&&(this.kdByAngle=t.tooltip&&t.tooltip.shared,!this.preventPostTranslate))for(e=this.points,t=e.length;t--;)this.toXY(e[t])}),s(o,"getGraphPath",function(e,t){var r=this,i,s,o;if(this.chart.polar){t=t||this.points;for(i=0;i<t.length;i++)if(!t[i].isNull){s=i;break}!1!==this.options.connectEnds&&void 0!==s&&(this.connectEnds=!0,t.splice(t.length,0,t[s]),o=!0),n(t,function(e){void 0===e.polarPlotY&&r.toXY(e)})}return i=e.apply(this,[].slice.call(arguments,1)),o&&t.pop(),i}),s(o,"animate",t),i.column&&(i=i.column.prototype,i.polarArc=function(e,t,n,i){var s=this.xAxis.center,o=this.yAxis.len;return this.chart.renderer.symbols.arc(s[0],s[1],o-t,null,{start:n,end:i,innerR:o-r(e,o)})},s(i,"animate",t),s(i,"translate",function(e){var t=this.xAxis,n=t.startAngleRad,r,i,s;this.preventPostTranslate=!0,e.call(this);if(t.isRadial)for(r=this.points,s=r.length;s--;)i=r[s],e=i.barX+n,i.shapeType="path",i.shapeArgs={d:this.polarArc(i.yBottom,i.plotY,e,e+i.pointWidth)},this.toXY(i),i.tooltipPos=[i.plotX,i.plotY],i.ttBelow=i.plotY>t.center[1]}),s(i,"alignDataLabel",function(e,t,n,r,i,s){this.chart.polar?(e=t.rectPlotX/Math.PI*180,null===r.align&&(r.align=20<e&&160>e?"left":200<e&&340>e?"right":"center"),null===r.verticalAlign&&(r.verticalAlign=45>e||315<e?"bottom":135<e&&225>e?"top":"middle"),o.alignDataLabel.call(this,t,n,r,i,s)):e.call(this,t,n,r,i,s)})),s(u,"getCoordinates",function(e,t){var r=this.chart,i={xAxis:[],yAxis:[]};return r.polar?n(r.axes,function(e){var n=e.isXAxis,s=e.center,o=t.chartX-s[0]-r.plotLeft,s=t.chartY-s[1]-r.plotTop;i[n?"xAxis":"yAxis"].push({axis:e,value:e.translate(n?Math.PI-Math.atan2(o,s):Math.sqrt(Math.pow(o,2)+Math.pow(s,2)),!0)})}):i=e.call(this,t),i}),s(e.Chart.prototype,"getAxes",function(t){this.pane||(this.pane=[]),n(e.splat(this.options.pane),function(t){new e.Pane(t,this)},this),t.call(this)}),s(e.Chart.prototype,"drawChartBox",function(e){e.call(this),n(this.pane,function(e){e.render()})}),s(e.Chart.prototype,"get",function(t,n){return e.find(this.pane,function(e){return e.options.id===n})||t.call(this,n)})}(e)}),function(e){"object"==typeof module&&module.exports?module.exports=e:e(Highcharts)}(function(e){(function(e){function t(){this.hasData()?this.hideNoData():this.showNoData()}var n=e.seriesTypes,r=e.Chart.prototype,i=e.getOptions(),s=e.extend,o=e.each;s(i.lang,{noData:"No data to display"}),i.noData={position:{x:0,y:0,align:"center",verticalAlign:"middle"}},o("bubble gauge heatmap pie treemap waterfall".split(" "),function(e){n[e]&&(n[e].prototype.hasData=function(){return!!this.points.length})}),e.Series.prototype.hasData=function(){return this.visible&&void 0!==this.dataMax&&void 0!==this.dataMin},r.showNoData=function(e){var t=this.options;e=e||t.lang.noData,t=t.noData,this.noDataLabel||(this.noDataLabel=this.renderer.label(e,0,0,null,null,null,t.useHTML,null,"no-data"),this.noDataLabel.add(),this.noDataLabel.align(s(this.noDataLabel.getBBox(),t.position),!1,"plotBox"))},r.hideNoData=function(){this.noDataLabel&&(this.noDataLabel=this.noDataLabel.destroy())},r.hasData=function(){for(var e=this.series,t=e.length;t--;)if(e[t].hasData()&&!e[t].options.isInternal)return!0;return this.loadingShown},r.callbacks.push(function(n){e.addEvent(n,"load",t),e.addEvent(n,"redraw",t)})})(e)}),function(e){"object"==typeof module&&module.exports?module.exports=e:e(Highcharts)}(function(e){(function(e){var t=e.pInt,n=e.pick,r=e.each,i=e.isNumber,s=e.wrap,o;s(e.Renderer.prototype.symbols,"arc",function(e,t,n,r,i,s){return e=e(t,n,r,i,s),s.rounded&&(r=((s.r||r)-s.innerR)/2,s=["A",r,r,0,1,1,e[12],e[13]],e.splice.apply(e,[e.length-1,0].concat(["A",r,r,0,1,1,e[1],e[2]])),e.splice.apply(e,[11,3].concat(s))),e}),o={initDataClasses:function(t){var n=this.chart,i,s=0,o=this.options;this.dataClasses=i=[],r(t.dataClasses,function(r,u){r=e.merge(r),i.push(r),r.color||("category"===o.dataClassColor?(u=n.options.colors,r.color=u[s++],s===u.length&&(s=0)):r.color=e.color(o.minColor).tweenTo(e.color(o.maxColor),u/(t.dataClasses.length-1)))})},initStops:function(t){this.stops=t.stops||[[0,this.options.minColor],[1,this.options.maxColor]],r(this.stops,function(t){t.color=e.color(t[1])})},toColor:function(e,t){var n=this.stops,r,i,s=this.dataClasses,o,u;if(s){for(u=s.length;u--;)if(o=s[u],r=o.from,n=o.to,(void 0===r||e>=r)&&(void 0===n||e<=n)){i=o.color,t&&(t.dataClass=u);break}}else{this.isLog&&(e=this.val2lin(e)),e=1-(this.max-e)/(this.max-this.min);for(u=n.length;u--&&!(e>n[u][0]););r=n[u]||n[u+1],n=n[u+1]||r,e=1-(n[0]-e)/(n[0]-r[0]||1),i=r.color.tweenTo(n.color,e)}return i}},e.seriesType("solidgauge","gauge",{colorByPoint:!0},{translate:function(){var t=this.yAxis;e.extend(t,o),!t.dataClasses&&t.options.dataClasses&&t.initDataClasses(t.options),t.initStops(t.options),e.seriesTypes.gauge.prototype.translate.call(this)},drawPoints:function(){var s=this,o=s.yAxis,a=o.center,f=s.options,c=s.chart.renderer,h=f.overshoot,p=i(h)?h/180*Math.PI:0,d;i(f.threshold)&&(d=o.startAngleRad+o.translate(f.threshold,null,null,null,!0)),this.thresholdAngleRad=n(d,o.startAngleRad),r(s.points,function(r){var i=r.graphic,h=o.startAngleRad+o.translate(r.y,null,null,null,!0),d=t(n(r.options.radius,f.radius,100))*a[2]/200,v=t(n(r.options.innerRadius,f.innerRadius,60))*a[2]/200,m=o.toColor(r.y,r),g=Math.min(o.startAngleRad,o.endAngleRad),y=Math.max(o.startAngleRad,o.endAngleRad);"none"===m&&(m=r.color||s.color||"none"),"none"!==m&&(r.color=m),h=Math.max(g-p,Math.min(y+p,h)),!1===f.wrap&&(h=Math.max(g,Math.min(y,h))),g=Math.min(h,s.thresholdAngleRad),h=Math.max(h,s.thresholdAngleRad),h-g>2*Math.PI&&(h=g+2*Math.PI),r.shapeArgs=v={x:a[0],y:a[1],r:d,innerR:v,start:g,end:h,rounded:f.rounded},r.startR=d,i?(r=v.d,i.animate(e.extend({fill:m},v)),r&&(v.d=r)):(r.graphic=c.arc(v).addClass(r.getClassName(),!0).attr({fill:m,"sweep-flag":0}).add(s.group),"square"!==f.linecap&&r.graphic.attr({"stroke-linecap":"round","stroke-linejoin":"round"}),r.graphic.attr({stroke:f.borderColor||"none","stroke-width":f.borderWidth||0}))})},animate:function(t){t||(this.startAngleRad=this.thresholdAngleRad,e.seriesTypes.pie.prototype.animate.call(this,t))}})})(e)});